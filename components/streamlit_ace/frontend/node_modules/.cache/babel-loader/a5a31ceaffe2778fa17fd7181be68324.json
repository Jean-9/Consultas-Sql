{"ast":null,"code":"ace.define(\"ace/ext/diff/scroll_diff_decorator\", [\"require\", \"exports\", \"module\", \"ace/layer/decorators\"], function (require, exports, module) {\n  var __extends = this && this.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n  var __values = this && this.__values || function (o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n      next: function () {\n        if (o && i >= o.length) o = void 0;\n        return {\n          value: o && o[i++],\n          done: !o\n        };\n      }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n  };\n  var Decorator = require(\"../../layer/decorators\").Decorator;\n  var ScrollDiffDecorator = /** @class */function (_super) {\n    __extends(ScrollDiffDecorator, _super);\n    function ScrollDiffDecorator(scrollbarV, renderer, forInlineDiff) {\n      var _this = _super.call(this, scrollbarV, renderer) || this;\n      _this.colors.dark[\"delete\"] = \"rgba(255, 18, 18, 1)\";\n      _this.colors.dark[\"insert\"] = \"rgba(18, 136, 18, 1)\";\n      _this.colors.light[\"delete\"] = \"rgb(255,51,51)\";\n      _this.colors.light[\"insert\"] = \"rgb(32,133,72)\";\n      _this.$zones = [];\n      _this.$forInlineDiff = forInlineDiff;\n      return _this;\n    }\n    ScrollDiffDecorator.prototype.addZone = function (startRow, endRow, type) {\n      this.$zones.push({\n        startRow: startRow,\n        endRow: endRow,\n        type: type\n      });\n    };\n    ScrollDiffDecorator.prototype.setSessions = function (sessionA, sessionB) {\n      this.sessionA = sessionA;\n      this.sessionB = sessionB;\n    };\n    ScrollDiffDecorator.prototype.$updateDecorators = function (config) {\n      if (typeof this.canvas.getContext !== \"function\") {\n        return;\n      }\n      _super.prototype.$updateDecorators.call(this, config);\n      if (this.$zones.length > 0) {\n        var colors = this.renderer.theme.isDark === true ? this.colors.dark : this.colors.light;\n        var ctx = this.canvas.getContext(\"2d\");\n        this.$setDiffDecorators(ctx, colors);\n      }\n    };\n    ScrollDiffDecorator.prototype.$transformPosition = function (row, type) {\n      if (type == \"delete\") {\n        return this.sessionA.documentToScreenRow(row, 0);\n      } else {\n        return this.sessionB.documentToScreenRow(row, 0);\n      }\n    };\n    ScrollDiffDecorator.prototype.$setDiffDecorators = function (ctx, colors) {\n      var e_1, _a;\n      var _this = this;\n      function compare(a, b) {\n        if (a.from === b.from) {\n          return a.to - b.to;\n        }\n        return a.from - b.from;\n      }\n      var zones = this.$zones;\n      if (zones) {\n        var resolvedZones = [];\n        var deleteZones = zones.filter(function (z) {\n          return z.type === \"delete\";\n        });\n        var insertZones = zones.filter(function (z) {\n          return z.type === \"insert\";\n        });\n        [deleteZones, insertZones].forEach(function (typeZones) {\n          typeZones.forEach(function (zone, i) {\n            var offset1 = _this.$transformPosition(zone.startRow, zone.type) * _this.lineHeight;\n            var offset2 = _this.$transformPosition(zone.endRow, zone.type) * _this.lineHeight + _this.lineHeight;\n            var y1 = Math.round(_this.heightRatio * offset1);\n            var y2 = Math.round(_this.heightRatio * offset2);\n            var padding = 1;\n            var ycenter = Math.round((y1 + y2) / 2);\n            var halfHeight = y2 - ycenter;\n            if (halfHeight < _this.halfMinDecorationHeight) {\n              halfHeight = _this.halfMinDecorationHeight;\n            }\n            var previousZone = resolvedZones[resolvedZones.length - 1];\n            if (i > 0 && previousZone && previousZone.type === zone.type && ycenter - halfHeight < previousZone.to + padding) {\n              ycenter = resolvedZones[resolvedZones.length - 1].to + padding + halfHeight;\n            }\n            if (ycenter - halfHeight < 0) {\n              ycenter = halfHeight;\n            }\n            if (ycenter + halfHeight > _this.canvasHeight) {\n              ycenter = _this.canvasHeight - halfHeight;\n            }\n            resolvedZones.push({\n              type: zone.type,\n              from: ycenter - halfHeight,\n              to: ycenter + halfHeight,\n              color: colors[zone.type] || null\n            });\n          });\n        });\n        resolvedZones = resolvedZones.sort(compare);\n        try {\n          for (var resolvedZones_1 = __values(resolvedZones), resolvedZones_1_1 = resolvedZones_1.next(); !resolvedZones_1_1.done; resolvedZones_1_1 = resolvedZones_1.next()) {\n            var zone = resolvedZones_1_1.value;\n            ctx.fillStyle = zone.color || null;\n            var zoneFrom = zone.from;\n            var zoneTo = zone.to;\n            var zoneHeight = zoneTo - zoneFrom;\n            if (this.$forInlineDiff) {\n              ctx.fillRect(this.oneZoneWidth, zoneFrom, 2 * this.oneZoneWidth, zoneHeight);\n            } else {\n              if (zone.type == \"delete\") {\n                ctx.fillRect(this.oneZoneWidth, zoneFrom, this.oneZoneWidth, zoneHeight);\n              } else {\n                ctx.fillRect(2 * this.oneZoneWidth, zoneFrom, this.oneZoneWidth, zoneHeight);\n              }\n            }\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (resolvedZones_1_1 && !resolvedZones_1_1.done && (_a = resolvedZones_1.return)) _a.call(resolvedZones_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n      }\n    };\n    ScrollDiffDecorator.prototype.setZoneWidth = function () {\n      this.oneZoneWidth = Math.round(this.canvasWidth / 3);\n    };\n    return ScrollDiffDecorator;\n  }(Decorator);\n  exports.ScrollDiffDecorator = ScrollDiffDecorator;\n});\nace.define(\"ace/ext/diff/styles-css.js\", [\"require\", \"exports\", \"module\"], function (require, exports, module) {\n  exports.cssText = \"\\n/*\\n * Line Markers\\n */\\n.ace_diff {\\n    position: absolute;\\n    z-index: 0;\\n}\\n.ace_diff.inline {\\n    z-index: 20;\\n}\\n/*\\n * Light Colors \\n */\\n.ace_diff.insert {\\n    background-color: #EFFFF1;\\n}\\n.ace_diff.delete {\\n    background-color: #FFF1F1;\\n}\\n.ace_diff.aligned_diff {\\n    background: rgba(206, 194, 191, 0.26);\\n    background: repeating-linear-gradient(\\n                45deg,\\n              rgba(122, 111, 108, 0.26),\\n              rgba(122, 111, 108, 0.26) 5px,\\n              rgba(0, 0, 0, 0) 5px,\\n              rgba(0, 0, 0, 0) 10px \\n    );\\n}\\n\\n.ace_diff.insert.inline {\\n    background-color:  rgb(74 251 74 / 18%); \\n}\\n.ace_diff.delete.inline {\\n    background-color: rgb(251 74 74 / 15%);\\n}\\n\\n.ace_diff.delete.inline.empty {\\n    background-color: rgba(255, 128, 79, 0.7);\\n    width: 2px !important;\\n}\\n\\n.ace_diff.insert.inline.empty {\\n    background-color: rgba(49, 230, 96, 0.7);\\n    width: 2px !important;\\n}\\n\\n.ace_diff-active-line {\\n    border-bottom: 1px solid;\\n    border-top: 1px solid;\\n    background: transparent;\\n    position: absolute;\\n    box-sizing: border-box;\\n    border-color: #9191ac;\\n}\\n\\n.ace_dark .ace_diff-active-line {\\n    background: transparent;\\n    border-color: #75777a;\\n}\\n \\n\\n/* gutter changes */\\n.ace_mini-diff_gutter-enabled > .ace_gutter-cell,\\n.ace_mini-diff_gutter-enabled > .ace_gutter-cell_svg-icons {\\n    padding-right: 13px;\\n}\\n\\n.ace_mini-diff_gutter_other > .ace_gutter-cell,\\n.ace_mini-diff_gutter_other > .ace_gutter-cell_svg-icons  {\\n    display: none;\\n}\\n\\n.ace_mini-diff_gutter_other {\\n    pointer-events: none;\\n}\\n\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-added {\\n    background-color: #EFFFF1;\\n    border-left: 3px solid #2BB534;\\n    padding-left: 16px;\\n    display: block;\\n}\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-deleted {\\n    background-color: #FFF1F1;\\n    border-left: 3px solid #EA7158;\\n    padding-left: 16px;\\n    display: block;\\n}\\n\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-added:after {\\n    position: absolute;\\n    right: 2px;\\n    content: \\\"+\\\";\\n    color: darkgray;\\n    background-color: inherit;\\n}\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-deleted:after {\\n    position: absolute;\\n    right: 2px;\\n    content: \\\"-\\\";\\n    color: darkgray;\\n    background-color: inherit;\\n}\\n.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-added:after,\\n.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-deleted:after {\\n    display: none;\\n}\\n\\n.ace_diff_other .ace_selection {\\n    filter: drop-shadow(1px 2px 3px darkgray);\\n}\\n\\n.ace_hidden_marker-layer .ace_bracket {\\n    display: none;\\n}\\n\\n\\n\\n/*\\n * Dark Colors \\n */\\n\\n.ace_dark .ace_diff.insert {\\n    background-color: #212E25;\\n}\\n.ace_dark .ace_diff.delete {\\n    background-color: #3F2222;\\n}\\n\\n.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-added {\\n    background-color: #212E25;\\n    border-left-color:#00802F;\\n}\\n\\n.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-deleted {\\n    background-color: #3F2222;\\n    border-left-color: #9C3838;\\n}\\n\\n\";\n});\nace.define(\"ace/ext/diff/gutter_decorator\", [\"require\", \"exports\", \"module\", \"ace/lib/dom\"], function (require, exports, module) {\n  var dom = require(\"../../lib/dom\");\n  var MinimalGutterDiffDecorator = /** @class */function () {\n    function MinimalGutterDiffDecorator(editor, type) {\n      this.gutterClass = \"ace_mini-diff_gutter-enabled\";\n      this.gutterCellsClasses = {\n        add: \"mini-diff-added\",\n        delete: \"mini-diff-deleted\"\n      };\n      this.editor = editor;\n      this.type = type;\n      this.chunks = [];\n      this.attachToEditor();\n    }\n    MinimalGutterDiffDecorator.prototype.attachToEditor = function () {\n      this.renderGutters = this.renderGutters.bind(this);\n      dom.addCssClass(this.editor.renderer.$gutterLayer.element, this.gutterClass);\n      this.editor.renderer.$gutterLayer.on(\"afterRender\", this.renderGutters);\n    };\n    MinimalGutterDiffDecorator.prototype.renderGutters = function (e, gutterLayer) {\n      var _this = this;\n      var cells = this.editor.renderer.$gutterLayer.$lines.cells;\n      cells.forEach(function (cell) {\n        cell.element.classList.remove(Object.values(_this.gutterCellsClasses));\n      });\n      var dir = this.type === -1 ? \"old\" : \"new\";\n      var diffClass = this.type === -1 ? this.gutterCellsClasses.delete : this.gutterCellsClasses.add;\n      this.chunks.forEach(function (lineChange) {\n        var startRow = lineChange[dir].start.row;\n        var endRow = lineChange[dir].end.row - 1;\n        cells.forEach(function (cell) {\n          if (cell.row >= startRow && cell.row <= endRow) {\n            cell.element.classList.add(diffClass);\n          }\n        });\n      });\n    };\n    MinimalGutterDiffDecorator.prototype.setDecorations = function (changes) {\n      this.chunks = changes;\n      this.renderGutters();\n    };\n    MinimalGutterDiffDecorator.prototype.dispose = function () {\n      dom.removeCssClass(this.editor.renderer.$gutterLayer.element, this.gutterClass);\n      this.editor.renderer.$gutterLayer.off(\"afterRender\", this.renderGutters);\n    };\n    return MinimalGutterDiffDecorator;\n  }();\n  exports.MinimalGutterDiffDecorator = MinimalGutterDiffDecorator;\n});\nace.define(\"ace/ext/diff/base_diff_view\", [\"require\", \"exports\", \"module\", \"ace/lib/oop\", \"ace/range\", \"ace/lib/dom\", \"ace/config\", \"ace/line_widgets\", \"ace/ext/diff/scroll_diff_decorator\", \"ace/ext/diff/styles-css.js\", \"ace/editor\", \"ace/virtual_renderer\", \"ace/undomanager\", \"ace/layer/decorators\", \"ace/theme/textmate\", \"ace/multi_select\", \"ace/edit_session\", \"ace/ext/diff/gutter_decorator\"], function (require, exports, module) {\n  \"use strict\";\n\n  var __read = this && this.__read || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o),\n      r,\n      ar = [],\n      e;\n    try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    } catch (error) {\n      e = {\n        error: error\n      };\n    } finally {\n      try {\n        if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      } finally {\n        if (e) throw e.error;\n      }\n    }\n    return ar;\n  };\n  var oop = require(\"../../lib/oop\");\n  var Range = require(\"../../range\").Range;\n  var dom = require(\"../../lib/dom\");\n  var config = require(\"../../config\");\n  var LineWidgets = require(\"../../line_widgets\").LineWidgets;\n  var ScrollDiffDecorator = require(\"./scroll_diff_decorator\").ScrollDiffDecorator;\n  var css = require(\"./styles-css.js\").cssText;\n  var Editor = require(\"../../editor\").Editor;\n  var Renderer = require(\"../../virtual_renderer\").VirtualRenderer;\n  var UndoManager = require(\"../../undomanager\").UndoManager;\n  var Decorator = require(\"../../layer/decorators\").Decorator;\n  require(\"../../theme/textmate\");\n  require(\"../../multi_select\");\n  var EditSession = require(\"../../edit_session\").EditSession;\n  var MinimalGutterDiffDecorator = require(\"./gutter_decorator\").MinimalGutterDiffDecorator;\n  var dummyDiffProvider = {\n    compute: function (val1, val2, options) {\n      return [];\n    }\n  };\n  var BaseDiffView = /** @class */function () {\n    function BaseDiffView(inlineDiffEditor, container) {\n      this.onChangeTheme = this.onChangeTheme.bind(this);\n      this.onInput = this.onInput.bind(this);\n      this.onChangeFold = this.onChangeFold.bind(this);\n      this.realign = this.realign.bind(this);\n      this.onSelect = this.onSelect.bind(this);\n      this.onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n      this.realignPending = false;\n      this.diffSession;\n      this.chunks;\n      this.inlineDiffEditor = inlineDiffEditor || false;\n      this.currentDiffIndex = 0;\n      this.diffProvider = dummyDiffProvider;\n      if (container) {\n        this.container = container;\n      }\n      dom.importCssString(css, \"diffview.css\");\n      this.$ignoreTrimWhitespace = false;\n      this.$maxDiffs = 5000;\n      this.$maxComputationTimeMs = 150;\n      this.$syncSelections = false;\n      this.$foldUnchangedOnInput = false;\n      this.markerB = new DiffHighlight(this, 1);\n      this.markerA = new DiffHighlight(this, -1);\n    }\n    BaseDiffView.prototype.$setupModels = function (diffModel) {\n      if (diffModel.diffProvider) {\n        this.setProvider(diffModel.diffProvider);\n      }\n      this.showSideA = diffModel.inline == undefined ? true : diffModel.inline === \"a\";\n      var diffEditorOptions = /**@type {Partial<import(\"../../../ace-internal\").Ace.EditorOptions>}*/{\n        scrollPastEnd: 0.5,\n        highlightActiveLine: false,\n        highlightGutterLine: false,\n        animatedScroll: true,\n        customScrollbar: true,\n        vScrollBarAlwaysVisible: true,\n        fadeFoldWidgets: true,\n        showFoldWidgets: true,\n        selectionStyle: \"text\"\n      };\n      this.savedOptionsA = diffModel.editorA && diffModel.editorA.getOptions(diffEditorOptions);\n      this.savedOptionsB = diffModel.editorB && diffModel.editorB.getOptions(diffEditorOptions);\n      if (!this.inlineDiffEditor || diffModel.inline === \"a\") {\n        this.editorA = diffModel.editorA || this.$setupModel(diffModel.sessionA, diffModel.valueA);\n        this.container && this.container.appendChild(this.editorA.container);\n        this.editorA.setOptions(diffEditorOptions);\n      }\n      if (!this.inlineDiffEditor || diffModel.inline === \"b\") {\n        this.editorB = diffModel.editorB || this.$setupModel(diffModel.sessionB, diffModel.valueB);\n        this.container && this.container.appendChild(this.editorB.container);\n        this.editorB.setOptions(diffEditorOptions);\n      }\n      if (this.inlineDiffEditor) {\n        this.activeEditor = this.showSideA ? this.editorA : this.editorB;\n        this.otherSession = this.showSideA ? this.sessionB : this.sessionA;\n        var cloneOptions = this.activeEditor.getOptions();\n        cloneOptions.readOnly = true;\n        delete cloneOptions.mode;\n        this.otherEditor = new Editor(new Renderer(null), undefined, cloneOptions);\n        if (this.showSideA) {\n          this.editorB = this.otherEditor;\n        } else {\n          this.editorA = this.otherEditor;\n        }\n      }\n      this.setDiffSession({\n        sessionA: diffModel.sessionA || (diffModel.editorA ? diffModel.editorA.session : new EditSession(diffModel.valueA || \"\")),\n        sessionB: diffModel.sessionB || (diffModel.editorB ? diffModel.editorB.session : new EditSession(diffModel.valueB || \"\")),\n        chunks: []\n      });\n      this.setupScrollbars();\n    };\n    BaseDiffView.prototype.addGutterDecorators = function () {\n      if (!this.gutterDecoratorA) this.gutterDecoratorA = new MinimalGutterDiffDecorator(this.editorA, -1);\n      if (!this.gutterDecoratorB) this.gutterDecoratorB = new MinimalGutterDiffDecorator(this.editorB, 1);\n    };\n    BaseDiffView.prototype.$setupModel = function (session, value) {\n      var editor = new Editor(new Renderer(), session);\n      editor.session.setUndoManager(new UndoManager());\n      if (value != undefined) {\n        editor.setValue(value, -1);\n      }\n      return editor;\n    };\n    BaseDiffView.prototype.foldUnchanged = function () {\n      var chunks = this.chunks;\n      var placeholder = \"-\".repeat(120);\n      var prev = {\n        old: new Range(0, 0, 0, 0),\n        new: new Range(0, 0, 0, 0)\n      };\n      var foldsChanged = false;\n      for (var i = 0; i < chunks.length + 1; i++) {\n        var current = chunks[i] || {\n          old: new Range(this.sessionA.getLength(), 0, this.sessionA.getLength(), 0),\n          new: new Range(this.sessionB.getLength(), 0, this.sessionB.getLength(), 0)\n        };\n        var l = current.new.start.row - prev.new.end.row - 5;\n        if (l > 2) {\n          var s = prev.old.end.row + 2;\n          var fold1 = this.sessionA.addFold(placeholder, new Range(s, 0, s + l, Number.MAX_VALUE));\n          s = prev.new.end.row + 2;\n          var fold2 = this.sessionB.addFold(placeholder, new Range(s, 0, s + l, Number.MAX_VALUE));\n          if (fold1 || fold2) foldsChanged = true;\n          if (fold2 && fold1) {\n            fold1[\"other\"] = fold2;\n            fold2[\"other\"] = fold1;\n          }\n        }\n        prev = current;\n      }\n      return foldsChanged;\n    };\n    BaseDiffView.prototype.unfoldUnchanged = function () {\n      var folds = this.sessionA.getAllFolds();\n      for (var i = folds.length - 1; i >= 0; i--) {\n        var fold = folds[i];\n        if (fold.placeholder.length == 120) {\n          this.sessionA.removeFold(fold);\n        }\n      }\n    };\n    BaseDiffView.prototype.toggleFoldUnchanged = function () {\n      if (!this.foldUnchanged()) {\n        this.unfoldUnchanged();\n      }\n    };\n    BaseDiffView.prototype.setDiffSession = function (session) {\n      if (this.diffSession) {\n        this.$detachSessionsEventHandlers();\n        this.clearSelectionMarkers();\n      }\n      this.diffSession = session;\n      this.sessionA = this.sessionB = null;\n      if (this.diffSession) {\n        this.chunks = this.diffSession.chunks || [];\n        this.editorA && this.editorA.setSession(session.sessionA);\n        this.editorB && this.editorB.setSession(session.sessionB);\n        this.sessionA = this.diffSession.sessionA;\n        this.sessionB = this.diffSession.sessionB;\n        this.$attachSessionsEventHandlers();\n        this.initSelectionMarkers();\n      }\n      this.otherSession = this.showSideA ? this.sessionB : this.sessionA;\n    };\n    BaseDiffView.prototype.$attachSessionsEventHandlers = function () {};\n    BaseDiffView.prototype.$detachSessionsEventHandlers = function () {};\n    BaseDiffView.prototype.getDiffSession = function () {\n      return this.diffSession;\n    };\n    BaseDiffView.prototype.setTheme = function (theme) {\n      this.editorA && this.editorA.setTheme(theme);\n      this.editorB && this.editorB.setTheme(theme);\n    };\n    BaseDiffView.prototype.getTheme = function () {\n      return (this.editorA || this.editorB).getTheme();\n    };\n    BaseDiffView.prototype.onChangeTheme = function (e) {\n      var theme = e && e.theme || this.getTheme();\n      if (this.editorA && this.editorA.getTheme() !== theme) {\n        this.editorA.setTheme(theme);\n      }\n      if (this.editorB && this.editorB.getTheme() !== theme) {\n        this.editorB.setTheme(theme);\n      }\n    };\n    BaseDiffView.prototype.resize = function (force) {\n      this.editorA && this.editorA.resize(force);\n      this.editorB && this.editorB.resize(force);\n    };\n    BaseDiffView.prototype.scheduleOnInput = function () {\n      var _this = this;\n      if (this.$onInputTimer) return;\n      this.$onInputTimer = setTimeout(function () {\n        _this.$onInputTimer = null;\n        _this.onInput();\n      });\n    };\n    BaseDiffView.prototype.onInput = function () {\n      var _this = this;\n      if (this.$onInputTimer) clearTimeout(this.$onInputTimer);\n      var val1 = this.sessionA.doc.getAllLines();\n      var val2 = this.sessionB.doc.getAllLines();\n      this.selectionRangeA = null;\n      this.selectionRangeB = null;\n      var chunks = this.$diffLines(val1, val2);\n      this.diffSession.chunks = this.chunks = chunks;\n      this.gutterDecoratorA && this.gutterDecoratorA.setDecorations(chunks);\n      this.gutterDecoratorB && this.gutterDecoratorB.setDecorations(chunks);\n      if (this.chunks && this.chunks.length > this.$maxDiffs) {\n        return;\n      }\n      this.align();\n      this.editorA && this.editorA.renderer.updateBackMarkers();\n      this.editorB && this.editorB.renderer.updateBackMarkers();\n      setTimeout(function () {\n        _this.updateScrollBarDecorators();\n      }, 0);\n      if (this.$foldUnchangedOnInput) {\n        this.foldUnchanged();\n      }\n    };\n    BaseDiffView.prototype.setupScrollbars = function () {\n      var _this = this;\n      var setupScrollBar = function (renderer) {\n        setTimeout(function () {\n          _this.$setScrollBarDecorators(renderer);\n          _this.updateScrollBarDecorators();\n        }, 0);\n      };\n      if (this.inlineDiffEditor) {\n        setupScrollBar(this.activeEditor.renderer);\n      } else {\n        setupScrollBar(this.editorA.renderer);\n        setupScrollBar(this.editorB.renderer);\n      }\n    };\n    BaseDiffView.prototype.$setScrollBarDecorators = function (renderer) {\n      if (renderer.$scrollDecorator) {\n        renderer.$scrollDecorator.destroy();\n      }\n      renderer.$scrollDecorator = new ScrollDiffDecorator(renderer.scrollBarV, renderer, this.inlineDiffEditor);\n      renderer.$scrollDecorator.setSessions(this.sessionA, this.sessionB);\n      renderer.scrollBarV.setVisible(true);\n      renderer.scrollBarV.element.style.bottom = renderer.scrollBarH.getHeight() + \"px\";\n    };\n    BaseDiffView.prototype.$resetDecorators = function (renderer) {\n      if (renderer.$scrollDecorator) {\n        renderer.$scrollDecorator.destroy();\n      }\n      renderer.$scrollDecorator = new Decorator(renderer.scrollBarV, renderer);\n    };\n    BaseDiffView.prototype.updateScrollBarDecorators = function () {\n      var _this = this;\n      if (this.inlineDiffEditor) {\n        if (!this.activeEditor) {\n          return;\n        }\n        this.activeEditor.renderer.$scrollDecorator.$zones = [];\n      } else {\n        if (!this.editorA || !this.editorB) {\n          return;\n        }\n        this.editorA.renderer.$scrollDecorator.$zones = [];\n        this.editorB.renderer.$scrollDecorator.$zones = [];\n      }\n      var updateDecorators = function (editor, change) {\n        if (!editor) {\n          return;\n        }\n        if (typeof editor.renderer.$scrollDecorator.addZone !== \"function\") {\n          return;\n        }\n        if (change.old.start.row != change.old.end.row) {\n          editor.renderer.$scrollDecorator.addZone(change.old.start.row, change.old.end.row - 1, \"delete\");\n        }\n        if (change.new.start.row != change.new.end.row) {\n          editor.renderer.$scrollDecorator.addZone(change.new.start.row, change.new.end.row - 1, \"insert\");\n        }\n      };\n      if (this.inlineDiffEditor) {\n        this.chunks && this.chunks.forEach(function (lineChange) {\n          updateDecorators(_this.activeEditor, lineChange);\n        });\n        this.activeEditor.renderer.$scrollDecorator.$updateDecorators(this.activeEditor.renderer.layerConfig);\n      } else {\n        this.chunks && this.chunks.forEach(function (lineChange) {\n          updateDecorators(_this.editorA, lineChange);\n          updateDecorators(_this.editorB, lineChange);\n        });\n        this.editorA.renderer.$scrollDecorator.$updateDecorators(this.editorA.renderer.layerConfig);\n        this.editorB.renderer.$scrollDecorator.$updateDecorators(this.editorB.renderer.layerConfig);\n      }\n    };\n    BaseDiffView.prototype.$diffLines = function (val1, val2) {\n      return this.diffProvider.compute(val1, val2, {\n        ignoreTrimWhitespace: this.$ignoreTrimWhitespace,\n        maxComputationTimeMs: this.$maxComputationTimeMs\n      });\n    };\n    BaseDiffView.prototype.setProvider = function (provider) {\n      this.diffProvider = provider;\n    };\n    BaseDiffView.prototype.$addWidget = function (session, w) {\n      var lineWidget = session.lineWidgets[w.row];\n      if (lineWidget) {\n        w.rowsAbove += lineWidget.rowsAbove > w.rowsAbove ? lineWidget.rowsAbove : w.rowsAbove;\n        w.rowCount += lineWidget.rowCount;\n      }\n      session.lineWidgets[w.row] = w;\n      session.widgetManager.lineWidgets[w.row] = w;\n      session.$resetRowCache(w.row);\n      var fold = session.getFoldAt(w.row, 0);\n      if (fold) {\n        session.widgetManager.updateOnFold({\n          data: fold,\n          action: \"add\"\n        }, session);\n      }\n    };\n    BaseDiffView.prototype.$initWidgets = function (editor) {\n      var session = editor.session;\n      if (!session.widgetManager) {\n        session.widgetManager = new LineWidgets(session);\n        session.widgetManager.attach(editor);\n      }\n      editor.session.lineWidgets = [];\n      editor.session.widgetManager.lineWidgets = [];\n      editor.session.$resetRowCache(0);\n    };\n    BaseDiffView.prototype.$screenRow = function (pos, session) {\n      var row = session.documentToScreenPosition(pos).row;\n      var afterEnd = pos.row - session.getLength() + 1;\n      if (afterEnd > 0) {\n        row += afterEnd;\n      }\n      return row;\n    };\n    BaseDiffView.prototype.align = function () {};\n    BaseDiffView.prototype.onChangeWrapLimit = function (e, session) {};\n    BaseDiffView.prototype.onSelect = function (e, selection) {\n      this.searchHighlight(selection);\n      this.syncSelect(selection);\n    };\n    BaseDiffView.prototype.syncSelect = function (selection) {\n      if (this.$updatingSelection) return;\n      var isOld = selection.session === this.sessionA;\n      var selectionRange = selection.getRange();\n      var currSelectionRange = isOld ? this.selectionRangeA : this.selectionRangeB;\n      if (currSelectionRange && selectionRange.isEqual(currSelectionRange)) return;\n      if (isOld) {\n        this.selectionRangeA = selectionRange;\n      } else {\n        this.selectionRangeB = selectionRange;\n      }\n      this.$updatingSelection = true;\n      var newRange = this.transformRange(selectionRange, isOld);\n      if (this.$syncSelections) {\n        (isOld ? this.editorB : this.editorA).session.selection.setSelectionRange(newRange);\n      }\n      this.$updatingSelection = false;\n      if (isOld) {\n        this.selectionRangeA = selectionRange;\n        this.selectionRangeB = newRange;\n      } else {\n        this.selectionRangeA = newRange;\n        this.selectionRangeB = selectionRange;\n      }\n      this.updateSelectionMarker(this.syncSelectionMarkerA, this.sessionA, this.selectionRangeA);\n      this.updateSelectionMarker(this.syncSelectionMarkerB, this.sessionB, this.selectionRangeB);\n    };\n    BaseDiffView.prototype.updateSelectionMarker = function (marker, session, range) {\n      marker.setRange(range);\n      session._signal(\"changeFrontMarker\");\n    };\n    BaseDiffView.prototype.onChangeFold = function (ev, session) {\n      var fold = ev.data;\n      if (this.$syncingFold || !fold || !ev.action) return;\n      this.scheduleRealign();\n      var isOrig = session === this.sessionA;\n      var other = isOrig ? this.sessionB : this.sessionA;\n      if (ev.action === \"remove\") {\n        if (fold.other) {\n          fold.other.other = null;\n          other.removeFold(fold.other);\n        } else if (fold.lineWidget) {\n          other.widgetManager.addLineWidget(fold.lineWidget);\n          fold.lineWidget = null;\n          if (other[\"$editor\"]) {\n            other[\"$editor\"].renderer.updateBackMarkers();\n          }\n        }\n      }\n      if (ev.action === \"add\") {\n        var range = this.transformRange(fold.range, isOrig);\n        if (range.isEmpty()) {\n          var row = range.start.row + 1;\n          if (other.lineWidgets[row]) {\n            fold.lineWidget = other.lineWidgets[row];\n            other.widgetManager.removeLineWidget(fold.lineWidget);\n            if (other[\"$editor\"]) {\n              other[\"$editor\"].renderer.updateBackMarkers();\n            }\n          }\n        } else {\n          this.$syncingFold = true;\n          fold.other = other.addFold(fold.placeholder, range);\n          if (fold.other) {\n            fold.other.other = fold;\n          }\n          this.$syncingFold = false;\n        }\n      }\n    };\n    BaseDiffView.prototype.scheduleRealign = function () {\n      if (!this.realignPending) {\n        this.realignPending = true;\n        this.editorA.renderer.on(\"beforeRender\", this.realign);\n        this.editorB.renderer.on(\"beforeRender\", this.realign);\n      }\n    };\n    BaseDiffView.prototype.realign = function () {\n      this.realignPending = true;\n      this.editorA.renderer.off(\"beforeRender\", this.realign);\n      this.editorB.renderer.off(\"beforeRender\", this.realign);\n      this.align();\n      this.realignPending = false;\n    };\n    BaseDiffView.prototype.detach = function () {\n      if (!this.editorA || !this.editorB) return;\n      if (this.savedOptionsA) this.editorA.setOptions(this.savedOptionsA);\n      if (this.savedOptionsB) this.editorB.setOptions(this.savedOptionsB);\n      this.editorA.renderer.off(\"beforeRender\", this.realign);\n      this.editorB.renderer.off(\"beforeRender\", this.realign);\n      this.$detachEventHandlers();\n      this.$removeLineWidgets(this.sessionA);\n      this.$removeLineWidgets(this.sessionB);\n      this.gutterDecoratorA && this.gutterDecoratorA.dispose();\n      this.gutterDecoratorB && this.gutterDecoratorB.dispose();\n      this.sessionA.selection.clearSelection();\n      this.sessionB.selection.clearSelection();\n      if (this.savedOptionsA && this.savedOptionsA.customScrollbar) {\n        this.$resetDecorators(this.editorA.renderer);\n      }\n      if (this.savedOptionsB && this.savedOptionsB.customScrollbar) {\n        this.$resetDecorators(this.editorB.renderer);\n      }\n    };\n    BaseDiffView.prototype.$removeLineWidgets = function (session) {\n      session.lineWidgets = [];\n      session.widgetManager.lineWidgets = [];\n      session._signal(\"changeFold\", {\n        data: {\n          start: {\n            row: 0\n          }\n        }\n      });\n    };\n    BaseDiffView.prototype.$detachEventHandlers = function () {};\n    BaseDiffView.prototype.destroy = function () {\n      this.detach();\n      this.editorA && this.editorA.destroy();\n      this.editorB && this.editorB.destroy();\n      this.editorA = this.editorB = null;\n    };\n    BaseDiffView.prototype.gotoNext = function (dir) {\n      var ace = this.activeEditor || this.editorA;\n      if (this.inlineDiffEditor) {\n        ace = this.editorA;\n      }\n      var sideA = ace == this.editorA;\n      var row = ace.selection.lead.row;\n      var i = this.findChunkIndex(this.chunks, row, sideA);\n      var chunk = this.chunks[i + dir] || this.chunks[i];\n      var scrollTop = ace.session.getScrollTop();\n      if (chunk) {\n        var range = chunk[sideA ? \"old\" : \"new\"];\n        var line = Math.max(range.start.row, range.end.row - 1);\n        ace.selection.setRange(new Range(line, 0, line, 0));\n      }\n      ace.renderer.scrollSelectionIntoView(ace.selection.lead, ace.selection.anchor, 0.5);\n      ace.renderer.animateScrolling(scrollTop);\n    };\n    BaseDiffView.prototype.firstDiffSelected = function () {\n      return this.currentDiffIndex <= 1;\n    };\n    BaseDiffView.prototype.lastDiffSelected = function () {\n      return this.currentDiffIndex > this.chunks.length - 1;\n    };\n    BaseDiffView.prototype.transformRange = function (range, isOriginal) {\n      return Range.fromPoints(this.transformPosition(range.start, isOriginal), this.transformPosition(range.end, isOriginal));\n    };\n    BaseDiffView.prototype.transformPosition = function (pos, isOriginal) {\n      var chunkIndex = this.findChunkIndex(this.chunks, pos.row, isOriginal);\n      var chunk = this.chunks[chunkIndex];\n      var clonePos = this.sessionB.doc.clonePos;\n      var result = clonePos(pos);\n      var _a = __read(isOriginal ? [\"old\", \"new\"] : [\"new\", \"old\"], 2),\n        from = _a[0],\n        to = _a[1];\n      var deltaChar = 0;\n      var ignoreIndent = false;\n      if (chunk) {\n        if (chunk[from].end.row <= pos.row) {\n          result.row -= chunk[from].end.row - chunk[to].end.row;\n        } else if (chunk.charChanges) {\n          for (var i = 0; i < chunk.charChanges.length; i++) {\n            var change = chunk.charChanges[i];\n            var fromRange = change[from];\n            var toRange = change[to];\n            if (fromRange.end.row < pos.row) continue;\n            if (fromRange.start.row > pos.row) break;\n            if (fromRange.isMultiLine() && fromRange.contains(pos.row, pos.column)) {\n              result.row = toRange.start.row + pos.row - fromRange.start.row;\n              var maxRow = toRange.end.row;\n              if (toRange.end.column === 0) maxRow--;\n              if (result.row > maxRow) {\n                result.row = maxRow;\n                result.column = (isOriginal ? this.sessionB : this.sessionA).getLine(maxRow).length;\n                ignoreIndent = true;\n              }\n              result.row = Math.min(result.row, maxRow);\n            } else {\n              result.row = toRange.start.row;\n              if (fromRange.start.column > pos.column) break;\n              ignoreIndent = true;\n              if (!fromRange.isEmpty() && fromRange.contains(pos.row, pos.column)) {\n                result.column = toRange.start.column;\n                deltaChar = pos.column - fromRange.start.column;\n                deltaChar = Math.min(deltaChar, toRange.end.column - toRange.start.column);\n              } else {\n                result = clonePos(toRange.end);\n                deltaChar = pos.column - fromRange.end.column;\n              }\n            }\n          }\n        } else if (chunk[from].start.row <= pos.row) {\n          result.row += chunk[to].start.row - chunk[from].start.row;\n          if (result.row >= chunk[to].end.row) {\n            result.row = chunk[to].end.row - 1;\n            result.column = (isOriginal ? this.sessionB : this.sessionA).getLine(result.row).length;\n          }\n        }\n      }\n      if (!ignoreIndent) {\n        //TODO:\n        var _b = __read(isOriginal ? [this.sessionA, this.sessionB] : [this.sessionB, this.sessionA], 2),\n          fromEditSession = _b[0],\n          toEditSession = _b[1];\n        deltaChar -= this.$getDeltaIndent(fromEditSession, toEditSession, pos.row, result.row);\n      }\n      result.column += deltaChar;\n      return result;\n    };\n    BaseDiffView.prototype.$getDeltaIndent = function (fromEditSession, toEditSession, fromLine, toLine) {\n      var origIndent = this.$getIndent(fromEditSession, fromLine);\n      var editIndent = this.$getIndent(toEditSession, toLine);\n      return origIndent - editIndent;\n    };\n    BaseDiffView.prototype.$getIndent = function (editSession, line) {\n      return editSession.getLine(line).match(/^\\s*/)[0].length;\n    };\n    BaseDiffView.prototype.printDiffs = function () {\n      this.chunks.forEach(function (diff) {\n        console.log(diff.toString());\n      });\n    };\n    BaseDiffView.prototype.findChunkIndex = function (chunks, row, isOriginal) {\n      for (var i = 0; i < chunks.length; i++) {\n        var ch = chunks[i];\n        var chunk = isOriginal ? ch.old : ch.new;\n        if (chunk.end.row < row) continue;\n        if (chunk.start.row > row) break;\n      }\n      this.currentDiffIndex = i;\n      return i - 1;\n    };\n    BaseDiffView.prototype.searchHighlight = function (selection) {\n      if (this.$syncSelections || this.inlineDiffEditor) {\n        return;\n      }\n      var currSession = selection.session;\n      var otherSession = currSession === this.sessionA ? this.sessionB : this.sessionA;\n      otherSession.highlight(currSession.$searchHighlight.regExp);\n      otherSession._signal(\"changeBackMarker\");\n    };\n    BaseDiffView.prototype.initSelectionMarkers = function () {\n      this.syncSelectionMarkerA = new SyncSelectionMarker();\n      this.syncSelectionMarkerB = new SyncSelectionMarker();\n      this.sessionA.addDynamicMarker(this.syncSelectionMarkerA, true);\n      this.sessionB.addDynamicMarker(this.syncSelectionMarkerB, true);\n    };\n    BaseDiffView.prototype.clearSelectionMarkers = function () {\n      this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n      this.sessionB.removeMarker(this.syncSelectionMarkerB.id);\n    };\n    return BaseDiffView;\n  }();\n  config.defineOptions(BaseDiffView.prototype, \"DiffView\", {\n    showOtherLineNumbers: {\n      set: function (value) {\n        if (this.gutterLayer) {\n          this.gutterLayer.$renderer = value ? null : emptyGutterRenderer;\n          this.editorA.renderer.updateFull();\n        }\n      },\n      initialValue: true\n    },\n    folding: {\n      set: function (value) {\n        this.editorA.setOption(\"showFoldWidgets\", value);\n        this.editorB.setOption(\"showFoldWidgets\", value);\n        if (!value) {\n          var posA = [];\n          var posB = [];\n          if (this.chunks) {\n            this.chunks.forEach(function (x) {\n              posA.push(x.old.start, x.old.end);\n              posB.push(x.new.start, x.new.end);\n            });\n          }\n          this.sessionA.unfold(posA);\n          this.sessionB.unfold(posB);\n        }\n      }\n    },\n    syncSelections: {\n      set: function (value) {}\n    },\n    ignoreTrimWhitespace: {\n      set: function (value) {\n        this.scheduleOnInput();\n      }\n    },\n    wrap: {\n      set: function (value) {\n        this.sessionA.setOption(\"wrap\", value);\n        this.sessionB.setOption(\"wrap\", value);\n      }\n    },\n    maxDiffs: {\n      value: 5000\n    },\n    theme: {\n      set: function (value) {\n        this.setTheme(value);\n      },\n      get: function () {\n        return this.editorA.getTheme();\n      }\n    }\n  });\n  var emptyGutterRenderer = {\n    getText: function name(params) {\n      return \"\";\n    },\n    getWidth: function () {\n      return 0;\n    }\n  };\n  exports.BaseDiffView = BaseDiffView;\n  var DiffChunk = /** @class */function () {\n    function DiffChunk(originalRange, modifiedRange, charChanges) {\n      this.old = originalRange;\n      this.new = modifiedRange;\n      this.charChanges = charChanges && charChanges.map(function (m) {\n        return new DiffChunk(new Range(m.originalStartLineNumber, m.originalStartColumn, m.originalEndLineNumber, m.originalEndColumn), new Range(m.modifiedStartLineNumber, m.modifiedStartColumn, m.modifiedEndLineNumber, m.modifiedEndColumn));\n      });\n    }\n    return DiffChunk;\n  }();\n  var DiffHighlight = /** @class */function () {\n    function DiffHighlight(diffView, type) {\n      this.id;\n      this.diffView = diffView;\n      this.type = type;\n    }\n    DiffHighlight.prototype.update = function (html, markerLayer, session, config) {\n      var dir, operation, opOperation;\n      var diffView = this.diffView;\n      if (this.type === -1) {\n        // original editor\n        dir = \"old\";\n        operation = \"delete\";\n        opOperation = \"insert\";\n      } else {\n        //modified editor\n        dir = \"new\";\n        operation = \"insert\";\n        opOperation = \"delete\";\n      }\n      var ignoreTrimWhitespace = diffView.$ignoreTrimWhitespace;\n      var lineChanges = diffView.chunks;\n      if (session.lineWidgets && !diffView.inlineDiffEditor) {\n        for (var row = config.firstRow; row <= config.lastRow; row++) {\n          var lineWidget = session.lineWidgets[row];\n          if (!lineWidget || lineWidget.hidden) continue;\n          var start = session.documentToScreenRow(row, 0);\n          if (lineWidget.rowsAbove > 0) {\n            var range = new Range(start - lineWidget.rowsAbove, 0, start - 1, Number.MAX_VALUE);\n            markerLayer.drawFullLineMarker(html, range, \"ace_diff aligned_diff\", config);\n          }\n          var end = start + lineWidget.rowCount - (lineWidget.rowsAbove || 0);\n          var range = new Range(start + 1, 0, end, Number.MAX_VALUE);\n          markerLayer.drawFullLineMarker(html, range, \"ace_diff aligned_diff\", config);\n        }\n      }\n      lineChanges.forEach(function (lineChange) {\n        var startRow = lineChange[dir].start.row;\n        var endRow = lineChange[dir].end.row;\n        if (endRow < config.firstRow || startRow > config.lastRow) return;\n        var range = new Range(startRow, 0, endRow - 1, 1 << 30);\n        if (startRow !== endRow) {\n          range = range.toScreenRange(session);\n          markerLayer.drawFullLineMarker(html, range, \"ace_diff \" + operation, config);\n        }\n        if (lineChange.charChanges) {\n          for (var i = 0; i < lineChange.charChanges.length; i++) {\n            var changeRange = lineChange.charChanges[i][dir];\n            if (changeRange.end.column == 0 && changeRange.end.row > changeRange.start.row && changeRange.end.row == lineChange[dir].end.row) {\n              changeRange.end.row--;\n              changeRange.end.column = Number.MAX_VALUE;\n            }\n            if (ignoreTrimWhitespace) {\n              for (var lineNumber = changeRange.start.row; lineNumber <= changeRange.end.row; lineNumber++) {\n                var startColumn = void 0;\n                var endColumn = void 0;\n                var sessionLineStart = session.getLine(lineNumber).match(/^\\s*/)[0].length;\n                var sessionLineEnd = session.getLine(lineNumber).length;\n                if (lineNumber === changeRange.start.row) {\n                  startColumn = changeRange.start.column;\n                } else {\n                  startColumn = sessionLineStart;\n                }\n                if (lineNumber === changeRange.end.row) {\n                  endColumn = changeRange.end.column;\n                } else {\n                  endColumn = sessionLineEnd;\n                }\n                var range_1 = new Range(lineNumber, startColumn, lineNumber, endColumn);\n                var screenRange = range_1.toScreenRange(session);\n                if (sessionLineStart === startColumn && sessionLineEnd === endColumn) {\n                  continue;\n                }\n                var cssClass = \"inline \" + operation;\n                if (range_1.isEmpty() && startColumn !== 0) {\n                  cssClass = \"inline \" + opOperation + \" empty\";\n                }\n                markerLayer.drawSingleLineMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n              }\n            } else {\n              var range_2 = new Range(changeRange.start.row, changeRange.start.column, changeRange.end.row, changeRange.end.column);\n              var screenRange = range_2.toScreenRange(session);\n              var cssClass = \"inline \" + operation;\n              if (range_2.isEmpty() && changeRange.start.column !== 0) {\n                cssClass = \"inline empty \" + opOperation;\n              }\n              if (screenRange.isMultiLine()) {\n                markerLayer.drawTextMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n              } else {\n                markerLayer.drawSingleLineMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n              }\n            }\n          }\n        }\n      });\n    };\n    return DiffHighlight;\n  }();\n  var SyncSelectionMarker = /** @class */function () {\n    function SyncSelectionMarker() {\n      this.id;\n      this.type = \"fullLine\";\n      this.clazz = \"ace_diff-active-line\";\n    }\n    SyncSelectionMarker.prototype.update = function (html, markerLayer, session, config) {};\n    SyncSelectionMarker.prototype.setRange = function (range) {\n      var newRange = range.clone();\n      newRange.end.column++;\n      this.range = newRange;\n    };\n    return SyncSelectionMarker;\n  }();\n  exports.DiffChunk = DiffChunk;\n  exports.DiffHighlight = DiffHighlight;\n});\nace.define(\"ace/ext/diff/inline_diff_view\", [\"require\", \"exports\", \"module\", \"ace/ext/diff/base_diff_view\", \"ace/virtual_renderer\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var __extends = this && this.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n  var BaseDiffView = require(\"./base_diff_view\").BaseDiffView;\n  var Renderer = require(\"../../virtual_renderer\").VirtualRenderer;\n  var config = require(\"../../config\");\n  var InlineDiffView = /** @class */function (_super) {\n    __extends(InlineDiffView, _super);\n    function InlineDiffView(diffModel, container) {\n      var _this = this;\n      diffModel = diffModel || {};\n      diffModel.inline = diffModel.inline || \"a\";\n      _this = _super.call(this, true, container) || this;\n      _this.init(diffModel);\n      return _this;\n    }\n    InlineDiffView.prototype.init = function (diffModel) {\n      this.onSelect = this.onSelect.bind(this);\n      this.onAfterRender = this.onAfterRender.bind(this);\n      this.$setupModels(diffModel);\n      this.onChangeTheme();\n      config.resetOptions(this);\n      config[\"_signal\"](\"diffView\", this);\n      var padding = this.activeEditor.renderer.$padding;\n      this.addGutterDecorators();\n      this.otherEditor.renderer.setPadding(padding);\n      this.textLayer = this.otherEditor.renderer.$textLayer;\n      this.markerLayer = this.otherEditor.renderer.$markerBack;\n      this.gutterLayer = this.otherEditor.renderer.$gutterLayer;\n      this.cursorLayer = this.otherEditor.renderer.$cursorLayer;\n      this.otherEditor.renderer.$updateCachedSize = function () {};\n      var textLayerElement = this.activeEditor.renderer.$textLayer.element;\n      textLayerElement.parentNode.insertBefore(this.textLayer.element, textLayerElement);\n      var markerLayerElement = this.activeEditor.renderer.$markerBack.element;\n      markerLayerElement.parentNode.insertBefore(this.markerLayer.element, markerLayerElement.nextSibling);\n      var gutterLayerElement = this.activeEditor.renderer.$gutterLayer.element;\n      gutterLayerElement.parentNode.insertBefore(this.gutterLayer.element, gutterLayerElement.nextSibling);\n      gutterLayerElement.style.position = \"absolute\";\n      this.gutterLayer.element.style.position = \"absolute\";\n      this.gutterLayer.element.style.width = \"100%\";\n      this.gutterLayer.element.classList.add(\"ace_mini-diff_gutter_other\");\n      this.gutterLayer.$updateGutterWidth = function () {};\n      this.initMouse();\n      this.initTextInput();\n      this.initTextLayer();\n      this.initRenderer();\n      this.$attachEventHandlers();\n      this.selectEditor(this.activeEditor);\n    };\n    InlineDiffView.prototype.initRenderer = function (restore) {\n      var _this = this;\n      if (restore) {\n        delete this.activeEditor.renderer.$getLongestLine;\n      } else {\n        this.editorA.renderer.$getLongestLine = this.editorB.renderer.$getLongestLine = function () {\n          var getLongestLine = Renderer.prototype.$getLongestLine;\n          return Math.max(getLongestLine.call(_this.editorA.renderer), getLongestLine.call(_this.editorB.renderer));\n        };\n      }\n    };\n    InlineDiffView.prototype.initTextLayer = function () {\n      var renderLine = this.textLayer.$renderLine;\n      var diffView = this;\n      this.otherEditor.renderer.$textLayer.$renderLine = function (parent, row, foldLIne) {\n        if (isVisibleRow(diffView.chunks, row)) {\n          renderLine.call(this, parent, row, foldLIne);\n        }\n      };\n      var side = this.showSideA ? \"new\" : \"old\";\n      function isVisibleRow(chunks, row) {\n        var min = 0;\n        var max = chunks.length - 1;\n        var result = -1;\n        while (min < max) {\n          var mid = Math.floor((min + max) / 2);\n          var chunkStart = chunks[mid][side].start.row;\n          if (chunkStart < row) {\n            result = mid;\n            min = mid + 1;\n          } else if (chunkStart > row) {\n            max = mid - 1;\n          } else {\n            result = mid;\n            break;\n          }\n        }\n        if (chunks[result + 1] && chunks[result + 1][side].start.row <= row) {\n          result++;\n        }\n        var range = chunks[result] && chunks[result][side];\n        if (range && range.end.row > row) {\n          return true;\n        }\n        return false;\n      }\n    };\n    InlineDiffView.prototype.initTextInput = function (restore) {\n      if (restore) {\n        this.otherEditor.textInput = this.othertextInput;\n        this.otherEditor.container = this.otherEditorContainer;\n      } else {\n        this.othertextInput = this.otherEditor.textInput;\n        this.otherEditor.textInput = this.activeEditor.textInput;\n        this.otherEditorContainer = this.otherEditor.container;\n        this.otherEditor.container = this.activeEditor.container;\n      }\n    };\n    InlineDiffView.prototype.selectEditor = function (editor) {\n      if (editor == this.activeEditor) {\n        this.otherEditor.selection.clearSelection();\n        this.activeEditor.textInput.setHost(this.activeEditor);\n        this.activeEditor.setStyle(\"ace_diff_other\", false);\n        this.cursorLayer.element.remove();\n        this.activeEditor.renderer.$cursorLayer.element.style.display = \"block\";\n        if (this.showSideA) {\n          this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n          this.sessionA.addDynamicMarker(this.syncSelectionMarkerA, true);\n        }\n        this.markerLayer.element.classList.add(\"ace_hidden_marker-layer\");\n        this.activeEditor.renderer.$markerBack.element.classList.remove(\"ace_hidden_marker-layer\");\n        this.removeBracketHighlight(this.otherEditor);\n      } else {\n        this.activeEditor.selection.clearSelection();\n        this.activeEditor.textInput.setHost(this.otherEditor);\n        this.activeEditor.setStyle(\"ace_diff_other\");\n        this.activeEditor.renderer.$cursorLayer.element.parentNode.appendChild(this.cursorLayer.element);\n        this.activeEditor.renderer.$cursorLayer.element.style.display = \"none\";\n        if (this.activeEditor.$isFocused) {\n          this.otherEditor.onFocus();\n        }\n        if (this.showSideA) {\n          this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n        }\n        this.markerLayer.element.classList.remove(\"ace_hidden_marker-layer\");\n        this.activeEditor.renderer.$markerBack.element.classList.add(\"ace_hidden_marker-layer\");\n        this.removeBracketHighlight(this.activeEditor);\n      }\n    };\n    InlineDiffView.prototype.removeBracketHighlight = function (editor) {\n      var session = editor.session;\n      if (session.$bracketHighlight) {\n        session.$bracketHighlight.markerIds.forEach(function (id) {\n          session.removeMarker(id);\n        });\n        session.$bracketHighlight = null;\n      }\n    };\n    InlineDiffView.prototype.initMouse = function () {\n      var _this = this;\n      this.otherEditor.renderer.$loop = this.activeEditor.renderer.$loop;\n      this.otherEditor.renderer.scroller = {\n        getBoundingClientRect: function () {\n          return _this.activeEditor.renderer.scroller.getBoundingClientRect();\n        },\n        style: this.activeEditor.renderer.scroller.style\n      };\n      var forwardEvent = function (ev) {\n        if (!ev.domEvent) return;\n        var screenPos = ev.editor.renderer.pixelToScreenCoordinates(ev.clientX, ev.clientY);\n        var sessionA = _this.activeEditor.session;\n        var sessionB = _this.otherEditor.session;\n        var posA = sessionA.screenToDocumentPosition(screenPos.row, screenPos.column, screenPos.offsetX);\n        var posB = sessionB.screenToDocumentPosition(screenPos.row, screenPos.column, screenPos.offsetX);\n        var posAx = sessionA.documentToScreenPosition(posA);\n        var posBx = sessionB.documentToScreenPosition(posB);\n        if (ev.editor == _this.activeEditor) {\n          if (posBx.row == screenPos.row && posAx.row != screenPos.row) {\n            if (ev.type == \"mousedown\") {\n              _this.selectEditor(_this.otherEditor);\n            }\n            ev.propagationStopped = true;\n            ev.defaultPrevented = true;\n            _this.otherEditor.$mouseHandler.onMouseEvent(ev.type, ev.domEvent);\n          } else if (ev.type == \"mousedown\") {\n            _this.selectEditor(_this.activeEditor);\n          }\n        }\n      };\n      var events = [\"mousedown\", \"click\", \"mouseup\", \"dblclick\", \"tripleclick\", \"quadclick\"];\n      events.forEach(function (event) {\n        _this.activeEditor.on(event, forwardEvent, true);\n        _this.activeEditor.on(\"gutter\" + event, forwardEvent, true);\n      });\n      var onFocus = function (e) {\n        _this.activeEditor.onFocus(e);\n      };\n      var onBlur = function (e) {\n        _this.activeEditor.onBlur(e);\n      };\n      this.otherEditor.on(\"focus\", onFocus);\n      this.otherEditor.on(\"blur\", onBlur);\n      this.onMouseDetach = function () {\n        events.forEach(function (event) {\n          _this.activeEditor.off(event, forwardEvent, true);\n          _this.activeEditor.off(\"gutter\" + event, forwardEvent, true);\n        });\n        _this.otherEditor.off(\"focus\", onFocus);\n        _this.otherEditor.off(\"blur\", onBlur);\n      };\n    };\n    InlineDiffView.prototype.align = function () {\n      var diffView = this;\n      this.$initWidgets(diffView.editorA);\n      this.$initWidgets(diffView.editorB);\n      diffView.chunks.forEach(function (ch) {\n        var diff1 = diffView.$screenRow(ch.old.end, diffView.sessionA) - diffView.$screenRow(ch.old.start, diffView.sessionA);\n        var diff2 = diffView.$screenRow(ch.new.end, diffView.sessionB) - diffView.$screenRow(ch.new.start, diffView.sessionB);\n        diffView.$addWidget(diffView.sessionA, {\n          rowCount: diff2,\n          rowsAbove: ch.old.end.row === 0 ? diff2 : 0,\n          row: ch.old.end.row === 0 ? 0 : ch.old.end.row - 1\n        });\n        diffView.$addWidget(diffView.sessionB, {\n          rowCount: diff1,\n          rowsAbove: diff1,\n          row: ch.new.start.row\n        });\n      });\n      diffView.sessionA[\"_emit\"](\"changeFold\", {\n        data: {\n          start: {\n            row: 0\n          }\n        }\n      });\n      diffView.sessionB[\"_emit\"](\"changeFold\", {\n        data: {\n          start: {\n            row: 0\n          }\n        }\n      });\n    };\n    InlineDiffView.prototype.onChangeWrapLimit = function () {\n      this.sessionB.adjustWrapLimit(this.sessionA.$wrapLimit);\n      this.scheduleRealign();\n    };\n    InlineDiffView.prototype.$attachSessionsEventHandlers = function () {\n      this.$attachSessionEventHandlers(this.editorA, this.markerA);\n      this.$attachSessionEventHandlers(this.editorB, this.markerB);\n      this.sessionA.on(\"changeWrapLimit\", this.onChangeWrapLimit);\n      this.sessionA.on(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    InlineDiffView.prototype.$attachSessionEventHandlers = function (editor, marker) {\n      editor.session.on(\"changeFold\", this.onChangeFold);\n      editor.session.addDynamicMarker(marker);\n      editor.selection.on(\"changeCursor\", this.onSelect);\n      editor.selection.on(\"changeSelection\", this.onSelect);\n    };\n    InlineDiffView.prototype.$detachSessionsEventHandlers = function () {\n      this.$detachSessionHandlers(this.editorA, this.markerA);\n      this.$detachSessionHandlers(this.editorB, this.markerB);\n      this.otherSession.bgTokenizer.lines.fill(undefined);\n      this.sessionA.off(\"changeWrapLimit\", this.onChangeWrapLimit);\n      this.sessionA.off(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    InlineDiffView.prototype.$detachSessionHandlers = function (editor, marker) {\n      editor.session.removeMarker(marker.id);\n      editor.selection.off(\"changeCursor\", this.onSelect);\n      editor.selection.off(\"changeSelection\", this.onSelect);\n      editor.session.off(\"changeFold\", this.onChangeFold);\n    };\n    InlineDiffView.prototype.$attachEventHandlers = function () {\n      this.activeEditor.on(\"input\", this.onInput);\n      this.activeEditor.renderer.on(\"afterRender\", this.onAfterRender);\n      this.otherSession.on(\"change\", this.onInput);\n    };\n    InlineDiffView.prototype.$detachEventHandlers = function () {\n      this.$detachSessionsEventHandlers();\n      this.activeEditor.off(\"input\", this.onInput);\n      this.activeEditor.renderer.off(\"afterRender\", this.onAfterRender);\n      this.otherSession.off(\"change\", this.onInput);\n      this.textLayer.element.textContent = \"\";\n      this.textLayer.element.remove();\n      this.gutterLayer.element.textContent = \"\";\n      this.gutterLayer.element.remove();\n      this.markerLayer.element.textContent = \"\";\n      this.markerLayer.element.remove();\n      this.onMouseDetach();\n      this.selectEditor(this.activeEditor);\n      this.clearSelectionMarkers();\n      this.otherEditor.setSession(null);\n      this.otherEditor.renderer.$loop = null;\n      this.initTextInput(true);\n      this.initRenderer(true);\n      this.otherEditor.destroy();\n    };\n    InlineDiffView.prototype.onAfterRender = function (changes, renderer) {\n      var config = renderer.layerConfig;\n      var session = this.otherSession;\n      var cloneRenderer = this.otherEditor.renderer;\n      session.$scrollTop = renderer.scrollTop;\n      session.$scrollLeft = renderer.scrollLeft;\n      [\"characterWidth\", \"lineHeight\", \"scrollTop\", \"scrollLeft\", \"scrollMargin\", \"$padding\", \"$size\", \"layerConfig\", \"$horizScroll\", \"$vScroll\"].forEach(function (prop) {\n        cloneRenderer[prop] = renderer[prop];\n      });\n      cloneRenderer.$computeLayerConfig();\n      var newConfig = cloneRenderer.layerConfig;\n      this.gutterLayer.update(newConfig);\n      newConfig.firstRowScreen = config.firstRowScreen;\n      cloneRenderer.$cursorLayer.config = newConfig;\n      cloneRenderer.$cursorLayer.update(newConfig);\n      if (changes & cloneRenderer.CHANGE_LINES || changes & cloneRenderer.CHANGE_FULL || changes & cloneRenderer.CHANGE_SCROLL || changes & cloneRenderer.CHANGE_TEXT) this.textLayer.update(newConfig);\n      this.markerLayer.setMarkers(this.otherSession.getMarkers());\n      this.markerLayer.update(newConfig);\n    };\n    InlineDiffView.prototype.detach = function () {\n      _super.prototype.detach.call(this);\n      this.otherEditor && this.otherEditor.destroy();\n    };\n    return InlineDiffView;\n  }(BaseDiffView);\n  exports.InlineDiffView = InlineDiffView;\n});\nace.define(\"ace/ext/diff/split_diff_view\", [\"require\", \"exports\", \"module\", \"ace/ext/diff/base_diff_view\", \"ace/config\"], function (require, exports, module) {\n  \"use strict\";\n\n  var __extends = this && this.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n  var BaseDiffView = require(\"./base_diff_view\").BaseDiffView;\n  var config = require(\"../../config\");\n  var SplitDiffView = /** @class */function (_super) {\n    __extends(SplitDiffView, _super);\n    function SplitDiffView(diffModel) {\n      var _this = this;\n      diffModel = diffModel || {};\n      _this = _super.call(this) || this;\n      _this.init(diffModel);\n      return _this;\n    }\n    SplitDiffView.prototype.init = function (diffModel) {\n      this.onChangeTheme = this.onChangeTheme.bind(this);\n      this.onMouseWheel = this.onMouseWheel.bind(this);\n      this.onScroll = this.onScroll.bind(this);\n      this.$setupModels(diffModel);\n      this.addGutterDecorators();\n      this.onChangeTheme();\n      config.resetOptions(this);\n      config[\"_signal\"](\"diffView\", this);\n      this.$attachEventHandlers();\n    };\n    SplitDiffView.prototype.onChangeWrapLimit = function () {\n      this.scheduleRealign();\n    };\n    SplitDiffView.prototype.align = function () {\n      var diffView = this;\n      this.$initWidgets(diffView.editorA);\n      this.$initWidgets(diffView.editorB);\n      diffView.chunks.forEach(function (ch) {\n        var diff1 = diffView.$screenRow(ch.old.start, diffView.sessionA);\n        var diff2 = diffView.$screenRow(ch.new.start, diffView.sessionB);\n        if (diff1 < diff2) {\n          diffView.$addWidget(diffView.sessionA, {\n            rowCount: diff2 - diff1,\n            rowsAbove: ch.old.start.row === 0 ? diff2 - diff1 : 0,\n            row: ch.old.start.row === 0 ? 0 : ch.old.start.row - 1\n          });\n        } else if (diff1 > diff2) {\n          diffView.$addWidget(diffView.sessionB, {\n            rowCount: diff1 - diff2,\n            rowsAbove: ch.new.start.row === 0 ? diff1 - diff2 : 0,\n            row: ch.new.start.row === 0 ? 0 : ch.new.start.row - 1\n          });\n        }\n        var diff1 = diffView.$screenRow(ch.old.end, diffView.sessionA);\n        var diff2 = diffView.$screenRow(ch.new.end, diffView.sessionB);\n        if (diff1 < diff2) {\n          diffView.$addWidget(diffView.sessionA, {\n            rowCount: diff2 - diff1,\n            rowsAbove: ch.old.end.row === 0 ? diff2 - diff1 : 0,\n            row: ch.old.end.row === 0 ? 0 : ch.old.end.row - 1\n          });\n        } else if (diff1 > diff2) {\n          diffView.$addWidget(diffView.sessionB, {\n            rowCount: diff1 - diff2,\n            rowsAbove: ch.new.end.row === 0 ? diff1 - diff2 : 0,\n            row: ch.new.end.row === 0 ? 0 : ch.new.end.row - 1\n          });\n        }\n      });\n      diffView.sessionA[\"_emit\"](\"changeFold\", {\n        data: {\n          start: {\n            row: 0\n          }\n        }\n      });\n      diffView.sessionB[\"_emit\"](\"changeFold\", {\n        data: {\n          start: {\n            row: 0\n          }\n        }\n      });\n    };\n    SplitDiffView.prototype.onScroll = function (e, session) {\n      this.syncScroll(this.sessionA === session ? this.editorA.renderer : this.editorB.renderer);\n    };\n    SplitDiffView.prototype.syncScroll = function (renderer) {\n      if (this.$syncScroll == false) return;\n      var r1 = this.editorA.renderer;\n      var r2 = this.editorB.renderer;\n      var isOrig = renderer == r1;\n      if (r1[\"$scrollAnimation\"] && r2[\"$scrollAnimation\"]) return;\n      var now = Date.now();\n      if (this.scrollSetBy != renderer && now - this.scrollSetAt < 500) return;\n      var r = isOrig ? r1 : r2;\n      if (this.scrollSetBy != renderer) {\n        if (isOrig && this.scrollA == r.session.getScrollTop()) return;else if (!isOrig && this.scrollB == r.session.getScrollTop()) return;\n      }\n      var rOther = isOrig ? r2 : r1;\n      var targetPos = r.session.getScrollTop();\n      this.$syncScroll = false;\n      if (isOrig) {\n        this.scrollA = r.session.getScrollTop();\n        this.scrollB = targetPos;\n      } else {\n        this.scrollA = targetPos;\n        this.scrollB = r.session.getScrollTop();\n      }\n      this.scrollSetBy = renderer;\n      rOther.session.setScrollTop(targetPos);\n      this.$syncScroll = true;\n      this.scrollSetAt = now;\n    };\n    SplitDiffView.prototype.onMouseWheel = function (ev) {\n      if (ev.getAccelKey()) return;\n      if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n        ev.wheelX = ev.wheelY;\n        ev.wheelY = 0;\n      }\n      var editor = ev.editor;\n      var isScrolable = editor.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n      if (!isScrolable) {\n        var other = editor == this.editorA ? this.editorB : this.editorA;\n        if (other.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed)) other.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n        return ev.stop();\n      }\n    };\n    SplitDiffView.prototype.$attachSessionsEventHandlers = function () {\n      this.$attachSessionEventHandlers(this.editorA, this.markerA);\n      this.$attachSessionEventHandlers(this.editorB, this.markerB);\n    };\n    SplitDiffView.prototype.$attachSessionEventHandlers = function (editor, marker) {\n      editor.session.on(\"changeScrollTop\", this.onScroll);\n      editor.session.on(\"changeFold\", this.onChangeFold);\n      editor.session.addDynamicMarker(marker);\n      editor.selection.on(\"changeCursor\", this.onSelect);\n      editor.selection.on(\"changeSelection\", this.onSelect);\n      editor.session.on(\"changeWrapLimit\", this.onChangeWrapLimit);\n      editor.session.on(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    SplitDiffView.prototype.$detachSessionsEventHandlers = function () {\n      this.$detachSessionHandlers(this.editorA, this.markerA);\n      this.$detachSessionHandlers(this.editorB, this.markerB);\n    };\n    SplitDiffView.prototype.$detachSessionHandlers = function (editor, marker) {\n      editor.session.off(\"changeScrollTop\", this.onScroll);\n      editor.session.off(\"changeFold\", this.onChangeFold);\n      editor.session.removeMarker(marker.id);\n      editor.selection.off(\"changeCursor\", this.onSelect);\n      editor.selection.off(\"changeSelection\", this.onSelect);\n      editor.session.off(\"changeWrapLimit\", this.onChangeWrapLimit);\n      editor.session.off(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    SplitDiffView.prototype.$attachEventHandlers = function () {\n      this.editorA.renderer.on(\"themeChange\", this.onChangeTheme);\n      this.editorB.renderer.on(\"themeChange\", this.onChangeTheme);\n      this.editorA.on(\"mousewheel\", this.onMouseWheel);\n      this.editorB.on(\"mousewheel\", this.onMouseWheel);\n      this.editorA.on(\"input\", this.onInput);\n      this.editorB.on(\"input\", this.onInput);\n    };\n    SplitDiffView.prototype.$detachEventHandlers = function () {\n      this.$detachSessionsEventHandlers();\n      this.clearSelectionMarkers();\n      this.editorA.renderer.off(\"themeChange\", this.onChangeTheme);\n      this.editorB.renderer.off(\"themeChange\", this.onChangeTheme);\n      this.$detachEditorEventHandlers(this.editorA);\n      this.$detachEditorEventHandlers(this.editorB);\n    };\n    SplitDiffView.prototype.$detachEditorEventHandlers = function (editor) {\n      editor.off(\"mousewheel\", this.onMouseWheel);\n      editor.off(\"input\", this.onInput);\n    };\n    return SplitDiffView;\n  }(BaseDiffView);\n  exports.SplitDiffView = SplitDiffView;\n});\nace.define(\"ace/ext/diff/providers/default\", [\"require\", \"exports\", \"module\", \"ace/range\", \"ace/ext/diff/base_diff_view\"], function (require, exports, module) {\n  'use strict';\n\n  var __extends = this && this.__extends || function () {\n    var extendStatics = function (d, b) {\n      extendStatics = Object.setPrototypeOf || {\n        __proto__: []\n      } instanceof Array && function (d, b) {\n        d.__proto__ = b;\n      } || function (d, b) {\n        for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      };\n      return extendStatics(d, b);\n    };\n    return function (d, b) {\n      if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n      extendStatics(d, b);\n      function __() {\n        this.constructor = d;\n      }\n      d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n  }();\n  var __generator = this && this.__generator || function (thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function () {\n          if (t[0] & 1) throw t[1];\n          return t[1];\n        },\n        trys: [],\n        ops: []\n      },\n      f,\n      y,\n      t,\n      g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n      return this;\n    }), g;\n    function verb(n) {\n      return function (v) {\n        return step([n, v]);\n      };\n    }\n    function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n          case 7:\n            op = _.ops.pop();\n            _.trys.pop();\n            continue;\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n              _.ops.push(op);\n              break;\n            }\n            if (t[2]) _.ops.pop();\n            _.trys.pop();\n            continue;\n        }\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n      if (op[0] & 5) throw op[1];\n      return {\n        value: op[0] ? op[1] : void 0,\n        done: true\n      };\n    }\n  };\n  var __values = this && this.__values || function (o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n      next: function () {\n        if (o && i >= o.length) o = void 0;\n        return {\n          value: o && o[i++],\n          done: !o\n        };\n      }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n  };\n  var _a;\n  var _b, _c, _d, _e, _f;\n  function equals(one, other, itemEquals) {\n    if (itemEquals === void 0) {\n      itemEquals = function (a, b) {\n        return a === b;\n      };\n    }\n    if (one === other) {\n      return true;\n    }\n    if (!one || !other) {\n      return false;\n    }\n    if (one.length !== other.length) {\n      return false;\n    }\n    for (var i = 0, len = one.length; i < len; i++) {\n      if (!itemEquals(one[i], other[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  function groupAdjacentBy(items, shouldBeGrouped) {\n    var currentGroup, last, items_1, items_1_1, item, e_1_1;\n    var e_1, _a;\n    return __generator(this, function (_g) {\n      switch (_g.label) {\n        case 0:\n          _g.trys.push([0, 8, 9, 10]);\n          items_1 = __values(items), items_1_1 = items_1.next();\n          _g.label = 1;\n        case 1:\n          if (!!items_1_1.done) return [3 /*break*/, 7];\n          item = items_1_1.value;\n          if (!(last !== undefined && shouldBeGrouped(last, item))) return [3 /*break*/, 2];\n          currentGroup.push(item);\n          return [3 /*break*/, 5];\n        case 2:\n          if (!currentGroup) return [3 /*break*/, 4];\n          return [4 /*yield*/, currentGroup];\n        case 3:\n          _g.sent();\n          _g.label = 4;\n        case 4:\n          currentGroup = [item];\n          _g.label = 5;\n        case 5:\n          last = item;\n          _g.label = 6;\n        case 6:\n          items_1_1 = items_1.next();\n          return [3 /*break*/, 1];\n        case 7:\n          return [3 /*break*/, 10];\n        case 8:\n          e_1_1 = _g.sent();\n          e_1 = {\n            error: e_1_1\n          };\n          return [3 /*break*/, 10];\n        case 9:\n          try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n          return [7 /*endfinally*/];\n        case 10:\n          if (!currentGroup) return [3 /*break*/, 12];\n          return [4 /*yield*/, currentGroup];\n        case 11:\n          _g.sent();\n          _g.label = 12;\n        case 12:\n          return [2 /*return*/];\n      }\n    });\n  }\n  function forEachAdjacent(arr, f) {\n    for (var i = 0; i <= arr.length; i++) {\n      f(i === 0 ? undefined : arr[i - 1], i === arr.length ? undefined : arr[i]);\n    }\n  }\n  function forEachWithNeighbors(arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n      f(i === 0 ? undefined : arr[i - 1], arr[i], i + 1 === arr.length ? undefined : arr[i + 1]);\n    }\n  }\n  function pushMany(arr, items) {\n    var e_2, _a;\n    try {\n      for (var items_2 = __values(items), items_2_1 = items_2.next(); !items_2_1.done; items_2_1 = items_2.next()) {\n        var item = items_2_1.value;\n        arr.push(item);\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (items_2_1 && !items_2_1.done && (_a = items_2.return)) _a.call(items_2);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  }\n  function compareBy(selector, comparator) {\n    return function (a, b) {\n      return comparator(selector(a), selector(b));\n    };\n  }\n  var numberComparator = function (a, b) {\n    return a - b;\n  };\n  function reverseOrder(comparator) {\n    return function (a, b) {\n      return -comparator(a, b);\n    };\n  }\n  var BugIndicatingError = /** @class */function (_super) {\n    __extends(BugIndicatingError, _super);\n    function BugIndicatingError(message) {\n      var _this = _super.call(this, message || \"An unexpected bug occurred.\") || this;\n      Object.setPrototypeOf(_this, BugIndicatingError.prototype);\n      return _this;\n    }\n    return BugIndicatingError;\n  }(Error);\n  function assert(condition, message) {\n    if (message === void 0) {\n      message = \"unexpected state\";\n    }\n    if (!condition) {\n      throw new BugIndicatingError(\"Assertion Failed: \".concat(message));\n    }\n  }\n  function assertFn(condition) {\n    condition();\n  }\n  function checkAdjacentItems(items, predicate) {\n    var i = 0;\n    while (i < items.length - 1) {\n      var a = items[i];\n      var b = items[i + 1];\n      if (!predicate(a, b)) {\n        return false;\n      }\n      i++;\n    }\n    return true;\n  }\n  var OffsetRange = /** @class */function () {\n    function OffsetRange(start, endExclusive) {\n      this.start = start;\n      this.endExclusive = endExclusive;\n      if (start > endExclusive) {\n        throw new BugIndicatingError(\"Invalid range: \".concat(this.toString()));\n      }\n    }\n    OffsetRange.fromTo = function (start, endExclusive) {\n      return new OffsetRange(start, endExclusive);\n    };\n    OffsetRange.addRange = function (range, sortedRanges) {\n      var i = 0;\n      while (i < sortedRanges.length && sortedRanges[i].endExclusive < range.start) {\n        i++;\n      }\n      var j = i;\n      while (j < sortedRanges.length && sortedRanges[j].start <= range.endExclusive) {\n        j++;\n      }\n      if (i === j) {\n        sortedRanges.splice(i, 0, range);\n      } else {\n        var start = Math.min(range.start, sortedRanges[i].start);\n        var end = Math.max(range.endExclusive, sortedRanges[j - 1].endExclusive);\n        sortedRanges.splice(i, j - i, new OffsetRange(start, end));\n      }\n    };\n    OffsetRange.tryCreate = function (start, endExclusive) {\n      if (start > endExclusive) {\n        return undefined;\n      }\n      return new OffsetRange(start, endExclusive);\n    };\n    OffsetRange.ofLength = function (length) {\n      return new OffsetRange(0, length);\n    };\n    OffsetRange.ofStartAndLength = function (start, length) {\n      return new OffsetRange(start, start + length);\n    };\n    OffsetRange.emptyAt = function (offset) {\n      return new OffsetRange(offset, offset);\n    };\n    Object.defineProperty(OffsetRange.prototype, \"isEmpty\", {\n      get: function () {\n        return this.start === this.endExclusive;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    OffsetRange.prototype.delta = function (offset) {\n      return new OffsetRange(this.start + offset, this.endExclusive + offset);\n    };\n    OffsetRange.prototype.deltaStart = function (offset) {\n      return new OffsetRange(this.start + offset, this.endExclusive);\n    };\n    OffsetRange.prototype.deltaEnd = function (offset) {\n      return new OffsetRange(this.start, this.endExclusive + offset);\n    };\n    Object.defineProperty(OffsetRange.prototype, \"length\", {\n      get: function () {\n        return this.endExclusive - this.start;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    OffsetRange.prototype.toString = function () {\n      return \"[\".concat(this.start, \", \").concat(this.endExclusive, \")\");\n    };\n    OffsetRange.prototype.equals = function (other) {\n      return this.start === other.start && this.endExclusive === other.endExclusive;\n    };\n    OffsetRange.prototype.containsRange = function (other) {\n      return this.start <= other.start && other.endExclusive <= this.endExclusive;\n    };\n    OffsetRange.prototype.contains = function (offset) {\n      return this.start <= offset && offset < this.endExclusive;\n    };\n    OffsetRange.prototype.join = function (other) {\n      return new OffsetRange(Math.min(this.start, other.start), Math.max(this.endExclusive, other.endExclusive));\n    };\n    OffsetRange.prototype.intersect = function (other) {\n      var start = Math.max(this.start, other.start);\n      var end = Math.min(this.endExclusive, other.endExclusive);\n      if (start <= end) {\n        return new OffsetRange(start, end);\n      }\n      return undefined;\n    };\n    OffsetRange.prototype.intersectionLength = function (range) {\n      var start = Math.max(this.start, range.start);\n      var end = Math.min(this.endExclusive, range.endExclusive);\n      return Math.max(0, end - start);\n    };\n    OffsetRange.prototype.intersects = function (other) {\n      var start = Math.max(this.start, other.start);\n      var end = Math.min(this.endExclusive, other.endExclusive);\n      return start < end;\n    };\n    OffsetRange.prototype.intersectsOrTouches = function (other) {\n      var start = Math.max(this.start, other.start);\n      var end = Math.min(this.endExclusive, other.endExclusive);\n      return start <= end;\n    };\n    OffsetRange.prototype.isBefore = function (other) {\n      return this.endExclusive <= other.start;\n    };\n    OffsetRange.prototype.isAfter = function (other) {\n      return this.start >= other.endExclusive;\n    };\n    OffsetRange.prototype.slice = function (arr) {\n      return arr.slice(this.start, this.endExclusive);\n    };\n    OffsetRange.prototype.substring = function (str) {\n      return str.substring(this.start, this.endExclusive);\n    };\n    OffsetRange.prototype.clip = function (value) {\n      if (this.isEmpty) {\n        throw new BugIndicatingError(\"Invalid clipping range: \".concat(this.toString()));\n      }\n      return Math.max(this.start, Math.min(this.endExclusive - 1, value));\n    };\n    OffsetRange.prototype.clipCyclic = function (value) {\n      if (this.isEmpty) {\n        throw new BugIndicatingError(\"Invalid clipping range: \".concat(this.toString()));\n      }\n      if (value < this.start) {\n        return this.endExclusive - (this.start - value) % this.length;\n      }\n      if (value >= this.endExclusive) {\n        return this.start + (value - this.start) % this.length;\n      }\n      return value;\n    };\n    OffsetRange.prototype.map = function (f) {\n      var result = [];\n      for (var i = this.start; i < this.endExclusive; i++) {\n        result.push(f(i));\n      }\n      return result;\n    };\n    OffsetRange.prototype.forEach = function (f) {\n      for (var i = this.start; i < this.endExclusive; i++) {\n        f(i);\n      }\n    };\n    return OffsetRange;\n  }();\n  var Position = /** @class */function () {\n    function Position(lineNumber, column) {\n      this.lineNumber = lineNumber;\n      this.column = column;\n    }\n    Position.prototype.equals = function (other) {\n      return Position.equals(this, other);\n    };\n    Position.equals = function (a, b) {\n      if (!a && !b) {\n        return true;\n      }\n      return !!a && !!b && a.lineNumber === b.lineNumber && a.column === b.column;\n    };\n    Position.prototype.isBefore = function (other) {\n      return Position.isBefore(this, other);\n    };\n    Position.isBefore = function (a, b) {\n      if (a.lineNumber < b.lineNumber) {\n        return true;\n      }\n      if (b.lineNumber < a.lineNumber) {\n        return false;\n      }\n      return a.column < b.column;\n    };\n    Position.prototype.isBeforeOrEqual = function (other) {\n      return Position.isBeforeOrEqual(this, other);\n    };\n    Position.isBeforeOrEqual = function (a, b) {\n      if (a.lineNumber < b.lineNumber) {\n        return true;\n      }\n      if (b.lineNumber < a.lineNumber) {\n        return false;\n      }\n      return a.column <= b.column;\n    };\n    return Position;\n  }();\n  var Range = /** @class */function () {\n    function Range(startLineNumber, startColumn, endLineNumber, endColumn) {\n      if (startLineNumber > endLineNumber || startLineNumber === endLineNumber && startColumn > endColumn) {\n        this.startLineNumber = endLineNumber;\n        this.startColumn = endColumn;\n        this.endLineNumber = startLineNumber;\n        this.endColumn = startColumn;\n      } else {\n        this.startLineNumber = startLineNumber;\n        this.startColumn = startColumn;\n        this.endLineNumber = endLineNumber;\n        this.endColumn = endColumn;\n      }\n    }\n    Range.prototype.isEmpty = function () {\n      return Range.isEmpty(this);\n    };\n    Range.isEmpty = function (range) {\n      return range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn;\n    };\n    Range.prototype.containsPosition = function (position) {\n      return Range.containsPosition(this, position);\n    };\n    Range.containsPosition = function (range, position) {\n      if (position.lineNumber < range.startLineNumber || position.lineNumber > range.endLineNumber) {\n        return false;\n      }\n      if (position.lineNumber === range.startLineNumber && position.column < range.startColumn) {\n        return false;\n      }\n      if (position.lineNumber === range.endLineNumber && position.column > range.endColumn) {\n        return false;\n      }\n      return true;\n    };\n    Range.prototype.containsRange = function (range) {\n      return Range.containsRange(this, range);\n    };\n    Range.containsRange = function (range, otherRange) {\n      if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n        return false;\n      }\n      if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n        return false;\n      }\n      if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n        return false;\n      }\n      if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n        return false;\n      }\n      return true;\n    };\n    Range.prototype.strictContainsRange = function (range) {\n      return Range.strictContainsRange(this, range);\n    };\n    Range.strictContainsRange = function (range, otherRange) {\n      if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n        return false;\n      }\n      if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n        return false;\n      }\n      if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn <= range.startColumn) {\n        return false;\n      }\n      if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn >= range.endColumn) {\n        return false;\n      }\n      return true;\n    };\n    Range.prototype.plusRange = function (range) {\n      return Range.plusRange(this, range);\n    };\n    Range.plusRange = function (a, b) {\n      var startLineNumber;\n      var startColumn;\n      var endLineNumber;\n      var endColumn;\n      if (b.startLineNumber < a.startLineNumber) {\n        startLineNumber = b.startLineNumber;\n        startColumn = b.startColumn;\n      } else if (b.startLineNumber === a.startLineNumber) {\n        startLineNumber = b.startLineNumber;\n        startColumn = Math.min(b.startColumn, a.startColumn);\n      } else {\n        startLineNumber = a.startLineNumber;\n        startColumn = a.startColumn;\n      }\n      if (b.endLineNumber > a.endLineNumber) {\n        endLineNumber = b.endLineNumber;\n        endColumn = b.endColumn;\n      } else if (b.endLineNumber === a.endLineNumber) {\n        endLineNumber = b.endLineNumber;\n        endColumn = Math.max(b.endColumn, a.endColumn);\n      } else {\n        endLineNumber = a.endLineNumber;\n        endColumn = a.endColumn;\n      }\n      return new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n    };\n    Range.prototype.intersectRanges = function (range) {\n      return Range.intersectRanges(this, range);\n    };\n    Range.intersectRanges = function (a, b) {\n      var resultStartLineNumber = a.startLineNumber;\n      var resultStartColumn = a.startColumn;\n      var resultEndLineNumber = a.endLineNumber;\n      var resultEndColumn = a.endColumn;\n      var otherStartLineNumber = b.startLineNumber;\n      var otherStartColumn = b.startColumn;\n      var otherEndLineNumber = b.endLineNumber;\n      var otherEndColumn = b.endColumn;\n      if (resultStartLineNumber < otherStartLineNumber) {\n        resultStartLineNumber = otherStartLineNumber;\n        resultStartColumn = otherStartColumn;\n      } else if (resultStartLineNumber === otherStartLineNumber) {\n        resultStartColumn = Math.max(resultStartColumn, otherStartColumn);\n      }\n      if (resultEndLineNumber > otherEndLineNumber) {\n        resultEndLineNumber = otherEndLineNumber;\n        resultEndColumn = otherEndColumn;\n      } else if (resultEndLineNumber === otherEndLineNumber) {\n        resultEndColumn = Math.min(resultEndColumn, otherEndColumn);\n      }\n      if (resultStartLineNumber > resultEndLineNumber) {\n        return null;\n      }\n      if (resultStartLineNumber === resultEndLineNumber && resultStartColumn > resultEndColumn) {\n        return null;\n      }\n      return new Range(resultStartLineNumber, resultStartColumn, resultEndLineNumber, resultEndColumn);\n    };\n    Range.prototype.equalsRange = function (other) {\n      return Range.equalsRange(this, other);\n    };\n    Range.equalsRange = function (a, b) {\n      if (!a && !b) {\n        return true;\n      }\n      return !!a && !!b && a.startLineNumber === b.startLineNumber && a.startColumn === b.startColumn && a.endLineNumber === b.endLineNumber && a.endColumn === b.endColumn;\n    };\n    Range.prototype.getEndPosition = function () {\n      return Range.getEndPosition(this);\n    };\n    Range.getEndPosition = function (range) {\n      return new Position(range.endLineNumber, range.endColumn);\n    };\n    Range.prototype.getStartPosition = function () {\n      return Range.getStartPosition(this);\n    };\n    Range.getStartPosition = function (range) {\n      return new Position(range.startLineNumber, range.startColumn);\n    };\n    Range.prototype.collapseToStart = function () {\n      return Range.collapseToStart(this);\n    };\n    Range.collapseToStart = function (range) {\n      return new Range(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n    };\n    Range.prototype.collapseToEnd = function () {\n      return Range.collapseToEnd(this);\n    };\n    Range.collapseToEnd = function (range) {\n      return new Range(range.endLineNumber, range.endColumn, range.endLineNumber, range.endColumn);\n    };\n    Range.fromPositions = function (start, end) {\n      if (end === void 0) {\n        end = start;\n      }\n      return new Range(start.lineNumber, start.column, end.lineNumber, end.column);\n    };\n    return Range;\n  }();\n  function findLastMonotonous(array, predicate) {\n    var idx = findLastIdxMonotonous(array, predicate);\n    return idx === -1 ? undefined : array[idx];\n  }\n  function findLastIdxMonotonous(array, predicate, startIdx, endIdxEx) {\n    if (startIdx === void 0) {\n      startIdx = 0;\n    }\n    if (endIdxEx === void 0) {\n      endIdxEx = array.length;\n    }\n    var i = startIdx;\n    var j = endIdxEx;\n    while (i < j) {\n      var k = Math.floor((i + j) / 2);\n      if (predicate(array[k])) {\n        i = k + 1;\n      } else {\n        j = k;\n      }\n    }\n    return i - 1;\n  }\n  function findFirstMonotonous(array, predicate) {\n    var idx = findFirstIdxMonotonousOrArrLen(array, predicate);\n    return idx === array.length ? undefined : array[idx];\n  }\n  function findFirstIdxMonotonousOrArrLen(array, predicate, startIdx, endIdxEx) {\n    if (startIdx === void 0) {\n      startIdx = 0;\n    }\n    if (endIdxEx === void 0) {\n      endIdxEx = array.length;\n    }\n    var i = startIdx;\n    var j = endIdxEx;\n    while (i < j) {\n      var k = Math.floor((i + j) / 2);\n      if (predicate(array[k])) {\n        j = k;\n      } else {\n        i = k + 1;\n      }\n    }\n    return i;\n  }\n  var MonotonousArray = /** @class */function () {\n    function MonotonousArray(_array) {\n      this._array = _array;\n      this._findLastMonotonousLastIdx = 0;\n    }\n    MonotonousArray.prototype.findLastMonotonous = function (predicate) {\n      var e_3, _a;\n      if (_b.assertInvariants) {\n        if (this._prevFindLastPredicate) {\n          try {\n            for (var _g = __values(this._array), _h = _g.next(); !_h.done; _h = _g.next()) {\n              var item = _h.value;\n              if (this._prevFindLastPredicate(item) && !predicate(item)) {\n                throw new Error(\"MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.\");\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n        this._prevFindLastPredicate = predicate;\n      }\n      var idx = findLastIdxMonotonous(this._array, predicate, this._findLastMonotonousLastIdx);\n      this._findLastMonotonousLastIdx = idx + 1;\n      return idx === -1 ? undefined : this._array[idx];\n    };\n    return MonotonousArray;\n  }();\n  _b = MonotonousArray;\n  (function () {\n    _b.assertInvariants = false;\n  })();\n  var LineRange = /** @class */function () {\n    function LineRange(startLineNumber, endLineNumberExclusive) {\n      if (startLineNumber > endLineNumberExclusive) {\n        throw new BugIndicatingError(\"startLineNumber \".concat(startLineNumber, \" cannot be after endLineNumberExclusive \").concat(endLineNumberExclusive));\n      }\n      this.startLineNumber = startLineNumber;\n      this.endLineNumberExclusive = endLineNumberExclusive;\n    }\n    LineRange.fromRangeInclusive = function (range) {\n      return new LineRange(range.startLineNumber, range.endLineNumber + 1);\n    };\n    LineRange.join = function (lineRanges) {\n      if (lineRanges.length === 0) {\n        throw new BugIndicatingError(\"lineRanges cannot be empty\");\n      }\n      var startLineNumber = lineRanges[0].startLineNumber;\n      var endLineNumberExclusive = lineRanges[0].endLineNumberExclusive;\n      for (var i = 1; i < lineRanges.length; i++) {\n        startLineNumber = Math.min(startLineNumber, lineRanges[i].startLineNumber);\n        endLineNumberExclusive = Math.max(endLineNumberExclusive, lineRanges[i].endLineNumberExclusive);\n      }\n      return new LineRange(startLineNumber, endLineNumberExclusive);\n    };\n    LineRange.ofLength = function (startLineNumber, length) {\n      return new LineRange(startLineNumber, startLineNumber + length);\n    };\n    Object.defineProperty(LineRange.prototype, \"isEmpty\", {\n      get: function () {\n        return this.startLineNumber === this.endLineNumberExclusive;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LineRange.prototype.delta = function (offset) {\n      return new LineRange(this.startLineNumber + offset, this.endLineNumberExclusive + offset);\n    };\n    Object.defineProperty(LineRange.prototype, \"length\", {\n      get: function () {\n        return this.endLineNumberExclusive - this.startLineNumber;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LineRange.prototype.join = function (other) {\n      return new LineRange(Math.min(this.startLineNumber, other.startLineNumber), Math.max(this.endLineNumberExclusive, other.endLineNumberExclusive));\n    };\n    LineRange.prototype.intersect = function (other) {\n      var startLineNumber = Math.max(this.startLineNumber, other.startLineNumber);\n      var endLineNumberExclusive = Math.min(this.endLineNumberExclusive, other.endLineNumberExclusive);\n      if (startLineNumber <= endLineNumberExclusive) {\n        return new LineRange(startLineNumber, endLineNumberExclusive);\n      }\n      return undefined;\n    };\n    LineRange.prototype.overlapOrTouch = function (other) {\n      return this.startLineNumber <= other.endLineNumberExclusive && other.startLineNumber <= this.endLineNumberExclusive;\n    };\n    LineRange.prototype.toInclusiveRange = function () {\n      if (this.isEmpty) {\n        return null;\n      }\n      return new Range(this.startLineNumber, 1, this.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER);\n    };\n    LineRange.prototype.toOffsetRange = function () {\n      return new OffsetRange(this.startLineNumber - 1, this.endLineNumberExclusive - 1);\n    };\n    return LineRange;\n  }();\n  var LineRangeSet = /** @class */function () {\n    function LineRangeSet(_normalizedRanges) {\n      if (_normalizedRanges === void 0) {\n        _normalizedRanges = [];\n      }\n      this._normalizedRanges = _normalizedRanges;\n    }\n    Object.defineProperty(LineRangeSet.prototype, \"ranges\", {\n      get: function () {\n        return this._normalizedRanges;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LineRangeSet.prototype.addRange = function (range) {\n      if (range.length === 0) {\n        return;\n      }\n      var joinRangeStartIdx = findFirstIdxMonotonousOrArrLen(this._normalizedRanges, function (r) {\n        return r.endLineNumberExclusive >= range.startLineNumber;\n      });\n      var joinRangeEndIdxExclusive = findLastIdxMonotonous(this._normalizedRanges, function (r) {\n        return r.startLineNumber <= range.endLineNumberExclusive;\n      }) + 1;\n      if (joinRangeStartIdx === joinRangeEndIdxExclusive) {\n        this._normalizedRanges.splice(joinRangeStartIdx, 0, range);\n      } else if (joinRangeStartIdx === joinRangeEndIdxExclusive - 1) {\n        var joinRange = this._normalizedRanges[joinRangeStartIdx];\n        this._normalizedRanges[joinRangeStartIdx] = joinRange.join(range);\n      } else {\n        var joinRange = this._normalizedRanges[joinRangeStartIdx].join(this._normalizedRanges[joinRangeEndIdxExclusive - 1]).join(range);\n        this._normalizedRanges.splice(joinRangeStartIdx, joinRangeEndIdxExclusive - joinRangeStartIdx, joinRange);\n      }\n    };\n    LineRangeSet.prototype.contains = function (lineNumber) {\n      var rangeThatStartsBeforeEnd = findLastMonotonous(this._normalizedRanges, function (r) {\n        return r.startLineNumber <= lineNumber;\n      });\n      return !!rangeThatStartsBeforeEnd && rangeThatStartsBeforeEnd.endLineNumberExclusive > lineNumber;\n    };\n    LineRangeSet.prototype.subtractFrom = function (range) {\n      var joinRangeStartIdx = findFirstIdxMonotonousOrArrLen(this._normalizedRanges, function (r) {\n        return r.endLineNumberExclusive >= range.startLineNumber;\n      });\n      var joinRangeEndIdxExclusive = findLastIdxMonotonous(this._normalizedRanges, function (r) {\n        return r.startLineNumber <= range.endLineNumberExclusive;\n      }) + 1;\n      if (joinRangeStartIdx === joinRangeEndIdxExclusive) {\n        return new LineRangeSet([range]);\n      }\n      var result = [];\n      var startLineNumber = range.startLineNumber;\n      for (var i = joinRangeStartIdx; i < joinRangeEndIdxExclusive; i++) {\n        var r = this._normalizedRanges[i];\n        if (r.startLineNumber > startLineNumber) {\n          result.push(new LineRange(startLineNumber, r.startLineNumber));\n        }\n        startLineNumber = r.endLineNumberExclusive;\n      }\n      if (startLineNumber < range.endLineNumberExclusive) {\n        result.push(new LineRange(startLineNumber, range.endLineNumberExclusive));\n      }\n      return new LineRangeSet(result);\n    };\n    LineRangeSet.prototype.getIntersection = function (other) {\n      var result = [];\n      var i1 = 0;\n      var i2 = 0;\n      while (i1 < this._normalizedRanges.length && i2 < other._normalizedRanges.length) {\n        var r1 = this._normalizedRanges[i1];\n        var r2 = other._normalizedRanges[i2];\n        var i = r1.intersect(r2);\n        if (i && !i.isEmpty) {\n          result.push(i);\n        }\n        if (r1.endLineNumberExclusive < r2.endLineNumberExclusive) {\n          i1++;\n        } else {\n          i2++;\n        }\n      }\n      return new LineRangeSet(result);\n    };\n    LineRangeSet.prototype.getWithDelta = function (value) {\n      return new LineRangeSet(this._normalizedRanges.map(function (r) {\n        return r.delta(value);\n      }));\n    };\n    return LineRangeSet;\n  }();\n  var TextLength = /** @class */function () {\n    function TextLength(lineCount, columnCount) {\n      this.lineCount = lineCount;\n      this.columnCount = columnCount;\n    }\n    TextLength.prototype.toLineRange = function () {\n      return LineRange.ofLength(1, this.lineCount);\n    };\n    TextLength.prototype.addToPosition = function (position) {\n      if (this.lineCount === 0) {\n        return new Position(position.lineNumber, position.column + this.columnCount);\n      } else {\n        return new Position(position.lineNumber + this.lineCount, this.columnCount + 1);\n      }\n    };\n    return TextLength;\n  }();\n  _c = TextLength;\n  (function () {\n    _c.zero = new _c(0, 0);\n  })();\n  var LineBasedText = /** @class */function () {\n    function LineBasedText(_getLineContent, _lineCount) {\n      assert(_lineCount >= 1);\n      this._getLineContent = _getLineContent;\n      this._lineCount = _lineCount;\n    }\n    LineBasedText.prototype.getValueOfRange = function (range) {\n      if (range.startLineNumber === range.endLineNumber) {\n        return this._getLineContent(range.startLineNumber).substring(range.startColumn - 1, range.endColumn - 1);\n      }\n      var result = this._getLineContent(range.startLineNumber).substring(range.startColumn - 1);\n      for (var i = range.startLineNumber + 1; i < range.endLineNumber; i++) {\n        result += \"\\n\" + this._getLineContent(i);\n      }\n      result += \"\\n\" + this._getLineContent(range.endLineNumber).substring(0, range.endColumn - 1);\n      return result;\n    };\n    LineBasedText.prototype.getLineLength = function (lineNumber) {\n      return this._getLineContent(lineNumber).length;\n    };\n    Object.defineProperty(LineBasedText.prototype, \"length\", {\n      get: function () {\n        var lastLine = this._getLineContent(this._lineCount);\n        return new TextLength(this._lineCount - 1, lastLine.length);\n      },\n      enumerable: false,\n      configurable: true\n    });\n    return LineBasedText;\n  }();\n  var ArrayText = /** @class */function (_super) {\n    __extends(ArrayText, _super);\n    function ArrayText(lines) {\n      return _super.call(this, function (lineNumber) {\n        return lines[lineNumber - 1];\n      }, lines.length) || this;\n    }\n    return ArrayText;\n  }(LineBasedText);\n  var LinesDiff = /** @class */function () {\n    function LinesDiff(changes, moves, hitTimeout) {\n      this.changes = changes;\n      this.moves = moves;\n      this.hitTimeout = hitTimeout;\n    }\n    return LinesDiff;\n  }();\n  var MovedText = /** @class */function () {\n    function MovedText(lineRangeMapping, changes) {\n      this.lineRangeMapping = lineRangeMapping;\n      this.changes = changes;\n    }\n    return MovedText;\n  }();\n  var LineRangeMapping = /** @class */function () {\n    function LineRangeMapping(originalRange, modifiedRange) {\n      this.original = originalRange;\n      this.modified = modifiedRange;\n    }\n    LineRangeMapping.prototype.join = function (other) {\n      return new LineRangeMapping(this.original.join(other.original), this.modified.join(other.modified));\n    };\n    Object.defineProperty(LineRangeMapping.prototype, \"changedLineCount\", {\n      get: function () {\n        return Math.max(this.original.length, this.modified.length);\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LineRangeMapping.prototype.toRangeMapping = function () {\n      var origInclusiveRange = this.original.toInclusiveRange();\n      var modInclusiveRange = this.modified.toInclusiveRange();\n      if (origInclusiveRange && modInclusiveRange) {\n        return new RangeMapping(origInclusiveRange, modInclusiveRange);\n      } else if (this.original.startLineNumber === 1 || this.modified.startLineNumber === 1) {\n        if (!(this.modified.startLineNumber === 1 && this.original.startLineNumber === 1)) {\n          throw new BugIndicatingError(\"not a valid diff\");\n        }\n        return new RangeMapping(new Range(this.original.startLineNumber, 1, this.original.endLineNumberExclusive, 1), new Range(this.modified.startLineNumber, 1, this.modified.endLineNumberExclusive, 1));\n      } else {\n        return new RangeMapping(new Range(this.original.startLineNumber - 1, Number.MAX_SAFE_INTEGER, this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), new Range(this.modified.startLineNumber - 1, Number.MAX_SAFE_INTEGER, this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER));\n      }\n    };\n    LineRangeMapping.prototype.toRangeMapping2 = function (original, modified) {\n      if (isValidLineNumber(this.original.endLineNumberExclusive, original) && isValidLineNumber(this.modified.endLineNumberExclusive, modified)) {\n        return new RangeMapping(new Range(this.original.startLineNumber, 1, this.original.endLineNumberExclusive, 1), new Range(this.modified.startLineNumber, 1, this.modified.endLineNumberExclusive, 1));\n      }\n      if (!this.original.isEmpty && !this.modified.isEmpty) {\n        return new RangeMapping(Range.fromPositions(new Position(this.original.startLineNumber, 1), normalizePosition(new Position(this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), original)), Range.fromPositions(new Position(this.modified.startLineNumber, 1), normalizePosition(new Position(this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), modified)));\n      }\n      if (this.original.startLineNumber > 1 && this.modified.startLineNumber > 1) {\n        return new RangeMapping(Range.fromPositions(normalizePosition(new Position(this.original.startLineNumber - 1, Number.MAX_SAFE_INTEGER), original), normalizePosition(new Position(this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), original)), Range.fromPositions(normalizePosition(new Position(this.modified.startLineNumber - 1, Number.MAX_SAFE_INTEGER), modified), normalizePosition(new Position(this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), modified)));\n      }\n      throw new BugIndicatingError();\n    };\n    return LineRangeMapping;\n  }();\n  function normalizePosition(position, content) {\n    if (position.lineNumber < 1) {\n      return new Position(1, 1);\n    }\n    if (position.lineNumber > content.length) {\n      return new Position(content.length, content[content.length - 1].length + 1);\n    }\n    var line = content[position.lineNumber - 1];\n    if (position.column > line.length + 1) {\n      return new Position(position.lineNumber, line.length + 1);\n    }\n    return position;\n  }\n  function isValidLineNumber(lineNumber, lines) {\n    return lineNumber >= 1 && lineNumber <= lines.length;\n  }\n  var DetailedLineRangeMapping = /** @class */function (_super) {\n    __extends(DetailedLineRangeMapping, _super);\n    function DetailedLineRangeMapping(originalRange, modifiedRange, innerChanges) {\n      var _this = _super.call(this, originalRange, modifiedRange) || this;\n      _this.innerChanges = innerChanges;\n      return _this;\n    }\n    DetailedLineRangeMapping.fromRangeMappings = function (rangeMappings) {\n      var originalRange = LineRange.join(rangeMappings.map(function (r) {\n        return LineRange.fromRangeInclusive(r.originalRange);\n      }));\n      var modifiedRange = LineRange.join(rangeMappings.map(function (r) {\n        return LineRange.fromRangeInclusive(r.modifiedRange);\n      }));\n      return new DetailedLineRangeMapping(originalRange, modifiedRange, rangeMappings);\n    };\n    DetailedLineRangeMapping.prototype.flip = function () {\n      var _a;\n      return new DetailedLineRangeMapping(this.modified, this.original, (_a = this.innerChanges) === null || _a === void 0 ? void 0 : _a.map(function (c) {\n        return c.flip();\n      }));\n    };\n    DetailedLineRangeMapping.prototype.withInnerChangesFromLineRanges = function () {\n      return new DetailedLineRangeMapping(this.original, this.modified, [this.toRangeMapping()]);\n    };\n    return DetailedLineRangeMapping;\n  }(LineRangeMapping);\n  var RangeMapping = /** @class */function () {\n    function RangeMapping(originalRange, modifiedRange) {\n      this.originalRange = originalRange;\n      this.modifiedRange = modifiedRange;\n    }\n    RangeMapping.join = function (rangeMappings) {\n      if (rangeMappings.length === 0) {\n        throw new BugIndicatingError(\"Cannot join an empty list of range mappings\");\n      }\n      var result = rangeMappings[0];\n      for (var i = 1; i < rangeMappings.length; i++) {\n        result = result.join(rangeMappings[i]);\n      }\n      return result;\n    };\n    RangeMapping.assertSorted = function (rangeMappings) {\n      for (var i = 1; i < rangeMappings.length; i++) {\n        var previous = rangeMappings[i - 1];\n        var current = rangeMappings[i];\n        if (!(previous.originalRange.getEndPosition().isBeforeOrEqual(current.originalRange.getStartPosition()) && previous.modifiedRange.getEndPosition().isBeforeOrEqual(current.modifiedRange.getStartPosition()))) {\n          throw new BugIndicatingError(\"Range mappings must be sorted\");\n        }\n      }\n    };\n    RangeMapping.prototype.flip = function () {\n      return new RangeMapping(this.modifiedRange, this.originalRange);\n    };\n    RangeMapping.prototype.join = function (other) {\n      return new RangeMapping(this.originalRange.plusRange(other.originalRange), this.modifiedRange.plusRange(other.modifiedRange));\n    };\n    return RangeMapping;\n  }();\n  function lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines, dontAssertStartLine) {\n    var e_4, _a;\n    if (dontAssertStartLine === void 0) {\n      dontAssertStartLine = false;\n    }\n    var changes = [];\n    try {\n      for (var _g = __values(groupAdjacentBy(alignments.map(function (a) {\n          return getLineRangeMapping(a, originalLines, modifiedLines);\n        }), function (a1, a2) {\n          return a1.original.overlapOrTouch(a2.original) || a1.modified.overlapOrTouch(a2.modified);\n        })), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var g = _h.value;\n        var first = g[0];\n        var last = g[g.length - 1];\n        changes.push(new DetailedLineRangeMapping(first.original.join(last.original), first.modified.join(last.modified), g.map(function (a) {\n          return a.innerChanges[0];\n        })));\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n    assertFn(function () {\n      if (!dontAssertStartLine && changes.length > 0) {\n        if (changes[0].modified.startLineNumber !== changes[0].original.startLineNumber) {\n          return false;\n        }\n        if (modifiedLines.length.lineCount - changes[changes.length - 1].modified.endLineNumberExclusive !== originalLines.length.lineCount - changes[changes.length - 1].original.endLineNumberExclusive) {\n          return false;\n        }\n      }\n      return checkAdjacentItems(changes, function (m1, m2) {\n        return m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive &&\n        // There has to be an unchanged line in between (otherwise both diffs should have been joined)\n        m1.original.endLineNumberExclusive < m2.original.startLineNumber && m1.modified.endLineNumberExclusive < m2.modified.startLineNumber;\n      });\n    });\n    return changes;\n  }\n  function getLineRangeMapping(rangeMapping, originalLines, modifiedLines) {\n    var lineStartDelta = 0;\n    var lineEndDelta = 0;\n    if (rangeMapping.modifiedRange.endColumn === 1 && rangeMapping.originalRange.endColumn === 1 && rangeMapping.originalRange.startLineNumber + lineStartDelta <= rangeMapping.originalRange.endLineNumber && rangeMapping.modifiedRange.startLineNumber + lineStartDelta <= rangeMapping.modifiedRange.endLineNumber) {\n      lineEndDelta = -1;\n    }\n    if (rangeMapping.modifiedRange.startColumn - 1 >= modifiedLines.getLineLength(rangeMapping.modifiedRange.startLineNumber) && rangeMapping.originalRange.startColumn - 1 >= originalLines.getLineLength(rangeMapping.originalRange.startLineNumber) && rangeMapping.originalRange.startLineNumber <= rangeMapping.originalRange.endLineNumber + lineEndDelta && rangeMapping.modifiedRange.startLineNumber <= rangeMapping.modifiedRange.endLineNumber + lineEndDelta) {\n      lineStartDelta = 1;\n    }\n    var originalLineRange = new LineRange(rangeMapping.originalRange.startLineNumber + lineStartDelta, rangeMapping.originalRange.endLineNumber + 1 + lineEndDelta);\n    var modifiedLineRange = new LineRange(rangeMapping.modifiedRange.startLineNumber + lineStartDelta, rangeMapping.modifiedRange.endLineNumber + 1 + lineEndDelta);\n    return new DetailedLineRangeMapping(originalLineRange, modifiedLineRange, [rangeMapping]);\n  }\n  var DiffAlgorithmResult = /** @class */function () {\n    function DiffAlgorithmResult(diffs, hitTimeout) {\n      this.diffs = diffs;\n      this.hitTimeout = hitTimeout;\n    }\n    DiffAlgorithmResult.trivial = function (seq1, seq2) {\n      return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], false);\n    };\n    DiffAlgorithmResult.trivialTimedOut = function (seq1, seq2) {\n      return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], true);\n    };\n    return DiffAlgorithmResult;\n  }();\n  var SequenceDiff = /** @class */function () {\n    function SequenceDiff(seq1Range, seq2Range) {\n      this.seq1Range = seq1Range;\n      this.seq2Range = seq2Range;\n    }\n    SequenceDiff.invert = function (sequenceDiffs, doc1Length) {\n      var result = [];\n      forEachAdjacent(sequenceDiffs, function (a, b) {\n        result.push(SequenceDiff.fromOffsetPairs(a ? a.getEndExclusives() : OffsetPair.zero, b ? b.getStarts() : new OffsetPair(doc1Length, (a ? a.seq2Range.endExclusive - a.seq1Range.endExclusive : 0) + doc1Length)));\n      });\n      return result;\n    };\n    SequenceDiff.fromOffsetPairs = function (start, endExclusive) {\n      return new SequenceDiff(new OffsetRange(start.offset1, endExclusive.offset1), new OffsetRange(start.offset2, endExclusive.offset2));\n    };\n    SequenceDiff.assertSorted = function (sequenceDiffs) {\n      var e_5, _a;\n      var last = undefined;\n      try {\n        for (var sequenceDiffs_1 = __values(sequenceDiffs), sequenceDiffs_1_1 = sequenceDiffs_1.next(); !sequenceDiffs_1_1.done; sequenceDiffs_1_1 = sequenceDiffs_1.next()) {\n          var cur = sequenceDiffs_1_1.value;\n          if (last) {\n            if (!(last.seq1Range.endExclusive <= cur.seq1Range.start && last.seq2Range.endExclusive <= cur.seq2Range.start)) {\n              throw new BugIndicatingError(\"Sequence diffs must be sorted\");\n            }\n          }\n          last = cur;\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (sequenceDiffs_1_1 && !sequenceDiffs_1_1.done && (_a = sequenceDiffs_1.return)) _a.call(sequenceDiffs_1);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n    };\n    SequenceDiff.prototype.swap = function () {\n      return new SequenceDiff(this.seq2Range, this.seq1Range);\n    };\n    SequenceDiff.prototype.join = function (other) {\n      return new SequenceDiff(this.seq1Range.join(other.seq1Range), this.seq2Range.join(other.seq2Range));\n    };\n    SequenceDiff.prototype.delta = function (offset) {\n      if (offset === 0) {\n        return this;\n      }\n      return new SequenceDiff(this.seq1Range.delta(offset), this.seq2Range.delta(offset));\n    };\n    SequenceDiff.prototype.deltaStart = function (offset) {\n      if (offset === 0) {\n        return this;\n      }\n      return new SequenceDiff(this.seq1Range.deltaStart(offset), this.seq2Range.deltaStart(offset));\n    };\n    SequenceDiff.prototype.deltaEnd = function (offset) {\n      if (offset === 0) {\n        return this;\n      }\n      return new SequenceDiff(this.seq1Range.deltaEnd(offset), this.seq2Range.deltaEnd(offset));\n    };\n    SequenceDiff.prototype.intersect = function (other) {\n      var i1 = this.seq1Range.intersect(other.seq1Range);\n      var i2 = this.seq2Range.intersect(other.seq2Range);\n      if (!i1 || !i2) {\n        return undefined;\n      }\n      return new SequenceDiff(i1, i2);\n    };\n    SequenceDiff.prototype.getStarts = function () {\n      return new OffsetPair(this.seq1Range.start, this.seq2Range.start);\n    };\n    SequenceDiff.prototype.getEndExclusives = function () {\n      return new OffsetPair(this.seq1Range.endExclusive, this.seq2Range.endExclusive);\n    };\n    return SequenceDiff;\n  }();\n  var OffsetPair = /** @class */function () {\n    function OffsetPair(offset1, offset2) {\n      this.offset1 = offset1;\n      this.offset2 = offset2;\n    }\n    OffsetPair.prototype.delta = function (offset) {\n      if (offset === 0) {\n        return this;\n      }\n      return new _d(this.offset1 + offset, this.offset2 + offset);\n    };\n    OffsetPair.prototype.equals = function (other) {\n      return this.offset1 === other.offset1 && this.offset2 === other.offset2;\n    };\n    return OffsetPair;\n  }();\n  _d = OffsetPair;\n  (function () {\n    _d.zero = new _d(0, 0);\n  })();\n  (function () {\n    _d.max = new _d(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n  })();\n  var InfiniteTimeout = /** @class */function () {\n    function InfiniteTimeout() {}\n    InfiniteTimeout.prototype.isValid = function () {\n      return true;\n    };\n    return InfiniteTimeout;\n  }();\n  _e = InfiniteTimeout;\n  (function () {\n    _e.instance = new _e();\n  })();\n  var DateTimeout = /** @class */function () {\n    function DateTimeout(timeout) {\n      this.timeout = timeout;\n      this.startTime = Date.now();\n      this.valid = true;\n      if (timeout <= 0) {\n        throw new BugIndicatingError(\"timeout must be positive\");\n      }\n    }\n    DateTimeout.prototype.isValid = function () {\n      var valid = Date.now() - this.startTime < this.timeout;\n      if (!valid && this.valid) {\n        this.valid = false;\n      }\n      return this.valid;\n    };\n    DateTimeout.prototype.disable = function () {\n      this.timeout = Number.MAX_SAFE_INTEGER;\n      this.isValid = function () {\n        return true;\n      };\n      this.valid = true;\n    };\n    return DateTimeout;\n  }();\n  var Array2D = /** @class */function () {\n    function Array2D(width, height) {\n      this.width = width;\n      this.height = height;\n      this.array = [];\n      this.array = new Array(width * height);\n    }\n    Array2D.prototype.get = function (x, y) {\n      return this.array[x + y * this.width];\n    };\n    Array2D.prototype.set = function (x, y, value) {\n      this.array[x + y * this.width] = value;\n    };\n    return Array2D;\n  }();\n  function isSpace(charCode) {\n    return charCode === 32 || charCode === 9;\n  }\n  var LineRangeFragment = /** @class */function () {\n    function LineRangeFragment(range, lines, source) {\n      this.range = range;\n      this.lines = lines;\n      this.source = source;\n      this.histogram = [];\n      var counter = 0;\n      for (var i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\n        var line = lines[i];\n        for (var j = 0; j < line.length; j++) {\n          counter++;\n          var chr = line[j];\n          var key2 = _f.getKey(chr);\n          this.histogram[key2] = (this.histogram[key2] || 0) + 1;\n        }\n        counter++;\n        var key = _f.getKey(\"\\n\");\n        this.histogram[key] = (this.histogram[key] || 0) + 1;\n      }\n      this.totalCount = counter;\n    }\n    LineRangeFragment.getKey = function (chr) {\n      var key = this.chrKeys.get(chr);\n      if (key === undefined) {\n        key = this.chrKeys.size;\n        this.chrKeys.set(chr, key);\n      }\n      return key;\n    };\n    LineRangeFragment.prototype.computeSimilarity = function (other) {\n      var _a, _g;\n      var sumDifferences = 0;\n      var maxLength = Math.max(this.histogram.length, other.histogram.length);\n      for (var i = 0; i < maxLength; i++) {\n        sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_g = other.histogram[i]) !== null && _g !== void 0 ? _g : 0));\n      }\n      return 1 - sumDifferences / (this.totalCount + other.totalCount);\n    };\n    return LineRangeFragment;\n  }();\n  _f = LineRangeFragment;\n  (function () {\n    _f.chrKeys = /* @__PURE__ */new Map();\n  })();\n  var DynamicProgrammingDiffing = /** @class */function () {\n    function DynamicProgrammingDiffing() {}\n    DynamicProgrammingDiffing.prototype.compute = function (sequence1, sequence2, timeout, equalityScore) {\n      if (timeout === void 0) {\n        timeout = InfiniteTimeout.instance;\n      }\n      if (sequence1.length === 0 || sequence2.length === 0) {\n        return DiffAlgorithmResult.trivial(sequence1, sequence2);\n      }\n      var lcsLengths = new Array2D(sequence1.length, sequence2.length);\n      var directions = new Array2D(sequence1.length, sequence2.length);\n      var lengths = new Array2D(sequence1.length, sequence2.length);\n      for (var s12 = 0; s12 < sequence1.length; s12++) {\n        for (var s22 = 0; s22 < sequence2.length; s22++) {\n          if (!timeout.isValid()) {\n            return DiffAlgorithmResult.trivialTimedOut(sequence1, sequence2);\n          }\n          var horizontalLen = s12 === 0 ? 0 : lcsLengths.get(s12 - 1, s22);\n          var verticalLen = s22 === 0 ? 0 : lcsLengths.get(s12, s22 - 1);\n          var extendedSeqScore = void 0;\n          if (sequence1.getElement(s12) === sequence2.getElement(s22)) {\n            if (s12 === 0 || s22 === 0) {\n              extendedSeqScore = 0;\n            } else {\n              extendedSeqScore = lcsLengths.get(s12 - 1, s22 - 1);\n            }\n            if (s12 > 0 && s22 > 0 && directions.get(s12 - 1, s22 - 1) === 3) {\n              extendedSeqScore += lengths.get(s12 - 1, s22 - 1);\n            }\n            extendedSeqScore += equalityScore ? equalityScore(s12, s22) : 1;\n          } else {\n            extendedSeqScore = -1;\n          }\n          var newValue = Math.max(horizontalLen, verticalLen, extendedSeqScore);\n          if (newValue === extendedSeqScore) {\n            var prevLen = s12 > 0 && s22 > 0 ? lengths.get(s12 - 1, s22 - 1) : 0;\n            lengths.set(s12, s22, prevLen + 1);\n            directions.set(s12, s22, 3);\n          } else if (newValue === horizontalLen) {\n            lengths.set(s12, s22, 0);\n            directions.set(s12, s22, 1);\n          } else if (newValue === verticalLen) {\n            lengths.set(s12, s22, 0);\n            directions.set(s12, s22, 2);\n          }\n          lcsLengths.set(s12, s22, newValue);\n        }\n      }\n      var result = [];\n      var lastAligningPosS1 = sequence1.length;\n      var lastAligningPosS2 = sequence2.length;\n      function reportDecreasingAligningPositions(s12, s22) {\n        if (s12 + 1 !== lastAligningPosS1 || s22 + 1 !== lastAligningPosS2) {\n          result.push(new SequenceDiff(new OffsetRange(s12 + 1, lastAligningPosS1), new OffsetRange(s22 + 1, lastAligningPosS2)));\n        }\n        lastAligningPosS1 = s12;\n        lastAligningPosS2 = s22;\n      }\n      var s1 = sequence1.length - 1;\n      var s2 = sequence2.length - 1;\n      while (s1 >= 0 && s2 >= 0) {\n        if (directions.get(s1, s2) === 3) {\n          reportDecreasingAligningPositions(s1, s2);\n          s1--;\n          s2--;\n        } else {\n          if (directions.get(s1, s2) === 1) {\n            s1--;\n          } else {\n            s2--;\n          }\n        }\n      }\n      reportDecreasingAligningPositions(-1, -1);\n      result.reverse();\n      return new DiffAlgorithmResult(result, false);\n    };\n    return DynamicProgrammingDiffing;\n  }();\n  var MyersDiffAlgorithm = /** @class */function () {\n    function MyersDiffAlgorithm() {}\n    MyersDiffAlgorithm.prototype.compute = function (seq1, seq2, timeout) {\n      if (timeout === void 0) {\n        timeout = InfiniteTimeout.instance;\n      }\n      if (seq1.length === 0 || seq2.length === 0) {\n        return DiffAlgorithmResult.trivial(seq1, seq2);\n      }\n      var seqX = seq1;\n      var seqY = seq2;\n      function getXAfterSnake(x, y) {\n        while (x < seqX.length && y < seqY.length && seqX.getElement(x) === seqY.getElement(y)) {\n          x++;\n          y++;\n        }\n        return x;\n      }\n      var d = 0;\n      var V = new FastInt32Array();\n      V.set(0, getXAfterSnake(0, 0));\n      var paths = new FastArrayNegativeIndices();\n      paths.set(0, V.get(0) === 0 ? null : new SnakePath(null, 0, 0, V.get(0)));\n      var k = 0;\n      loop: while (true) {\n        d++;\n        if (!timeout.isValid()) {\n          return DiffAlgorithmResult.trivialTimedOut(seqX, seqY);\n        }\n        var lowerBound = -Math.min(d, seqY.length + d % 2);\n        var upperBound = Math.min(d, seqX.length + d % 2);\n        for (k = lowerBound; k <= upperBound; k += 2) {\n          var maxXofDLineTop = k === upperBound ? -1 : V.get(k + 1);\n          var maxXofDLineLeft = k === lowerBound ? -1 : V.get(k - 1) + 1;\n          var x = Math.min(Math.max(maxXofDLineTop, maxXofDLineLeft), seqX.length);\n          var y = x - k;\n          if (x > seqX.length || y > seqY.length) {\n            continue;\n          }\n          var newMaxX = getXAfterSnake(x, y);\n          V.set(k, newMaxX);\n          var lastPath = x === maxXofDLineTop ? paths.get(k + 1) : paths.get(k - 1);\n          paths.set(k, newMaxX !== x ? new SnakePath(lastPath, x, y, newMaxX - x) : lastPath);\n          if (V.get(k) === seqX.length && V.get(k) - k === seqY.length) {\n            break loop;\n          }\n        }\n      }\n      var path = paths.get(k);\n      var result = [];\n      var lastAligningPosS1 = seqX.length;\n      var lastAligningPosS2 = seqY.length;\n      while (true) {\n        var endX = path ? path.x + path.length : 0;\n        var endY = path ? path.y + path.length : 0;\n        if (endX !== lastAligningPosS1 || endY !== lastAligningPosS2) {\n          result.push(new SequenceDiff(new OffsetRange(endX, lastAligningPosS1), new OffsetRange(endY, lastAligningPosS2)));\n        }\n        if (!path) {\n          break;\n        }\n        lastAligningPosS1 = path.x;\n        lastAligningPosS2 = path.y;\n        path = path.prev;\n      }\n      result.reverse();\n      return new DiffAlgorithmResult(result, false);\n    };\n    return MyersDiffAlgorithm;\n  }();\n  var SnakePath = /** @class */function () {\n    function SnakePath(prev, x, y, length) {\n      this.prev = prev;\n      this.x = x;\n      this.y = y;\n      this.length = length;\n    }\n    return SnakePath;\n  }();\n  var FastInt32Array = /** @class */function () {\n    function FastInt32Array() {\n      this.positiveArr = new Int32Array(10);\n      this.negativeArr = new Int32Array(10);\n    }\n    FastInt32Array.prototype.get = function (idx) {\n      if (idx < 0) {\n        idx = -idx - 1;\n        return this.negativeArr[idx];\n      } else {\n        return this.positiveArr[idx];\n      }\n    };\n    FastInt32Array.prototype.set = function (idx, value) {\n      if (idx < 0) {\n        idx = -idx - 1;\n        if (idx >= this.negativeArr.length) {\n          var arr = this.negativeArr;\n          this.negativeArr = new Int32Array(arr.length * 2);\n          this.negativeArr.set(arr);\n        }\n        this.negativeArr[idx] = value;\n      } else {\n        if (idx >= this.positiveArr.length) {\n          var arr = this.positiveArr;\n          this.positiveArr = new Int32Array(arr.length * 2);\n          this.positiveArr.set(arr);\n        }\n        this.positiveArr[idx] = value;\n      }\n    };\n    return FastInt32Array;\n  }();\n  var FastArrayNegativeIndices = /** @class */function () {\n    function FastArrayNegativeIndices() {\n      this.positiveArr = [];\n      this.negativeArr = [];\n    }\n    FastArrayNegativeIndices.prototype.get = function (idx) {\n      if (idx < 0) {\n        idx = -idx - 1;\n        return this.negativeArr[idx];\n      } else {\n        return this.positiveArr[idx];\n      }\n    };\n    FastArrayNegativeIndices.prototype.set = function (idx, value) {\n      if (idx < 0) {\n        idx = -idx - 1;\n        this.negativeArr[idx] = value;\n      } else {\n        this.positiveArr[idx] = value;\n      }\n    };\n    return FastArrayNegativeIndices;\n  }();\n  var SetMap = /** @class */function () {\n    function SetMap() {\n      this.map = /* @__PURE__ */new Map();\n    }\n    SetMap.prototype.add = function (key, value) {\n      var values = this.map.get(key);\n      if (!values) {\n        values = /* @__PURE__ */new Set();\n        this.map.set(key, values);\n      }\n      values.add(value);\n    };\n    SetMap.prototype.forEach = function (key, fn) {\n      var values = this.map.get(key);\n      if (!values) {\n        return;\n      }\n      values.forEach(fn);\n    };\n    SetMap.prototype.get = function (key) {\n      var values = this.map.get(key);\n      if (!values) {\n        return /* @__PURE__ */new Set();\n      }\n      return values;\n    };\n    return SetMap;\n  }();\n  var LinesSliceCharSequence = /** @class */function () {\n    function LinesSliceCharSequence(lines, range, considerWhitespaceChanges) {\n      this.lines = lines;\n      this.range = range;\n      this.considerWhitespaceChanges = considerWhitespaceChanges;\n      this.elements = [];\n      this.firstElementOffsetByLineIdx = [];\n      this.lineStartOffsets = [];\n      this.trimmedWsLengthsByLineIdx = [];\n      this.firstElementOffsetByLineIdx.push(0);\n      for (var lineNumber = this.range.startLineNumber; lineNumber <= this.range.endLineNumber; lineNumber++) {\n        var line = lines[lineNumber - 1];\n        var lineStartOffset = 0;\n        if (lineNumber === this.range.startLineNumber && this.range.startColumn > 1) {\n          lineStartOffset = this.range.startColumn - 1;\n          line = line.substring(lineStartOffset);\n        }\n        this.lineStartOffsets.push(lineStartOffset);\n        var trimmedWsLength = 0;\n        if (!considerWhitespaceChanges) {\n          var trimmedStartLine = line.trimStart();\n          trimmedWsLength = line.length - trimmedStartLine.length;\n          line = trimmedStartLine.trimEnd();\n        }\n        this.trimmedWsLengthsByLineIdx.push(trimmedWsLength);\n        var lineLength = lineNumber === this.range.endLineNumber ? Math.min(this.range.endColumn - 1 - lineStartOffset - trimmedWsLength, line.length) : line.length;\n        for (var i = 0; i < lineLength; i++) {\n          this.elements.push(line.charCodeAt(i));\n        }\n        if (lineNumber < this.range.endLineNumber) {\n          this.elements.push(\"\\n\".charCodeAt(0));\n          this.firstElementOffsetByLineIdx.push(this.elements.length);\n        }\n      }\n    }\n    LinesSliceCharSequence.prototype.toString = function () {\n      return \"Slice: \\\"\".concat(this.text, \"\\\"\");\n    };\n    Object.defineProperty(LinesSliceCharSequence.prototype, \"text\", {\n      get: function () {\n        return this.getText(new OffsetRange(0, this.length));\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LinesSliceCharSequence.prototype.getText = function (range) {\n      return this.elements.slice(range.start, range.endExclusive).map(function (e) {\n        return String.fromCharCode(e);\n      }).join(\"\");\n    };\n    LinesSliceCharSequence.prototype.getElement = function (offset) {\n      return this.elements[offset];\n    };\n    Object.defineProperty(LinesSliceCharSequence.prototype, \"length\", {\n      get: function () {\n        return this.elements.length;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LinesSliceCharSequence.prototype.getBoundaryScore = function (length) {\n      var prevCategory = getCategory(length > 0 ? this.elements[length - 1] : -1);\n      var nextCategory = getCategory(length < this.elements.length ? this.elements[length] : -1);\n      if (prevCategory === 7 /* LineBreakCR */ && nextCategory === 8 /* LineBreakLF */) {\n        return 0;\n      }\n      if (prevCategory === 8 /* LineBreakLF */) {\n        return 150;\n      }\n      var score2 = 0;\n      if (prevCategory !== nextCategory) {\n        score2 += 10;\n        if (prevCategory === 0 /* WordLower */ && nextCategory === 1 /* WordUpper */) {\n          score2 += 1;\n        }\n      }\n      score2 += getCategoryBoundaryScore(prevCategory);\n      score2 += getCategoryBoundaryScore(nextCategory);\n      return score2;\n    };\n    LinesSliceCharSequence.prototype.translateOffset = function (offset, preference) {\n      if (preference === void 0) {\n        preference = \"right\";\n      }\n      var i = findLastIdxMonotonous(this.firstElementOffsetByLineIdx, function (value) {\n        return value <= offset;\n      });\n      var lineOffset = offset - this.firstElementOffsetByLineIdx[i];\n      return new Position(this.range.startLineNumber + i, 1 + this.lineStartOffsets[i] + lineOffset + (lineOffset === 0 && preference === \"left\" ? 0 : this.trimmedWsLengthsByLineIdx[i]));\n    };\n    LinesSliceCharSequence.prototype.translateRange = function (range) {\n      var pos1 = this.translateOffset(range.start, \"right\");\n      var pos2 = this.translateOffset(range.endExclusive, \"left\");\n      if (pos2.isBefore(pos1)) {\n        return Range.fromPositions(pos2, pos2);\n      }\n      return Range.fromPositions(pos1, pos2);\n    };\n    LinesSliceCharSequence.prototype.findWordContaining = function (offset) {\n      if (offset < 0 || offset >= this.elements.length) {\n        return undefined;\n      }\n      if (!isWordChar(this.elements[offset])) {\n        return undefined;\n      }\n      var start = offset;\n      while (start > 0 && isWordChar(this.elements[start - 1])) {\n        start--;\n      }\n      var end = offset;\n      while (end < this.elements.length && isWordChar(this.elements[end])) {\n        end++;\n      }\n      return new OffsetRange(start, end);\n    };\n    LinesSliceCharSequence.prototype.findSubWordContaining = function (offset) {\n      if (offset < 0 || offset >= this.elements.length) {\n        return undefined;\n      }\n      if (!isWordChar(this.elements[offset])) {\n        return undefined;\n      }\n      var start = offset;\n      while (start > 0 && isWordChar(this.elements[start - 1]) && !isUpperCase(this.elements[start])) {\n        start--;\n      }\n      var end = offset;\n      while (end < this.elements.length && isWordChar(this.elements[end]) && !isUpperCase(this.elements[end])) {\n        end++;\n      }\n      return new OffsetRange(start, end);\n    };\n    LinesSliceCharSequence.prototype.countLinesIn = function (range) {\n      return this.translateOffset(range.endExclusive).lineNumber - this.translateOffset(range.start).lineNumber;\n    };\n    LinesSliceCharSequence.prototype.isStronglyEqual = function (offset1, offset2) {\n      return this.elements[offset1] === this.elements[offset2];\n    };\n    LinesSliceCharSequence.prototype.extendToFullLines = function (range) {\n      var _a, _g;\n      var start = (_a = findLastMonotonous(this.firstElementOffsetByLineIdx, function (x) {\n        return x <= range.start;\n      })) !== null && _a !== void 0 ? _a : 0;\n      var end = (_g = findFirstMonotonous(this.firstElementOffsetByLineIdx, function (x) {\n        return range.endExclusive <= x;\n      })) !== null && _g !== void 0 ? _g : this.elements.length;\n      return new OffsetRange(start, end);\n    };\n    return LinesSliceCharSequence;\n  }();\n  function isWordChar(charCode) {\n    return charCode >= 97 && charCode <= 122 || charCode >= 65 && charCode <= 90 || charCode >= 48 && charCode <= 57;\n  }\n  function isUpperCase(charCode) {\n    return charCode >= 65 && charCode <= 90;\n  }\n  var score = (_a = {}, _a[0 /* WordLower */] = 0, _a[1 /* WordUpper */] = 0, _a[2 /* WordNumber */] = 0, _a[3 /* End */] = 10, _a[4 /* Other */] = 2, _a[5 /* Separator */] = 30, _a[6 /* Space */] = 3, _a[7 /* LineBreakCR */] = 10, _a[8 /* LineBreakLF */] = 10, _a);\n  function getCategoryBoundaryScore(category) {\n    return score[category];\n  }\n  function getCategory(charCode) {\n    if (charCode === 10) {\n      return 8 /* LineBreakLF */;\n    } else if (charCode === 13) {\n      return 7 /* LineBreakCR */;\n    } else if (isSpace(charCode)) {\n      return 6 /* Space */;\n    } else if (charCode >= 97 && charCode <= 122) {\n      return 0 /* WordLower */;\n    } else if (charCode >= 65 && charCode <= 90) {\n      return 1 /* WordUpper */;\n    } else if (charCode >= 48 && charCode <= 57) {\n      return 2 /* WordNumber */;\n    } else if (charCode === -1) {\n      return 3 /* End */;\n    } else if (charCode === 44 || charCode === 59) {\n      return 5 /* Separator */;\n    } else {\n      return 4 /* Other */;\n    }\n  }\n  function computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout) {\n    var _a = computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout),\n      moves = _a.moves,\n      excludedChanges = _a.excludedChanges;\n    if (!timeout.isValid()) {\n      return [];\n    }\n    var filteredChanges = changes.filter(function (c) {\n      return !excludedChanges.has(c);\n    });\n    var unchangedMoves = computeUnchangedMoves(filteredChanges, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout);\n    pushMany(moves, unchangedMoves);\n    moves = joinCloseConsecutiveMoves(moves);\n    moves = moves.filter(function (current) {\n      var lines = current.original.toOffsetRange().slice(originalLines).map(function (l) {\n        return l.trim();\n      });\n      var originalText = lines.join(\"\\n\");\n      return originalText.length >= 15 && countWhere(lines, function (l) {\n        return l.length >= 2;\n      }) >= 2;\n    });\n    moves = removeMovesInSameDiff(changes, moves);\n    return moves;\n  }\n  function countWhere(arr, predicate) {\n    var e_6, _a;\n    var count = 0;\n    try {\n      for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n        var t = arr_1_1.value;\n        if (predicate(t)) {\n          count++;\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n    return count;\n  }\n  function computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout) {\n    var e_7, _a, e_8, _g;\n    var moves = [];\n    var deletions = changes.filter(function (c) {\n      return c.modified.isEmpty && c.original.length >= 3;\n    }).map(function (d) {\n      return new LineRangeFragment(d.original, originalLines, d);\n    });\n    var insertions = new Set(changes.filter(function (c) {\n      return c.original.isEmpty && c.modified.length >= 3;\n    }).map(function (d) {\n      return new LineRangeFragment(d.modified, modifiedLines, d);\n    }));\n    var excludedChanges = /* @__PURE__ */new Set();\n    try {\n      for (var deletions_1 = __values(deletions), deletions_1_1 = deletions_1.next(); !deletions_1_1.done; deletions_1_1 = deletions_1.next()) {\n        var deletion = deletions_1_1.value;\n        var highestSimilarity = -1;\n        var best = void 0;\n        try {\n          for (var insertions_1 = (e_8 = void 0, __values(insertions)), insertions_1_1 = insertions_1.next(); !insertions_1_1.done; insertions_1_1 = insertions_1.next()) {\n            var insertion = insertions_1_1.value;\n            var similarity = deletion.computeSimilarity(insertion);\n            if (similarity > highestSimilarity) {\n              highestSimilarity = similarity;\n              best = insertion;\n            }\n          }\n        } catch (e_8_1) {\n          e_8 = {\n            error: e_8_1\n          };\n        } finally {\n          try {\n            if (insertions_1_1 && !insertions_1_1.done && (_g = insertions_1.return)) _g.call(insertions_1);\n          } finally {\n            if (e_8) throw e_8.error;\n          }\n        }\n        if (highestSimilarity > 0.9 && best) {\n          insertions.delete(best);\n          moves.push(new LineRangeMapping(deletion.range, best.range));\n          excludedChanges.add(deletion.source);\n          excludedChanges.add(best.source);\n        }\n        if (!timeout.isValid()) {\n          return {\n            moves: moves,\n            excludedChanges: excludedChanges\n          };\n        }\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (deletions_1_1 && !deletions_1_1.done && (_a = deletions_1.return)) _a.call(deletions_1);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n    return {\n      moves: moves,\n      excludedChanges: excludedChanges\n    };\n  }\n  function computeUnchangedMoves(changes, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout) {\n    var e_9, _a, e_10, _g, e_11, _h, e_12, _j;\n    var moves = [];\n    var original3LineHashes = new SetMap();\n    try {\n      for (var changes_1 = __values(changes), changes_1_1 = changes_1.next(); !changes_1_1.done; changes_1_1 = changes_1.next()) {\n        var change = changes_1_1.value;\n        for (var i = change.original.startLineNumber; i < change.original.endLineNumberExclusive - 2; i++) {\n          var key = \"\".concat(hashedOriginalLines[i - 1], \":\").concat(hashedOriginalLines[i + 1 - 1], \":\").concat(hashedOriginalLines[i + 2 - 1]);\n          original3LineHashes.add(key, {\n            range: new LineRange(i, i + 3)\n          });\n        }\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (changes_1_1 && !changes_1_1.done && (_a = changes_1.return)) _a.call(changes_1);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n    var possibleMappings = [];\n    changes.sort(compareBy(function (c) {\n      return c.modified.startLineNumber;\n    }, numberComparator));\n    var _loop_1 = function (change) {\n      var lastMappings = [];\n      var _loop_3 = function (i) {\n        var key = \"\".concat(hashedModifiedLines[i - 1], \":\").concat(hashedModifiedLines[i + 1 - 1], \":\").concat(hashedModifiedLines[i + 2 - 1]);\n        var currentModifiedRange = new LineRange(i, i + 3);\n        var nextMappings = [];\n        original3LineHashes.forEach(key, function (_a) {\n          var e_13, _g;\n          var range = _a.range;\n          try {\n            for (var lastMappings_1 = (e_13 = void 0, __values(lastMappings)), lastMappings_1_1 = lastMappings_1.next(); !lastMappings_1_1.done; lastMappings_1_1 = lastMappings_1.next()) {\n              var lastMapping = lastMappings_1_1.value;\n              if (lastMapping.originalLineRange.endLineNumberExclusive + 1 === range.endLineNumberExclusive && lastMapping.modifiedLineRange.endLineNumberExclusive + 1 === currentModifiedRange.endLineNumberExclusive) {\n                lastMapping.originalLineRange = new LineRange(lastMapping.originalLineRange.startLineNumber, range.endLineNumberExclusive);\n                lastMapping.modifiedLineRange = new LineRange(lastMapping.modifiedLineRange.startLineNumber, currentModifiedRange.endLineNumberExclusive);\n                nextMappings.push(lastMapping);\n                return;\n              }\n            }\n          } catch (e_13_1) {\n            e_13 = {\n              error: e_13_1\n            };\n          } finally {\n            try {\n              if (lastMappings_1_1 && !lastMappings_1_1.done && (_g = lastMappings_1.return)) _g.call(lastMappings_1);\n            } finally {\n              if (e_13) throw e_13.error;\n            }\n          }\n          var mapping = {\n            modifiedLineRange: currentModifiedRange,\n            originalLineRange: range\n          };\n          possibleMappings.push(mapping);\n          nextMappings.push(mapping);\n        });\n        lastMappings = nextMappings;\n      };\n      for (var i = change.modified.startLineNumber; i < change.modified.endLineNumberExclusive - 2; i++) {\n        _loop_3(i);\n      }\n      if (!timeout.isValid()) {\n        return {\n          value: []\n        };\n      }\n    };\n    try {\n      for (var changes_2 = __values(changes), changes_2_1 = changes_2.next(); !changes_2_1.done; changes_2_1 = changes_2.next()) {\n        var change = changes_2_1.value;\n        var state_1 = _loop_1(change);\n        if (typeof state_1 === \"object\") return state_1.value;\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (changes_2_1 && !changes_2_1.done && (_g = changes_2.return)) _g.call(changes_2);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n    possibleMappings.sort(reverseOrder(compareBy(function (m) {\n      return m.modifiedLineRange.length;\n    }, numberComparator)));\n    var modifiedSet = new LineRangeSet();\n    var originalSet = new LineRangeSet();\n    try {\n      for (var possibleMappings_1 = __values(possibleMappings), possibleMappings_1_1 = possibleMappings_1.next(); !possibleMappings_1_1.done; possibleMappings_1_1 = possibleMappings_1.next()) {\n        var mapping = possibleMappings_1_1.value;\n        var diffOrigToMod = mapping.modifiedLineRange.startLineNumber - mapping.originalLineRange.startLineNumber;\n        var modifiedSections = modifiedSet.subtractFrom(mapping.modifiedLineRange);\n        var originalTranslatedSections = originalSet.subtractFrom(mapping.originalLineRange).getWithDelta(diffOrigToMod);\n        var modifiedIntersectedSections = modifiedSections.getIntersection(originalTranslatedSections);\n        try {\n          for (var _k = (e_12 = void 0, __values(modifiedIntersectedSections.ranges)), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var s = _l.value;\n            if (s.length < 3) {\n              continue;\n            }\n            var modifiedLineRange = s;\n            var originalLineRange = s.delta(-diffOrigToMod);\n            moves.push(new LineRangeMapping(originalLineRange, modifiedLineRange));\n            modifiedSet.addRange(modifiedLineRange);\n            originalSet.addRange(originalLineRange);\n          }\n        } catch (e_12_1) {\n          e_12 = {\n            error: e_12_1\n          };\n        } finally {\n          try {\n            if (_l && !_l.done && (_j = _k.return)) _j.call(_k);\n          } finally {\n            if (e_12) throw e_12.error;\n          }\n        }\n      }\n    } catch (e_11_1) {\n      e_11 = {\n        error: e_11_1\n      };\n    } finally {\n      try {\n        if (possibleMappings_1_1 && !possibleMappings_1_1.done && (_h = possibleMappings_1.return)) _h.call(possibleMappings_1);\n      } finally {\n        if (e_11) throw e_11.error;\n      }\n    }\n    moves.sort(compareBy(function (m) {\n      return m.original.startLineNumber;\n    }, numberComparator));\n    var monotonousChanges = new MonotonousArray(changes);\n    var _loop_2 = function (i) {\n      var move = moves[i];\n      var firstTouchingChangeOrig = monotonousChanges.findLastMonotonous(function (c) {\n        return c.original.startLineNumber <= move.original.startLineNumber;\n      });\n      var firstTouchingChangeMod = findLastMonotonous(changes, function (c) {\n        return c.modified.startLineNumber <= move.modified.startLineNumber;\n      });\n      var linesAbove = Math.max(move.original.startLineNumber - firstTouchingChangeOrig.original.startLineNumber, move.modified.startLineNumber - firstTouchingChangeMod.modified.startLineNumber);\n      var lastTouchingChangeOrig = monotonousChanges.findLastMonotonous(function (c) {\n        return c.original.startLineNumber < move.original.endLineNumberExclusive;\n      });\n      var lastTouchingChangeMod = findLastMonotonous(changes, function (c) {\n        return c.modified.startLineNumber < move.modified.endLineNumberExclusive;\n      });\n      var linesBelow = Math.max(lastTouchingChangeOrig.original.endLineNumberExclusive - move.original.endLineNumberExclusive, lastTouchingChangeMod.modified.endLineNumberExclusive - move.modified.endLineNumberExclusive);\n      var extendToTop = void 0;\n      for (extendToTop = 0; extendToTop < linesAbove; extendToTop++) {\n        var origLine = move.original.startLineNumber - extendToTop - 1;\n        var modLine = move.modified.startLineNumber - extendToTop - 1;\n        if (origLine > originalLines.length || modLine > modifiedLines.length) {\n          break;\n        }\n        if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n          break;\n        }\n        if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n          break;\n        }\n      }\n      if (extendToTop > 0) {\n        originalSet.addRange(new LineRange(move.original.startLineNumber - extendToTop, move.original.startLineNumber));\n        modifiedSet.addRange(new LineRange(move.modified.startLineNumber - extendToTop, move.modified.startLineNumber));\n      }\n      var extendToBottom = void 0;\n      for (extendToBottom = 0; extendToBottom < linesBelow; extendToBottom++) {\n        var origLine = move.original.endLineNumberExclusive + extendToBottom;\n        var modLine = move.modified.endLineNumberExclusive + extendToBottom;\n        if (origLine > originalLines.length || modLine > modifiedLines.length) {\n          break;\n        }\n        if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n          break;\n        }\n        if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n          break;\n        }\n      }\n      if (extendToBottom > 0) {\n        originalSet.addRange(new LineRange(move.original.endLineNumberExclusive, move.original.endLineNumberExclusive + extendToBottom));\n        modifiedSet.addRange(new LineRange(move.modified.endLineNumberExclusive, move.modified.endLineNumberExclusive + extendToBottom));\n      }\n      if (extendToTop > 0 || extendToBottom > 0) {\n        moves[i] = new LineRangeMapping(new LineRange(move.original.startLineNumber - extendToTop, move.original.endLineNumberExclusive + extendToBottom), new LineRange(move.modified.startLineNumber - extendToTop, move.modified.endLineNumberExclusive + extendToBottom));\n      }\n    };\n    for (var i = 0; i < moves.length; i++) {\n      _loop_2(i);\n    }\n    return moves;\n  }\n  function areLinesSimilar(line1, line2, timeout) {\n    var e_14, _a;\n    if (line1.trim() === line2.trim()) {\n      return true;\n    }\n    if (line1.length > 300 && line2.length > 300) {\n      return false;\n    }\n    var myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    var result = myersDiffingAlgorithm.compute(new LinesSliceCharSequence([line1], new Range(1, 1, 1, line1.length), false), new LinesSliceCharSequence([line2], new Range(1, 1, 1, line2.length), false), timeout);\n    var commonNonSpaceCharCount = 0;\n    var inverted = SequenceDiff.invert(result.diffs, line1.length);\n    try {\n      for (var inverted_1 = __values(inverted), inverted_1_1 = inverted_1.next(); !inverted_1_1.done; inverted_1_1 = inverted_1.next()) {\n        var seq = inverted_1_1.value;\n        seq.seq1Range.forEach(function (idx) {\n          if (!isSpace(line1.charCodeAt(idx))) {\n            commonNonSpaceCharCount++;\n          }\n        });\n      }\n    } catch (e_14_1) {\n      e_14 = {\n        error: e_14_1\n      };\n    } finally {\n      try {\n        if (inverted_1_1 && !inverted_1_1.done && (_a = inverted_1.return)) _a.call(inverted_1);\n      } finally {\n        if (e_14) throw e_14.error;\n      }\n    }\n    function countNonWsChars(str) {\n      var count = 0;\n      for (var i = 0; i < line1.length; i++) {\n        if (!isSpace(str.charCodeAt(i))) {\n          count++;\n        }\n      }\n      return count;\n    }\n    var longerLineLength = countNonWsChars(line1.length > line2.length ? line1 : line2);\n    var r = commonNonSpaceCharCount / longerLineLength > 0.6 && longerLineLength > 10;\n    return r;\n  }\n  function joinCloseConsecutiveMoves(moves) {\n    if (moves.length === 0) {\n      return moves;\n    }\n    moves.sort(compareBy(function (m) {\n      return m.original.startLineNumber;\n    }, numberComparator));\n    var result = [moves[0]];\n    for (var i = 1; i < moves.length; i++) {\n      var last = result[result.length - 1];\n      var current = moves[i];\n      var originalDist = current.original.startLineNumber - last.original.endLineNumberExclusive;\n      var modifiedDist = current.modified.startLineNumber - last.modified.endLineNumberExclusive;\n      var currentMoveAfterLast = originalDist >= 0 && modifiedDist >= 0;\n      if (currentMoveAfterLast && originalDist + modifiedDist <= 2) {\n        result[result.length - 1] = last.join(current);\n        continue;\n      }\n      result.push(current);\n    }\n    return result;\n  }\n  function removeMovesInSameDiff(changes, moves) {\n    var changesMonotonous = new MonotonousArray(changes);\n    moves = moves.filter(function (m) {\n      var diffBeforeEndOfMoveOriginal = changesMonotonous.findLastMonotonous(function (c) {\n        return c.original.startLineNumber < m.original.endLineNumberExclusive;\n      }) || new LineRangeMapping(new LineRange(1, 1), new LineRange(1, 1));\n      var diffBeforeEndOfMoveModified = findLastMonotonous(changes, function (c) {\n        return c.modified.startLineNumber < m.modified.endLineNumberExclusive;\n      });\n      var differentDiffs = diffBeforeEndOfMoveOriginal !== diffBeforeEndOfMoveModified;\n      return differentDiffs;\n    });\n    return moves;\n  }\n  function optimizeSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    var result = sequenceDiffs;\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    result = shiftSequenceDiffs(sequence1, sequence2, result);\n    return result;\n  }\n  function joinSequenceDiffsByShifting(sequence1, sequence2, sequenceDiffs) {\n    if (sequenceDiffs.length === 0) {\n      return sequenceDiffs;\n    }\n    var result = [];\n    result.push(sequenceDiffs[0]);\n    for (var i = 1; i < sequenceDiffs.length; i++) {\n      var prevResult = result[result.length - 1];\n      var cur = sequenceDiffs[i];\n      if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n        var length = cur.seq1Range.start - prevResult.seq1Range.endExclusive;\n        var d = void 0;\n        for (d = 1; d <= length; d++) {\n          if (sequence1.getElement(cur.seq1Range.start - d) !== sequence1.getElement(cur.seq1Range.endExclusive - d) || sequence2.getElement(cur.seq2Range.start - d) !== sequence2.getElement(cur.seq2Range.endExclusive - d)) {\n            break;\n          }\n        }\n        d--;\n        if (d === length) {\n          result[result.length - 1] = new SequenceDiff(new OffsetRange(prevResult.seq1Range.start, cur.seq1Range.endExclusive - length), new OffsetRange(prevResult.seq2Range.start, cur.seq2Range.endExclusive - length));\n          continue;\n        }\n        cur = cur.delta(-d);\n      }\n      result.push(cur);\n    }\n    var result2 = [];\n    for (var i = 0; i < result.length - 1; i++) {\n      var nextResult = result[i + 1];\n      var cur = result[i];\n      if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n        var length = nextResult.seq1Range.start - cur.seq1Range.endExclusive;\n        var d = void 0;\n        for (d = 0; d < length; d++) {\n          if (!sequence1.isStronglyEqual(cur.seq1Range.start + d, cur.seq1Range.endExclusive + d) || !sequence2.isStronglyEqual(cur.seq2Range.start + d, cur.seq2Range.endExclusive + d)) {\n            break;\n          }\n        }\n        if (d === length) {\n          result[i + 1] = new SequenceDiff(new OffsetRange(cur.seq1Range.start + length, nextResult.seq1Range.endExclusive), new OffsetRange(cur.seq2Range.start + length, nextResult.seq2Range.endExclusive));\n          continue;\n        }\n        if (d > 0) {\n          cur = cur.delta(d);\n        }\n      }\n      result2.push(cur);\n    }\n    if (result.length > 0) {\n      result2.push(result[result.length - 1]);\n    }\n    return result2;\n  }\n  function shiftSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    if (!sequence1.getBoundaryScore || !sequence2.getBoundaryScore) {\n      return sequenceDiffs;\n    }\n    for (var i = 0; i < sequenceDiffs.length; i++) {\n      var prevDiff = i > 0 ? sequenceDiffs[i - 1] : undefined;\n      var diff = sequenceDiffs[i];\n      var nextDiff = i + 1 < sequenceDiffs.length ? sequenceDiffs[i + 1] : undefined;\n      var seq1ValidRange = new OffsetRange(prevDiff ? prevDiff.seq1Range.endExclusive + 1 : 0, nextDiff ? nextDiff.seq1Range.start - 1 : sequence1.length);\n      var seq2ValidRange = new OffsetRange(prevDiff ? prevDiff.seq2Range.endExclusive + 1 : 0, nextDiff ? nextDiff.seq2Range.start - 1 : sequence2.length);\n      if (diff.seq1Range.isEmpty) {\n        sequenceDiffs[i] = shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange);\n      } else if (diff.seq2Range.isEmpty) {\n        sequenceDiffs[i] = shiftDiffToBetterPosition(diff.swap(), sequence2, sequence1, seq2ValidRange, seq1ValidRange).swap();\n      }\n    }\n    return sequenceDiffs;\n  }\n  function shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange) {\n    var maxShiftLimit = 100;\n    var deltaBefore = 1;\n    while (diff.seq1Range.start - deltaBefore >= seq1ValidRange.start && diff.seq2Range.start - deltaBefore >= seq2ValidRange.start && sequence2.isStronglyEqual(diff.seq2Range.start - deltaBefore, diff.seq2Range.endExclusive - deltaBefore) && deltaBefore < maxShiftLimit) {\n      deltaBefore++;\n    }\n    deltaBefore--;\n    var deltaAfter = 0;\n    while (diff.seq1Range.start + deltaAfter < seq1ValidRange.endExclusive && diff.seq2Range.endExclusive + deltaAfter < seq2ValidRange.endExclusive && sequence2.isStronglyEqual(diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter) && deltaAfter < maxShiftLimit) {\n      deltaAfter++;\n    }\n    if (deltaBefore === 0 && deltaAfter === 0) {\n      return diff;\n    }\n    var bestDelta = 0;\n    var bestScore = -1;\n    for (var delta = -deltaBefore; delta <= deltaAfter; delta++) {\n      var seq2OffsetStart = diff.seq2Range.start + delta;\n      var seq2OffsetEndExclusive = diff.seq2Range.endExclusive + delta;\n      var seq1Offset = diff.seq1Range.start + delta;\n      var score_1 = sequence1.getBoundaryScore(seq1Offset) + sequence2.getBoundaryScore(seq2OffsetStart) + sequence2.getBoundaryScore(seq2OffsetEndExclusive);\n      if (score_1 > bestScore) {\n        bestScore = score_1;\n        bestDelta = delta;\n      }\n    }\n    return diff.delta(bestDelta);\n  }\n  function removeShortMatches(sequence1, sequence2, sequenceDiffs) {\n    var e_15, _a;\n    var result = [];\n    try {\n      for (var sequenceDiffs_2 = __values(sequenceDiffs), sequenceDiffs_2_1 = sequenceDiffs_2.next(); !sequenceDiffs_2_1.done; sequenceDiffs_2_1 = sequenceDiffs_2.next()) {\n        var s = sequenceDiffs_2_1.value;\n        var last = result[result.length - 1];\n        if (!last) {\n          result.push(s);\n          continue;\n        }\n        if (s.seq1Range.start - last.seq1Range.endExclusive <= 2 || s.seq2Range.start - last.seq2Range.endExclusive <= 2) {\n          result[result.length - 1] = new SequenceDiff(last.seq1Range.join(s.seq1Range), last.seq2Range.join(s.seq2Range));\n        } else {\n          result.push(s);\n        }\n      }\n    } catch (e_15_1) {\n      e_15 = {\n        error: e_15_1\n      };\n    } finally {\n      try {\n        if (sequenceDiffs_2_1 && !sequenceDiffs_2_1.done && (_a = sequenceDiffs_2.return)) _a.call(sequenceDiffs_2);\n      } finally {\n        if (e_15) throw e_15.error;\n      }\n    }\n    return result;\n  }\n  function extendDiffsToEntireWordIfAppropriate(sequence1, sequence2, sequenceDiffs, findParent, force) {\n    if (force === void 0) {\n      force = false;\n    }\n    var equalMappings = SequenceDiff.invert(sequenceDiffs, sequence1.length);\n    var additional = [];\n    var lastPoint = new OffsetPair(0, 0);\n    function scanWord(pair, equalMapping) {\n      if (pair.offset1 < lastPoint.offset1 || pair.offset2 < lastPoint.offset2) {\n        return;\n      }\n      var w1 = findParent(sequence1, pair.offset1);\n      var w2 = findParent(sequence2, pair.offset2);\n      if (!w1 || !w2) {\n        return;\n      }\n      var w = new SequenceDiff(w1, w2);\n      var equalPart = w.intersect(equalMapping);\n      var equalChars1 = equalPart.seq1Range.length;\n      var equalChars2 = equalPart.seq2Range.length;\n      while (equalMappings.length > 0) {\n        var next = equalMappings[0];\n        var intersects = next.seq1Range.intersects(w.seq1Range) || next.seq2Range.intersects(w.seq2Range);\n        if (!intersects) {\n          break;\n        }\n        var v1 = findParent(sequence1, next.seq1Range.start);\n        var v2 = findParent(sequence2, next.seq2Range.start);\n        var v = new SequenceDiff(v1, v2);\n        var equalPart2 = v.intersect(next);\n        equalChars1 += equalPart2.seq1Range.length;\n        equalChars2 += equalPart2.seq2Range.length;\n        w = w.join(v);\n        if (w.seq1Range.endExclusive >= next.seq1Range.endExclusive) {\n          equalMappings.shift();\n        } else {\n          break;\n        }\n      }\n      if (force && equalChars1 + equalChars2 < w.seq1Range.length + w.seq2Range.length || equalChars1 + equalChars2 < (w.seq1Range.length + w.seq2Range.length) * 2 / 3) {\n        additional.push(w);\n      }\n      lastPoint = w.getEndExclusives();\n    }\n    while (equalMappings.length > 0) {\n      var next = equalMappings.shift();\n      if (next.seq1Range.isEmpty) {\n        continue;\n      }\n      scanWord(next.getStarts(), next);\n      scanWord(next.getEndExclusives().delta(-1), next);\n    }\n    var merged = mergeSequenceDiffs(sequenceDiffs, additional);\n    return merged;\n  }\n  function mergeSequenceDiffs(sequenceDiffs1, sequenceDiffs2) {\n    var result = [];\n    while (sequenceDiffs1.length > 0 || sequenceDiffs2.length > 0) {\n      var sd1 = sequenceDiffs1[0];\n      var sd2 = sequenceDiffs2[0];\n      var next = void 0;\n      if (sd1 && (!sd2 || sd1.seq1Range.start < sd2.seq1Range.start)) {\n        next = sequenceDiffs1.shift();\n      } else {\n        next = sequenceDiffs2.shift();\n      }\n      if (result.length > 0 && result[result.length - 1].seq1Range.endExclusive >= next.seq1Range.start) {\n        result[result.length - 1] = result[result.length - 1].join(next);\n      } else {\n        result.push(next);\n      }\n    }\n    return result;\n  }\n  function removeVeryShortMatchingLinesBetweenDiffs(sequence1, _sequence2, sequenceDiffs) {\n    var diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n      return diffs;\n    }\n    var counter = 0;\n    var shouldRepeat;\n    do {\n      shouldRepeat = false;\n      var result = [diffs[0]];\n      var _loop_4 = function (i) {\n        var shouldJoinDiffs = function (before, after) {\n          var unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n          var unchangedText = sequence1.getText(unchangedRange);\n          var unchangedTextWithoutWs = unchangedText.replace(/\\s/g, \"\");\n          if (unchangedTextWithoutWs.length <= 4 && (before.seq1Range.length + before.seq2Range.length > 5 || after.seq1Range.length + after.seq2Range.length > 5)) {\n            return true;\n          }\n          return false;\n        };\n        var cur = diffs[i];\n        var lastResult = result[result.length - 1];\n        var shouldJoin = shouldJoinDiffs(lastResult, cur);\n        if (shouldJoin) {\n          shouldRepeat = true;\n          result[result.length - 1] = result[result.length - 1].join(cur);\n        } else {\n          result.push(cur);\n        }\n      };\n      for (var i = 1; i < diffs.length; i++) {\n        _loop_4(i);\n      }\n      diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    return diffs;\n  }\n  function removeVeryShortMatchingTextBetweenLongDiffs(sequence1, sequence2, sequenceDiffs) {\n    var diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n      return diffs;\n    }\n    var counter = 0;\n    var shouldRepeat;\n    do {\n      shouldRepeat = false;\n      var result = [diffs[0]];\n      var _loop_5 = function (i) {\n        var shouldJoinDiffs = function (before, after) {\n          var unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n          var unchangedLineCount = sequence1.countLinesIn(unchangedRange);\n          if (unchangedLineCount > 5 || unchangedRange.length > 500) {\n            return false;\n          }\n          var unchangedText = sequence1.getText(unchangedRange).trim();\n          if (unchangedText.length > 20 || unchangedText.split(/\\r\\n|\\r|\\n/).length > 1) {\n            return false;\n          }\n          var beforeLineCount1 = sequence1.countLinesIn(before.seq1Range);\n          var beforeSeq1Length = before.seq1Range.length;\n          var beforeLineCount2 = sequence2.countLinesIn(before.seq2Range);\n          var beforeSeq2Length = before.seq2Range.length;\n          var afterLineCount1 = sequence1.countLinesIn(after.seq1Range);\n          var afterSeq1Length = after.seq1Range.length;\n          var afterLineCount2 = sequence2.countLinesIn(after.seq2Range);\n          var afterSeq2Length = after.seq2Range.length;\n          var max = 2 * 40 + 50;\n          function cap(v) {\n            return Math.min(v, max);\n          }\n          if (Math.pow(Math.pow(cap(beforeLineCount1 * 40 + beforeSeq1Length), 1.5) + Math.pow(cap(beforeLineCount2 * 40 + beforeSeq2Length), 1.5), 1.5) + Math.pow(Math.pow(cap(afterLineCount1 * 40 + afterSeq1Length), 1.5) + Math.pow(cap(afterLineCount2 * 40 + afterSeq2Length), 1.5), 1.5) > Math.pow(Math.pow(max, 1.5), 1.5) * 1.3) {\n            return true;\n          }\n          return false;\n        };\n        var cur = diffs[i];\n        var lastResult = result[result.length - 1];\n        var shouldJoin = shouldJoinDiffs(lastResult, cur);\n        if (shouldJoin) {\n          shouldRepeat = true;\n          result[result.length - 1] = result[result.length - 1].join(cur);\n        } else {\n          result.push(cur);\n        }\n      };\n      for (var i = 1; i < diffs.length; i++) {\n        _loop_5(i);\n      }\n      diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    var newDiffs = [];\n    forEachWithNeighbors(diffs, function (prev, cur, next) {\n      var newDiff = cur;\n      function shouldMarkAsChanged(text) {\n        return text.length > 0 && text.trim().length <= 3 && cur.seq1Range.length + cur.seq2Range.length > 100;\n      }\n      var fullRange1 = sequence1.extendToFullLines(cur.seq1Range);\n      var prefix = sequence1.getText(new OffsetRange(fullRange1.start, cur.seq1Range.start));\n      if (shouldMarkAsChanged(prefix)) {\n        newDiff = newDiff.deltaStart(-prefix.length);\n      }\n      var suffix = sequence1.getText(new OffsetRange(cur.seq1Range.endExclusive, fullRange1.endExclusive));\n      if (shouldMarkAsChanged(suffix)) {\n        newDiff = newDiff.deltaEnd(suffix.length);\n      }\n      var availableSpace = SequenceDiff.fromOffsetPairs(prev ? prev.getEndExclusives() : OffsetPair.zero, next ? next.getStarts() : OffsetPair.max);\n      var result = newDiff.intersect(availableSpace);\n      if (newDiffs.length > 0 && result.getStarts().equals(newDiffs[newDiffs.length - 1].getEndExclusives())) {\n        newDiffs[newDiffs.length - 1] = newDiffs[newDiffs.length - 1].join(result);\n      } else {\n        newDiffs.push(result);\n      }\n    });\n    return newDiffs;\n  }\n  var LineSequence = /** @class */function () {\n    function LineSequence(trimmedHash, lines) {\n      this.trimmedHash = trimmedHash;\n      this.lines = lines;\n    }\n    LineSequence.prototype.getElement = function (offset) {\n      return this.trimmedHash[offset];\n    };\n    Object.defineProperty(LineSequence.prototype, \"length\", {\n      get: function () {\n        return this.trimmedHash.length;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    LineSequence.prototype.getBoundaryScore = function (length) {\n      var indentationBefore = length === 0 ? 0 : getIndentation(this.lines[length - 1]);\n      var indentationAfter = length === this.lines.length ? 0 : getIndentation(this.lines[length]);\n      return 1e3 - (indentationBefore + indentationAfter);\n    };\n    LineSequence.prototype.getText = function (range) {\n      return this.lines.slice(range.start, range.endExclusive).join(\"\\n\");\n    };\n    LineSequence.prototype.isStronglyEqual = function (offset1, offset2) {\n      return this.lines[offset1] === this.lines[offset2];\n    };\n    return LineSequence;\n  }();\n  function getIndentation(str) {\n    var i = 0;\n    while (i < str.length && (str.charCodeAt(i) === 32 || str.charCodeAt(i) === 9)) {\n      i++;\n    }\n    return i;\n  }\n  var DefaultLinesDiffComputer = /** @class */function () {\n    function DefaultLinesDiffComputer() {\n      this.dynamicProgrammingDiffing = new DynamicProgrammingDiffing();\n      this.myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    }\n    DefaultLinesDiffComputer.prototype.computeDiff = function (originalLines, modifiedLines, options) {\n      var e_16, _a;\n      var _this = this;\n      if (originalLines.length <= 1 && equals(originalLines, modifiedLines, function (a, b) {\n        return a === b;\n      })) {\n        return new LinesDiff([], [], false);\n      }\n      if (originalLines.length === 1 && originalLines[0].length === 0 || modifiedLines.length === 1 && modifiedLines[0].length === 0) {\n        return new LinesDiff([new DetailedLineRangeMapping(new LineRange(1, originalLines.length + 1), new LineRange(1, modifiedLines.length + 1), [new RangeMapping(new Range(1, 1, originalLines.length, originalLines[originalLines.length - 1].length + 1), new Range(1, 1, modifiedLines.length, modifiedLines[modifiedLines.length - 1].length + 1))])], [], false);\n      }\n      var timeout = options.maxComputationTimeMs === 0 ? InfiniteTimeout.instance : new DateTimeout(options.maxComputationTimeMs);\n      var considerWhitespaceChanges = !options.ignoreTrimWhitespace;\n      var perfectHashes = /* @__PURE__ */new Map();\n      function getOrCreateHash(text) {\n        var hash = perfectHashes.get(text);\n        if (hash === undefined) {\n          hash = perfectHashes.size;\n          perfectHashes.set(text, hash);\n        }\n        return hash;\n      }\n      var originalLinesHashes = originalLines.map(function (l) {\n        return getOrCreateHash(l.trim());\n      });\n      var modifiedLinesHashes = modifiedLines.map(function (l) {\n        return getOrCreateHash(l.trim());\n      });\n      var sequence1 = new LineSequence(originalLinesHashes, originalLines);\n      var sequence2 = new LineSequence(modifiedLinesHashes, modifiedLines);\n      var lineAlignmentResult = function () {\n        if (sequence1.length + sequence2.length < 1700) {\n          return _this.dynamicProgrammingDiffing.compute(sequence1, sequence2, timeout, function (offset1, offset2) {\n            return originalLines[offset1] === modifiedLines[offset2] ? modifiedLines[offset2].length === 0 ? 0.1 : 1 + Math.log(1 + modifiedLines[offset2].length) : 0.99;\n          });\n        }\n        return _this.myersDiffingAlgorithm.compute(sequence1, sequence2, timeout);\n      }();\n      var lineAlignments = lineAlignmentResult.diffs;\n      var hitTimeout = lineAlignmentResult.hitTimeout;\n      lineAlignments = optimizeSequenceDiffs(sequence1, sequence2, lineAlignments);\n      lineAlignments = removeVeryShortMatchingLinesBetweenDiffs(sequence1, sequence2, lineAlignments);\n      var alignments = [];\n      var scanForWhitespaceChanges = function (equalLinesCount) {\n        var e_17, _a;\n        if (!considerWhitespaceChanges) {\n          return;\n        }\n        for (var i = 0; i < equalLinesCount; i++) {\n          var seq1Offset = seq1LastStart + i;\n          var seq2Offset = seq2LastStart + i;\n          if (originalLines[seq1Offset] !== modifiedLines[seq2Offset]) {\n            var characterDiffs = _this.refineDiff(originalLines, modifiedLines, new SequenceDiff(new OffsetRange(seq1Offset, seq1Offset + 1), new OffsetRange(seq2Offset, seq2Offset + 1)), timeout, considerWhitespaceChanges, options);\n            try {\n              for (var _g = (e_17 = void 0, __values(characterDiffs.mappings)), _h = _g.next(); !_h.done; _h = _g.next()) {\n                var a = _h.value;\n                alignments.push(a);\n              }\n            } catch (e_17_1) {\n              e_17 = {\n                error: e_17_1\n              };\n            } finally {\n              try {\n                if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n              } finally {\n                if (e_17) throw e_17.error;\n              }\n            }\n            if (characterDiffs.hitTimeout) {\n              hitTimeout = true;\n            }\n          }\n        }\n      };\n      var seq1LastStart = 0;\n      var seq2LastStart = 0;\n      var _loop_6 = function (diff) {\n        var e_18, _g;\n        assertFn(function () {\n          return diff.seq1Range.start - seq1LastStart === diff.seq2Range.start - seq2LastStart;\n        });\n        var equalLinesCount = diff.seq1Range.start - seq1LastStart;\n        scanForWhitespaceChanges(equalLinesCount);\n        seq1LastStart = diff.seq1Range.endExclusive;\n        seq2LastStart = diff.seq2Range.endExclusive;\n        var characterDiffs = this_1.refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges, options);\n        if (characterDiffs.hitTimeout) {\n          hitTimeout = true;\n        }\n        try {\n          for (var _h = (e_18 = void 0, __values(characterDiffs.mappings)), _j = _h.next(); !_j.done; _j = _h.next()) {\n            var a = _j.value;\n            alignments.push(a);\n          }\n        } catch (e_18_1) {\n          e_18 = {\n            error: e_18_1\n          };\n        } finally {\n          try {\n            if (_j && !_j.done && (_g = _h.return)) _g.call(_h);\n          } finally {\n            if (e_18) throw e_18.error;\n          }\n        }\n      };\n      var this_1 = this;\n      try {\n        for (var lineAlignments_1 = __values(lineAlignments), lineAlignments_1_1 = lineAlignments_1.next(); !lineAlignments_1_1.done; lineAlignments_1_1 = lineAlignments_1.next()) {\n          var diff = lineAlignments_1_1.value;\n          _loop_6(diff);\n        }\n      } catch (e_16_1) {\n        e_16 = {\n          error: e_16_1\n        };\n      } finally {\n        try {\n          if (lineAlignments_1_1 && !lineAlignments_1_1.done && (_a = lineAlignments_1.return)) _a.call(lineAlignments_1);\n        } finally {\n          if (e_16) throw e_16.error;\n        }\n      }\n      scanForWhitespaceChanges(originalLines.length - seq1LastStart);\n      var changes = lineRangeMappingFromRangeMappings(alignments, new ArrayText(originalLines), new ArrayText(modifiedLines));\n      var moves = [];\n      if (options.computeMoves) {\n        moves = this.computeMoves(changes, originalLines, modifiedLines, originalLinesHashes, modifiedLinesHashes, timeout, considerWhitespaceChanges, options);\n      }\n      assertFn(function () {\n        var e_19, _a, e_20, _g;\n        function validatePosition(pos, lines) {\n          if (pos.lineNumber < 1 || pos.lineNumber > lines.length) {\n            return false;\n          }\n          var line = lines[pos.lineNumber - 1];\n          if (pos.column < 1 || pos.column > line.length + 1) {\n            return false;\n          }\n          return true;\n        }\n        function validateRange(range, lines) {\n          if (range.startLineNumber < 1 || range.startLineNumber > lines.length + 1) {\n            return false;\n          }\n          if (range.endLineNumberExclusive < 1 || range.endLineNumberExclusive > lines.length + 1) {\n            return false;\n          }\n          return true;\n        }\n        try {\n          for (var changes_3 = __values(changes), changes_3_1 = changes_3.next(); !changes_3_1.done; changes_3_1 = changes_3.next()) {\n            var c = changes_3_1.value;\n            if (!c.innerChanges) {\n              return false;\n            }\n            try {\n              for (var _h = (e_20 = void 0, __values(c.innerChanges)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                var ic = _j.value;\n                var valid = validatePosition(ic.modifiedRange.getStartPosition(), modifiedLines) && validatePosition(ic.modifiedRange.getEndPosition(), modifiedLines) && validatePosition(ic.originalRange.getStartPosition(), originalLines) && validatePosition(ic.originalRange.getEndPosition(), originalLines);\n                if (!valid) {\n                  return false;\n                }\n              }\n            } catch (e_20_1) {\n              e_20 = {\n                error: e_20_1\n              };\n            } finally {\n              try {\n                if (_j && !_j.done && (_g = _h.return)) _g.call(_h);\n              } finally {\n                if (e_20) throw e_20.error;\n              }\n            }\n            if (!validateRange(c.modified, modifiedLines) || !validateRange(c.original, originalLines)) {\n              return false;\n            }\n          }\n        } catch (e_19_1) {\n          e_19 = {\n            error: e_19_1\n          };\n        } finally {\n          try {\n            if (changes_3_1 && !changes_3_1.done && (_a = changes_3.return)) _a.call(changes_3);\n          } finally {\n            if (e_19) throw e_19.error;\n          }\n        }\n        return true;\n      });\n      return new LinesDiff(changes, moves, hitTimeout);\n    };\n    DefaultLinesDiffComputer.prototype.computeMoves = function (changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout, considerWhitespaceChanges, options) {\n      var _this = this;\n      var moves = computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout);\n      var movesWithDiffs = moves.map(function (m) {\n        var moveChanges = _this.refineDiff(originalLines, modifiedLines, new SequenceDiff(m.original.toOffsetRange(), m.modified.toOffsetRange()), timeout, considerWhitespaceChanges, options);\n        var mappings = lineRangeMappingFromRangeMappings(moveChanges.mappings, new ArrayText(originalLines), new ArrayText(modifiedLines), true);\n        return new MovedText(m, mappings);\n      });\n      return movesWithDiffs;\n    };\n    DefaultLinesDiffComputer.prototype.refineDiff = function (originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges, options) {\n      var lineRangeMapping = toLineRangeMapping(diff);\n      var rangeMapping = lineRangeMapping.toRangeMapping2(originalLines, modifiedLines);\n      var slice1 = new LinesSliceCharSequence(originalLines, rangeMapping.originalRange, considerWhitespaceChanges);\n      var slice2 = new LinesSliceCharSequence(modifiedLines, rangeMapping.modifiedRange, considerWhitespaceChanges);\n      var diffResult = slice1.length + slice2.length < 500 ? this.dynamicProgrammingDiffing.compute(slice1, slice2, timeout) : this.myersDiffingAlgorithm.compute(slice1, slice2, timeout);\n      var diffs = diffResult.diffs;\n      diffs = optimizeSequenceDiffs(slice1, slice2, diffs);\n      diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs, function (seq, idx) {\n        return seq.findWordContaining(idx);\n      });\n      if (options.extendToSubwords) {\n        diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs, function (seq, idx) {\n          return seq.findSubWordContaining(idx);\n        }, true);\n      }\n      diffs = removeShortMatches(slice1, slice2, diffs);\n      diffs = removeVeryShortMatchingTextBetweenLongDiffs(slice1, slice2, diffs);\n      var result = diffs.map(function (d) {\n        return new RangeMapping(slice1.translateRange(d.seq1Range), slice2.translateRange(d.seq2Range));\n      });\n      return {\n        mappings: result,\n        hitTimeout: diffResult.hitTimeout\n      };\n    };\n    return DefaultLinesDiffComputer;\n  }();\n  function toLineRangeMapping(sequenceDiff) {\n    return new LineRangeMapping(new LineRange(sequenceDiff.seq1Range.start + 1, sequenceDiff.seq1Range.endExclusive + 1), new LineRange(sequenceDiff.seq2Range.start + 1, sequenceDiff.seq2Range.endExclusive + 1));\n  }\n  function computeDiff(originalLines, modifiedLines, options) {\n    var diffComputer = new DefaultLinesDiffComputer();\n    var result = diffComputer.computeDiff(originalLines, modifiedLines, options);\n    return result === null || result === void 0 ? void 0 : result.changes.map(function (changes) {\n      var originalStartLineNumber;\n      var originalEndLineNumber;\n      var modifiedStartLineNumber;\n      var modifiedEndLineNumber;\n      var innerChanges = changes.innerChanges;\n      originalStartLineNumber = changes.original.startLineNumber - 1;\n      originalEndLineNumber = changes.original.endLineNumberExclusive - 1;\n      modifiedStartLineNumber = changes.modified.startLineNumber - 1;\n      modifiedEndLineNumber = changes.modified.endLineNumberExclusive - 1;\n      return {\n        origStart: originalStartLineNumber,\n        origEnd: originalEndLineNumber,\n        editStart: modifiedStartLineNumber,\n        editEnd: modifiedEndLineNumber,\n        charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(function (m) {\n          return {\n            originalStartLineNumber: m.originalRange.startLineNumber - 1,\n            originalStartColumn: m.originalRange.startColumn - 1,\n            originalEndLineNumber: m.originalRange.endLineNumber - 1,\n            originalEndColumn: m.originalRange.endColumn - 1,\n            modifiedStartLineNumber: m.modifiedRange.startLineNumber - 1,\n            modifiedStartColumn: m.modifiedRange.startColumn - 1,\n            modifiedEndLineNumber: m.modifiedRange.endLineNumber - 1,\n            modifiedEndColumn: m.modifiedRange.endColumn - 1\n          };\n        })\n      };\n    });\n  }\n  exports.computeDiff = computeDiff;\n  var AceRange = require(\"../../../range\").Range;\n  var DiffChunk = require(\"../base_diff_view\").DiffChunk;\n  var DiffProvider = /** @class */function () {\n    function DiffProvider() {}\n    DiffProvider.prototype.compute = function (originalLines, modifiedLines, opts) {\n      if (!opts) opts = {};\n      if (!opts.maxComputationTimeMs) opts.maxComputationTimeMs = 500;\n      var chunks = computeDiff(originalLines, modifiedLines, opts) || [];\n      return chunks.map(function (c) {\n        return new DiffChunk(new AceRange(c.origStart, 0, c.origEnd, 0), new AceRange(c.editStart, 0, c.editEnd, 0), c.charChanges);\n      });\n    };\n    return DiffProvider;\n  }();\n  exports.DiffProvider = DiffProvider;\n});\nace.define(\"ace/ext/diff\", [\"require\", \"exports\", \"module\", \"ace/ext/diff/inline_diff_view\", \"ace/ext/diff/split_diff_view\", \"ace/ext/diff/providers/default\"], function (require, exports, module) {\n  /**\n  * ## Diff extension\n  *\n  * Provides side-by-side and inline diff view capabilities for comparing code differences between two versions.\n  * Supports visual highlighting of additions, deletions, and modifications with customizable diff providers\n  * and rendering options. Includes features for synchronized scrolling, line number alignment, and\n  * various diff computation algorithms.\n  *\n  * **Components:**\n  * - `InlineDiffView`: Single editor view showing changes inline with markers\n  * - `SplitDiffView`: Side-by-side comparison view with two synchronized editors\n  * - `DiffProvider`: Configurable algorithms for computing differences\n  *\n  * **Usage:**\n  * ```javascript\n  * const diffView = createDiffView({\n  *   valueA: originalContent,\n  *   valueB: modifiedContent,\n  *   inline: false // or 'a'/'b' for inline view\n  * });\n  * ```\n  *\n  * @module\n  */\n  var InlineDiffView = require(\"./diff/inline_diff_view\").InlineDiffView;\n  var SplitDiffView = require(\"./diff/split_diff_view\").SplitDiffView;\n  var DiffProvider = require(\"./diff/providers/default\").DiffProvider;\n  function createDiffView(diffModel, options) {\n    diffModel = diffModel || {};\n    diffModel.diffProvider = diffModel.diffProvider || new DiffProvider(); //use default diff provider;\n    var diffView;\n    if (diffModel.inline) {\n      diffView = new InlineDiffView(diffModel);\n    } else {\n      diffView = new SplitDiffView(diffModel);\n    }\n    if (options) {\n      diffView.setOptions(options);\n    }\n    return diffView;\n  }\n  exports.InlineDiffView = InlineDiffView;\n  exports.SplitDiffView = SplitDiffView;\n  exports.DiffProvider = DiffProvider;\n  exports.createDiffView = createDiffView;\n});\n(function () {\n  ace.require([\"ace/ext/diff\"], function (m) {\n    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n      module.exports = m;\n    }\n  });\n})();","map":{"version":3,"names":["ace","define","require","exports","module","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","TypeError","String","__","constructor","create","__values","o","s","Symbol","iterator","m","i","length","next","value","done","Decorator","ScrollDiffDecorator","_super","scrollbarV","renderer","forInlineDiff","_this","colors","dark","light","$zones","$forInlineDiff","addZone","startRow","endRow","type","push","setSessions","sessionA","sessionB","$updateDecorators","config","canvas","getContext","theme","isDark","ctx","$setDiffDecorators","$transformPosition","row","documentToScreenRow","e_1","_a","compare","a","from","to","zones","resolvedZones","deleteZones","filter","z","insertZones","forEach","typeZones","zone","offset1","lineHeight","offset2","y1","Math","round","heightRatio","y2","padding","ycenter","halfHeight","halfMinDecorationHeight","previousZone","canvasHeight","color","sort","resolvedZones_1","resolvedZones_1_1","fillStyle","zoneFrom","zoneTo","zoneHeight","fillRect","oneZoneWidth","e_1_1","error","return","setZoneWidth","canvasWidth","cssText","dom","MinimalGutterDiffDecorator","editor","gutterClass","gutterCellsClasses","add","delete","chunks","attachToEditor","renderGutters","bind","addCssClass","$gutterLayer","element","on","e","gutterLayer","cells","$lines","cell","classList","remove","values","dir","diffClass","lineChange","start","end","setDecorations","changes","dispose","removeCssClass","off","__read","n","r","ar","oop","Range","LineWidgets","css","Editor","Renderer","VirtualRenderer","UndoManager","EditSession","dummyDiffProvider","compute","val1","val2","options","BaseDiffView","inlineDiffEditor","container","onChangeTheme","onInput","onChangeFold","realign","onSelect","onChangeWrapLimit","realignPending","diffSession","currentDiffIndex","diffProvider","importCssString","$ignoreTrimWhitespace","$maxDiffs","$maxComputationTimeMs","$syncSelections","$foldUnchangedOnInput","markerB","DiffHighlight","markerA","$setupModels","diffModel","setProvider","showSideA","inline","undefined","diffEditorOptions","scrollPastEnd","highlightActiveLine","highlightGutterLine","animatedScroll","customScrollbar","vScrollBarAlwaysVisible","fadeFoldWidgets","showFoldWidgets","selectionStyle","savedOptionsA","editorA","getOptions","savedOptionsB","editorB","$setupModel","valueA","appendChild","setOptions","valueB","activeEditor","otherSession","cloneOptions","readOnly","mode","otherEditor","setDiffSession","session","setupScrollbars","addGutterDecorators","gutterDecoratorA","gutterDecoratorB","setUndoManager","setValue","foldUnchanged","placeholder","repeat","prev","old","new","foldsChanged","current","getLength","l","fold1","addFold","Number","MAX_VALUE","fold2","unfoldUnchanged","folds","getAllFolds","fold","removeFold","toggleFoldUnchanged","$detachSessionsEventHandlers","clearSelectionMarkers","setSession","$attachSessionsEventHandlers","initSelectionMarkers","getDiffSession","setTheme","getTheme","resize","force","scheduleOnInput","$onInputTimer","setTimeout","clearTimeout","doc","getAllLines","selectionRangeA","selectionRangeB","$diffLines","align","updateBackMarkers","updateScrollBarDecorators","setupScrollBar","$setScrollBarDecorators","$scrollDecorator","destroy","scrollBarV","setVisible","style","bottom","scrollBarH","getHeight","$resetDecorators","updateDecorators","change","layerConfig","ignoreTrimWhitespace","maxComputationTimeMs","provider","$addWidget","w","lineWidget","lineWidgets","rowsAbove","rowCount","widgetManager","$resetRowCache","getFoldAt","updateOnFold","data","action","$initWidgets","attach","$screenRow","pos","documentToScreenPosition","afterEnd","selection","searchHighlight","syncSelect","$updatingSelection","isOld","selectionRange","getRange","currSelectionRange","isEqual","newRange","transformRange","setSelectionRange","updateSelectionMarker","syncSelectionMarkerA","syncSelectionMarkerB","marker","range","setRange","_signal","ev","$syncingFold","scheduleRealign","isOrig","other","addLineWidget","isEmpty","removeLineWidget","detach","$detachEventHandlers","$removeLineWidgets","clearSelection","gotoNext","sideA","lead","findChunkIndex","chunk","scrollTop","getScrollTop","line","max","scrollSelectionIntoView","anchor","animateScrolling","firstDiffSelected","lastDiffSelected","isOriginal","fromPoints","transformPosition","chunkIndex","clonePos","result","deltaChar","ignoreIndent","charChanges","fromRange","toRange","isMultiLine","contains","column","maxRow","getLine","min","_b","fromEditSession","toEditSession","$getDeltaIndent","fromLine","toLine","origIndent","$getIndent","editIndent","editSession","match","printDiffs","diff","console","log","toString","ch","currSession","highlight","$searchHighlight","regExp","SyncSelectionMarker","addDynamicMarker","removeMarker","id","defineOptions","showOtherLineNumbers","set","$renderer","emptyGutterRenderer","updateFull","initialValue","folding","setOption","posA","posB","x","unfold","syncSelections","wrap","maxDiffs","get","getText","name","params","getWidth","DiffChunk","originalRange","modifiedRange","map","originalStartLineNumber","originalStartColumn","originalEndLineNumber","originalEndColumn","modifiedStartLineNumber","modifiedStartColumn","modifiedEndLineNumber","modifiedEndColumn","diffView","update","html","markerLayer","operation","opOperation","lineChanges","firstRow","lastRow","hidden","drawFullLineMarker","toScreenRange","changeRange","lineNumber","startColumn","endColumn","sessionLineStart","sessionLineEnd","range_1","screenRange","cssClass","drawSingleLineMarker","range_2","drawTextMarker","clazz","clone","InlineDiffView","init","onAfterRender","resetOptions","$padding","setPadding","textLayer","$textLayer","$markerBack","cursorLayer","$cursorLayer","$updateCachedSize","textLayerElement","parentNode","insertBefore","markerLayerElement","nextSibling","gutterLayerElement","position","width","$updateGutterWidth","initMouse","initTextInput","initTextLayer","initRenderer","$attachEventHandlers","selectEditor","restore","$getLongestLine","getLongestLine","renderLine","$renderLine","parent","foldLIne","isVisibleRow","side","mid","floor","chunkStart","textInput","othertextInput","otherEditorContainer","setHost","setStyle","display","removeBracketHighlight","$isFocused","onFocus","$bracketHighlight","markerIds","$loop","scroller","getBoundingClientRect","forwardEvent","domEvent","screenPos","pixelToScreenCoordinates","clientX","clientY","screenToDocumentPosition","offsetX","posAx","posBx","propagationStopped","defaultPrevented","$mouseHandler","onMouseEvent","events","event","onBlur","onMouseDetach","diff1","diff2","adjustWrapLimit","$wrapLimit","$attachSessionEventHandlers","$detachSessionHandlers","bgTokenizer","lines","fill","textContent","cloneRenderer","$scrollTop","$scrollLeft","scrollLeft","prop","$computeLayerConfig","newConfig","firstRowScreen","CHANGE_LINES","CHANGE_FULL","CHANGE_SCROLL","CHANGE_TEXT","setMarkers","getMarkers","SplitDiffView","onMouseWheel","onScroll","syncScroll","$syncScroll","r1","r2","now","Date","scrollSetBy","scrollSetAt","scrollA","scrollB","rOther","targetPos","setScrollTop","getAccelKey","getShiftKey","wheelY","wheelX","isScrolable","isScrollableBy","speed","scrollBy","stop","$detachEditorEventHandlers","__generator","thisArg","body","_","label","sent","t","trys","ops","f","y","g","Iterator","verb","v","step","op","pop","_c","_d","_e","_f","equals","one","itemEquals","len","groupAdjacentBy","items","shouldBeGrouped","currentGroup","last","items_1","items_1_1","item","_g","forEachAdjacent","arr","forEachWithNeighbors","pushMany","e_2","items_2","items_2_1","e_2_1","compareBy","selector","comparator","numberComparator","reverseOrder","BugIndicatingError","message","Error","assert","condition","concat","assertFn","checkAdjacentItems","predicate","OffsetRange","endExclusive","fromTo","addRange","sortedRanges","j","splice","tryCreate","ofLength","ofStartAndLength","emptyAt","offset","defineProperty","enumerable","configurable","delta","deltaStart","deltaEnd","containsRange","join","intersect","intersectionLength","intersects","intersectsOrTouches","isBefore","isAfter","slice","substring","str","clip","clipCyclic","Position","isBeforeOrEqual","startLineNumber","endLineNumber","containsPosition","otherRange","strictContainsRange","plusRange","intersectRanges","resultStartLineNumber","resultStartColumn","resultEndLineNumber","resultEndColumn","otherStartLineNumber","otherStartColumn","otherEndLineNumber","otherEndColumn","equalsRange","getEndPosition","getStartPosition","collapseToStart","collapseToEnd","fromPositions","findLastMonotonous","array","idx","findLastIdxMonotonous","startIdx","endIdxEx","k","findFirstMonotonous","findFirstIdxMonotonousOrArrLen","MonotonousArray","_array","_findLastMonotonousLastIdx","e_3","assertInvariants","_prevFindLastPredicate","_h","e_3_1","LineRange","endLineNumberExclusive","fromRangeInclusive","lineRanges","overlapOrTouch","toInclusiveRange","MAX_SAFE_INTEGER","toOffsetRange","LineRangeSet","_normalizedRanges","joinRangeStartIdx","joinRangeEndIdxExclusive","joinRange","rangeThatStartsBeforeEnd","subtractFrom","getIntersection","i1","i2","getWithDelta","TextLength","lineCount","columnCount","toLineRange","addToPosition","zero","LineBasedText","_getLineContent","_lineCount","getValueOfRange","getLineLength","lastLine","ArrayText","LinesDiff","moves","hitTimeout","MovedText","lineRangeMapping","LineRangeMapping","original","modified","toRangeMapping","origInclusiveRange","modInclusiveRange","RangeMapping","toRangeMapping2","isValidLineNumber","normalizePosition","content","DetailedLineRangeMapping","innerChanges","fromRangeMappings","rangeMappings","flip","c","withInnerChangesFromLineRanges","assertSorted","previous","lineRangeMappingFromRangeMappings","alignments","originalLines","modifiedLines","dontAssertStartLine","e_4","getLineRangeMapping","a1","a2","first","e_4_1","m1","m2","rangeMapping","lineStartDelta","lineEndDelta","originalLineRange","modifiedLineRange","DiffAlgorithmResult","diffs","trivial","seq1","seq2","SequenceDiff","trivialTimedOut","seq1Range","seq2Range","invert","sequenceDiffs","doc1Length","fromOffsetPairs","getEndExclusives","OffsetPair","getStarts","e_5","sequenceDiffs_1","sequenceDiffs_1_1","cur","e_5_1","swap","InfiniteTimeout","isValid","instance","DateTimeout","timeout","startTime","valid","disable","Array2D","height","isSpace","charCode","LineRangeFragment","source","histogram","counter","chr","key2","getKey","key","totalCount","chrKeys","size","computeSimilarity","sumDifferences","maxLength","abs","Map","DynamicProgrammingDiffing","sequence1","sequence2","equalityScore","lcsLengths","directions","lengths","s12","s22","horizontalLen","verticalLen","extendedSeqScore","getElement","newValue","prevLen","lastAligningPosS1","lastAligningPosS2","reportDecreasingAligningPositions","s1","s2","reverse","MyersDiffAlgorithm","seqX","seqY","getXAfterSnake","V","FastInt32Array","paths","FastArrayNegativeIndices","SnakePath","loop","lowerBound","upperBound","maxXofDLineTop","maxXofDLineLeft","newMaxX","lastPath","path","endX","endY","positiveArr","Int32Array","negativeArr","SetMap","Set","fn","LinesSliceCharSequence","considerWhitespaceChanges","elements","firstElementOffsetByLineIdx","lineStartOffsets","trimmedWsLengthsByLineIdx","lineStartOffset","trimmedWsLength","trimmedStartLine","trimStart","trimEnd","lineLength","charCodeAt","text","fromCharCode","getBoundaryScore","prevCategory","getCategory","nextCategory","score2","getCategoryBoundaryScore","translateOffset","preference","lineOffset","translateRange","pos1","pos2","findWordContaining","isWordChar","findSubWordContaining","isUpperCase","countLinesIn","isStronglyEqual","extendToFullLines","score","category","computeMovedLines","hashedOriginalLines","hashedModifiedLines","computeMovesFromSimpleDeletionsToSimpleInsertions","excludedChanges","filteredChanges","has","unchangedMoves","computeUnchangedMoves","joinCloseConsecutiveMoves","trim","originalText","countWhere","removeMovesInSameDiff","e_6","count","arr_1","arr_1_1","e_6_1","e_7","e_8","deletions","insertions","deletions_1","deletions_1_1","deletion","highestSimilarity","best","insertions_1","insertions_1_1","insertion","similarity","e_8_1","e_7_1","e_9","e_10","e_11","e_12","_j","original3LineHashes","changes_1","changes_1_1","e_9_1","possibleMappings","_loop_1","lastMappings","_loop_3","currentModifiedRange","nextMappings","e_13","lastMappings_1","lastMappings_1_1","lastMapping","e_13_1","mapping","changes_2","changes_2_1","state_1","e_10_1","modifiedSet","originalSet","possibleMappings_1","possibleMappings_1_1","diffOrigToMod","modifiedSections","originalTranslatedSections","modifiedIntersectedSections","_k","ranges","_l","e_12_1","e_11_1","monotonousChanges","_loop_2","move","firstTouchingChangeOrig","firstTouchingChangeMod","linesAbove","lastTouchingChangeOrig","lastTouchingChangeMod","linesBelow","extendToTop","origLine","modLine","areLinesSimilar","extendToBottom","line1","line2","e_14","myersDiffingAlgorithm","commonNonSpaceCharCount","inverted","inverted_1","inverted_1_1","seq","e_14_1","countNonWsChars","longerLineLength","originalDist","modifiedDist","currentMoveAfterLast","changesMonotonous","diffBeforeEndOfMoveOriginal","diffBeforeEndOfMoveModified","differentDiffs","optimizeSequenceDiffs","joinSequenceDiffsByShifting","shiftSequenceDiffs","prevResult","result2","nextResult","prevDiff","nextDiff","seq1ValidRange","seq2ValidRange","shiftDiffToBetterPosition","maxShiftLimit","deltaBefore","deltaAfter","bestDelta","bestScore","seq2OffsetStart","seq2OffsetEndExclusive","seq1Offset","score_1","removeShortMatches","e_15","sequenceDiffs_2","sequenceDiffs_2_1","e_15_1","extendDiffsToEntireWordIfAppropriate","findParent","equalMappings","additional","lastPoint","scanWord","pair","equalMapping","w1","w2","equalPart","equalChars1","equalChars2","v1","v2","equalPart2","shift","merged","mergeSequenceDiffs","sequenceDiffs1","sequenceDiffs2","sd1","sd2","removeVeryShortMatchingLinesBetweenDiffs","_sequence2","shouldRepeat","_loop_4","shouldJoinDiffs","before","after","unchangedRange","lastResult","unchangedText","unchangedTextWithoutWs","replace","shouldJoin","removeVeryShortMatchingTextBetweenLongDiffs","_loop_5","unchangedLineCount","split","beforeLineCount1","beforeSeq1Length","beforeLineCount2","beforeSeq2Length","afterLineCount1","afterSeq1Length","afterLineCount2","afterSeq2Length","cap","pow","newDiffs","newDiff","shouldMarkAsChanged","fullRange1","prefix","suffix","availableSpace","LineSequence","trimmedHash","indentationBefore","getIndentation","indentationAfter","DefaultLinesDiffComputer","dynamicProgrammingDiffing","computeDiff","e_16","perfectHashes","getOrCreateHash","hash","originalLinesHashes","modifiedLinesHashes","lineAlignmentResult","lineAlignments","scanForWhitespaceChanges","equalLinesCount","e_17","seq1LastStart","seq2Offset","seq2LastStart","characterDiffs","refineDiff","mappings","e_17_1","_loop_6","e_18","this_1","e_18_1","lineAlignments_1","lineAlignments_1_1","e_16_1","computeMoves","e_19","e_20","validatePosition","validateRange","changes_3","changes_3_1","ic","e_20_1","e_19_1","movesWithDiffs","moveChanges","toLineRangeMapping","slice1","slice2","diffResult","extendToSubwords","sequenceDiff","diffComputer","origStart","origEnd","editStart","editEnd","AceRange","DiffProvider","opts","createDiffView"],"sources":["C:/Users/jean9/Desktop/projeto_rm/components/streamlit_ace/frontend/node_modules/ace-builds/src-noconflict/ext-diff.js"],"sourcesContent":["ace.define(\"ace/ext/diff/scroll_diff_decorator\",[\"require\",\"exports\",\"module\",\"ace/layer/decorators\"], function(require, exports, module){var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar Decorator = require(\"../../layer/decorators\").Decorator;\nvar ScrollDiffDecorator = /** @class */ (function (_super) {\n    __extends(ScrollDiffDecorator, _super);\n    function ScrollDiffDecorator(scrollbarV, renderer, forInlineDiff) {\n        var _this = _super.call(this, scrollbarV, renderer) || this;\n        _this.colors.dark[\"delete\"] = \"rgba(255, 18, 18, 1)\";\n        _this.colors.dark[\"insert\"] = \"rgba(18, 136, 18, 1)\";\n        _this.colors.light[\"delete\"] = \"rgb(255,51,51)\";\n        _this.colors.light[\"insert\"] = \"rgb(32,133,72)\";\n        _this.$zones = [];\n        _this.$forInlineDiff = forInlineDiff;\n        return _this;\n    }\n    ScrollDiffDecorator.prototype.addZone = function (startRow, endRow, type) {\n        this.$zones.push({\n            startRow: startRow,\n            endRow: endRow,\n            type: type\n        });\n    };\n    ScrollDiffDecorator.prototype.setSessions = function (sessionA, sessionB) {\n        this.sessionA = sessionA;\n        this.sessionB = sessionB;\n    };\n    ScrollDiffDecorator.prototype.$updateDecorators = function (config) {\n        if (typeof this.canvas.getContext !== \"function\") {\n            return;\n        }\n        _super.prototype.$updateDecorators.call(this, config);\n        if (this.$zones.length > 0) {\n            var colors = (this.renderer.theme.isDark === true) ? this.colors.dark : this.colors.light;\n            var ctx = this.canvas.getContext(\"2d\");\n            this.$setDiffDecorators(ctx, colors);\n        }\n    };\n    ScrollDiffDecorator.prototype.$transformPosition = function (row, type) {\n        if (type == \"delete\") {\n            return this.sessionA.documentToScreenRow(row, 0);\n        }\n        else {\n            return this.sessionB.documentToScreenRow(row, 0);\n        }\n    };\n    ScrollDiffDecorator.prototype.$setDiffDecorators = function (ctx, colors) {\n        var e_1, _a;\n        var _this = this;\n        function compare(a, b) {\n            if (a.from === b.from) {\n                return a.to - b.to;\n            }\n            return a.from - b.from;\n        }\n        var zones = this.$zones;\n        if (zones) {\n            var resolvedZones = [];\n            var deleteZones = zones.filter(function (z) { return z.type === \"delete\"; });\n            var insertZones = zones.filter(function (z) { return z.type === \"insert\"; });\n            [deleteZones, insertZones].forEach(function (typeZones) {\n                typeZones.forEach(function (zone, i) {\n                    var offset1 = _this.$transformPosition(zone.startRow, zone.type) * _this.lineHeight;\n                    var offset2 = _this.$transformPosition(zone.endRow, zone.type) * _this.lineHeight + _this.lineHeight;\n                    var y1 = Math.round(_this.heightRatio * offset1);\n                    var y2 = Math.round(_this.heightRatio * offset2);\n                    var padding = 1;\n                    var ycenter = Math.round((y1 + y2) / 2);\n                    var halfHeight = (y2 - ycenter);\n                    if (halfHeight < _this.halfMinDecorationHeight) {\n                        halfHeight = _this.halfMinDecorationHeight;\n                    }\n                    var previousZone = resolvedZones[resolvedZones.length - 1];\n                    if (i > 0 && previousZone && previousZone.type === zone.type && ycenter - halfHeight < previousZone.to + padding) {\n                        ycenter = resolvedZones[resolvedZones.length - 1].to + padding + halfHeight;\n                    }\n                    if (ycenter - halfHeight < 0) {\n                        ycenter = halfHeight;\n                    }\n                    if (ycenter + halfHeight > _this.canvasHeight) {\n                        ycenter = _this.canvasHeight - halfHeight;\n                    }\n                    resolvedZones.push({\n                        type: zone.type,\n                        from: ycenter - halfHeight,\n                        to: ycenter + halfHeight,\n                        color: colors[zone.type] || null\n                    });\n                });\n            });\n            resolvedZones = resolvedZones.sort(compare);\n            try {\n                for (var resolvedZones_1 = __values(resolvedZones), resolvedZones_1_1 = resolvedZones_1.next(); !resolvedZones_1_1.done; resolvedZones_1_1 = resolvedZones_1.next()) {\n                    var zone = resolvedZones_1_1.value;\n                    ctx.fillStyle = zone.color || null;\n                    var zoneFrom = zone.from;\n                    var zoneTo = zone.to;\n                    var zoneHeight = zoneTo - zoneFrom;\n                    if (this.$forInlineDiff) {\n                        ctx.fillRect(this.oneZoneWidth, zoneFrom, 2 * this.oneZoneWidth, zoneHeight);\n                    }\n                    else {\n                        if (zone.type == \"delete\") {\n                            ctx.fillRect(this.oneZoneWidth, zoneFrom, this.oneZoneWidth, zoneHeight);\n                        }\n                        else {\n                            ctx.fillRect(2 * this.oneZoneWidth, zoneFrom, this.oneZoneWidth, zoneHeight);\n                        }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (resolvedZones_1_1 && !resolvedZones_1_1.done && (_a = resolvedZones_1.return)) _a.call(resolvedZones_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        }\n    };\n    ScrollDiffDecorator.prototype.setZoneWidth = function () {\n        this.oneZoneWidth = Math.round(this.canvasWidth / 3);\n    };\n    return ScrollDiffDecorator;\n}(Decorator));\nexports.ScrollDiffDecorator = ScrollDiffDecorator;\n\n});\n\nace.define(\"ace/ext/diff/styles-css.js\",[\"require\",\"exports\",\"module\"], function(require, exports, module){exports.cssText = \"\\n/*\\n * Line Markers\\n */\\n.ace_diff {\\n    position: absolute;\\n    z-index: 0;\\n}\\n.ace_diff.inline {\\n    z-index: 20;\\n}\\n/*\\n * Light Colors \\n */\\n.ace_diff.insert {\\n    background-color: #EFFFF1;\\n}\\n.ace_diff.delete {\\n    background-color: #FFF1F1;\\n}\\n.ace_diff.aligned_diff {\\n    background: rgba(206, 194, 191, 0.26);\\n    background: repeating-linear-gradient(\\n                45deg,\\n              rgba(122, 111, 108, 0.26),\\n              rgba(122, 111, 108, 0.26) 5px,\\n              rgba(0, 0, 0, 0) 5px,\\n              rgba(0, 0, 0, 0) 10px \\n    );\\n}\\n\\n.ace_diff.insert.inline {\\n    background-color:  rgb(74 251 74 / 18%); \\n}\\n.ace_diff.delete.inline {\\n    background-color: rgb(251 74 74 / 15%);\\n}\\n\\n.ace_diff.delete.inline.empty {\\n    background-color: rgba(255, 128, 79, 0.7);\\n    width: 2px !important;\\n}\\n\\n.ace_diff.insert.inline.empty {\\n    background-color: rgba(49, 230, 96, 0.7);\\n    width: 2px !important;\\n}\\n\\n.ace_diff-active-line {\\n    border-bottom: 1px solid;\\n    border-top: 1px solid;\\n    background: transparent;\\n    position: absolute;\\n    box-sizing: border-box;\\n    border-color: #9191ac;\\n}\\n\\n.ace_dark .ace_diff-active-line {\\n    background: transparent;\\n    border-color: #75777a;\\n}\\n \\n\\n/* gutter changes */\\n.ace_mini-diff_gutter-enabled > .ace_gutter-cell,\\n.ace_mini-diff_gutter-enabled > .ace_gutter-cell_svg-icons {\\n    padding-right: 13px;\\n}\\n\\n.ace_mini-diff_gutter_other > .ace_gutter-cell,\\n.ace_mini-diff_gutter_other > .ace_gutter-cell_svg-icons  {\\n    display: none;\\n}\\n\\n.ace_mini-diff_gutter_other {\\n    pointer-events: none;\\n}\\n\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-added {\\n    background-color: #EFFFF1;\\n    border-left: 3px solid #2BB534;\\n    padding-left: 16px;\\n    display: block;\\n}\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-deleted {\\n    background-color: #FFF1F1;\\n    border-left: 3px solid #EA7158;\\n    padding-left: 16px;\\n    display: block;\\n}\\n\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-added:after {\\n    position: absolute;\\n    right: 2px;\\n    content: \\\"+\\\";\\n    color: darkgray;\\n    background-color: inherit;\\n}\\n\\n.ace_mini-diff_gutter-enabled > .mini-diff-deleted:after {\\n    position: absolute;\\n    right: 2px;\\n    content: \\\"-\\\";\\n    color: darkgray;\\n    background-color: inherit;\\n}\\n.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-added:after,\\n.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-deleted:after {\\n    display: none;\\n}\\n\\n.ace_diff_other .ace_selection {\\n    filter: drop-shadow(1px 2px 3px darkgray);\\n}\\n\\n.ace_hidden_marker-layer .ace_bracket {\\n    display: none;\\n}\\n\\n\\n\\n/*\\n * Dark Colors \\n */\\n\\n.ace_dark .ace_diff.insert {\\n    background-color: #212E25;\\n}\\n.ace_dark .ace_diff.delete {\\n    background-color: #3F2222;\\n}\\n\\n.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-added {\\n    background-color: #212E25;\\n    border-left-color:#00802F;\\n}\\n\\n.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-deleted {\\n    background-color: #3F2222;\\n    border-left-color: #9C3838;\\n}\\n\\n\";\n\n});\n\nace.define(\"ace/ext/diff/gutter_decorator\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module){var dom = require(\"../../lib/dom\");\nvar MinimalGutterDiffDecorator = /** @class */ (function () {\n    function MinimalGutterDiffDecorator(editor, type) {\n        this.gutterClass = \"ace_mini-diff_gutter-enabled\";\n        this.gutterCellsClasses = {\n            add: \"mini-diff-added\",\n            delete: \"mini-diff-deleted\",\n        };\n        this.editor = editor;\n        this.type = type;\n        this.chunks = [];\n        this.attachToEditor();\n    }\n    MinimalGutterDiffDecorator.prototype.attachToEditor = function () {\n        this.renderGutters = this.renderGutters.bind(this);\n        dom.addCssClass(this.editor.renderer.$gutterLayer.element, this.gutterClass);\n        this.editor.renderer.$gutterLayer.on(\"afterRender\", this.renderGutters);\n    };\n    MinimalGutterDiffDecorator.prototype.renderGutters = function (e, gutterLayer) {\n        var _this = this;\n        var cells = this.editor.renderer.$gutterLayer.$lines.cells;\n        cells.forEach(function (cell) {\n            cell.element.classList.remove(Object.values(_this.gutterCellsClasses));\n        });\n        var dir = this.type === -1 ? \"old\" : \"new\";\n        var diffClass = this.type === -1 ? this.gutterCellsClasses.delete : this.gutterCellsClasses.add;\n        this.chunks.forEach(function (lineChange) {\n            var startRow = lineChange[dir].start.row;\n            var endRow = lineChange[dir].end.row - 1;\n            cells.forEach(function (cell) {\n                if (cell.row >= startRow && cell.row <= endRow) {\n                    cell.element.classList.add(diffClass);\n                }\n            });\n        });\n    };\n    MinimalGutterDiffDecorator.prototype.setDecorations = function (changes) {\n        this.chunks = changes;\n        this.renderGutters();\n    };\n    MinimalGutterDiffDecorator.prototype.dispose = function () {\n        dom.removeCssClass(this.editor.renderer.$gutterLayer.element, this.gutterClass);\n        this.editor.renderer.$gutterLayer.off(\"afterRender\", this.renderGutters);\n    };\n    return MinimalGutterDiffDecorator;\n}());\nexports.MinimalGutterDiffDecorator = MinimalGutterDiffDecorator;\n\n});\n\nace.define(\"ace/ext/diff/base_diff_view\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/range\",\"ace/lib/dom\",\"ace/config\",\"ace/line_widgets\",\"ace/ext/diff/scroll_diff_decorator\",\"ace/ext/diff/styles-css.js\",\"ace/editor\",\"ace/virtual_renderer\",\"ace/undomanager\",\"ace/layer/decorators\",\"ace/theme/textmate\",\"ace/multi_select\",\"ace/edit_session\",\"ace/ext/diff/gutter_decorator\"], function(require, exports, module){\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar oop = require(\"../../lib/oop\");\nvar Range = require(\"../../range\").Range;\nvar dom = require(\"../../lib/dom\");\nvar config = require(\"../../config\");\nvar LineWidgets = require(\"../../line_widgets\").LineWidgets;\nvar ScrollDiffDecorator = require(\"./scroll_diff_decorator\").ScrollDiffDecorator;\nvar css = require(\"./styles-css.js\").cssText;\nvar Editor = require(\"../../editor\").Editor;\nvar Renderer = require(\"../../virtual_renderer\").VirtualRenderer;\nvar UndoManager = require(\"../../undomanager\").UndoManager;\nvar Decorator = require(\"../../layer/decorators\").Decorator;\nrequire(\"../../theme/textmate\");\nrequire(\"../../multi_select\");\nvar EditSession = require(\"../../edit_session\").EditSession;\nvar MinimalGutterDiffDecorator = require(\"./gutter_decorator\").MinimalGutterDiffDecorator;\nvar dummyDiffProvider = {\n    compute: function (val1, val2, options) {\n        return [];\n    }\n};\nvar BaseDiffView = /** @class */ (function () {\n    function BaseDiffView(inlineDiffEditor, container) {\n        this.onChangeTheme = this.onChangeTheme.bind(this);\n        this.onInput = this.onInput.bind(this);\n        this.onChangeFold = this.onChangeFold.bind(this);\n        this.realign = this.realign.bind(this);\n        this.onSelect = this.onSelect.bind(this);\n        this.onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n        this.realignPending = false; this.diffSession; this.chunks;\n        this.inlineDiffEditor = inlineDiffEditor || false;\n        this.currentDiffIndex = 0;\n        this.diffProvider = dummyDiffProvider;\n        if (container) {\n            this.container = container;\n        }\n        dom.importCssString(css, \"diffview.css\");\n        this.$ignoreTrimWhitespace = false;\n        this.$maxDiffs = 5000;\n        this.$maxComputationTimeMs = 150;\n        this.$syncSelections = false;\n        this.$foldUnchangedOnInput = false;\n        this.markerB = new DiffHighlight(this, 1);\n        this.markerA = new DiffHighlight(this, -1);\n    }\n    BaseDiffView.prototype.$setupModels = function (diffModel) {\n        if (diffModel.diffProvider) {\n            this.setProvider(diffModel.diffProvider);\n        }\n        this.showSideA = diffModel.inline == undefined ? true : diffModel.inline === \"a\";\n        var diffEditorOptions = /**@type {Partial<import(\"../../../ace-internal\").Ace.EditorOptions>}*/ ({\n            scrollPastEnd: 0.5,\n            highlightActiveLine: false,\n            highlightGutterLine: false,\n            animatedScroll: true,\n            customScrollbar: true,\n            vScrollBarAlwaysVisible: true,\n            fadeFoldWidgets: true,\n            showFoldWidgets: true,\n            selectionStyle: \"text\",\n        });\n        this.savedOptionsA = diffModel.editorA && diffModel.editorA.getOptions(diffEditorOptions);\n        this.savedOptionsB = diffModel.editorB && diffModel.editorB.getOptions(diffEditorOptions);\n        if (!this.inlineDiffEditor || diffModel.inline === \"a\") {\n            this.editorA = diffModel.editorA || this.$setupModel(diffModel.sessionA, diffModel.valueA);\n            this.container && this.container.appendChild(this.editorA.container);\n            this.editorA.setOptions(diffEditorOptions);\n        }\n        if (!this.inlineDiffEditor || diffModel.inline === \"b\") {\n            this.editorB = diffModel.editorB || this.$setupModel(diffModel.sessionB, diffModel.valueB);\n            this.container && this.container.appendChild(this.editorB.container);\n            this.editorB.setOptions(diffEditorOptions);\n        }\n        if (this.inlineDiffEditor) {\n            this.activeEditor = this.showSideA ? this.editorA : this.editorB;\n            this.otherSession = this.showSideA ? this.sessionB : this.sessionA;\n            var cloneOptions = this.activeEditor.getOptions();\n            cloneOptions.readOnly = true;\n            delete cloneOptions.mode;\n            this.otherEditor = new Editor(new Renderer(null), undefined, cloneOptions);\n            if (this.showSideA) {\n                this.editorB = this.otherEditor;\n            }\n            else {\n                this.editorA = this.otherEditor;\n            }\n        }\n        this.setDiffSession({\n            sessionA: diffModel.sessionA || (diffModel.editorA ? diffModel.editorA.session : new EditSession(diffModel.valueA || \"\")),\n            sessionB: diffModel.sessionB || (diffModel.editorB ? diffModel.editorB.session : new EditSession(diffModel.valueB || \"\")),\n            chunks: []\n        });\n        this.setupScrollbars();\n    };\n    BaseDiffView.prototype.addGutterDecorators = function () {\n        if (!this.gutterDecoratorA)\n            this.gutterDecoratorA = new MinimalGutterDiffDecorator(this.editorA, -1);\n        if (!this.gutterDecoratorB)\n            this.gutterDecoratorB = new MinimalGutterDiffDecorator(this.editorB, 1);\n    };\n    BaseDiffView.prototype.$setupModel = function (session, value) {\n        var editor = new Editor(new Renderer(), session);\n        editor.session.setUndoManager(new UndoManager());\n        if (value != undefined) {\n            editor.setValue(value, -1);\n        }\n        return editor;\n    };\n    BaseDiffView.prototype.foldUnchanged = function () {\n        var chunks = this.chunks;\n        var placeholder = \"-\".repeat(120);\n        var prev = {\n            old: new Range(0, 0, 0, 0),\n            new: new Range(0, 0, 0, 0)\n        };\n        var foldsChanged = false;\n        for (var i = 0; i < chunks.length + 1; i++) {\n            var current = chunks[i] || {\n                old: new Range(this.sessionA.getLength(), 0, this.sessionA.getLength(), 0),\n                new: new Range(this.sessionB.getLength(), 0, this.sessionB.getLength(), 0)\n            };\n            var l = current.new.start.row - prev.new.end.row - 5;\n            if (l > 2) {\n                var s = prev.old.end.row + 2;\n                var fold1 = this.sessionA.addFold(placeholder, new Range(s, 0, s + l, Number.MAX_VALUE));\n                s = prev.new.end.row + 2;\n                var fold2 = this.sessionB.addFold(placeholder, new Range(s, 0, s + l, Number.MAX_VALUE));\n                if (fold1 || fold2)\n                    foldsChanged = true;\n                if (fold2 && fold1) {\n                    fold1[\"other\"] = fold2;\n                    fold2[\"other\"] = fold1;\n                }\n            }\n            prev = current;\n        }\n        return foldsChanged;\n    };\n    BaseDiffView.prototype.unfoldUnchanged = function () {\n        var folds = this.sessionA.getAllFolds();\n        for (var i = folds.length - 1; i >= 0; i--) {\n            var fold = folds[i];\n            if (fold.placeholder.length == 120) {\n                this.sessionA.removeFold(fold);\n            }\n        }\n    };\n    BaseDiffView.prototype.toggleFoldUnchanged = function () {\n        if (!this.foldUnchanged()) {\n            this.unfoldUnchanged();\n        }\n    };\n    BaseDiffView.prototype.setDiffSession = function (session) {\n        if (this.diffSession) {\n            this.$detachSessionsEventHandlers();\n            this.clearSelectionMarkers();\n        }\n        this.diffSession = session;\n        this.sessionA = this.sessionB = null;\n        if (this.diffSession) {\n            this.chunks = this.diffSession.chunks || [];\n            this.editorA && this.editorA.setSession(session.sessionA);\n            this.editorB && this.editorB.setSession(session.sessionB);\n            this.sessionA = this.diffSession.sessionA;\n            this.sessionB = this.diffSession.sessionB;\n            this.$attachSessionsEventHandlers();\n            this.initSelectionMarkers();\n        }\n        this.otherSession = this.showSideA ? this.sessionB : this.sessionA;\n    };\n    BaseDiffView.prototype.$attachSessionsEventHandlers = function () {\n    };\n    BaseDiffView.prototype.$detachSessionsEventHandlers = function () {\n    };\n    BaseDiffView.prototype.getDiffSession = function () {\n        return this.diffSession;\n    };\n    BaseDiffView.prototype.setTheme = function (theme) {\n        this.editorA && this.editorA.setTheme(theme);\n        this.editorB && this.editorB.setTheme(theme);\n    };\n    BaseDiffView.prototype.getTheme = function () {\n        return (this.editorA || this.editorB).getTheme();\n    };\n    BaseDiffView.prototype.onChangeTheme = function (e) {\n        var theme = e && e.theme || this.getTheme();\n        if (this.editorA && this.editorA.getTheme() !== theme) {\n            this.editorA.setTheme(theme);\n        }\n        if (this.editorB && this.editorB.getTheme() !== theme) {\n            this.editorB.setTheme(theme);\n        }\n    };\n    BaseDiffView.prototype.resize = function (force) {\n        this.editorA && this.editorA.resize(force);\n        this.editorB && this.editorB.resize(force);\n    };\n    BaseDiffView.prototype.scheduleOnInput = function () {\n        var _this = this;\n        if (this.$onInputTimer)\n            return;\n        this.$onInputTimer = setTimeout(function () {\n            _this.$onInputTimer = null;\n            _this.onInput();\n        });\n    };\n    BaseDiffView.prototype.onInput = function () {\n        var _this = this;\n        if (this.$onInputTimer)\n            clearTimeout(this.$onInputTimer);\n        var val1 = this.sessionA.doc.getAllLines();\n        var val2 = this.sessionB.doc.getAllLines();\n        this.selectionRangeA = null;\n        this.selectionRangeB = null;\n        var chunks = this.$diffLines(val1, val2);\n        this.diffSession.chunks = this.chunks = chunks;\n        this.gutterDecoratorA && this.gutterDecoratorA.setDecorations(chunks);\n        this.gutterDecoratorB && this.gutterDecoratorB.setDecorations(chunks);\n        if (this.chunks && this.chunks.length > this.$maxDiffs) {\n            return;\n        }\n        this.align();\n        this.editorA && this.editorA.renderer.updateBackMarkers();\n        this.editorB && this.editorB.renderer.updateBackMarkers();\n        setTimeout(function () {\n            _this.updateScrollBarDecorators();\n        }, 0);\n        if (this.$foldUnchangedOnInput) {\n            this.foldUnchanged();\n        }\n    };\n    BaseDiffView.prototype.setupScrollbars = function () {\n        var _this = this;\n        var setupScrollBar = function (renderer) {\n            setTimeout(function () {\n                _this.$setScrollBarDecorators(renderer);\n                _this.updateScrollBarDecorators();\n            }, 0);\n        };\n        if (this.inlineDiffEditor) {\n            setupScrollBar(this.activeEditor.renderer);\n        }\n        else {\n            setupScrollBar(this.editorA.renderer);\n            setupScrollBar(this.editorB.renderer);\n        }\n    };\n    BaseDiffView.prototype.$setScrollBarDecorators = function (renderer) {\n        if (renderer.$scrollDecorator) {\n            renderer.$scrollDecorator.destroy();\n        }\n        renderer.$scrollDecorator = new ScrollDiffDecorator(renderer.scrollBarV, renderer, this.inlineDiffEditor);\n        renderer.$scrollDecorator.setSessions(this.sessionA, this.sessionB);\n        renderer.scrollBarV.setVisible(true);\n        renderer.scrollBarV.element.style.bottom = renderer.scrollBarH.getHeight() + \"px\";\n    };\n    BaseDiffView.prototype.$resetDecorators = function (renderer) {\n        if (renderer.$scrollDecorator) {\n            renderer.$scrollDecorator.destroy();\n        }\n        renderer.$scrollDecorator = new Decorator(renderer.scrollBarV, renderer);\n    };\n    BaseDiffView.prototype.updateScrollBarDecorators = function () {\n        var _this = this;\n        if (this.inlineDiffEditor) {\n            if (!this.activeEditor) {\n                return;\n            }\n            this.activeEditor.renderer.$scrollDecorator.$zones = [];\n        }\n        else {\n            if (!this.editorA || !this.editorB) {\n                return;\n            }\n            this.editorA.renderer.$scrollDecorator.$zones = [];\n            this.editorB.renderer.$scrollDecorator.$zones = [];\n        }\n        var updateDecorators = function (editor, change) {\n            if (!editor) {\n                return;\n            }\n            if (typeof editor.renderer.$scrollDecorator.addZone !== \"function\") {\n                return;\n            }\n            if (change.old.start.row != change.old.end.row) {\n                editor.renderer.$scrollDecorator.addZone(change.old.start.row, change.old.end.row - 1, \"delete\");\n            }\n            if (change.new.start.row != change.new.end.row) {\n                editor.renderer.$scrollDecorator.addZone(change.new.start.row, change.new.end.row - 1, \"insert\");\n            }\n        };\n        if (this.inlineDiffEditor) {\n            this.chunks && this.chunks.forEach(function (lineChange) {\n                updateDecorators(_this.activeEditor, lineChange);\n            });\n            this.activeEditor.renderer.$scrollDecorator.$updateDecorators(this.activeEditor.renderer.layerConfig);\n        }\n        else {\n            this.chunks && this.chunks.forEach(function (lineChange) {\n                updateDecorators(_this.editorA, lineChange);\n                updateDecorators(_this.editorB, lineChange);\n            });\n            this.editorA.renderer.$scrollDecorator.$updateDecorators(this.editorA.renderer.layerConfig);\n            this.editorB.renderer.$scrollDecorator.$updateDecorators(this.editorB.renderer.layerConfig);\n        }\n    };\n    BaseDiffView.prototype.$diffLines = function (val1, val2) {\n        return this.diffProvider.compute(val1, val2, {\n            ignoreTrimWhitespace: this.$ignoreTrimWhitespace,\n            maxComputationTimeMs: this.$maxComputationTimeMs\n        });\n    };\n    BaseDiffView.prototype.setProvider = function (provider) {\n        this.diffProvider = provider;\n    };\n    BaseDiffView.prototype.$addWidget = function (session, w) {\n        var lineWidget = session.lineWidgets[w.row];\n        if (lineWidget) {\n            w.rowsAbove += lineWidget.rowsAbove > w.rowsAbove ? lineWidget.rowsAbove : w.rowsAbove;\n            w.rowCount += lineWidget.rowCount;\n        }\n        session.lineWidgets[w.row] = w;\n        session.widgetManager.lineWidgets[w.row] = w;\n        session.$resetRowCache(w.row);\n        var fold = session.getFoldAt(w.row, 0);\n        if (fold) {\n            session.widgetManager.updateOnFold({\n                data: fold,\n                action: \"add\",\n            }, session);\n        }\n    };\n    BaseDiffView.prototype.$initWidgets = function (editor) {\n        var session = editor.session;\n        if (!session.widgetManager) {\n            session.widgetManager = new LineWidgets(session);\n            session.widgetManager.attach(editor);\n        }\n        editor.session.lineWidgets = [];\n        editor.session.widgetManager.lineWidgets = [];\n        editor.session.$resetRowCache(0);\n    };\n    BaseDiffView.prototype.$screenRow = function (pos, session) {\n        var row = session.documentToScreenPosition(pos).row;\n        var afterEnd = pos.row - session.getLength() + 1;\n        if (afterEnd > 0) {\n            row += afterEnd;\n        }\n        return row;\n    };\n    BaseDiffView.prototype.align = function () { };\n    BaseDiffView.prototype.onChangeWrapLimit = function (e, session) { };\n    BaseDiffView.prototype.onSelect = function (e, selection) {\n        this.searchHighlight(selection);\n        this.syncSelect(selection);\n    };\n    BaseDiffView.prototype.syncSelect = function (selection) {\n        if (this.$updatingSelection)\n            return;\n        var isOld = selection.session === this.sessionA;\n        var selectionRange = selection.getRange();\n        var currSelectionRange = isOld ? this.selectionRangeA : this.selectionRangeB;\n        if (currSelectionRange && selectionRange.isEqual(currSelectionRange))\n            return;\n        if (isOld) {\n            this.selectionRangeA = selectionRange;\n        }\n        else {\n            this.selectionRangeB = selectionRange;\n        }\n        this.$updatingSelection = true;\n        var newRange = this.transformRange(selectionRange, isOld);\n        if (this.$syncSelections) {\n            (isOld ? this.editorB : this.editorA).session.selection.setSelectionRange(newRange);\n        }\n        this.$updatingSelection = false;\n        if (isOld) {\n            this.selectionRangeA = selectionRange;\n            this.selectionRangeB = newRange;\n        }\n        else {\n            this.selectionRangeA = newRange;\n            this.selectionRangeB = selectionRange;\n        }\n        this.updateSelectionMarker(this.syncSelectionMarkerA, this.sessionA, this.selectionRangeA);\n        this.updateSelectionMarker(this.syncSelectionMarkerB, this.sessionB, this.selectionRangeB);\n    };\n    BaseDiffView.prototype.updateSelectionMarker = function (marker, session, range) {\n        marker.setRange(range);\n        session._signal(\"changeFrontMarker\");\n    };\n    BaseDiffView.prototype.onChangeFold = function (ev, session) {\n        var fold = ev.data;\n        if (this.$syncingFold || !fold || !ev.action)\n            return;\n        this.scheduleRealign();\n        var isOrig = session === this.sessionA;\n        var other = isOrig ? this.sessionB : this.sessionA;\n        if (ev.action === \"remove\") {\n            if (fold.other) {\n                fold.other.other = null;\n                other.removeFold(fold.other);\n            }\n            else if (fold.lineWidget) {\n                other.widgetManager.addLineWidget(fold.lineWidget);\n                fold.lineWidget = null;\n                if (other[\"$editor\"]) {\n                    other[\"$editor\"].renderer.updateBackMarkers();\n                }\n            }\n        }\n        if (ev.action === \"add\") {\n            var range = this.transformRange(fold.range, isOrig);\n            if (range.isEmpty()) {\n                var row = range.start.row + 1;\n                if (other.lineWidgets[row]) {\n                    fold.lineWidget = other.lineWidgets[row];\n                    other.widgetManager.removeLineWidget(fold.lineWidget);\n                    if (other[\"$editor\"]) {\n                        other[\"$editor\"].renderer.updateBackMarkers();\n                    }\n                }\n            }\n            else {\n                this.$syncingFold = true;\n                fold.other = other.addFold(fold.placeholder, range);\n                if (fold.other) {\n                    fold.other.other = fold;\n                }\n                this.$syncingFold = false;\n            }\n        }\n    };\n    BaseDiffView.prototype.scheduleRealign = function () {\n        if (!this.realignPending) {\n            this.realignPending = true;\n            this.editorA.renderer.on(\"beforeRender\", this.realign);\n            this.editorB.renderer.on(\"beforeRender\", this.realign);\n        }\n    };\n    BaseDiffView.prototype.realign = function () {\n        this.realignPending = true;\n        this.editorA.renderer.off(\"beforeRender\", this.realign);\n        this.editorB.renderer.off(\"beforeRender\", this.realign);\n        this.align();\n        this.realignPending = false;\n    };\n    BaseDiffView.prototype.detach = function () {\n        if (!this.editorA || !this.editorB)\n            return;\n        if (this.savedOptionsA)\n            this.editorA.setOptions(this.savedOptionsA);\n        if (this.savedOptionsB)\n            this.editorB.setOptions(this.savedOptionsB);\n        this.editorA.renderer.off(\"beforeRender\", this.realign);\n        this.editorB.renderer.off(\"beforeRender\", this.realign);\n        this.$detachEventHandlers();\n        this.$removeLineWidgets(this.sessionA);\n        this.$removeLineWidgets(this.sessionB);\n        this.gutterDecoratorA && this.gutterDecoratorA.dispose();\n        this.gutterDecoratorB && this.gutterDecoratorB.dispose();\n        this.sessionA.selection.clearSelection();\n        this.sessionB.selection.clearSelection();\n        if (this.savedOptionsA && this.savedOptionsA.customScrollbar) {\n            this.$resetDecorators(this.editorA.renderer);\n        }\n        if (this.savedOptionsB && this.savedOptionsB.customScrollbar) {\n            this.$resetDecorators(this.editorB.renderer);\n        }\n    };\n    BaseDiffView.prototype.$removeLineWidgets = function (session) {\n        session.lineWidgets = [];\n        session.widgetManager.lineWidgets = [];\n        session._signal(\"changeFold\", { data: { start: { row: 0 } } });\n    };\n    BaseDiffView.prototype.$detachEventHandlers = function () {\n    };\n    BaseDiffView.prototype.destroy = function () {\n        this.detach();\n        this.editorA && this.editorA.destroy();\n        this.editorB && this.editorB.destroy();\n        this.editorA = this.editorB = null;\n    };\n    BaseDiffView.prototype.gotoNext = function (dir) {\n        var ace = this.activeEditor || this.editorA;\n        if (this.inlineDiffEditor) {\n            ace = this.editorA;\n        }\n        var sideA = ace == this.editorA;\n        var row = ace.selection.lead.row;\n        var i = this.findChunkIndex(this.chunks, row, sideA);\n        var chunk = this.chunks[i + dir] || this.chunks[i];\n        var scrollTop = ace.session.getScrollTop();\n        if (chunk) {\n            var range = chunk[sideA ? \"old\" : \"new\"];\n            var line = Math.max(range.start.row, range.end.row - 1);\n            ace.selection.setRange(new Range(line, 0, line, 0));\n        }\n        ace.renderer.scrollSelectionIntoView(ace.selection.lead, ace.selection.anchor, 0.5);\n        ace.renderer.animateScrolling(scrollTop);\n    };\n    BaseDiffView.prototype.firstDiffSelected = function () {\n        return this.currentDiffIndex <= 1;\n    };\n    BaseDiffView.prototype.lastDiffSelected = function () {\n        return this.currentDiffIndex > this.chunks.length - 1;\n    };\n    BaseDiffView.prototype.transformRange = function (range, isOriginal) {\n        return Range.fromPoints(this.transformPosition(range.start, isOriginal), this.transformPosition(range.end, isOriginal));\n    };\n    BaseDiffView.prototype.transformPosition = function (pos, isOriginal) {\n        var chunkIndex = this.findChunkIndex(this.chunks, pos.row, isOriginal);\n        var chunk = this.chunks[chunkIndex];\n        var clonePos = this.sessionB.doc.clonePos;\n        var result = clonePos(pos);\n        var _a = __read(isOriginal ? [\"old\", \"new\"] : [\"new\", \"old\"], 2), from = _a[0], to = _a[1];\n        var deltaChar = 0;\n        var ignoreIndent = false;\n        if (chunk) {\n            if (chunk[from].end.row <= pos.row) {\n                result.row -= chunk[from].end.row - chunk[to].end.row;\n            }\n            else if (chunk.charChanges) {\n                for (var i = 0; i < chunk.charChanges.length; i++) {\n                    var change = chunk.charChanges[i];\n                    var fromRange = change[from];\n                    var toRange = change[to];\n                    if (fromRange.end.row < pos.row)\n                        continue;\n                    if (fromRange.start.row > pos.row)\n                        break;\n                    if (fromRange.isMultiLine() && fromRange.contains(pos.row, pos.column)) {\n                        result.row = toRange.start.row + pos.row - fromRange.start.row;\n                        var maxRow = toRange.end.row;\n                        if (toRange.end.column === 0)\n                            maxRow--;\n                        if (result.row > maxRow) {\n                            result.row = maxRow;\n                            result.column = (isOriginal ? this.sessionB : this.sessionA).getLine(maxRow).length;\n                            ignoreIndent = true;\n                        }\n                        result.row = Math.min(result.row, maxRow);\n                    }\n                    else {\n                        result.row = toRange.start.row;\n                        if (fromRange.start.column > pos.column)\n                            break;\n                        ignoreIndent = true;\n                        if (!fromRange.isEmpty() && fromRange.contains(pos.row, pos.column)) {\n                            result.column = toRange.start.column;\n                            deltaChar = pos.column - fromRange.start.column;\n                            deltaChar = Math.min(deltaChar, toRange.end.column - toRange.start.column);\n                        }\n                        else {\n                            result = clonePos(toRange.end);\n                            deltaChar = pos.column - fromRange.end.column;\n                        }\n                    }\n                }\n            }\n            else if (chunk[from].start.row <= pos.row) {\n                result.row += chunk[to].start.row - chunk[from].start.row;\n                if (result.row >= chunk[to].end.row) {\n                    result.row = chunk[to].end.row - 1;\n                    result.column = (isOriginal ? this.sessionB : this.sessionA).getLine(result.row).length;\n                }\n            }\n        }\n        if (!ignoreIndent) { //TODO:\n            var _b = __read(isOriginal ? [this.sessionA, this.sessionB] : [\n                this.sessionB, this.sessionA\n            ], 2), fromEditSession = _b[0], toEditSession = _b[1];\n            deltaChar -= this.$getDeltaIndent(fromEditSession, toEditSession, pos.row, result.row);\n        }\n        result.column += deltaChar;\n        return result;\n    };\n    BaseDiffView.prototype.$getDeltaIndent = function (fromEditSession, toEditSession, fromLine, toLine) {\n        var origIndent = this.$getIndent(fromEditSession, fromLine);\n        var editIndent = this.$getIndent(toEditSession, toLine);\n        return origIndent - editIndent;\n    };\n    BaseDiffView.prototype.$getIndent = function (editSession, line) {\n        return editSession.getLine(line).match(/^\\s*/)[0].length;\n    };\n    BaseDiffView.prototype.printDiffs = function () {\n        this.chunks.forEach(function (diff) {\n            console.log(diff.toString());\n        });\n    };\n    BaseDiffView.prototype.findChunkIndex = function (chunks, row, isOriginal) {\n        for (var i = 0; i < chunks.length; i++) {\n            var ch = chunks[i];\n            var chunk = isOriginal ? ch.old : ch.new;\n            if (chunk.end.row < row)\n                continue;\n            if (chunk.start.row > row)\n                break;\n        }\n        this.currentDiffIndex = i;\n        return i - 1;\n    };\n    BaseDiffView.prototype.searchHighlight = function (selection) {\n        if (this.$syncSelections || this.inlineDiffEditor) {\n            return;\n        }\n        var currSession = selection.session;\n        var otherSession = currSession === this.sessionA\n            ? this.sessionB : this.sessionA;\n        otherSession.highlight(currSession.$searchHighlight.regExp);\n        otherSession._signal(\"changeBackMarker\");\n    };\n    BaseDiffView.prototype.initSelectionMarkers = function () {\n        this.syncSelectionMarkerA = new SyncSelectionMarker();\n        this.syncSelectionMarkerB = new SyncSelectionMarker();\n        this.sessionA.addDynamicMarker(this.syncSelectionMarkerA, true);\n        this.sessionB.addDynamicMarker(this.syncSelectionMarkerB, true);\n    };\n    BaseDiffView.prototype.clearSelectionMarkers = function () {\n        this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n        this.sessionB.removeMarker(this.syncSelectionMarkerB.id);\n    };\n    return BaseDiffView;\n}());\nconfig.defineOptions(BaseDiffView.prototype, \"DiffView\", {\n    showOtherLineNumbers: {\n        set: function (value) {\n            if (this.gutterLayer) {\n                this.gutterLayer.$renderer = value ? null : emptyGutterRenderer;\n                this.editorA.renderer.updateFull();\n            }\n        },\n        initialValue: true\n    },\n    folding: {\n        set: function (value) {\n            this.editorA.setOption(\"showFoldWidgets\", value);\n            this.editorB.setOption(\"showFoldWidgets\", value);\n            if (!value) {\n                var posA = [];\n                var posB = [];\n                if (this.chunks) {\n                    this.chunks.forEach(function (x) {\n                        posA.push(x.old.start, x.old.end);\n                        posB.push(x.new.start, x.new.end);\n                    });\n                }\n                this.sessionA.unfold(posA);\n                this.sessionB.unfold(posB);\n            }\n        }\n    },\n    syncSelections: {\n        set: function (value) {\n        },\n    },\n    ignoreTrimWhitespace: {\n        set: function (value) {\n            this.scheduleOnInput();\n        },\n    },\n    wrap: {\n        set: function (value) {\n            this.sessionA.setOption(\"wrap\", value);\n            this.sessionB.setOption(\"wrap\", value);\n        }\n    },\n    maxDiffs: {\n        value: 5000,\n    },\n    theme: {\n        set: function (value) {\n            this.setTheme(value);\n        },\n        get: function () {\n            return this.editorA.getTheme();\n        }\n    },\n});\nvar emptyGutterRenderer = {\n    getText: function name(params) {\n        return \"\";\n    },\n    getWidth: function () {\n        return 0;\n    }\n};\nexports.BaseDiffView = BaseDiffView;\nvar DiffChunk = /** @class */ (function () {\n    function DiffChunk(originalRange, modifiedRange, charChanges) {\n        this.old = originalRange;\n        this.new = modifiedRange;\n        this.charChanges = charChanges && charChanges.map(function (m) { return new DiffChunk(new Range(m.originalStartLineNumber, m.originalStartColumn, m.originalEndLineNumber, m.originalEndColumn), new Range(m.modifiedStartLineNumber, m.modifiedStartColumn, m.modifiedEndLineNumber, m.modifiedEndColumn)); });\n    }\n    return DiffChunk;\n}());\nvar DiffHighlight = /** @class */ (function () {\n    function DiffHighlight(diffView, type) { this.id;\n        this.diffView = diffView;\n        this.type = type;\n    }\n    DiffHighlight.prototype.update = function (html, markerLayer, session, config) {\n        var dir, operation, opOperation;\n        var diffView = this.diffView;\n        if (this.type === -1) { // original editor\n            dir = \"old\";\n            operation = \"delete\";\n            opOperation = \"insert\";\n        }\n        else { //modified editor\n            dir = \"new\";\n            operation = \"insert\";\n            opOperation = \"delete\";\n        }\n        var ignoreTrimWhitespace = diffView.$ignoreTrimWhitespace;\n        var lineChanges = diffView.chunks;\n        if (session.lineWidgets && !diffView.inlineDiffEditor) {\n            for (var row = config.firstRow; row <= config.lastRow; row++) {\n                var lineWidget = session.lineWidgets[row];\n                if (!lineWidget || lineWidget.hidden)\n                    continue;\n                var start = session.documentToScreenRow(row, 0);\n                if (lineWidget.rowsAbove > 0) {\n                    var range = new Range(start - lineWidget.rowsAbove, 0, start - 1, Number.MAX_VALUE);\n                    markerLayer.drawFullLineMarker(html, range, \"ace_diff aligned_diff\", config);\n                }\n                var end = start + lineWidget.rowCount - (lineWidget.rowsAbove || 0);\n                var range = new Range(start + 1, 0, end, Number.MAX_VALUE);\n                markerLayer.drawFullLineMarker(html, range, \"ace_diff aligned_diff\", config);\n            }\n        }\n        lineChanges.forEach(function (lineChange) {\n            var startRow = lineChange[dir].start.row;\n            var endRow = lineChange[dir].end.row;\n            if (endRow < config.firstRow || startRow > config.lastRow)\n                return;\n            var range = new Range(startRow, 0, endRow - 1, 1 << 30);\n            if (startRow !== endRow) {\n                range = range.toScreenRange(session);\n                markerLayer.drawFullLineMarker(html, range, \"ace_diff \" + operation, config);\n            }\n            if (lineChange.charChanges) {\n                for (var i = 0; i < lineChange.charChanges.length; i++) {\n                    var changeRange = lineChange.charChanges[i][dir];\n                    if (changeRange.end.column == 0 && changeRange.end.row > changeRange.start.row && changeRange.end.row == lineChange[dir].end.row) {\n                        changeRange.end.row--;\n                        changeRange.end.column = Number.MAX_VALUE;\n                    }\n                    if (ignoreTrimWhitespace) {\n                        for (var lineNumber = changeRange.start.row; lineNumber <= changeRange.end.row; lineNumber++) {\n                            var startColumn = void 0;\n                            var endColumn = void 0;\n                            var sessionLineStart = session.getLine(lineNumber).match(/^\\s*/)[0].length;\n                            var sessionLineEnd = session.getLine(lineNumber).length;\n                            if (lineNumber === changeRange.start.row) {\n                                startColumn = changeRange.start.column;\n                            }\n                            else {\n                                startColumn = sessionLineStart;\n                            }\n                            if (lineNumber === changeRange.end.row) {\n                                endColumn = changeRange.end.column;\n                            }\n                            else {\n                                endColumn = sessionLineEnd;\n                            }\n                            var range_1 = new Range(lineNumber, startColumn, lineNumber, endColumn);\n                            var screenRange = range_1.toScreenRange(session);\n                            if (sessionLineStart === startColumn && sessionLineEnd === endColumn) {\n                                continue;\n                            }\n                            var cssClass = \"inline \" + operation;\n                            if (range_1.isEmpty() && startColumn !== 0) {\n                                cssClass = \"inline \" + opOperation + \" empty\";\n                            }\n                            markerLayer.drawSingleLineMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n                        }\n                    }\n                    else {\n                        var range_2 = new Range(changeRange.start.row, changeRange.start.column, changeRange.end.row, changeRange.end.column);\n                        var screenRange = range_2.toScreenRange(session);\n                        var cssClass = \"inline \" + operation;\n                        if (range_2.isEmpty() && changeRange.start.column !== 0) {\n                            cssClass = \"inline empty \" + opOperation;\n                        }\n                        if (screenRange.isMultiLine()) {\n                            markerLayer.drawTextMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n                        }\n                        else {\n                            markerLayer.drawSingleLineMarker(html, screenRange, \"ace_diff \" + cssClass, config);\n                        }\n                    }\n                }\n            }\n        });\n    };\n    return DiffHighlight;\n}());\nvar SyncSelectionMarker = /** @class */ (function () {\n    function SyncSelectionMarker() { this.id;\n        this.type = \"fullLine\";\n        this.clazz = \"ace_diff-active-line\";\n    }\n    SyncSelectionMarker.prototype.update = function (html, markerLayer, session, config) {\n    };\n    SyncSelectionMarker.prototype.setRange = function (range) {\n        var newRange = range.clone();\n        newRange.end.column++;\n        this.range = newRange;\n    };\n    return SyncSelectionMarker;\n}());\nexports.DiffChunk = DiffChunk;\nexports.DiffHighlight = DiffHighlight;\n\n});\n\nace.define(\"ace/ext/diff/inline_diff_view\",[\"require\",\"exports\",\"module\",\"ace/ext/diff/base_diff_view\",\"ace/virtual_renderer\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BaseDiffView = require(\"./base_diff_view\").BaseDiffView;\nvar Renderer = require(\"../../virtual_renderer\").VirtualRenderer;\nvar config = require(\"../../config\");\nvar InlineDiffView = /** @class */ (function (_super) {\n    __extends(InlineDiffView, _super);\n    function InlineDiffView(diffModel, container) {\n        var _this = this;\n        diffModel = diffModel || {};\n        diffModel.inline = diffModel.inline || \"a\";\n        _this = _super.call(this, true, container) || this;\n        _this.init(diffModel);\n        return _this;\n    }\n    InlineDiffView.prototype.init = function (diffModel) {\n        this.onSelect = this.onSelect.bind(this);\n        this.onAfterRender = this.onAfterRender.bind(this);\n        this.$setupModels(diffModel);\n        this.onChangeTheme();\n        config.resetOptions(this);\n        config[\"_signal\"](\"diffView\", this);\n        var padding = this.activeEditor.renderer.$padding;\n        this.addGutterDecorators();\n        this.otherEditor.renderer.setPadding(padding);\n        this.textLayer = this.otherEditor.renderer.$textLayer;\n        this.markerLayer = this.otherEditor.renderer.$markerBack;\n        this.gutterLayer = this.otherEditor.renderer.$gutterLayer;\n        this.cursorLayer = this.otherEditor.renderer.$cursorLayer;\n        this.otherEditor.renderer.$updateCachedSize = function () {\n        };\n        var textLayerElement = this.activeEditor.renderer.$textLayer.element;\n        textLayerElement.parentNode.insertBefore(this.textLayer.element, textLayerElement);\n        var markerLayerElement = this.activeEditor.renderer.$markerBack.element;\n        markerLayerElement.parentNode.insertBefore(this.markerLayer.element, markerLayerElement.nextSibling);\n        var gutterLayerElement = this.activeEditor.renderer.$gutterLayer.element;\n        gutterLayerElement.parentNode.insertBefore(this.gutterLayer.element, gutterLayerElement.nextSibling);\n        gutterLayerElement.style.position = \"absolute\";\n        this.gutterLayer.element.style.position = \"absolute\";\n        this.gutterLayer.element.style.width = \"100%\";\n        this.gutterLayer.element.classList.add(\"ace_mini-diff_gutter_other\");\n        this.gutterLayer.$updateGutterWidth = function () { };\n        this.initMouse();\n        this.initTextInput();\n        this.initTextLayer();\n        this.initRenderer();\n        this.$attachEventHandlers();\n        this.selectEditor(this.activeEditor);\n    };\n    InlineDiffView.prototype.initRenderer = function (restore) {\n        var _this = this;\n        if (restore) {\n            delete this.activeEditor.renderer.$getLongestLine;\n        }\n        else {\n            this.editorA.renderer.$getLongestLine =\n                this.editorB.renderer.$getLongestLine = function () {\n                    var getLongestLine = Renderer.prototype.$getLongestLine;\n                    return Math.max(getLongestLine.call(_this.editorA.renderer), getLongestLine.call(_this.editorB.renderer));\n                };\n        }\n    };\n    InlineDiffView.prototype.initTextLayer = function () {\n        var renderLine = this.textLayer.$renderLine;\n        var diffView = this;\n        this.otherEditor.renderer.$textLayer.$renderLine = function (parent, row, foldLIne) {\n            if (isVisibleRow(diffView.chunks, row)) {\n                renderLine.call(this, parent, row, foldLIne);\n            }\n        };\n        var side = this.showSideA ? \"new\" : \"old\";\n        function isVisibleRow(chunks, row) {\n            var min = 0;\n            var max = chunks.length - 1;\n            var result = -1;\n            while (min < max) {\n                var mid = Math.floor((min + max) / 2);\n                var chunkStart = chunks[mid][side].start.row;\n                if (chunkStart < row) {\n                    result = mid;\n                    min = mid + 1;\n                }\n                else if (chunkStart > row) {\n                    max = mid - 1;\n                }\n                else {\n                    result = mid;\n                    break;\n                }\n            }\n            if (chunks[result + 1] && chunks[result + 1][side].start.row <= row) {\n                result++;\n            }\n            var range = chunks[result] && chunks[result][side];\n            if (range && range.end.row > row) {\n                return true;\n            }\n            return false;\n        }\n    };\n    InlineDiffView.prototype.initTextInput = function (restore) {\n        if (restore) {\n            this.otherEditor.textInput = this.othertextInput;\n            this.otherEditor.container = this.otherEditorContainer;\n        }\n        else {\n            this.othertextInput = this.otherEditor.textInput;\n            this.otherEditor.textInput = this.activeEditor.textInput;\n            this.otherEditorContainer = this.otherEditor.container;\n            this.otherEditor.container = this.activeEditor.container;\n        }\n    };\n    InlineDiffView.prototype.selectEditor = function (editor) {\n        if (editor == this.activeEditor) {\n            this.otherEditor.selection.clearSelection();\n            this.activeEditor.textInput.setHost(this.activeEditor);\n            this.activeEditor.setStyle(\"ace_diff_other\", false);\n            this.cursorLayer.element.remove();\n            this.activeEditor.renderer.$cursorLayer.element.style.display = \"block\";\n            if (this.showSideA) {\n                this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n                this.sessionA.addDynamicMarker(this.syncSelectionMarkerA, true);\n            }\n            this.markerLayer.element.classList.add(\"ace_hidden_marker-layer\");\n            this.activeEditor.renderer.$markerBack.element.classList.remove(\"ace_hidden_marker-layer\");\n            this.removeBracketHighlight(this.otherEditor);\n        }\n        else {\n            this.activeEditor.selection.clearSelection();\n            this.activeEditor.textInput.setHost(this.otherEditor);\n            this.activeEditor.setStyle(\"ace_diff_other\");\n            this.activeEditor.renderer.$cursorLayer.element.parentNode.appendChild(this.cursorLayer.element);\n            this.activeEditor.renderer.$cursorLayer.element.style.display = \"none\";\n            if (this.activeEditor.$isFocused) {\n                this.otherEditor.onFocus();\n            }\n            if (this.showSideA) {\n                this.sessionA.removeMarker(this.syncSelectionMarkerA.id);\n            }\n            this.markerLayer.element.classList.remove(\"ace_hidden_marker-layer\");\n            this.activeEditor.renderer.$markerBack.element.classList.add(\"ace_hidden_marker-layer\");\n            this.removeBracketHighlight(this.activeEditor);\n        }\n    };\n    InlineDiffView.prototype.removeBracketHighlight = function (editor) {\n        var session = editor.session;\n        if (session.$bracketHighlight) {\n            session.$bracketHighlight.markerIds.forEach(function (id) {\n                session.removeMarker(id);\n            });\n            session.$bracketHighlight = null;\n        }\n    };\n    InlineDiffView.prototype.initMouse = function () {\n        var _this = this;\n        this.otherEditor.renderer.$loop = this.activeEditor.renderer.$loop;\n        this.otherEditor.renderer.scroller = {\n            getBoundingClientRect: function () {\n                return _this.activeEditor.renderer.scroller.getBoundingClientRect();\n            },\n            style: this.activeEditor.renderer.scroller.style,\n        };\n        var forwardEvent = function (ev) {\n            if (!ev.domEvent)\n                return;\n            var screenPos = ev.editor.renderer.pixelToScreenCoordinates(ev.clientX, ev.clientY);\n            var sessionA = _this.activeEditor.session;\n            var sessionB = _this.otherEditor.session;\n            var posA = sessionA.screenToDocumentPosition(screenPos.row, screenPos.column, screenPos.offsetX);\n            var posB = sessionB.screenToDocumentPosition(screenPos.row, screenPos.column, screenPos.offsetX);\n            var posAx = sessionA.documentToScreenPosition(posA);\n            var posBx = sessionB.documentToScreenPosition(posB);\n            if (ev.editor == _this.activeEditor) {\n                if (posBx.row == screenPos.row && posAx.row != screenPos.row) {\n                    if (ev.type == \"mousedown\") {\n                        _this.selectEditor(_this.otherEditor);\n                    }\n                    ev.propagationStopped = true;\n                    ev.defaultPrevented = true;\n                    _this.otherEditor.$mouseHandler.onMouseEvent(ev.type, ev.domEvent);\n                }\n                else if (ev.type == \"mousedown\") {\n                    _this.selectEditor(_this.activeEditor);\n                }\n            }\n        };\n        var events = [\n            \"mousedown\",\n            \"click\",\n            \"mouseup\",\n            \"dblclick\",\n            \"tripleclick\",\n            \"quadclick\",\n        ];\n        events.forEach(function (event) {\n            _this.activeEditor.on(event, forwardEvent, true);\n            _this.activeEditor.on(\"gutter\" + event, forwardEvent, true);\n        });\n        var onFocus = function (e) {\n            _this.activeEditor.onFocus(e);\n        };\n        var onBlur = function (e) {\n            _this.activeEditor.onBlur(e);\n        };\n        this.otherEditor.on(\"focus\", onFocus);\n        this.otherEditor.on(\"blur\", onBlur);\n        this.onMouseDetach = function () {\n            events.forEach(function (event) {\n                _this.activeEditor.off(event, forwardEvent, true);\n                _this.activeEditor.off(\"gutter\" + event, forwardEvent, true);\n            });\n            _this.otherEditor.off(\"focus\", onFocus);\n            _this.otherEditor.off(\"blur\", onBlur);\n        };\n    };\n    InlineDiffView.prototype.align = function () {\n        var diffView = this;\n        this.$initWidgets(diffView.editorA);\n        this.$initWidgets(diffView.editorB);\n        diffView.chunks.forEach(function (ch) {\n            var diff1 = diffView.$screenRow(ch.old.end, diffView.sessionA)\n                - diffView.$screenRow(ch.old.start, diffView.sessionA);\n            var diff2 = diffView.$screenRow(ch.new.end, diffView.sessionB)\n                - diffView.$screenRow(ch.new.start, diffView.sessionB);\n            diffView.$addWidget(diffView.sessionA, {\n                rowCount: diff2,\n                rowsAbove: ch.old.end.row === 0 ? diff2 : 0,\n                row: ch.old.end.row === 0 ? 0 : ch.old.end.row - 1\n            });\n            diffView.$addWidget(diffView.sessionB, {\n                rowCount: diff1,\n                rowsAbove: diff1,\n                row: ch.new.start.row,\n            });\n        });\n        diffView.sessionA[\"_emit\"](\"changeFold\", { data: { start: { row: 0 } } });\n        diffView.sessionB[\"_emit\"](\"changeFold\", { data: { start: { row: 0 } } });\n    };\n    InlineDiffView.prototype.onChangeWrapLimit = function () {\n        this.sessionB.adjustWrapLimit(this.sessionA.$wrapLimit);\n        this.scheduleRealign();\n    };\n    InlineDiffView.prototype.$attachSessionsEventHandlers = function () {\n        this.$attachSessionEventHandlers(this.editorA, this.markerA);\n        this.$attachSessionEventHandlers(this.editorB, this.markerB);\n        this.sessionA.on(\"changeWrapLimit\", this.onChangeWrapLimit);\n        this.sessionA.on(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    InlineDiffView.prototype.$attachSessionEventHandlers = function (editor, marker) {\n        editor.session.on(\"changeFold\", this.onChangeFold);\n        editor.session.addDynamicMarker(marker);\n        editor.selection.on(\"changeCursor\", this.onSelect);\n        editor.selection.on(\"changeSelection\", this.onSelect);\n    };\n    InlineDiffView.prototype.$detachSessionsEventHandlers = function () {\n        this.$detachSessionHandlers(this.editorA, this.markerA);\n        this.$detachSessionHandlers(this.editorB, this.markerB);\n        this.otherSession.bgTokenizer.lines.fill(undefined);\n        this.sessionA.off(\"changeWrapLimit\", this.onChangeWrapLimit);\n        this.sessionA.off(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    InlineDiffView.prototype.$detachSessionHandlers = function (editor, marker) {\n        editor.session.removeMarker(marker.id);\n        editor.selection.off(\"changeCursor\", this.onSelect);\n        editor.selection.off(\"changeSelection\", this.onSelect);\n        editor.session.off(\"changeFold\", this.onChangeFold);\n    };\n    InlineDiffView.prototype.$attachEventHandlers = function () {\n        this.activeEditor.on(\"input\", this.onInput);\n        this.activeEditor.renderer.on(\"afterRender\", this.onAfterRender);\n        this.otherSession.on(\"change\", this.onInput);\n    };\n    InlineDiffView.prototype.$detachEventHandlers = function () {\n        this.$detachSessionsEventHandlers();\n        this.activeEditor.off(\"input\", this.onInput);\n        this.activeEditor.renderer.off(\"afterRender\", this.onAfterRender);\n        this.otherSession.off(\"change\", this.onInput);\n        this.textLayer.element.textContent = \"\";\n        this.textLayer.element.remove();\n        this.gutterLayer.element.textContent = \"\";\n        this.gutterLayer.element.remove();\n        this.markerLayer.element.textContent = \"\";\n        this.markerLayer.element.remove();\n        this.onMouseDetach();\n        this.selectEditor(this.activeEditor);\n        this.clearSelectionMarkers();\n        this.otherEditor.setSession(null);\n        this.otherEditor.renderer.$loop = null;\n        this.initTextInput(true);\n        this.initRenderer(true);\n        this.otherEditor.destroy();\n    };\n    InlineDiffView.prototype.onAfterRender = function (changes, renderer) {\n        var config = renderer.layerConfig;\n        var session = this.otherSession;\n        var cloneRenderer = this.otherEditor.renderer;\n        session.$scrollTop = renderer.scrollTop;\n        session.$scrollLeft = renderer.scrollLeft;\n        [\n            \"characterWidth\",\n            \"lineHeight\",\n            \"scrollTop\",\n            \"scrollLeft\",\n            \"scrollMargin\",\n            \"$padding\",\n            \"$size\",\n            \"layerConfig\",\n            \"$horizScroll\",\n            \"$vScroll\",\n        ].forEach(function (prop) {\n            cloneRenderer[prop] = renderer[prop];\n        });\n        cloneRenderer.$computeLayerConfig();\n        var newConfig = cloneRenderer.layerConfig;\n        this.gutterLayer.update(newConfig);\n        newConfig.firstRowScreen = config.firstRowScreen;\n        cloneRenderer.$cursorLayer.config = newConfig;\n        cloneRenderer.$cursorLayer.update(newConfig);\n        if (changes & cloneRenderer.CHANGE_LINES\n            || changes & cloneRenderer.CHANGE_FULL\n            || changes & cloneRenderer.CHANGE_SCROLL\n            || changes & cloneRenderer.CHANGE_TEXT)\n            this.textLayer.update(newConfig);\n        this.markerLayer.setMarkers(this.otherSession.getMarkers());\n        this.markerLayer.update(newConfig);\n    };\n    InlineDiffView.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.otherEditor && this.otherEditor.destroy();\n    };\n    return InlineDiffView;\n}(BaseDiffView));\nexports.InlineDiffView = InlineDiffView;\n\n});\n\nace.define(\"ace/ext/diff/split_diff_view\",[\"require\",\"exports\",\"module\",\"ace/ext/diff/base_diff_view\",\"ace/config\"], function(require, exports, module){\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar BaseDiffView = require(\"./base_diff_view\").BaseDiffView;\nvar config = require(\"../../config\");\nvar SplitDiffView = /** @class */ (function (_super) {\n    __extends(SplitDiffView, _super);\n    function SplitDiffView(diffModel) {\n        var _this = this;\n        diffModel = diffModel || {};\n        _this = _super.call(this) || this;\n        _this.init(diffModel);\n        return _this;\n    }\n    SplitDiffView.prototype.init = function (diffModel) {\n        this.onChangeTheme = this.onChangeTheme.bind(this);\n        this.onMouseWheel = this.onMouseWheel.bind(this);\n        this.onScroll = this.onScroll.bind(this);\n        this.$setupModels(diffModel);\n        this.addGutterDecorators();\n        this.onChangeTheme();\n        config.resetOptions(this);\n        config[\"_signal\"](\"diffView\", this);\n        this.$attachEventHandlers();\n    };\n    SplitDiffView.prototype.onChangeWrapLimit = function () {\n        this.scheduleRealign();\n    };\n    SplitDiffView.prototype.align = function () {\n        var diffView = this;\n        this.$initWidgets(diffView.editorA);\n        this.$initWidgets(diffView.editorB);\n        diffView.chunks.forEach(function (ch) {\n            var diff1 = diffView.$screenRow(ch.old.start, diffView.sessionA);\n            var diff2 = diffView.$screenRow(ch.new.start, diffView.sessionB);\n            if (diff1 < diff2) {\n                diffView.$addWidget(diffView.sessionA, {\n                    rowCount: diff2 - diff1,\n                    rowsAbove: ch.old.start.row === 0 ? diff2 - diff1 : 0,\n                    row: ch.old.start.row === 0 ? 0 : ch.old.start.row - 1\n                });\n            }\n            else if (diff1 > diff2) {\n                diffView.$addWidget(diffView.sessionB, {\n                    rowCount: diff1 - diff2,\n                    rowsAbove: ch.new.start.row === 0 ? diff1 - diff2 : 0,\n                    row: ch.new.start.row === 0 ? 0 : ch.new.start.row - 1\n                });\n            }\n            var diff1 = diffView.$screenRow(ch.old.end, diffView.sessionA);\n            var diff2 = diffView.$screenRow(ch.new.end, diffView.sessionB);\n            if (diff1 < diff2) {\n                diffView.$addWidget(diffView.sessionA, {\n                    rowCount: diff2 - diff1,\n                    rowsAbove: ch.old.end.row === 0 ? diff2 - diff1 : 0,\n                    row: ch.old.end.row === 0 ? 0 : ch.old.end.row - 1\n                });\n            }\n            else if (diff1 > diff2) {\n                diffView.$addWidget(diffView.sessionB, {\n                    rowCount: diff1 - diff2,\n                    rowsAbove: ch.new.end.row === 0 ? diff1 - diff2 : 0,\n                    row: ch.new.end.row === 0 ? 0 : ch.new.end.row - 1\n                });\n            }\n        });\n        diffView.sessionA[\"_emit\"](\"changeFold\", { data: { start: { row: 0 } } });\n        diffView.sessionB[\"_emit\"](\"changeFold\", { data: { start: { row: 0 } } });\n    };\n    SplitDiffView.prototype.onScroll = function (e, session) {\n        this.syncScroll(this.sessionA === session ? this.editorA.renderer : this.editorB.renderer);\n    };\n    SplitDiffView.prototype.syncScroll = function (renderer) {\n        if (this.$syncScroll == false)\n            return;\n        var r1 = this.editorA.renderer;\n        var r2 = this.editorB.renderer;\n        var isOrig = renderer == r1;\n        if (r1[\"$scrollAnimation\"] && r2[\"$scrollAnimation\"])\n            return;\n        var now = Date.now();\n        if (this.scrollSetBy != renderer && now - this.scrollSetAt < 500)\n            return;\n        var r = isOrig ? r1 : r2;\n        if (this.scrollSetBy != renderer) {\n            if (isOrig && this.scrollA == r.session.getScrollTop())\n                return;\n            else if (!isOrig && this.scrollB\n                == r.session.getScrollTop())\n                return;\n        }\n        var rOther = isOrig ? r2 : r1;\n        var targetPos = r.session.getScrollTop();\n        this.$syncScroll = false;\n        if (isOrig) {\n            this.scrollA = r.session.getScrollTop();\n            this.scrollB = targetPos;\n        }\n        else {\n            this.scrollA = targetPos;\n            this.scrollB = r.session.getScrollTop();\n        }\n        this.scrollSetBy = renderer;\n        rOther.session.setScrollTop(targetPos);\n        this.$syncScroll = true;\n        this.scrollSetAt = now;\n    };\n    SplitDiffView.prototype.onMouseWheel = function (ev) {\n        if (ev.getAccelKey())\n            return;\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        var editor = ev.editor;\n        var isScrolable = editor.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n        if (!isScrolable) {\n            var other = editor == this.editorA ? this.editorB : this.editorA;\n            if (other.renderer.isScrollableBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed))\n                other.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n    SplitDiffView.prototype.$attachSessionsEventHandlers = function () {\n        this.$attachSessionEventHandlers(this.editorA, this.markerA);\n        this.$attachSessionEventHandlers(this.editorB, this.markerB);\n    };\n    SplitDiffView.prototype.$attachSessionEventHandlers = function (editor, marker) {\n        editor.session.on(\"changeScrollTop\", this.onScroll);\n        editor.session.on(\"changeFold\", this.onChangeFold);\n        editor.session.addDynamicMarker(marker);\n        editor.selection.on(\"changeCursor\", this.onSelect);\n        editor.selection.on(\"changeSelection\", this.onSelect);\n        editor.session.on(\"changeWrapLimit\", this.onChangeWrapLimit);\n        editor.session.on(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    SplitDiffView.prototype.$detachSessionsEventHandlers = function () {\n        this.$detachSessionHandlers(this.editorA, this.markerA);\n        this.$detachSessionHandlers(this.editorB, this.markerB);\n    };\n    SplitDiffView.prototype.$detachSessionHandlers = function (editor, marker) {\n        editor.session.off(\"changeScrollTop\", this.onScroll);\n        editor.session.off(\"changeFold\", this.onChangeFold);\n        editor.session.removeMarker(marker.id);\n        editor.selection.off(\"changeCursor\", this.onSelect);\n        editor.selection.off(\"changeSelection\", this.onSelect);\n        editor.session.off(\"changeWrapLimit\", this.onChangeWrapLimit);\n        editor.session.off(\"changeWrapMode\", this.onChangeWrapLimit);\n    };\n    SplitDiffView.prototype.$attachEventHandlers = function () {\n        this.editorA.renderer.on(\"themeChange\", this.onChangeTheme);\n        this.editorB.renderer.on(\"themeChange\", this.onChangeTheme);\n        this.editorA.on(\"mousewheel\", this.onMouseWheel);\n        this.editorB.on(\"mousewheel\", this.onMouseWheel);\n        this.editorA.on(\"input\", this.onInput);\n        this.editorB.on(\"input\", this.onInput);\n    };\n    SplitDiffView.prototype.$detachEventHandlers = function () {\n        this.$detachSessionsEventHandlers();\n        this.clearSelectionMarkers();\n        this.editorA.renderer.off(\"themeChange\", this.onChangeTheme);\n        this.editorB.renderer.off(\"themeChange\", this.onChangeTheme);\n        this.$detachEditorEventHandlers(this.editorA);\n        this.$detachEditorEventHandlers(this.editorB);\n    };\n    SplitDiffView.prototype.$detachEditorEventHandlers = function (editor) {\n        editor.off(\"mousewheel\", this.onMouseWheel);\n        editor.off(\"input\", this.onInput);\n    };\n    return SplitDiffView;\n}(BaseDiffView));\nexports.SplitDiffView = SplitDiffView;\n\n});\n\nace.define(\"ace/ext/diff/providers/default\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/ext/diff/base_diff_view\"], function(require, exports, module){'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar _a;\nvar _b, _c, _d, _e, _f;\nfunction equals(one, other, itemEquals) {\n    if (itemEquals === void 0) { itemEquals = function (a, b) { return a === b; }; }\n    if (one === other) {\n        return true;\n    }\n    if (!one || !other) {\n        return false;\n    }\n    if (one.length !== other.length) {\n        return false;\n    }\n    for (var i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction groupAdjacentBy(items, shouldBeGrouped) {\n    var currentGroup, last, items_1, items_1_1, item, e_1_1;\n    var e_1, _a;\n    return __generator(this, function (_g) {\n        switch (_g.label) {\n            case 0:\n                _g.trys.push([0, 8, 9, 10]);\n                items_1 = __values(items), items_1_1 = items_1.next();\n                _g.label = 1;\n            case 1:\n                if (!!items_1_1.done) return [3 /*break*/, 7];\n                item = items_1_1.value;\n                if (!(last !== undefined && shouldBeGrouped(last, item))) return [3 /*break*/, 2];\n                currentGroup.push(item);\n                return [3 /*break*/, 5];\n            case 2:\n                if (!currentGroup) return [3 /*break*/, 4];\n                return [4 /*yield*/, currentGroup];\n            case 3:\n                _g.sent();\n                _g.label = 4;\n            case 4:\n                currentGroup = [item];\n                _g.label = 5;\n            case 5:\n                last = item;\n                _g.label = 6;\n            case 6:\n                items_1_1 = items_1.next();\n                return [3 /*break*/, 1];\n            case 7: return [3 /*break*/, 10];\n            case 8:\n                e_1_1 = _g.sent();\n                e_1 = { error: e_1_1 };\n                return [3 /*break*/, 10];\n            case 9:\n                try {\n                    if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n                return [7 /*endfinally*/];\n            case 10:\n                if (!currentGroup) return [3 /*break*/, 12];\n                return [4 /*yield*/, currentGroup];\n            case 11:\n                _g.sent();\n                _g.label = 12;\n            case 12: return [2 /*return*/];\n        }\n    });\n}\nfunction forEachAdjacent(arr, f) {\n    for (var i = 0; i <= arr.length; i++) {\n        f(i === 0 ? undefined : arr[i - 1], i === arr.length ? undefined : arr[i]);\n    }\n}\nfunction forEachWithNeighbors(arr, f) {\n    for (var i = 0; i < arr.length; i++) {\n        f(i === 0 ? undefined : arr[i - 1], arr[i], i + 1 === arr.length ? undefined : arr[i + 1]);\n    }\n}\nfunction pushMany(arr, items) {\n    var e_2, _a;\n    try {\n        for (var items_2 = __values(items), items_2_1 = items_2.next(); !items_2_1.done; items_2_1 = items_2.next()) {\n            var item = items_2_1.value;\n            arr.push(item);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (items_2_1 && !items_2_1.done && (_a = items_2.return)) _a.call(items_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n}\nfunction compareBy(selector, comparator) {\n    return function (a, b) { return comparator(selector(a), selector(b)); };\n}\nvar numberComparator = function (a, b) { return a - b; };\nfunction reverseOrder(comparator) {\n    return function (a, b) { return -comparator(a, b); };\n}\nvar BugIndicatingError = /** @class */ (function (_super) {\n    __extends(BugIndicatingError, _super);\n    function BugIndicatingError(message) {\n        var _this = _super.call(this, message || \"An unexpected bug occurred.\") || this;\n        Object.setPrototypeOf(_this, BugIndicatingError.prototype);\n        return _this;\n    }\n    return BugIndicatingError;\n}(Error));\nfunction assert(condition, message) {\n    if (message === void 0) { message = \"unexpected state\"; }\n    if (!condition) {\n        throw new BugIndicatingError(\"Assertion Failed: \".concat(message));\n    }\n}\nfunction assertFn(condition) {\n    condition();\n}\nfunction checkAdjacentItems(items, predicate) {\n    var i = 0;\n    while (i < items.length - 1) {\n        var a = items[i];\n        var b = items[i + 1];\n        if (!predicate(a, b)) {\n            return false;\n        }\n        i++;\n    }\n    return true;\n}\nvar OffsetRange = /** @class */ (function () {\n    function OffsetRange(start, endExclusive) {\n        this.start = start;\n        this.endExclusive = endExclusive;\n        if (start > endExclusive) {\n            throw new BugIndicatingError(\"Invalid range: \".concat(this.toString()));\n        }\n    }\n    OffsetRange.fromTo = function (start, endExclusive) {\n        return new OffsetRange(start, endExclusive);\n    };\n    OffsetRange.addRange = function (range, sortedRanges) {\n        var i = 0;\n        while (i < sortedRanges.length && sortedRanges[i].endExclusive < range.start) {\n            i++;\n        }\n        var j = i;\n        while (j < sortedRanges.length && sortedRanges[j].start <= range.endExclusive) {\n            j++;\n        }\n        if (i === j) {\n            sortedRanges.splice(i, 0, range);\n        }\n        else {\n            var start = Math.min(range.start, sortedRanges[i].start);\n            var end = Math.max(range.endExclusive, sortedRanges[j - 1].endExclusive);\n            sortedRanges.splice(i, j - i, new OffsetRange(start, end));\n        }\n    };\n    OffsetRange.tryCreate = function (start, endExclusive) {\n        if (start > endExclusive) {\n            return undefined;\n        }\n        return new OffsetRange(start, endExclusive);\n    };\n    OffsetRange.ofLength = function (length) {\n        return new OffsetRange(0, length);\n    };\n    OffsetRange.ofStartAndLength = function (start, length) {\n        return new OffsetRange(start, start + length);\n    };\n    OffsetRange.emptyAt = function (offset) {\n        return new OffsetRange(offset, offset);\n    };\n    Object.defineProperty(OffsetRange.prototype, \"isEmpty\", {\n        get: function () {\n            return this.start === this.endExclusive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OffsetRange.prototype.delta = function (offset) {\n        return new OffsetRange(this.start + offset, this.endExclusive + offset);\n    };\n    OffsetRange.prototype.deltaStart = function (offset) {\n        return new OffsetRange(this.start + offset, this.endExclusive);\n    };\n    OffsetRange.prototype.deltaEnd = function (offset) {\n        return new OffsetRange(this.start, this.endExclusive + offset);\n    };\n    Object.defineProperty(OffsetRange.prototype, \"length\", {\n        get: function () {\n            return this.endExclusive - this.start;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OffsetRange.prototype.toString = function () {\n        return \"[\".concat(this.start, \", \").concat(this.endExclusive, \")\");\n    };\n    OffsetRange.prototype.equals = function (other) {\n        return this.start === other.start && this.endExclusive === other.endExclusive;\n    };\n    OffsetRange.prototype.containsRange = function (other) {\n        return this.start <= other.start && other.endExclusive <= this.endExclusive;\n    };\n    OffsetRange.prototype.contains = function (offset) {\n        return this.start <= offset && offset < this.endExclusive;\n    };\n    OffsetRange.prototype.join = function (other) {\n        return new OffsetRange(Math.min(this.start, other.start), Math.max(this.endExclusive, other.endExclusive));\n    };\n    OffsetRange.prototype.intersect = function (other) {\n        var start = Math.max(this.start, other.start);\n        var end = Math.min(this.endExclusive, other.endExclusive);\n        if (start <= end) {\n            return new OffsetRange(start, end);\n        }\n        return undefined;\n    };\n    OffsetRange.prototype.intersectionLength = function (range) {\n        var start = Math.max(this.start, range.start);\n        var end = Math.min(this.endExclusive, range.endExclusive);\n        return Math.max(0, end - start);\n    };\n    OffsetRange.prototype.intersects = function (other) {\n        var start = Math.max(this.start, other.start);\n        var end = Math.min(this.endExclusive, other.endExclusive);\n        return start < end;\n    };\n    OffsetRange.prototype.intersectsOrTouches = function (other) {\n        var start = Math.max(this.start, other.start);\n        var end = Math.min(this.endExclusive, other.endExclusive);\n        return start <= end;\n    };\n    OffsetRange.prototype.isBefore = function (other) {\n        return this.endExclusive <= other.start;\n    };\n    OffsetRange.prototype.isAfter = function (other) {\n        return this.start >= other.endExclusive;\n    };\n    OffsetRange.prototype.slice = function (arr) {\n        return arr.slice(this.start, this.endExclusive);\n    };\n    OffsetRange.prototype.substring = function (str) {\n        return str.substring(this.start, this.endExclusive);\n    };\n    OffsetRange.prototype.clip = function (value) {\n        if (this.isEmpty) {\n            throw new BugIndicatingError(\"Invalid clipping range: \".concat(this.toString()));\n        }\n        return Math.max(this.start, Math.min(this.endExclusive - 1, value));\n    };\n    OffsetRange.prototype.clipCyclic = function (value) {\n        if (this.isEmpty) {\n            throw new BugIndicatingError(\"Invalid clipping range: \".concat(this.toString()));\n        }\n        if (value < this.start) {\n            return this.endExclusive - (this.start - value) % this.length;\n        }\n        if (value >= this.endExclusive) {\n            return this.start + (value - this.start) % this.length;\n        }\n        return value;\n    };\n    OffsetRange.prototype.map = function (f) {\n        var result = [];\n        for (var i = this.start; i < this.endExclusive; i++) {\n            result.push(f(i));\n        }\n        return result;\n    };\n    OffsetRange.prototype.forEach = function (f) {\n        for (var i = this.start; i < this.endExclusive; i++) {\n            f(i);\n        }\n    };\n    return OffsetRange;\n}());\nvar Position = /** @class */ (function () {\n    function Position(lineNumber, column) {\n        this.lineNumber = lineNumber;\n        this.column = column;\n    }\n    Position.prototype.equals = function (other) {\n        return Position.equals(this, other);\n    };\n    Position.equals = function (a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        return !!a && !!b && a.lineNumber === b.lineNumber && a.column === b.column;\n    };\n    Position.prototype.isBefore = function (other) {\n        return Position.isBefore(this, other);\n    };\n    Position.isBefore = function (a, b) {\n        if (a.lineNumber < b.lineNumber) {\n            return true;\n        }\n        if (b.lineNumber < a.lineNumber) {\n            return false;\n        }\n        return a.column < b.column;\n    };\n    Position.prototype.isBeforeOrEqual = function (other) {\n        return Position.isBeforeOrEqual(this, other);\n    };\n    Position.isBeforeOrEqual = function (a, b) {\n        if (a.lineNumber < b.lineNumber) {\n            return true;\n        }\n        if (b.lineNumber < a.lineNumber) {\n            return false;\n        }\n        return a.column <= b.column;\n    };\n    return Position;\n}());\nvar Range = /** @class */ (function () {\n    function Range(startLineNumber, startColumn, endLineNumber, endColumn) {\n        if (startLineNumber > endLineNumber || startLineNumber === endLineNumber && startColumn > endColumn) {\n            this.startLineNumber = endLineNumber;\n            this.startColumn = endColumn;\n            this.endLineNumber = startLineNumber;\n            this.endColumn = startColumn;\n        }\n        else {\n            this.startLineNumber = startLineNumber;\n            this.startColumn = startColumn;\n            this.endLineNumber = endLineNumber;\n            this.endColumn = endColumn;\n        }\n    }\n    Range.prototype.isEmpty = function () {\n        return Range.isEmpty(this);\n    };\n    Range.isEmpty = function (range) {\n        return range.startLineNumber === range.endLineNumber && range.startColumn === range.endColumn;\n    };\n    Range.prototype.containsPosition = function (position) {\n        return Range.containsPosition(this, position);\n    };\n    Range.containsPosition = function (range, position) {\n        if (position.lineNumber < range.startLineNumber || position.lineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (position.lineNumber === range.startLineNumber && position.column < range.startColumn) {\n            return false;\n        }\n        if (position.lineNumber === range.endLineNumber && position.column > range.endColumn) {\n            return false;\n        }\n        return true;\n    };\n    Range.prototype.containsRange = function (range) {\n        return Range.containsRange(this, range);\n    };\n    Range.containsRange = function (range, otherRange) {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    };\n    Range.prototype.strictContainsRange = function (range) {\n        return Range.strictContainsRange(this, range);\n    };\n    Range.strictContainsRange = function (range, otherRange) {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn <= range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn >= range.endColumn) {\n            return false;\n        }\n        return true;\n    };\n    Range.prototype.plusRange = function (range) {\n        return Range.plusRange(this, range);\n    };\n    Range.plusRange = function (a, b) {\n        var startLineNumber;\n        var startColumn;\n        var endLineNumber;\n        var endColumn;\n        if (b.startLineNumber < a.startLineNumber) {\n            startLineNumber = b.startLineNumber;\n            startColumn = b.startColumn;\n        }\n        else if (b.startLineNumber === a.startLineNumber) {\n            startLineNumber = b.startLineNumber;\n            startColumn = Math.min(b.startColumn, a.startColumn);\n        }\n        else {\n            startLineNumber = a.startLineNumber;\n            startColumn = a.startColumn;\n        }\n        if (b.endLineNumber > a.endLineNumber) {\n            endLineNumber = b.endLineNumber;\n            endColumn = b.endColumn;\n        }\n        else if (b.endLineNumber === a.endLineNumber) {\n            endLineNumber = b.endLineNumber;\n            endColumn = Math.max(b.endColumn, a.endColumn);\n        }\n        else {\n            endLineNumber = a.endLineNumber;\n            endColumn = a.endColumn;\n        }\n        return new Range(startLineNumber, startColumn, endLineNumber, endColumn);\n    };\n    Range.prototype.intersectRanges = function (range) {\n        return Range.intersectRanges(this, range);\n    };\n    Range.intersectRanges = function (a, b) {\n        var resultStartLineNumber = a.startLineNumber;\n        var resultStartColumn = a.startColumn;\n        var resultEndLineNumber = a.endLineNumber;\n        var resultEndColumn = a.endColumn;\n        var otherStartLineNumber = b.startLineNumber;\n        var otherStartColumn = b.startColumn;\n        var otherEndLineNumber = b.endLineNumber;\n        var otherEndColumn = b.endColumn;\n        if (resultStartLineNumber < otherStartLineNumber) {\n            resultStartLineNumber = otherStartLineNumber;\n            resultStartColumn = otherStartColumn;\n        }\n        else if (resultStartLineNumber === otherStartLineNumber) {\n            resultStartColumn = Math.max(resultStartColumn, otherStartColumn);\n        }\n        if (resultEndLineNumber > otherEndLineNumber) {\n            resultEndLineNumber = otherEndLineNumber;\n            resultEndColumn = otherEndColumn;\n        }\n        else if (resultEndLineNumber === otherEndLineNumber) {\n            resultEndColumn = Math.min(resultEndColumn, otherEndColumn);\n        }\n        if (resultStartLineNumber > resultEndLineNumber) {\n            return null;\n        }\n        if (resultStartLineNumber === resultEndLineNumber && resultStartColumn > resultEndColumn) {\n            return null;\n        }\n        return new Range(resultStartLineNumber, resultStartColumn, resultEndLineNumber, resultEndColumn);\n    };\n    Range.prototype.equalsRange = function (other) {\n        return Range.equalsRange(this, other);\n    };\n    Range.equalsRange = function (a, b) {\n        if (!a && !b) {\n            return true;\n        }\n        return !!a && !!b && a.startLineNumber === b.startLineNumber && a.startColumn === b.startColumn && a.endLineNumber === b.endLineNumber && a.endColumn === b.endColumn;\n    };\n    Range.prototype.getEndPosition = function () {\n        return Range.getEndPosition(this);\n    };\n    Range.getEndPosition = function (range) {\n        return new Position(range.endLineNumber, range.endColumn);\n    };\n    Range.prototype.getStartPosition = function () {\n        return Range.getStartPosition(this);\n    };\n    Range.getStartPosition = function (range) {\n        return new Position(range.startLineNumber, range.startColumn);\n    };\n    Range.prototype.collapseToStart = function () {\n        return Range.collapseToStart(this);\n    };\n    Range.collapseToStart = function (range) {\n        return new Range(range.startLineNumber, range.startColumn, range.startLineNumber, range.startColumn);\n    };\n    Range.prototype.collapseToEnd = function () {\n        return Range.collapseToEnd(this);\n    };\n    Range.collapseToEnd = function (range) {\n        return new Range(range.endLineNumber, range.endColumn, range.endLineNumber, range.endColumn);\n    };\n    Range.fromPositions = function (start, end) {\n        if (end === void 0) { end = start; }\n        return new Range(start.lineNumber, start.column, end.lineNumber, end.column);\n    };\n    return Range;\n}());\nfunction findLastMonotonous(array, predicate) {\n    var idx = findLastIdxMonotonous(array, predicate);\n    return idx === -1 ? undefined : array[idx];\n}\nfunction findLastIdxMonotonous(array, predicate, startIdx, endIdxEx) {\n    if (startIdx === void 0) { startIdx = 0; }\n    if (endIdxEx === void 0) { endIdxEx = array.length; }\n    var i = startIdx;\n    var j = endIdxEx;\n    while (i < j) {\n        var k = Math.floor((i + j) / 2);\n        if (predicate(array[k])) {\n            i = k + 1;\n        }\n        else {\n            j = k;\n        }\n    }\n    return i - 1;\n}\nfunction findFirstMonotonous(array, predicate) {\n    var idx = findFirstIdxMonotonousOrArrLen(array, predicate);\n    return idx === array.length ? undefined : array[idx];\n}\nfunction findFirstIdxMonotonousOrArrLen(array, predicate, startIdx, endIdxEx) {\n    if (startIdx === void 0) { startIdx = 0; }\n    if (endIdxEx === void 0) { endIdxEx = array.length; }\n    var i = startIdx;\n    var j = endIdxEx;\n    while (i < j) {\n        var k = Math.floor((i + j) / 2);\n        if (predicate(array[k])) {\n            j = k;\n        }\n        else {\n            i = k + 1;\n        }\n    }\n    return i;\n}\nvar MonotonousArray = /** @class */ (function () {\n    function MonotonousArray(_array) {\n        this._array = _array;\n        this._findLastMonotonousLastIdx = 0;\n    }\n    MonotonousArray.prototype.findLastMonotonous = function (predicate) {\n        var e_3, _a;\n        if (_b.assertInvariants) {\n            if (this._prevFindLastPredicate) {\n                try {\n                    for (var _g = __values(this._array), _h = _g.next(); !_h.done; _h = _g.next()) {\n                        var item = _h.value;\n                        if (this._prevFindLastPredicate(item) && !predicate(item)) {\n                            throw new Error(\"MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.\");\n                        }\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n            this._prevFindLastPredicate = predicate;\n        }\n        var idx = findLastIdxMonotonous(this._array, predicate, this._findLastMonotonousLastIdx);\n        this._findLastMonotonousLastIdx = idx + 1;\n        return idx === -1 ? undefined : this._array[idx];\n    };\n    return MonotonousArray;\n}());\n_b = MonotonousArray;\n(function () {\n    _b.assertInvariants = false;\n})();\nvar LineRange = /** @class */ (function () {\n    function LineRange(startLineNumber, endLineNumberExclusive) {\n        if (startLineNumber > endLineNumberExclusive) {\n            throw new BugIndicatingError(\"startLineNumber \".concat(startLineNumber, \" cannot be after endLineNumberExclusive \").concat(endLineNumberExclusive));\n        }\n        this.startLineNumber = startLineNumber;\n        this.endLineNumberExclusive = endLineNumberExclusive;\n    }\n    LineRange.fromRangeInclusive = function (range) {\n        return new LineRange(range.startLineNumber, range.endLineNumber + 1);\n    };\n    LineRange.join = function (lineRanges) {\n        if (lineRanges.length === 0) {\n            throw new BugIndicatingError(\"lineRanges cannot be empty\");\n        }\n        var startLineNumber = lineRanges[0].startLineNumber;\n        var endLineNumberExclusive = lineRanges[0].endLineNumberExclusive;\n        for (var i = 1; i < lineRanges.length; i++) {\n            startLineNumber = Math.min(startLineNumber, lineRanges[i].startLineNumber);\n            endLineNumberExclusive = Math.max(endLineNumberExclusive, lineRanges[i].endLineNumberExclusive);\n        }\n        return new LineRange(startLineNumber, endLineNumberExclusive);\n    };\n    LineRange.ofLength = function (startLineNumber, length) {\n        return new LineRange(startLineNumber, startLineNumber + length);\n    };\n    Object.defineProperty(LineRange.prototype, \"isEmpty\", {\n        get: function () {\n            return this.startLineNumber === this.endLineNumberExclusive;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineRange.prototype.delta = function (offset) {\n        return new LineRange(this.startLineNumber + offset, this.endLineNumberExclusive + offset);\n    };\n    Object.defineProperty(LineRange.prototype, \"length\", {\n        get: function () {\n            return this.endLineNumberExclusive - this.startLineNumber;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineRange.prototype.join = function (other) {\n        return new LineRange(Math.min(this.startLineNumber, other.startLineNumber), Math.max(this.endLineNumberExclusive, other.endLineNumberExclusive));\n    };\n    LineRange.prototype.intersect = function (other) {\n        var startLineNumber = Math.max(this.startLineNumber, other.startLineNumber);\n        var endLineNumberExclusive = Math.min(this.endLineNumberExclusive, other.endLineNumberExclusive);\n        if (startLineNumber <= endLineNumberExclusive) {\n            return new LineRange(startLineNumber, endLineNumberExclusive);\n        }\n        return undefined;\n    };\n    LineRange.prototype.overlapOrTouch = function (other) {\n        return this.startLineNumber <= other.endLineNumberExclusive && other.startLineNumber <= this.endLineNumberExclusive;\n    };\n    LineRange.prototype.toInclusiveRange = function () {\n        if (this.isEmpty) {\n            return null;\n        }\n        return new Range(this.startLineNumber, 1, this.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER);\n    };\n    LineRange.prototype.toOffsetRange = function () {\n        return new OffsetRange(this.startLineNumber - 1, this.endLineNumberExclusive - 1);\n    };\n    return LineRange;\n}());\nvar LineRangeSet = /** @class */ (function () {\n    function LineRangeSet(_normalizedRanges) {\n        if (_normalizedRanges === void 0) { _normalizedRanges = []; }\n        this._normalizedRanges = _normalizedRanges;\n    }\n    Object.defineProperty(LineRangeSet.prototype, \"ranges\", {\n        get: function () {\n            return this._normalizedRanges;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineRangeSet.prototype.addRange = function (range) {\n        if (range.length === 0) {\n            return;\n        }\n        var joinRangeStartIdx = findFirstIdxMonotonousOrArrLen(this._normalizedRanges, function (r) { return r.endLineNumberExclusive >= range.startLineNumber; });\n        var joinRangeEndIdxExclusive = findLastIdxMonotonous(this._normalizedRanges, function (r) { return r.startLineNumber <= range.endLineNumberExclusive; }) + 1;\n        if (joinRangeStartIdx === joinRangeEndIdxExclusive) {\n            this._normalizedRanges.splice(joinRangeStartIdx, 0, range);\n        }\n        else if (joinRangeStartIdx === joinRangeEndIdxExclusive - 1) {\n            var joinRange = this._normalizedRanges[joinRangeStartIdx];\n            this._normalizedRanges[joinRangeStartIdx] = joinRange.join(range);\n        }\n        else {\n            var joinRange = this._normalizedRanges[joinRangeStartIdx].join(this._normalizedRanges[joinRangeEndIdxExclusive - 1]).join(range);\n            this._normalizedRanges.splice(joinRangeStartIdx, joinRangeEndIdxExclusive - joinRangeStartIdx, joinRange);\n        }\n    };\n    LineRangeSet.prototype.contains = function (lineNumber) {\n        var rangeThatStartsBeforeEnd = findLastMonotonous(this._normalizedRanges, function (r) { return r.startLineNumber <= lineNumber; });\n        return !!rangeThatStartsBeforeEnd && rangeThatStartsBeforeEnd.endLineNumberExclusive > lineNumber;\n    };\n    LineRangeSet.prototype.subtractFrom = function (range) {\n        var joinRangeStartIdx = findFirstIdxMonotonousOrArrLen(this._normalizedRanges, function (r) { return r.endLineNumberExclusive >= range.startLineNumber; });\n        var joinRangeEndIdxExclusive = findLastIdxMonotonous(this._normalizedRanges, function (r) { return r.startLineNumber <= range.endLineNumberExclusive; }) + 1;\n        if (joinRangeStartIdx === joinRangeEndIdxExclusive) {\n            return new LineRangeSet([range]);\n        }\n        var result = [];\n        var startLineNumber = range.startLineNumber;\n        for (var i = joinRangeStartIdx; i < joinRangeEndIdxExclusive; i++) {\n            var r = this._normalizedRanges[i];\n            if (r.startLineNumber > startLineNumber) {\n                result.push(new LineRange(startLineNumber, r.startLineNumber));\n            }\n            startLineNumber = r.endLineNumberExclusive;\n        }\n        if (startLineNumber < range.endLineNumberExclusive) {\n            result.push(new LineRange(startLineNumber, range.endLineNumberExclusive));\n        }\n        return new LineRangeSet(result);\n    };\n    LineRangeSet.prototype.getIntersection = function (other) {\n        var result = [];\n        var i1 = 0;\n        var i2 = 0;\n        while (i1 < this._normalizedRanges.length && i2 < other._normalizedRanges.length) {\n            var r1 = this._normalizedRanges[i1];\n            var r2 = other._normalizedRanges[i2];\n            var i = r1.intersect(r2);\n            if (i && !i.isEmpty) {\n                result.push(i);\n            }\n            if (r1.endLineNumberExclusive < r2.endLineNumberExclusive) {\n                i1++;\n            }\n            else {\n                i2++;\n            }\n        }\n        return new LineRangeSet(result);\n    };\n    LineRangeSet.prototype.getWithDelta = function (value) {\n        return new LineRangeSet(this._normalizedRanges.map(function (r) { return r.delta(value); }));\n    };\n    return LineRangeSet;\n}());\nvar TextLength = /** @class */ (function () {\n    function TextLength(lineCount, columnCount) {\n        this.lineCount = lineCount;\n        this.columnCount = columnCount;\n    }\n    TextLength.prototype.toLineRange = function () {\n        return LineRange.ofLength(1, this.lineCount);\n    };\n    TextLength.prototype.addToPosition = function (position) {\n        if (this.lineCount === 0) {\n            return new Position(position.lineNumber, position.column + this.columnCount);\n        }\n        else {\n            return new Position(position.lineNumber + this.lineCount, this.columnCount + 1);\n        }\n    };\n    return TextLength;\n}());\n_c = TextLength;\n(function () {\n    _c.zero = new _c(0, 0);\n})();\nvar LineBasedText = /** @class */ (function () {\n    function LineBasedText(_getLineContent, _lineCount) {\n        assert(_lineCount >= 1);\n        this._getLineContent = _getLineContent;\n        this._lineCount = _lineCount;\n    }\n    LineBasedText.prototype.getValueOfRange = function (range) {\n        if (range.startLineNumber === range.endLineNumber) {\n            return this._getLineContent(range.startLineNumber).substring(range.startColumn - 1, range.endColumn - 1);\n        }\n        var result = this._getLineContent(range.startLineNumber).substring(range.startColumn - 1);\n        for (var i = range.startLineNumber + 1; i < range.endLineNumber; i++) {\n            result += \"\\n\" + this._getLineContent(i);\n        }\n        result += \"\\n\" + this._getLineContent(range.endLineNumber).substring(0, range.endColumn - 1);\n        return result;\n    };\n    LineBasedText.prototype.getLineLength = function (lineNumber) {\n        return this._getLineContent(lineNumber).length;\n    };\n    Object.defineProperty(LineBasedText.prototype, \"length\", {\n        get: function () {\n            var lastLine = this._getLineContent(this._lineCount);\n            return new TextLength(this._lineCount - 1, lastLine.length);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return LineBasedText;\n}());\nvar ArrayText = /** @class */ (function (_super) {\n    __extends(ArrayText, _super);\n    function ArrayText(lines) {\n        return _super.call(this, function (lineNumber) { return lines[lineNumber - 1]; }, lines.length) || this;\n    }\n    return ArrayText;\n}(LineBasedText));\nvar LinesDiff = /** @class */ (function () {\n    function LinesDiff(changes, moves, hitTimeout) {\n        this.changes = changes;\n        this.moves = moves;\n        this.hitTimeout = hitTimeout;\n    }\n    return LinesDiff;\n}());\nvar MovedText = /** @class */ (function () {\n    function MovedText(lineRangeMapping, changes) {\n        this.lineRangeMapping = lineRangeMapping;\n        this.changes = changes;\n    }\n    return MovedText;\n}());\nvar LineRangeMapping = /** @class */ (function () {\n    function LineRangeMapping(originalRange, modifiedRange) {\n        this.original = originalRange;\n        this.modified = modifiedRange;\n    }\n    LineRangeMapping.prototype.join = function (other) {\n        return new LineRangeMapping(this.original.join(other.original), this.modified.join(other.modified));\n    };\n    Object.defineProperty(LineRangeMapping.prototype, \"changedLineCount\", {\n        get: function () {\n            return Math.max(this.original.length, this.modified.length);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineRangeMapping.prototype.toRangeMapping = function () {\n        var origInclusiveRange = this.original.toInclusiveRange();\n        var modInclusiveRange = this.modified.toInclusiveRange();\n        if (origInclusiveRange && modInclusiveRange) {\n            return new RangeMapping(origInclusiveRange, modInclusiveRange);\n        }\n        else if (this.original.startLineNumber === 1 || this.modified.startLineNumber === 1) {\n            if (!(this.modified.startLineNumber === 1 && this.original.startLineNumber === 1)) {\n                throw new BugIndicatingError(\"not a valid diff\");\n            }\n            return new RangeMapping(new Range(this.original.startLineNumber, 1, this.original.endLineNumberExclusive, 1), new Range(this.modified.startLineNumber, 1, this.modified.endLineNumberExclusive, 1));\n        }\n        else {\n            return new RangeMapping(new Range(this.original.startLineNumber - 1, Number.MAX_SAFE_INTEGER, this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), new Range(this.modified.startLineNumber - 1, Number.MAX_SAFE_INTEGER, this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER));\n        }\n    };\n    LineRangeMapping.prototype.toRangeMapping2 = function (original, modified) {\n        if (isValidLineNumber(this.original.endLineNumberExclusive, original) && isValidLineNumber(this.modified.endLineNumberExclusive, modified)) {\n            return new RangeMapping(new Range(this.original.startLineNumber, 1, this.original.endLineNumberExclusive, 1), new Range(this.modified.startLineNumber, 1, this.modified.endLineNumberExclusive, 1));\n        }\n        if (!this.original.isEmpty && !this.modified.isEmpty) {\n            return new RangeMapping(Range.fromPositions(new Position(this.original.startLineNumber, 1), normalizePosition(new Position(this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), original)), Range.fromPositions(new Position(this.modified.startLineNumber, 1), normalizePosition(new Position(this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), modified)));\n        }\n        if (this.original.startLineNumber > 1 && this.modified.startLineNumber > 1) {\n            return new RangeMapping(Range.fromPositions(normalizePosition(new Position(this.original.startLineNumber - 1, Number.MAX_SAFE_INTEGER), original), normalizePosition(new Position(this.original.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), original)), Range.fromPositions(normalizePosition(new Position(this.modified.startLineNumber - 1, Number.MAX_SAFE_INTEGER), modified), normalizePosition(new Position(this.modified.endLineNumberExclusive - 1, Number.MAX_SAFE_INTEGER), modified)));\n        }\n        throw new BugIndicatingError();\n    };\n    return LineRangeMapping;\n}());\nfunction normalizePosition(position, content) {\n    if (position.lineNumber < 1) {\n        return new Position(1, 1);\n    }\n    if (position.lineNumber > content.length) {\n        return new Position(content.length, content[content.length - 1].length + 1);\n    }\n    var line = content[position.lineNumber - 1];\n    if (position.column > line.length + 1) {\n        return new Position(position.lineNumber, line.length + 1);\n    }\n    return position;\n}\nfunction isValidLineNumber(lineNumber, lines) {\n    return lineNumber >= 1 && lineNumber <= lines.length;\n}\nvar DetailedLineRangeMapping = /** @class */ (function (_super) {\n    __extends(DetailedLineRangeMapping, _super);\n    function DetailedLineRangeMapping(originalRange, modifiedRange, innerChanges) {\n        var _this = _super.call(this, originalRange, modifiedRange) || this;\n        _this.innerChanges = innerChanges;\n        return _this;\n    }\n    DetailedLineRangeMapping.fromRangeMappings = function (rangeMappings) {\n        var originalRange = LineRange.join(rangeMappings.map(function (r) { return LineRange.fromRangeInclusive(r.originalRange); }));\n        var modifiedRange = LineRange.join(rangeMappings.map(function (r) { return LineRange.fromRangeInclusive(r.modifiedRange); }));\n        return new DetailedLineRangeMapping(originalRange, modifiedRange, rangeMappings);\n    };\n    DetailedLineRangeMapping.prototype.flip = function () {\n        var _a;\n        return new DetailedLineRangeMapping(this.modified, this.original, (_a = this.innerChanges) === null || _a === void 0 ? void 0 : _a.map(function (c) { return c.flip(); }));\n    };\n    DetailedLineRangeMapping.prototype.withInnerChangesFromLineRanges = function () {\n        return new DetailedLineRangeMapping(this.original, this.modified, [this.toRangeMapping()]);\n    };\n    return DetailedLineRangeMapping;\n}(LineRangeMapping));\nvar RangeMapping = /** @class */ (function () {\n    function RangeMapping(originalRange, modifiedRange) {\n        this.originalRange = originalRange;\n        this.modifiedRange = modifiedRange;\n    }\n    RangeMapping.join = function (rangeMappings) {\n        if (rangeMappings.length === 0) {\n            throw new BugIndicatingError(\"Cannot join an empty list of range mappings\");\n        }\n        var result = rangeMappings[0];\n        for (var i = 1; i < rangeMappings.length; i++) {\n            result = result.join(rangeMappings[i]);\n        }\n        return result;\n    };\n    RangeMapping.assertSorted = function (rangeMappings) {\n        for (var i = 1; i < rangeMappings.length; i++) {\n            var previous = rangeMappings[i - 1];\n            var current = rangeMappings[i];\n            if (!(previous.originalRange.getEndPosition().isBeforeOrEqual(current.originalRange.getStartPosition()) && previous.modifiedRange.getEndPosition().isBeforeOrEqual(current.modifiedRange.getStartPosition()))) {\n                throw new BugIndicatingError(\"Range mappings must be sorted\");\n            }\n        }\n    };\n    RangeMapping.prototype.flip = function () {\n        return new RangeMapping(this.modifiedRange, this.originalRange);\n    };\n    RangeMapping.prototype.join = function (other) {\n        return new RangeMapping(this.originalRange.plusRange(other.originalRange), this.modifiedRange.plusRange(other.modifiedRange));\n    };\n    return RangeMapping;\n}());\nfunction lineRangeMappingFromRangeMappings(alignments, originalLines, modifiedLines, dontAssertStartLine) {\n    var e_4, _a;\n    if (dontAssertStartLine === void 0) { dontAssertStartLine = false; }\n    var changes = [];\n    try {\n        for (var _g = __values(groupAdjacentBy(alignments.map(function (a) { return getLineRangeMapping(a, originalLines, modifiedLines); }), function (a1, a2) { return a1.original.overlapOrTouch(a2.original) || a1.modified.overlapOrTouch(a2.modified); })), _h = _g.next(); !_h.done; _h = _g.next()) {\n            var g = _h.value;\n            var first = g[0];\n            var last = g[g.length - 1];\n            changes.push(new DetailedLineRangeMapping(first.original.join(last.original), first.modified.join(last.modified), g.map(function (a) { return a.innerChanges[0]; })));\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    assertFn(function () {\n        if (!dontAssertStartLine && changes.length > 0) {\n            if (changes[0].modified.startLineNumber !== changes[0].original.startLineNumber) {\n                return false;\n            }\n            if (modifiedLines.length.lineCount - changes[changes.length - 1].modified.endLineNumberExclusive !== originalLines.length.lineCount - changes[changes.length - 1].original.endLineNumberExclusive) {\n                return false;\n            }\n        }\n        return checkAdjacentItems(changes, function (m1, m2) { return m2.original.startLineNumber - m1.original.endLineNumberExclusive === m2.modified.startLineNumber - m1.modified.endLineNumberExclusive && // There has to be an unchanged line in between (otherwise both diffs should have been joined)\n            m1.original.endLineNumberExclusive < m2.original.startLineNumber && m1.modified.endLineNumberExclusive < m2.modified.startLineNumber; });\n    });\n    return changes;\n}\nfunction getLineRangeMapping(rangeMapping, originalLines, modifiedLines) {\n    var lineStartDelta = 0;\n    var lineEndDelta = 0;\n    if (rangeMapping.modifiedRange.endColumn === 1 && rangeMapping.originalRange.endColumn === 1 && rangeMapping.originalRange.startLineNumber + lineStartDelta <= rangeMapping.originalRange.endLineNumber && rangeMapping.modifiedRange.startLineNumber + lineStartDelta <= rangeMapping.modifiedRange.endLineNumber) {\n        lineEndDelta = -1;\n    }\n    if (rangeMapping.modifiedRange.startColumn - 1 >= modifiedLines.getLineLength(rangeMapping.modifiedRange.startLineNumber) && rangeMapping.originalRange.startColumn - 1 >= originalLines.getLineLength(rangeMapping.originalRange.startLineNumber) && rangeMapping.originalRange.startLineNumber <= rangeMapping.originalRange.endLineNumber + lineEndDelta && rangeMapping.modifiedRange.startLineNumber <= rangeMapping.modifiedRange.endLineNumber + lineEndDelta) {\n        lineStartDelta = 1;\n    }\n    var originalLineRange = new LineRange(rangeMapping.originalRange.startLineNumber + lineStartDelta, rangeMapping.originalRange.endLineNumber + 1 + lineEndDelta);\n    var modifiedLineRange = new LineRange(rangeMapping.modifiedRange.startLineNumber + lineStartDelta, rangeMapping.modifiedRange.endLineNumber + 1 + lineEndDelta);\n    return new DetailedLineRangeMapping(originalLineRange, modifiedLineRange, [rangeMapping]);\n}\nvar DiffAlgorithmResult = /** @class */ (function () {\n    function DiffAlgorithmResult(diffs, hitTimeout) {\n        this.diffs = diffs;\n        this.hitTimeout = hitTimeout;\n    }\n    DiffAlgorithmResult.trivial = function (seq1, seq2) {\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], false);\n    };\n    DiffAlgorithmResult.trivialTimedOut = function (seq1, seq2) {\n        return new DiffAlgorithmResult([new SequenceDiff(OffsetRange.ofLength(seq1.length), OffsetRange.ofLength(seq2.length))], true);\n    };\n    return DiffAlgorithmResult;\n}());\nvar SequenceDiff = /** @class */ (function () {\n    function SequenceDiff(seq1Range, seq2Range) {\n        this.seq1Range = seq1Range;\n        this.seq2Range = seq2Range;\n    }\n    SequenceDiff.invert = function (sequenceDiffs, doc1Length) {\n        var result = [];\n        forEachAdjacent(sequenceDiffs, function (a, b) {\n            result.push(SequenceDiff.fromOffsetPairs(a ? a.getEndExclusives() : OffsetPair.zero, b ? b.getStarts() : new OffsetPair(doc1Length, (a ? a.seq2Range.endExclusive - a.seq1Range.endExclusive : 0) + doc1Length)));\n        });\n        return result;\n    };\n    SequenceDiff.fromOffsetPairs = function (start, endExclusive) {\n        return new SequenceDiff(new OffsetRange(start.offset1, endExclusive.offset1), new OffsetRange(start.offset2, endExclusive.offset2));\n    };\n    SequenceDiff.assertSorted = function (sequenceDiffs) {\n        var e_5, _a;\n        var last = undefined;\n        try {\n            for (var sequenceDiffs_1 = __values(sequenceDiffs), sequenceDiffs_1_1 = sequenceDiffs_1.next(); !sequenceDiffs_1_1.done; sequenceDiffs_1_1 = sequenceDiffs_1.next()) {\n                var cur = sequenceDiffs_1_1.value;\n                if (last) {\n                    if (!(last.seq1Range.endExclusive <= cur.seq1Range.start && last.seq2Range.endExclusive <= cur.seq2Range.start)) {\n                        throw new BugIndicatingError(\"Sequence diffs must be sorted\");\n                    }\n                }\n                last = cur;\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (sequenceDiffs_1_1 && !sequenceDiffs_1_1.done && (_a = sequenceDiffs_1.return)) _a.call(sequenceDiffs_1);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    };\n    SequenceDiff.prototype.swap = function () {\n        return new SequenceDiff(this.seq2Range, this.seq1Range);\n    };\n    SequenceDiff.prototype.join = function (other) {\n        return new SequenceDiff(this.seq1Range.join(other.seq1Range), this.seq2Range.join(other.seq2Range));\n    };\n    SequenceDiff.prototype.delta = function (offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.delta(offset), this.seq2Range.delta(offset));\n    };\n    SequenceDiff.prototype.deltaStart = function (offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.deltaStart(offset), this.seq2Range.deltaStart(offset));\n    };\n    SequenceDiff.prototype.deltaEnd = function (offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new SequenceDiff(this.seq1Range.deltaEnd(offset), this.seq2Range.deltaEnd(offset));\n    };\n    SequenceDiff.prototype.intersect = function (other) {\n        var i1 = this.seq1Range.intersect(other.seq1Range);\n        var i2 = this.seq2Range.intersect(other.seq2Range);\n        if (!i1 || !i2) {\n            return undefined;\n        }\n        return new SequenceDiff(i1, i2);\n    };\n    SequenceDiff.prototype.getStarts = function () {\n        return new OffsetPair(this.seq1Range.start, this.seq2Range.start);\n    };\n    SequenceDiff.prototype.getEndExclusives = function () {\n        return new OffsetPair(this.seq1Range.endExclusive, this.seq2Range.endExclusive);\n    };\n    return SequenceDiff;\n}());\nvar OffsetPair = /** @class */ (function () {\n    function OffsetPair(offset1, offset2) {\n        this.offset1 = offset1;\n        this.offset2 = offset2;\n    }\n    OffsetPair.prototype.delta = function (offset) {\n        if (offset === 0) {\n            return this;\n        }\n        return new _d(this.offset1 + offset, this.offset2 + offset);\n    };\n    OffsetPair.prototype.equals = function (other) {\n        return this.offset1 === other.offset1 && this.offset2 === other.offset2;\n    };\n    return OffsetPair;\n}());\n_d = OffsetPair;\n(function () {\n    _d.zero = new _d(0, 0);\n})();\n(function () {\n    _d.max = new _d(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n})();\nvar InfiniteTimeout = /** @class */ (function () {\n    function InfiniteTimeout() {\n    }\n    InfiniteTimeout.prototype.isValid = function () {\n        return true;\n    };\n    return InfiniteTimeout;\n}());\n_e = InfiniteTimeout;\n(function () {\n    _e.instance = new _e();\n})();\nvar DateTimeout = /** @class */ (function () {\n    function DateTimeout(timeout) {\n        this.timeout = timeout;\n        this.startTime = Date.now();\n        this.valid = true;\n        if (timeout <= 0) {\n            throw new BugIndicatingError(\"timeout must be positive\");\n        }\n    }\n    DateTimeout.prototype.isValid = function () {\n        var valid = Date.now() - this.startTime < this.timeout;\n        if (!valid && this.valid) {\n            this.valid = false;\n        }\n        return this.valid;\n    };\n    DateTimeout.prototype.disable = function () {\n        this.timeout = Number.MAX_SAFE_INTEGER;\n        this.isValid = function () { return true; };\n        this.valid = true;\n    };\n    return DateTimeout;\n}());\nvar Array2D = /** @class */ (function () {\n    function Array2D(width, height) {\n        this.width = width;\n        this.height = height;\n        this.array = [];\n        this.array = new Array(width * height);\n    }\n    Array2D.prototype.get = function (x, y) {\n        return this.array[x + y * this.width];\n    };\n    Array2D.prototype.set = function (x, y, value) {\n        this.array[x + y * this.width] = value;\n    };\n    return Array2D;\n}());\nfunction isSpace(charCode) {\n    return charCode === 32 || charCode === 9;\n}\nvar LineRangeFragment = /** @class */ (function () {\n    function LineRangeFragment(range, lines, source) {\n        this.range = range;\n        this.lines = lines;\n        this.source = source;\n        this.histogram = [];\n        var counter = 0;\n        for (var i = range.startLineNumber - 1; i < range.endLineNumberExclusive - 1; i++) {\n            var line = lines[i];\n            for (var j = 0; j < line.length; j++) {\n                counter++;\n                var chr = line[j];\n                var key2 = _f.getKey(chr);\n                this.histogram[key2] = (this.histogram[key2] || 0) + 1;\n            }\n            counter++;\n            var key = _f.getKey(\"\\n\");\n            this.histogram[key] = (this.histogram[key] || 0) + 1;\n        }\n        this.totalCount = counter;\n    }\n    LineRangeFragment.getKey = function (chr) {\n        var key = this.chrKeys.get(chr);\n        if (key === undefined) {\n            key = this.chrKeys.size;\n            this.chrKeys.set(chr, key);\n        }\n        return key;\n    };\n    LineRangeFragment.prototype.computeSimilarity = function (other) {\n        var _a, _g;\n        var sumDifferences = 0;\n        var maxLength = Math.max(this.histogram.length, other.histogram.length);\n        for (var i = 0; i < maxLength; i++) {\n            sumDifferences += Math.abs(((_a = this.histogram[i]) !== null && _a !== void 0 ? _a : 0) - ((_g = other.histogram[i]) !== null && _g !== void 0 ? _g : 0));\n        }\n        return 1 - sumDifferences / (this.totalCount + other.totalCount);\n    };\n    return LineRangeFragment;\n}());\n_f = LineRangeFragment;\n(function () {\n    _f.chrKeys = /* @__PURE__ */ new Map();\n})();\nvar DynamicProgrammingDiffing = /** @class */ (function () {\n    function DynamicProgrammingDiffing() {\n    }\n    DynamicProgrammingDiffing.prototype.compute = function (sequence1, sequence2, timeout, equalityScore) {\n        if (timeout === void 0) { timeout = InfiniteTimeout.instance; }\n        if (sequence1.length === 0 || sequence2.length === 0) {\n            return DiffAlgorithmResult.trivial(sequence1, sequence2);\n        }\n        var lcsLengths = new Array2D(sequence1.length, sequence2.length);\n        var directions = new Array2D(sequence1.length, sequence2.length);\n        var lengths = new Array2D(sequence1.length, sequence2.length);\n        for (var s12 = 0; s12 < sequence1.length; s12++) {\n            for (var s22 = 0; s22 < sequence2.length; s22++) {\n                if (!timeout.isValid()) {\n                    return DiffAlgorithmResult.trivialTimedOut(sequence1, sequence2);\n                }\n                var horizontalLen = s12 === 0 ? 0 : lcsLengths.get(s12 - 1, s22);\n                var verticalLen = s22 === 0 ? 0 : lcsLengths.get(s12, s22 - 1);\n                var extendedSeqScore = void 0;\n                if (sequence1.getElement(s12) === sequence2.getElement(s22)) {\n                    if (s12 === 0 || s22 === 0) {\n                        extendedSeqScore = 0;\n                    }\n                    else {\n                        extendedSeqScore = lcsLengths.get(s12 - 1, s22 - 1);\n                    }\n                    if (s12 > 0 && s22 > 0 && directions.get(s12 - 1, s22 - 1) === 3) {\n                        extendedSeqScore += lengths.get(s12 - 1, s22 - 1);\n                    }\n                    extendedSeqScore += equalityScore ? equalityScore(s12, s22) : 1;\n                }\n                else {\n                    extendedSeqScore = -1;\n                }\n                var newValue = Math.max(horizontalLen, verticalLen, extendedSeqScore);\n                if (newValue === extendedSeqScore) {\n                    var prevLen = s12 > 0 && s22 > 0 ? lengths.get(s12 - 1, s22 - 1) : 0;\n                    lengths.set(s12, s22, prevLen + 1);\n                    directions.set(s12, s22, 3);\n                }\n                else if (newValue === horizontalLen) {\n                    lengths.set(s12, s22, 0);\n                    directions.set(s12, s22, 1);\n                }\n                else if (newValue === verticalLen) {\n                    lengths.set(s12, s22, 0);\n                    directions.set(s12, s22, 2);\n                }\n                lcsLengths.set(s12, s22, newValue);\n            }\n        }\n        var result = [];\n        var lastAligningPosS1 = sequence1.length;\n        var lastAligningPosS2 = sequence2.length;\n        function reportDecreasingAligningPositions(s12, s22) {\n            if (s12 + 1 !== lastAligningPosS1 || s22 + 1 !== lastAligningPosS2) {\n                result.push(new SequenceDiff(new OffsetRange(s12 + 1, lastAligningPosS1), new OffsetRange(s22 + 1, lastAligningPosS2)));\n            }\n            lastAligningPosS1 = s12;\n            lastAligningPosS2 = s22;\n        }\n        var s1 = sequence1.length - 1;\n        var s2 = sequence2.length - 1;\n        while (s1 >= 0 && s2 >= 0) {\n            if (directions.get(s1, s2) === 3) {\n                reportDecreasingAligningPositions(s1, s2);\n                s1--;\n                s2--;\n            }\n            else {\n                if (directions.get(s1, s2) === 1) {\n                    s1--;\n                }\n                else {\n                    s2--;\n                }\n            }\n        }\n        reportDecreasingAligningPositions(-1, -1);\n        result.reverse();\n        return new DiffAlgorithmResult(result, false);\n    };\n    return DynamicProgrammingDiffing;\n}());\nvar MyersDiffAlgorithm = /** @class */ (function () {\n    function MyersDiffAlgorithm() {\n    }\n    MyersDiffAlgorithm.prototype.compute = function (seq1, seq2, timeout) {\n        if (timeout === void 0) { timeout = InfiniteTimeout.instance; }\n        if (seq1.length === 0 || seq2.length === 0) {\n            return DiffAlgorithmResult.trivial(seq1, seq2);\n        }\n        var seqX = seq1;\n        var seqY = seq2;\n        function getXAfterSnake(x, y) {\n            while (x < seqX.length && y < seqY.length && seqX.getElement(x) === seqY.getElement(y)) {\n                x++;\n                y++;\n            }\n            return x;\n        }\n        var d = 0;\n        var V = new FastInt32Array();\n        V.set(0, getXAfterSnake(0, 0));\n        var paths = new FastArrayNegativeIndices();\n        paths.set(0, V.get(0) === 0 ? null : new SnakePath(null, 0, 0, V.get(0)));\n        var k = 0;\n        loop: while (true) {\n            d++;\n            if (!timeout.isValid()) {\n                return DiffAlgorithmResult.trivialTimedOut(seqX, seqY);\n            }\n            var lowerBound = -Math.min(d, seqY.length + d % 2);\n            var upperBound = Math.min(d, seqX.length + d % 2);\n            for (k = lowerBound; k <= upperBound; k += 2) {\n                var maxXofDLineTop = k === upperBound ? -1 : V.get(k + 1);\n                var maxXofDLineLeft = k === lowerBound ? -1 : V.get(k - 1) + 1;\n                var x = Math.min(Math.max(maxXofDLineTop, maxXofDLineLeft), seqX.length);\n                var y = x - k;\n                if (x > seqX.length || y > seqY.length) {\n                    continue;\n                }\n                var newMaxX = getXAfterSnake(x, y);\n                V.set(k, newMaxX);\n                var lastPath = x === maxXofDLineTop ? paths.get(k + 1) : paths.get(k - 1);\n                paths.set(k, newMaxX !== x ? new SnakePath(lastPath, x, y, newMaxX - x) : lastPath);\n                if (V.get(k) === seqX.length && V.get(k) - k === seqY.length) {\n                    break loop;\n                }\n            }\n        }\n        var path = paths.get(k);\n        var result = [];\n        var lastAligningPosS1 = seqX.length;\n        var lastAligningPosS2 = seqY.length;\n        while (true) {\n            var endX = path ? path.x + path.length : 0;\n            var endY = path ? path.y + path.length : 0;\n            if (endX !== lastAligningPosS1 || endY !== lastAligningPosS2) {\n                result.push(new SequenceDiff(new OffsetRange(endX, lastAligningPosS1), new OffsetRange(endY, lastAligningPosS2)));\n            }\n            if (!path) {\n                break;\n            }\n            lastAligningPosS1 = path.x;\n            lastAligningPosS2 = path.y;\n            path = path.prev;\n        }\n        result.reverse();\n        return new DiffAlgorithmResult(result, false);\n    };\n    return MyersDiffAlgorithm;\n}());\nvar SnakePath = /** @class */ (function () {\n    function SnakePath(prev, x, y, length) {\n        this.prev = prev;\n        this.x = x;\n        this.y = y;\n        this.length = length;\n    }\n    return SnakePath;\n}());\nvar FastInt32Array = /** @class */ (function () {\n    function FastInt32Array() {\n        this.positiveArr = new Int32Array(10);\n        this.negativeArr = new Int32Array(10);\n    }\n    FastInt32Array.prototype.get = function (idx) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            return this.negativeArr[idx];\n        }\n        else {\n            return this.positiveArr[idx];\n        }\n    };\n    FastInt32Array.prototype.set = function (idx, value) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            if (idx >= this.negativeArr.length) {\n                var arr = this.negativeArr;\n                this.negativeArr = new Int32Array(arr.length * 2);\n                this.negativeArr.set(arr);\n            }\n            this.negativeArr[idx] = value;\n        }\n        else {\n            if (idx >= this.positiveArr.length) {\n                var arr = this.positiveArr;\n                this.positiveArr = new Int32Array(arr.length * 2);\n                this.positiveArr.set(arr);\n            }\n            this.positiveArr[idx] = value;\n        }\n    };\n    return FastInt32Array;\n}());\nvar FastArrayNegativeIndices = /** @class */ (function () {\n    function FastArrayNegativeIndices() {\n        this.positiveArr = [];\n        this.negativeArr = [];\n    }\n    FastArrayNegativeIndices.prototype.get = function (idx) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            return this.negativeArr[idx];\n        }\n        else {\n            return this.positiveArr[idx];\n        }\n    };\n    FastArrayNegativeIndices.prototype.set = function (idx, value) {\n        if (idx < 0) {\n            idx = -idx - 1;\n            this.negativeArr[idx] = value;\n        }\n        else {\n            this.positiveArr[idx] = value;\n        }\n    };\n    return FastArrayNegativeIndices;\n}());\nvar SetMap = /** @class */ (function () {\n    function SetMap() {\n        this.map = /* @__PURE__ */ new Map();\n    }\n    SetMap.prototype.add = function (key, value) {\n        var values = this.map.get(key);\n        if (!values) {\n            values = /* @__PURE__ */ new Set();\n            this.map.set(key, values);\n        }\n        values.add(value);\n    };\n    SetMap.prototype.forEach = function (key, fn) {\n        var values = this.map.get(key);\n        if (!values) {\n            return;\n        }\n        values.forEach(fn);\n    };\n    SetMap.prototype.get = function (key) {\n        var values = this.map.get(key);\n        if (!values) {\n            return /* @__PURE__ */ new Set();\n        }\n        return values;\n    };\n    return SetMap;\n}());\nvar LinesSliceCharSequence = /** @class */ (function () {\n    function LinesSliceCharSequence(lines, range, considerWhitespaceChanges) {\n        this.lines = lines;\n        this.range = range;\n        this.considerWhitespaceChanges = considerWhitespaceChanges;\n        this.elements = [];\n        this.firstElementOffsetByLineIdx = [];\n        this.lineStartOffsets = [];\n        this.trimmedWsLengthsByLineIdx = [];\n        this.firstElementOffsetByLineIdx.push(0);\n        for (var lineNumber = this.range.startLineNumber; lineNumber <= this.range.endLineNumber; lineNumber++) {\n            var line = lines[lineNumber - 1];\n            var lineStartOffset = 0;\n            if (lineNumber === this.range.startLineNumber && this.range.startColumn > 1) {\n                lineStartOffset = this.range.startColumn - 1;\n                line = line.substring(lineStartOffset);\n            }\n            this.lineStartOffsets.push(lineStartOffset);\n            var trimmedWsLength = 0;\n            if (!considerWhitespaceChanges) {\n                var trimmedStartLine = line.trimStart();\n                trimmedWsLength = line.length - trimmedStartLine.length;\n                line = trimmedStartLine.trimEnd();\n            }\n            this.trimmedWsLengthsByLineIdx.push(trimmedWsLength);\n            var lineLength = lineNumber === this.range.endLineNumber ? Math.min(this.range.endColumn - 1 - lineStartOffset - trimmedWsLength, line.length) : line.length;\n            for (var i = 0; i < lineLength; i++) {\n                this.elements.push(line.charCodeAt(i));\n            }\n            if (lineNumber < this.range.endLineNumber) {\n                this.elements.push(\"\\n\".charCodeAt(0));\n                this.firstElementOffsetByLineIdx.push(this.elements.length);\n            }\n        }\n    }\n    LinesSliceCharSequence.prototype.toString = function () {\n        return \"Slice: \\\"\".concat(this.text, \"\\\"\");\n    };\n    Object.defineProperty(LinesSliceCharSequence.prototype, \"text\", {\n        get: function () {\n            return this.getText(new OffsetRange(0, this.length));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LinesSliceCharSequence.prototype.getText = function (range) {\n        return this.elements.slice(range.start, range.endExclusive).map(function (e) { return String.fromCharCode(e); }).join(\"\");\n    };\n    LinesSliceCharSequence.prototype.getElement = function (offset) {\n        return this.elements[offset];\n    };\n    Object.defineProperty(LinesSliceCharSequence.prototype, \"length\", {\n        get: function () {\n            return this.elements.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LinesSliceCharSequence.prototype.getBoundaryScore = function (length) {\n        var prevCategory = getCategory(length > 0 ? this.elements[length - 1] : -1);\n        var nextCategory = getCategory(length < this.elements.length ? this.elements[length] : -1);\n        if (prevCategory === 7 /* LineBreakCR */ && nextCategory === 8 /* LineBreakLF */) {\n            return 0;\n        }\n        if (prevCategory === 8 /* LineBreakLF */) {\n            return 150;\n        }\n        var score2 = 0;\n        if (prevCategory !== nextCategory) {\n            score2 += 10;\n            if (prevCategory === 0 /* WordLower */ && nextCategory === 1 /* WordUpper */) {\n                score2 += 1;\n            }\n        }\n        score2 += getCategoryBoundaryScore(prevCategory);\n        score2 += getCategoryBoundaryScore(nextCategory);\n        return score2;\n    };\n    LinesSliceCharSequence.prototype.translateOffset = function (offset, preference) {\n        if (preference === void 0) { preference = \"right\"; }\n        var i = findLastIdxMonotonous(this.firstElementOffsetByLineIdx, function (value) { return value <= offset; });\n        var lineOffset = offset - this.firstElementOffsetByLineIdx[i];\n        return new Position(this.range.startLineNumber + i, 1 + this.lineStartOffsets[i] + lineOffset + (lineOffset === 0 && preference === \"left\" ? 0 : this.trimmedWsLengthsByLineIdx[i]));\n    };\n    LinesSliceCharSequence.prototype.translateRange = function (range) {\n        var pos1 = this.translateOffset(range.start, \"right\");\n        var pos2 = this.translateOffset(range.endExclusive, \"left\");\n        if (pos2.isBefore(pos1)) {\n            return Range.fromPositions(pos2, pos2);\n        }\n        return Range.fromPositions(pos1, pos2);\n    };\n    LinesSliceCharSequence.prototype.findWordContaining = function (offset) {\n        if (offset < 0 || offset >= this.elements.length) {\n            return undefined;\n        }\n        if (!isWordChar(this.elements[offset])) {\n            return undefined;\n        }\n        var start = offset;\n        while (start > 0 && isWordChar(this.elements[start - 1])) {\n            start--;\n        }\n        var end = offset;\n        while (end < this.elements.length && isWordChar(this.elements[end])) {\n            end++;\n        }\n        return new OffsetRange(start, end);\n    };\n    LinesSliceCharSequence.prototype.findSubWordContaining = function (offset) {\n        if (offset < 0 || offset >= this.elements.length) {\n            return undefined;\n        }\n        if (!isWordChar(this.elements[offset])) {\n            return undefined;\n        }\n        var start = offset;\n        while (start > 0 && isWordChar(this.elements[start - 1]) && !isUpperCase(this.elements[start])) {\n            start--;\n        }\n        var end = offset;\n        while (end < this.elements.length && isWordChar(this.elements[end]) && !isUpperCase(this.elements[end])) {\n            end++;\n        }\n        return new OffsetRange(start, end);\n    };\n    LinesSliceCharSequence.prototype.countLinesIn = function (range) {\n        return this.translateOffset(range.endExclusive).lineNumber - this.translateOffset(range.start).lineNumber;\n    };\n    LinesSliceCharSequence.prototype.isStronglyEqual = function (offset1, offset2) {\n        return this.elements[offset1] === this.elements[offset2];\n    };\n    LinesSliceCharSequence.prototype.extendToFullLines = function (range) {\n        var _a, _g;\n        var start = (_a = findLastMonotonous(this.firstElementOffsetByLineIdx, function (x) { return x <= range.start; })) !== null && _a !== void 0 ? _a : 0;\n        var end = (_g = findFirstMonotonous(this.firstElementOffsetByLineIdx, function (x) { return range.endExclusive <= x; })) !== null && _g !== void 0 ? _g : this.elements.length;\n        return new OffsetRange(start, end);\n    };\n    return LinesSliceCharSequence;\n}());\nfunction isWordChar(charCode) {\n    return charCode >= 97 && charCode <= 122 || charCode >= 65 && charCode <= 90 || charCode >= 48 && charCode <= 57;\n}\nfunction isUpperCase(charCode) {\n    return charCode >= 65 && charCode <= 90;\n}\nvar score = (_a = {},\n    _a[0 /* WordLower */] = 0,\n    _a[1 /* WordUpper */] = 0,\n    _a[2 /* WordNumber */] = 0,\n    _a[3 /* End */] = 10,\n    _a[4 /* Other */] = 2,\n    _a[5 /* Separator */] = 30,\n    _a[6 /* Space */] = 3,\n    _a[7 /* LineBreakCR */] = 10,\n    _a[8 /* LineBreakLF */] = 10,\n    _a);\nfunction getCategoryBoundaryScore(category) {\n    return score[category];\n}\nfunction getCategory(charCode) {\n    if (charCode === 10) {\n        return 8 /* LineBreakLF */;\n    }\n    else if (charCode === 13) {\n        return 7 /* LineBreakCR */;\n    }\n    else if (isSpace(charCode)) {\n        return 6 /* Space */;\n    }\n    else if (charCode >= 97 && charCode <= 122) {\n        return 0 /* WordLower */;\n    }\n    else if (charCode >= 65 && charCode <= 90) {\n        return 1 /* WordUpper */;\n    }\n    else if (charCode >= 48 && charCode <= 57) {\n        return 2 /* WordNumber */;\n    }\n    else if (charCode === -1) {\n        return 3 /* End */;\n    }\n    else if (charCode === 44 || charCode === 59) {\n        return 5 /* Separator */;\n    }\n    else {\n        return 4 /* Other */;\n    }\n}\nfunction computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout) {\n    var _a = computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout), moves = _a.moves, excludedChanges = _a.excludedChanges;\n    if (!timeout.isValid()) {\n        return [];\n    }\n    var filteredChanges = changes.filter(function (c) { return !excludedChanges.has(c); });\n    var unchangedMoves = computeUnchangedMoves(filteredChanges, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout);\n    pushMany(moves, unchangedMoves);\n    moves = joinCloseConsecutiveMoves(moves);\n    moves = moves.filter(function (current) {\n        var lines = current.original.toOffsetRange().slice(originalLines).map(function (l) { return l.trim(); });\n        var originalText = lines.join(\"\\n\");\n        return originalText.length >= 15 && countWhere(lines, function (l) { return l.length >= 2; }) >= 2;\n    });\n    moves = removeMovesInSameDiff(changes, moves);\n    return moves;\n}\nfunction countWhere(arr, predicate) {\n    var e_6, _a;\n    var count = 0;\n    try {\n        for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n            var t = arr_1_1.value;\n            if (predicate(t)) {\n                count++;\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return count;\n}\nfunction computeMovesFromSimpleDeletionsToSimpleInsertions(changes, originalLines, modifiedLines, timeout) {\n    var e_7, _a, e_8, _g;\n    var moves = [];\n    var deletions = changes.filter(function (c) { return c.modified.isEmpty && c.original.length >= 3; }).map(function (d) { return new LineRangeFragment(d.original, originalLines, d); });\n    var insertions = new Set(changes.filter(function (c) { return c.original.isEmpty && c.modified.length >= 3; }).map(function (d) { return new LineRangeFragment(d.modified, modifiedLines, d); }));\n    var excludedChanges = /* @__PURE__ */ new Set();\n    try {\n        for (var deletions_1 = __values(deletions), deletions_1_1 = deletions_1.next(); !deletions_1_1.done; deletions_1_1 = deletions_1.next()) {\n            var deletion = deletions_1_1.value;\n            var highestSimilarity = -1;\n            var best = void 0;\n            try {\n                for (var insertions_1 = (e_8 = void 0, __values(insertions)), insertions_1_1 = insertions_1.next(); !insertions_1_1.done; insertions_1_1 = insertions_1.next()) {\n                    var insertion = insertions_1_1.value;\n                    var similarity = deletion.computeSimilarity(insertion);\n                    if (similarity > highestSimilarity) {\n                        highestSimilarity = similarity;\n                        best = insertion;\n                    }\n                }\n            }\n            catch (e_8_1) { e_8 = { error: e_8_1 }; }\n            finally {\n                try {\n                    if (insertions_1_1 && !insertions_1_1.done && (_g = insertions_1.return)) _g.call(insertions_1);\n                }\n                finally { if (e_8) throw e_8.error; }\n            }\n            if (highestSimilarity > 0.9 && best) {\n                insertions.delete(best);\n                moves.push(new LineRangeMapping(deletion.range, best.range));\n                excludedChanges.add(deletion.source);\n                excludedChanges.add(best.source);\n            }\n            if (!timeout.isValid()) {\n                return { moves: moves, excludedChanges: excludedChanges };\n            }\n        }\n    }\n    catch (e_7_1) { e_7 = { error: e_7_1 }; }\n    finally {\n        try {\n            if (deletions_1_1 && !deletions_1_1.done && (_a = deletions_1.return)) _a.call(deletions_1);\n        }\n        finally { if (e_7) throw e_7.error; }\n    }\n    return { moves: moves, excludedChanges: excludedChanges };\n}\nfunction computeUnchangedMoves(changes, hashedOriginalLines, hashedModifiedLines, originalLines, modifiedLines, timeout) {\n    var e_9, _a, e_10, _g, e_11, _h, e_12, _j;\n    var moves = [];\n    var original3LineHashes = new SetMap();\n    try {\n        for (var changes_1 = __values(changes), changes_1_1 = changes_1.next(); !changes_1_1.done; changes_1_1 = changes_1.next()) {\n            var change = changes_1_1.value;\n            for (var i = change.original.startLineNumber; i < change.original.endLineNumberExclusive - 2; i++) {\n                var key = \"\".concat(hashedOriginalLines[i - 1], \":\").concat(hashedOriginalLines[i + 1 - 1], \":\").concat(hashedOriginalLines[i + 2 - 1]);\n                original3LineHashes.add(key, { range: new LineRange(i, i + 3) });\n            }\n        }\n    }\n    catch (e_9_1) { e_9 = { error: e_9_1 }; }\n    finally {\n        try {\n            if (changes_1_1 && !changes_1_1.done && (_a = changes_1.return)) _a.call(changes_1);\n        }\n        finally { if (e_9) throw e_9.error; }\n    }\n    var possibleMappings = [];\n    changes.sort(compareBy(function (c) { return c.modified.startLineNumber; }, numberComparator));\n    var _loop_1 = function (change) {\n        var lastMappings = [];\n        var _loop_3 = function (i) {\n            var key = \"\".concat(hashedModifiedLines[i - 1], \":\").concat(hashedModifiedLines[i + 1 - 1], \":\").concat(hashedModifiedLines[i + 2 - 1]);\n            var currentModifiedRange = new LineRange(i, i + 3);\n            var nextMappings = [];\n            original3LineHashes.forEach(key, function (_a) {\n                var e_13, _g;\n                var range = _a.range;\n                try {\n                    for (var lastMappings_1 = (e_13 = void 0, __values(lastMappings)), lastMappings_1_1 = lastMappings_1.next(); !lastMappings_1_1.done; lastMappings_1_1 = lastMappings_1.next()) {\n                        var lastMapping = lastMappings_1_1.value;\n                        if (lastMapping.originalLineRange.endLineNumberExclusive + 1 === range.endLineNumberExclusive && lastMapping.modifiedLineRange.endLineNumberExclusive + 1 === currentModifiedRange.endLineNumberExclusive) {\n                            lastMapping.originalLineRange = new LineRange(lastMapping.originalLineRange.startLineNumber, range.endLineNumberExclusive);\n                            lastMapping.modifiedLineRange = new LineRange(lastMapping.modifiedLineRange.startLineNumber, currentModifiedRange.endLineNumberExclusive);\n                            nextMappings.push(lastMapping);\n                            return;\n                        }\n                    }\n                }\n                catch (e_13_1) { e_13 = { error: e_13_1 }; }\n                finally {\n                    try {\n                        if (lastMappings_1_1 && !lastMappings_1_1.done && (_g = lastMappings_1.return)) _g.call(lastMappings_1);\n                    }\n                    finally { if (e_13) throw e_13.error; }\n                }\n                var mapping = {\n                    modifiedLineRange: currentModifiedRange,\n                    originalLineRange: range\n                };\n                possibleMappings.push(mapping);\n                nextMappings.push(mapping);\n            });\n            lastMappings = nextMappings;\n        };\n        for (var i = change.modified.startLineNumber; i < change.modified.endLineNumberExclusive - 2; i++) {\n            _loop_3(i);\n        }\n        if (!timeout.isValid()) {\n            return { value: [] };\n        }\n    };\n    try {\n        for (var changes_2 = __values(changes), changes_2_1 = changes_2.next(); !changes_2_1.done; changes_2_1 = changes_2.next()) {\n            var change = changes_2_1.value;\n            var state_1 = _loop_1(change);\n            if (typeof state_1 === \"object\")\n                return state_1.value;\n        }\n    }\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n    finally {\n        try {\n            if (changes_2_1 && !changes_2_1.done && (_g = changes_2.return)) _g.call(changes_2);\n        }\n        finally { if (e_10) throw e_10.error; }\n    }\n    possibleMappings.sort(reverseOrder(compareBy(function (m) { return m.modifiedLineRange.length; }, numberComparator)));\n    var modifiedSet = new LineRangeSet();\n    var originalSet = new LineRangeSet();\n    try {\n        for (var possibleMappings_1 = __values(possibleMappings), possibleMappings_1_1 = possibleMappings_1.next(); !possibleMappings_1_1.done; possibleMappings_1_1 = possibleMappings_1.next()) {\n            var mapping = possibleMappings_1_1.value;\n            var diffOrigToMod = mapping.modifiedLineRange.startLineNumber - mapping.originalLineRange.startLineNumber;\n            var modifiedSections = modifiedSet.subtractFrom(mapping.modifiedLineRange);\n            var originalTranslatedSections = originalSet.subtractFrom(mapping.originalLineRange).getWithDelta(diffOrigToMod);\n            var modifiedIntersectedSections = modifiedSections.getIntersection(originalTranslatedSections);\n            try {\n                for (var _k = (e_12 = void 0, __values(modifiedIntersectedSections.ranges)), _l = _k.next(); !_l.done; _l = _k.next()) {\n                    var s = _l.value;\n                    if (s.length < 3) {\n                        continue;\n                    }\n                    var modifiedLineRange = s;\n                    var originalLineRange = s.delta(-diffOrigToMod);\n                    moves.push(new LineRangeMapping(originalLineRange, modifiedLineRange));\n                    modifiedSet.addRange(modifiedLineRange);\n                    originalSet.addRange(originalLineRange);\n                }\n            }\n            catch (e_12_1) { e_12 = { error: e_12_1 }; }\n            finally {\n                try {\n                    if (_l && !_l.done && (_j = _k.return)) _j.call(_k);\n                }\n                finally { if (e_12) throw e_12.error; }\n            }\n        }\n    }\n    catch (e_11_1) { e_11 = { error: e_11_1 }; }\n    finally {\n        try {\n            if (possibleMappings_1_1 && !possibleMappings_1_1.done && (_h = possibleMappings_1.return)) _h.call(possibleMappings_1);\n        }\n        finally { if (e_11) throw e_11.error; }\n    }\n    moves.sort(compareBy(function (m) { return m.original.startLineNumber; }, numberComparator));\n    var monotonousChanges = new MonotonousArray(changes);\n    var _loop_2 = function (i) {\n        var move = moves[i];\n        var firstTouchingChangeOrig = monotonousChanges.findLastMonotonous(function (c) { return c.original.startLineNumber <= move.original.startLineNumber; });\n        var firstTouchingChangeMod = findLastMonotonous(changes, function (c) { return c.modified.startLineNumber <= move.modified.startLineNumber; });\n        var linesAbove = Math.max(move.original.startLineNumber - firstTouchingChangeOrig.original.startLineNumber, move.modified.startLineNumber - firstTouchingChangeMod.modified.startLineNumber);\n        var lastTouchingChangeOrig = monotonousChanges.findLastMonotonous(function (c) { return c.original.startLineNumber < move.original.endLineNumberExclusive; });\n        var lastTouchingChangeMod = findLastMonotonous(changes, function (c) { return c.modified.startLineNumber < move.modified.endLineNumberExclusive; });\n        var linesBelow = Math.max(lastTouchingChangeOrig.original.endLineNumberExclusive - move.original.endLineNumberExclusive, lastTouchingChangeMod.modified.endLineNumberExclusive - move.modified.endLineNumberExclusive);\n        var extendToTop = void 0;\n        for (extendToTop = 0; extendToTop < linesAbove; extendToTop++) {\n            var origLine = move.original.startLineNumber - extendToTop - 1;\n            var modLine = move.modified.startLineNumber - extendToTop - 1;\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\n                break;\n            }\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n                break;\n            }\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n                break;\n            }\n        }\n        if (extendToTop > 0) {\n            originalSet.addRange(new LineRange(move.original.startLineNumber - extendToTop, move.original.startLineNumber));\n            modifiedSet.addRange(new LineRange(move.modified.startLineNumber - extendToTop, move.modified.startLineNumber));\n        }\n        var extendToBottom = void 0;\n        for (extendToBottom = 0; extendToBottom < linesBelow; extendToBottom++) {\n            var origLine = move.original.endLineNumberExclusive + extendToBottom;\n            var modLine = move.modified.endLineNumberExclusive + extendToBottom;\n            if (origLine > originalLines.length || modLine > modifiedLines.length) {\n                break;\n            }\n            if (modifiedSet.contains(modLine) || originalSet.contains(origLine)) {\n                break;\n            }\n            if (!areLinesSimilar(originalLines[origLine - 1], modifiedLines[modLine - 1], timeout)) {\n                break;\n            }\n        }\n        if (extendToBottom > 0) {\n            originalSet.addRange(new LineRange(move.original.endLineNumberExclusive, move.original.endLineNumberExclusive + extendToBottom));\n            modifiedSet.addRange(new LineRange(move.modified.endLineNumberExclusive, move.modified.endLineNumberExclusive + extendToBottom));\n        }\n        if (extendToTop > 0 || extendToBottom > 0) {\n            moves[i] = new LineRangeMapping(new LineRange(move.original.startLineNumber - extendToTop, move.original.endLineNumberExclusive + extendToBottom), new LineRange(move.modified.startLineNumber - extendToTop, move.modified.endLineNumberExclusive + extendToBottom));\n        }\n    };\n    for (var i = 0; i < moves.length; i++) {\n        _loop_2(i);\n    }\n    return moves;\n}\nfunction areLinesSimilar(line1, line2, timeout) {\n    var e_14, _a;\n    if (line1.trim() === line2.trim()) {\n        return true;\n    }\n    if (line1.length > 300 && line2.length > 300) {\n        return false;\n    }\n    var myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    var result = myersDiffingAlgorithm.compute(new LinesSliceCharSequence([line1], new Range(1, 1, 1, line1.length), false), new LinesSliceCharSequence([line2], new Range(1, 1, 1, line2.length), false), timeout);\n    var commonNonSpaceCharCount = 0;\n    var inverted = SequenceDiff.invert(result.diffs, line1.length);\n    try {\n        for (var inverted_1 = __values(inverted), inverted_1_1 = inverted_1.next(); !inverted_1_1.done; inverted_1_1 = inverted_1.next()) {\n            var seq = inverted_1_1.value;\n            seq.seq1Range.forEach(function (idx) {\n                if (!isSpace(line1.charCodeAt(idx))) {\n                    commonNonSpaceCharCount++;\n                }\n            });\n        }\n    }\n    catch (e_14_1) { e_14 = { error: e_14_1 }; }\n    finally {\n        try {\n            if (inverted_1_1 && !inverted_1_1.done && (_a = inverted_1.return)) _a.call(inverted_1);\n        }\n        finally { if (e_14) throw e_14.error; }\n    }\n    function countNonWsChars(str) {\n        var count = 0;\n        for (var i = 0; i < line1.length; i++) {\n            if (!isSpace(str.charCodeAt(i))) {\n                count++;\n            }\n        }\n        return count;\n    }\n    var longerLineLength = countNonWsChars(line1.length > line2.length ? line1 : line2);\n    var r = commonNonSpaceCharCount / longerLineLength > 0.6 && longerLineLength > 10;\n    return r;\n}\nfunction joinCloseConsecutiveMoves(moves) {\n    if (moves.length === 0) {\n        return moves;\n    }\n    moves.sort(compareBy(function (m) { return m.original.startLineNumber; }, numberComparator));\n    var result = [moves[0]];\n    for (var i = 1; i < moves.length; i++) {\n        var last = result[result.length - 1];\n        var current = moves[i];\n        var originalDist = current.original.startLineNumber - last.original.endLineNumberExclusive;\n        var modifiedDist = current.modified.startLineNumber - last.modified.endLineNumberExclusive;\n        var currentMoveAfterLast = originalDist >= 0 && modifiedDist >= 0;\n        if (currentMoveAfterLast && originalDist + modifiedDist <= 2) {\n            result[result.length - 1] = last.join(current);\n            continue;\n        }\n        result.push(current);\n    }\n    return result;\n}\nfunction removeMovesInSameDiff(changes, moves) {\n    var changesMonotonous = new MonotonousArray(changes);\n    moves = moves.filter(function (m) {\n        var diffBeforeEndOfMoveOriginal = changesMonotonous.findLastMonotonous(function (c) { return c.original.startLineNumber < m.original.endLineNumberExclusive; }) || new LineRangeMapping(new LineRange(1, 1), new LineRange(1, 1));\n        var diffBeforeEndOfMoveModified = findLastMonotonous(changes, function (c) { return c.modified.startLineNumber < m.modified.endLineNumberExclusive; });\n        var differentDiffs = diffBeforeEndOfMoveOriginal !== diffBeforeEndOfMoveModified;\n        return differentDiffs;\n    });\n    return moves;\n}\nfunction optimizeSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    var result = sequenceDiffs;\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    result = joinSequenceDiffsByShifting(sequence1, sequence2, result);\n    result = shiftSequenceDiffs(sequence1, sequence2, result);\n    return result;\n}\nfunction joinSequenceDiffsByShifting(sequence1, sequence2, sequenceDiffs) {\n    if (sequenceDiffs.length === 0) {\n        return sequenceDiffs;\n    }\n    var result = [];\n    result.push(sequenceDiffs[0]);\n    for (var i = 1; i < sequenceDiffs.length; i++) {\n        var prevResult = result[result.length - 1];\n        var cur = sequenceDiffs[i];\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n            var length = cur.seq1Range.start - prevResult.seq1Range.endExclusive;\n            var d = void 0;\n            for (d = 1; d <= length; d++) {\n                if (sequence1.getElement(cur.seq1Range.start - d) !== sequence1.getElement(cur.seq1Range.endExclusive - d) || sequence2.getElement(cur.seq2Range.start - d) !== sequence2.getElement(cur.seq2Range.endExclusive - d)) {\n                    break;\n                }\n            }\n            d--;\n            if (d === length) {\n                result[result.length - 1] = new SequenceDiff(new OffsetRange(prevResult.seq1Range.start, cur.seq1Range.endExclusive - length), new OffsetRange(prevResult.seq2Range.start, cur.seq2Range.endExclusive - length));\n                continue;\n            }\n            cur = cur.delta(-d);\n        }\n        result.push(cur);\n    }\n    var result2 = [];\n    for (var i = 0; i < result.length - 1; i++) {\n        var nextResult = result[i + 1];\n        var cur = result[i];\n        if (cur.seq1Range.isEmpty || cur.seq2Range.isEmpty) {\n            var length = nextResult.seq1Range.start - cur.seq1Range.endExclusive;\n            var d = void 0;\n            for (d = 0; d < length; d++) {\n                if (!sequence1.isStronglyEqual(cur.seq1Range.start + d, cur.seq1Range.endExclusive + d) || !sequence2.isStronglyEqual(cur.seq2Range.start + d, cur.seq2Range.endExclusive + d)) {\n                    break;\n                }\n            }\n            if (d === length) {\n                result[i + 1] = new SequenceDiff(new OffsetRange(cur.seq1Range.start + length, nextResult.seq1Range.endExclusive), new OffsetRange(cur.seq2Range.start + length, nextResult.seq2Range.endExclusive));\n                continue;\n            }\n            if (d > 0) {\n                cur = cur.delta(d);\n            }\n        }\n        result2.push(cur);\n    }\n    if (result.length > 0) {\n        result2.push(result[result.length - 1]);\n    }\n    return result2;\n}\nfunction shiftSequenceDiffs(sequence1, sequence2, sequenceDiffs) {\n    if (!sequence1.getBoundaryScore || !sequence2.getBoundaryScore) {\n        return sequenceDiffs;\n    }\n    for (var i = 0; i < sequenceDiffs.length; i++) {\n        var prevDiff = i > 0 ? sequenceDiffs[i - 1] : undefined;\n        var diff = sequenceDiffs[i];\n        var nextDiff = i + 1 < sequenceDiffs.length ? sequenceDiffs[i + 1] : undefined;\n        var seq1ValidRange = new OffsetRange(prevDiff ? prevDiff.seq1Range.endExclusive + 1 : 0, nextDiff ? nextDiff.seq1Range.start - 1 : sequence1.length);\n        var seq2ValidRange = new OffsetRange(prevDiff ? prevDiff.seq2Range.endExclusive + 1 : 0, nextDiff ? nextDiff.seq2Range.start - 1 : sequence2.length);\n        if (diff.seq1Range.isEmpty) {\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange);\n        }\n        else if (diff.seq2Range.isEmpty) {\n            sequenceDiffs[i] = shiftDiffToBetterPosition(diff.swap(), sequence2, sequence1, seq2ValidRange, seq1ValidRange).swap();\n        }\n    }\n    return sequenceDiffs;\n}\nfunction shiftDiffToBetterPosition(diff, sequence1, sequence2, seq1ValidRange, seq2ValidRange) {\n    var maxShiftLimit = 100;\n    var deltaBefore = 1;\n    while (diff.seq1Range.start - deltaBefore >= seq1ValidRange.start && diff.seq2Range.start - deltaBefore >= seq2ValidRange.start && sequence2.isStronglyEqual(diff.seq2Range.start - deltaBefore, diff.seq2Range.endExclusive - deltaBefore) && deltaBefore < maxShiftLimit) {\n        deltaBefore++;\n    }\n    deltaBefore--;\n    var deltaAfter = 0;\n    while (diff.seq1Range.start + deltaAfter < seq1ValidRange.endExclusive && diff.seq2Range.endExclusive + deltaAfter < seq2ValidRange.endExclusive && sequence2.isStronglyEqual(diff.seq2Range.start + deltaAfter, diff.seq2Range.endExclusive + deltaAfter) && deltaAfter < maxShiftLimit) {\n        deltaAfter++;\n    }\n    if (deltaBefore === 0 && deltaAfter === 0) {\n        return diff;\n    }\n    var bestDelta = 0;\n    var bestScore = -1;\n    for (var delta = -deltaBefore; delta <= deltaAfter; delta++) {\n        var seq2OffsetStart = diff.seq2Range.start + delta;\n        var seq2OffsetEndExclusive = diff.seq2Range.endExclusive + delta;\n        var seq1Offset = diff.seq1Range.start + delta;\n        var score_1 = sequence1.getBoundaryScore(seq1Offset) + sequence2.getBoundaryScore(seq2OffsetStart) + sequence2.getBoundaryScore(seq2OffsetEndExclusive);\n        if (score_1 > bestScore) {\n            bestScore = score_1;\n            bestDelta = delta;\n        }\n    }\n    return diff.delta(bestDelta);\n}\nfunction removeShortMatches(sequence1, sequence2, sequenceDiffs) {\n    var e_15, _a;\n    var result = [];\n    try {\n        for (var sequenceDiffs_2 = __values(sequenceDiffs), sequenceDiffs_2_1 = sequenceDiffs_2.next(); !sequenceDiffs_2_1.done; sequenceDiffs_2_1 = sequenceDiffs_2.next()) {\n            var s = sequenceDiffs_2_1.value;\n            var last = result[result.length - 1];\n            if (!last) {\n                result.push(s);\n                continue;\n            }\n            if (s.seq1Range.start - last.seq1Range.endExclusive <= 2 || s.seq2Range.start - last.seq2Range.endExclusive <= 2) {\n                result[result.length - 1] = new SequenceDiff(last.seq1Range.join(s.seq1Range), last.seq2Range.join(s.seq2Range));\n            }\n            else {\n                result.push(s);\n            }\n        }\n    }\n    catch (e_15_1) { e_15 = { error: e_15_1 }; }\n    finally {\n        try {\n            if (sequenceDiffs_2_1 && !sequenceDiffs_2_1.done && (_a = sequenceDiffs_2.return)) _a.call(sequenceDiffs_2);\n        }\n        finally { if (e_15) throw e_15.error; }\n    }\n    return result;\n}\nfunction extendDiffsToEntireWordIfAppropriate(sequence1, sequence2, sequenceDiffs, findParent, force) {\n    if (force === void 0) { force = false; }\n    var equalMappings = SequenceDiff.invert(sequenceDiffs, sequence1.length);\n    var additional = [];\n    var lastPoint = new OffsetPair(0, 0);\n    function scanWord(pair, equalMapping) {\n        if (pair.offset1 < lastPoint.offset1 || pair.offset2 < lastPoint.offset2) {\n            return;\n        }\n        var w1 = findParent(sequence1, pair.offset1);\n        var w2 = findParent(sequence2, pair.offset2);\n        if (!w1 || !w2) {\n            return;\n        }\n        var w = new SequenceDiff(w1, w2);\n        var equalPart = w.intersect(equalMapping);\n        var equalChars1 = equalPart.seq1Range.length;\n        var equalChars2 = equalPart.seq2Range.length;\n        while (equalMappings.length > 0) {\n            var next = equalMappings[0];\n            var intersects = next.seq1Range.intersects(w.seq1Range) || next.seq2Range.intersects(w.seq2Range);\n            if (!intersects) {\n                break;\n            }\n            var v1 = findParent(sequence1, next.seq1Range.start);\n            var v2 = findParent(sequence2, next.seq2Range.start);\n            var v = new SequenceDiff(v1, v2);\n            var equalPart2 = v.intersect(next);\n            equalChars1 += equalPart2.seq1Range.length;\n            equalChars2 += equalPart2.seq2Range.length;\n            w = w.join(v);\n            if (w.seq1Range.endExclusive >= next.seq1Range.endExclusive) {\n                equalMappings.shift();\n            }\n            else {\n                break;\n            }\n        }\n        if (force && equalChars1 + equalChars2 < w.seq1Range.length + w.seq2Range.length || equalChars1 + equalChars2 < (w.seq1Range.length + w.seq2Range.length) * 2 / 3) {\n            additional.push(w);\n        }\n        lastPoint = w.getEndExclusives();\n    }\n    while (equalMappings.length > 0) {\n        var next = equalMappings.shift();\n        if (next.seq1Range.isEmpty) {\n            continue;\n        }\n        scanWord(next.getStarts(), next);\n        scanWord(next.getEndExclusives().delta(-1), next);\n    }\n    var merged = mergeSequenceDiffs(sequenceDiffs, additional);\n    return merged;\n}\nfunction mergeSequenceDiffs(sequenceDiffs1, sequenceDiffs2) {\n    var result = [];\n    while (sequenceDiffs1.length > 0 || sequenceDiffs2.length > 0) {\n        var sd1 = sequenceDiffs1[0];\n        var sd2 = sequenceDiffs2[0];\n        var next = void 0;\n        if (sd1 && (!sd2 || sd1.seq1Range.start < sd2.seq1Range.start)) {\n            next = sequenceDiffs1.shift();\n        }\n        else {\n            next = sequenceDiffs2.shift();\n        }\n        if (result.length > 0 && result[result.length - 1].seq1Range.endExclusive >= next.seq1Range.start) {\n            result[result.length - 1] = result[result.length - 1].join(next);\n        }\n        else {\n            result.push(next);\n        }\n    }\n    return result;\n}\nfunction removeVeryShortMatchingLinesBetweenDiffs(sequence1, _sequence2, sequenceDiffs) {\n    var diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n        return diffs;\n    }\n    var counter = 0;\n    var shouldRepeat;\n    do {\n        shouldRepeat = false;\n        var result = [\n            diffs[0]\n        ];\n        var _loop_4 = function (i) {\n            var shouldJoinDiffs = function (before, after) {\n                var unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n                var unchangedText = sequence1.getText(unchangedRange);\n                var unchangedTextWithoutWs = unchangedText.replace(/\\s/g, \"\");\n                if (unchangedTextWithoutWs.length <= 4 && (before.seq1Range.length + before.seq2Range.length > 5 || after.seq1Range.length + after.seq2Range.length > 5)) {\n                    return true;\n                }\n                return false;\n            };\n            var cur = diffs[i];\n            var lastResult = result[result.length - 1];\n            var shouldJoin = shouldJoinDiffs(lastResult, cur);\n            if (shouldJoin) {\n                shouldRepeat = true;\n                result[result.length - 1] = result[result.length - 1].join(cur);\n            }\n            else {\n                result.push(cur);\n            }\n        };\n        for (var i = 1; i < diffs.length; i++) {\n            _loop_4(i);\n        }\n        diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    return diffs;\n}\nfunction removeVeryShortMatchingTextBetweenLongDiffs(sequence1, sequence2, sequenceDiffs) {\n    var diffs = sequenceDiffs;\n    if (diffs.length === 0) {\n        return diffs;\n    }\n    var counter = 0;\n    var shouldRepeat;\n    do {\n        shouldRepeat = false;\n        var result = [\n            diffs[0]\n        ];\n        var _loop_5 = function (i) {\n            var shouldJoinDiffs = function (before, after) {\n                var unchangedRange = new OffsetRange(lastResult.seq1Range.endExclusive, cur.seq1Range.start);\n                var unchangedLineCount = sequence1.countLinesIn(unchangedRange);\n                if (unchangedLineCount > 5 || unchangedRange.length > 500) {\n                    return false;\n                }\n                var unchangedText = sequence1.getText(unchangedRange).trim();\n                if (unchangedText.length > 20 || unchangedText.split(/\\r\\n|\\r|\\n/).length > 1) {\n                    return false;\n                }\n                var beforeLineCount1 = sequence1.countLinesIn(before.seq1Range);\n                var beforeSeq1Length = before.seq1Range.length;\n                var beforeLineCount2 = sequence2.countLinesIn(before.seq2Range);\n                var beforeSeq2Length = before.seq2Range.length;\n                var afterLineCount1 = sequence1.countLinesIn(after.seq1Range);\n                var afterSeq1Length = after.seq1Range.length;\n                var afterLineCount2 = sequence2.countLinesIn(after.seq2Range);\n                var afterSeq2Length = after.seq2Range.length;\n                var max = 2 * 40 + 50;\n                function cap(v) {\n                    return Math.min(v, max);\n                }\n                if (Math.pow(Math.pow(cap(beforeLineCount1 * 40 + beforeSeq1Length), 1.5) + Math.pow(cap(beforeLineCount2 * 40 + beforeSeq2Length), 1.5), 1.5) + Math.pow(Math.pow(cap(afterLineCount1 * 40 + afterSeq1Length), 1.5) + Math.pow(cap(afterLineCount2 * 40 + afterSeq2Length), 1.5), 1.5) > Math.pow((Math.pow(max, 1.5)), 1.5) * 1.3) {\n                    return true;\n                }\n                return false;\n            };\n            var cur = diffs[i];\n            var lastResult = result[result.length - 1];\n            var shouldJoin = shouldJoinDiffs(lastResult, cur);\n            if (shouldJoin) {\n                shouldRepeat = true;\n                result[result.length - 1] = result[result.length - 1].join(cur);\n            }\n            else {\n                result.push(cur);\n            }\n        };\n        for (var i = 1; i < diffs.length; i++) {\n            _loop_5(i);\n        }\n        diffs = result;\n    } while (counter++ < 10 && shouldRepeat);\n    var newDiffs = [];\n    forEachWithNeighbors(diffs, function (prev, cur, next) {\n        var newDiff = cur;\n        function shouldMarkAsChanged(text) {\n            return text.length > 0 && text.trim().length <= 3 && cur.seq1Range.length + cur.seq2Range.length > 100;\n        }\n        var fullRange1 = sequence1.extendToFullLines(cur.seq1Range);\n        var prefix = sequence1.getText(new OffsetRange(fullRange1.start, cur.seq1Range.start));\n        if (shouldMarkAsChanged(prefix)) {\n            newDiff = newDiff.deltaStart(-prefix.length);\n        }\n        var suffix = sequence1.getText(new OffsetRange(cur.seq1Range.endExclusive, fullRange1.endExclusive));\n        if (shouldMarkAsChanged(suffix)) {\n            newDiff = newDiff.deltaEnd(suffix.length);\n        }\n        var availableSpace = SequenceDiff.fromOffsetPairs(prev ? prev.getEndExclusives() : OffsetPair.zero, next ? next.getStarts() : OffsetPair.max);\n        var result = newDiff.intersect(availableSpace);\n        if (newDiffs.length > 0 && result.getStarts().equals(newDiffs[newDiffs.length - 1].getEndExclusives())) {\n            newDiffs[newDiffs.length - 1] = newDiffs[newDiffs.length - 1].join(result);\n        }\n        else {\n            newDiffs.push(result);\n        }\n    });\n    return newDiffs;\n}\nvar LineSequence = /** @class */ (function () {\n    function LineSequence(trimmedHash, lines) {\n        this.trimmedHash = trimmedHash;\n        this.lines = lines;\n    }\n    LineSequence.prototype.getElement = function (offset) {\n        return this.trimmedHash[offset];\n    };\n    Object.defineProperty(LineSequence.prototype, \"length\", {\n        get: function () {\n            return this.trimmedHash.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineSequence.prototype.getBoundaryScore = function (length) {\n        var indentationBefore = length === 0 ? 0 : getIndentation(this.lines[length - 1]);\n        var indentationAfter = length === this.lines.length ? 0 : getIndentation(this.lines[length]);\n        return 1e3 - (indentationBefore + indentationAfter);\n    };\n    LineSequence.prototype.getText = function (range) {\n        return this.lines.slice(range.start, range.endExclusive).join(\"\\n\");\n    };\n    LineSequence.prototype.isStronglyEqual = function (offset1, offset2) {\n        return this.lines[offset1] === this.lines[offset2];\n    };\n    return LineSequence;\n}());\nfunction getIndentation(str) {\n    var i = 0;\n    while (i < str.length && (str.charCodeAt(i) === 32 || str.charCodeAt(i) === 9)) {\n        i++;\n    }\n    return i;\n}\nvar DefaultLinesDiffComputer = /** @class */ (function () {\n    function DefaultLinesDiffComputer() {\n        this.dynamicProgrammingDiffing = new DynamicProgrammingDiffing();\n        this.myersDiffingAlgorithm = new MyersDiffAlgorithm();\n    }\n    DefaultLinesDiffComputer.prototype.computeDiff = function (originalLines, modifiedLines, options) {\n        var e_16, _a;\n        var _this = this;\n        if (originalLines.length <= 1 && equals(originalLines, modifiedLines, function (a, b) { return a === b; })) {\n            return new LinesDiff([], [], false);\n        }\n        if (originalLines.length === 1 && originalLines[0].length === 0 || modifiedLines.length === 1 && modifiedLines[0].length === 0) {\n            return new LinesDiff([\n                new DetailedLineRangeMapping(new LineRange(1, originalLines.length + 1), new LineRange(1, modifiedLines.length + 1), [\n                    new RangeMapping(new Range(1, 1, originalLines.length, originalLines[originalLines.length - 1].length + 1), new Range(1, 1, modifiedLines.length, modifiedLines[modifiedLines.length - 1].length + 1))\n                ])\n            ], [], false);\n        }\n        var timeout = options.maxComputationTimeMs === 0 ? InfiniteTimeout.instance : new DateTimeout(options.maxComputationTimeMs);\n        var considerWhitespaceChanges = !options.ignoreTrimWhitespace;\n        var perfectHashes = /* @__PURE__ */ new Map();\n        function getOrCreateHash(text) {\n            var hash = perfectHashes.get(text);\n            if (hash === undefined) {\n                hash = perfectHashes.size;\n                perfectHashes.set(text, hash);\n            }\n            return hash;\n        }\n        var originalLinesHashes = originalLines.map(function (l) { return getOrCreateHash(l.trim()); });\n        var modifiedLinesHashes = modifiedLines.map(function (l) { return getOrCreateHash(l.trim()); });\n        var sequence1 = new LineSequence(originalLinesHashes, originalLines);\n        var sequence2 = new LineSequence(modifiedLinesHashes, modifiedLines);\n        var lineAlignmentResult = (function () {\n            if (sequence1.length + sequence2.length < 1700) {\n                return _this.dynamicProgrammingDiffing.compute(sequence1, sequence2, timeout, function (offset1, offset2) { return originalLines[offset1] === modifiedLines[offset2] ? modifiedLines[offset2].length === 0 ? 0.1 : 1 + Math.log(1 + modifiedLines[offset2].length) : 0.99; });\n            }\n            return _this.myersDiffingAlgorithm.compute(sequence1, sequence2, timeout);\n        })();\n        var lineAlignments = lineAlignmentResult.diffs;\n        var hitTimeout = lineAlignmentResult.hitTimeout;\n        lineAlignments = optimizeSequenceDiffs(sequence1, sequence2, lineAlignments);\n        lineAlignments = removeVeryShortMatchingLinesBetweenDiffs(sequence1, sequence2, lineAlignments);\n        var alignments = [];\n        var scanForWhitespaceChanges = function (equalLinesCount) {\n            var e_17, _a;\n            if (!considerWhitespaceChanges) {\n                return;\n            }\n            for (var i = 0; i < equalLinesCount; i++) {\n                var seq1Offset = seq1LastStart + i;\n                var seq2Offset = seq2LastStart + i;\n                if (originalLines[seq1Offset] !== modifiedLines[seq2Offset]) {\n                    var characterDiffs = _this.refineDiff(originalLines, modifiedLines, new SequenceDiff(new OffsetRange(seq1Offset, seq1Offset + 1), new OffsetRange(seq2Offset, seq2Offset + 1)), timeout, considerWhitespaceChanges, options);\n                    try {\n                        for (var _g = (e_17 = void 0, __values(characterDiffs.mappings)), _h = _g.next(); !_h.done; _h = _g.next()) {\n                            var a = _h.value;\n                            alignments.push(a);\n                        }\n                    }\n                    catch (e_17_1) { e_17 = { error: e_17_1 }; }\n                    finally {\n                        try {\n                            if (_h && !_h.done && (_a = _g.return)) _a.call(_g);\n                        }\n                        finally { if (e_17) throw e_17.error; }\n                    }\n                    if (characterDiffs.hitTimeout) {\n                        hitTimeout = true;\n                    }\n                }\n            }\n        };\n        var seq1LastStart = 0;\n        var seq2LastStart = 0;\n        var _loop_6 = function (diff) {\n            var e_18, _g;\n            assertFn(function () { return diff.seq1Range.start - seq1LastStart === diff.seq2Range.start - seq2LastStart; });\n            var equalLinesCount = diff.seq1Range.start - seq1LastStart;\n            scanForWhitespaceChanges(equalLinesCount);\n            seq1LastStart = diff.seq1Range.endExclusive;\n            seq2LastStart = diff.seq2Range.endExclusive;\n            var characterDiffs = this_1.refineDiff(originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges, options);\n            if (characterDiffs.hitTimeout) {\n                hitTimeout = true;\n            }\n            try {\n                for (var _h = (e_18 = void 0, __values(characterDiffs.mappings)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                    var a = _j.value;\n                    alignments.push(a);\n                }\n            }\n            catch (e_18_1) { e_18 = { error: e_18_1 }; }\n            finally {\n                try {\n                    if (_j && !_j.done && (_g = _h.return)) _g.call(_h);\n                }\n                finally { if (e_18) throw e_18.error; }\n            }\n        };\n        var this_1 = this;\n        try {\n            for (var lineAlignments_1 = __values(lineAlignments), lineAlignments_1_1 = lineAlignments_1.next(); !lineAlignments_1_1.done; lineAlignments_1_1 = lineAlignments_1.next()) {\n                var diff = lineAlignments_1_1.value;\n                _loop_6(diff);\n            }\n        }\n        catch (e_16_1) { e_16 = { error: e_16_1 }; }\n        finally {\n            try {\n                if (lineAlignments_1_1 && !lineAlignments_1_1.done && (_a = lineAlignments_1.return)) _a.call(lineAlignments_1);\n            }\n            finally { if (e_16) throw e_16.error; }\n        }\n        scanForWhitespaceChanges(originalLines.length - seq1LastStart);\n        var changes = lineRangeMappingFromRangeMappings(alignments, new ArrayText(originalLines), new ArrayText(modifiedLines));\n        var moves = [];\n        if (options.computeMoves) {\n            moves = this.computeMoves(changes, originalLines, modifiedLines, originalLinesHashes, modifiedLinesHashes, timeout, considerWhitespaceChanges, options);\n        }\n        assertFn(function () {\n            var e_19, _a, e_20, _g;\n            function validatePosition(pos, lines) {\n                if (pos.lineNumber < 1 || pos.lineNumber > lines.length) {\n                    return false;\n                }\n                var line = lines[pos.lineNumber - 1];\n                if (pos.column < 1 || pos.column > line.length + 1) {\n                    return false;\n                }\n                return true;\n            }\n            function validateRange(range, lines) {\n                if (range.startLineNumber < 1 || range.startLineNumber > lines.length + 1) {\n                    return false;\n                }\n                if (range.endLineNumberExclusive < 1 || range.endLineNumberExclusive > lines.length + 1) {\n                    return false;\n                }\n                return true;\n            }\n            try {\n                for (var changes_3 = __values(changes), changes_3_1 = changes_3.next(); !changes_3_1.done; changes_3_1 = changes_3.next()) {\n                    var c = changes_3_1.value;\n                    if (!c.innerChanges) {\n                        return false;\n                    }\n                    try {\n                        for (var _h = (e_20 = void 0, __values(c.innerChanges)), _j = _h.next(); !_j.done; _j = _h.next()) {\n                            var ic = _j.value;\n                            var valid = validatePosition(ic.modifiedRange.getStartPosition(), modifiedLines) && validatePosition(ic.modifiedRange.getEndPosition(), modifiedLines) && validatePosition(ic.originalRange.getStartPosition(), originalLines) && validatePosition(ic.originalRange.getEndPosition(), originalLines);\n                            if (!valid) {\n                                return false;\n                            }\n                        }\n                    }\n                    catch (e_20_1) { e_20 = { error: e_20_1 }; }\n                    finally {\n                        try {\n                            if (_j && !_j.done && (_g = _h.return)) _g.call(_h);\n                        }\n                        finally { if (e_20) throw e_20.error; }\n                    }\n                    if (!validateRange(c.modified, modifiedLines) || !validateRange(c.original, originalLines)) {\n                        return false;\n                    }\n                }\n            }\n            catch (e_19_1) { e_19 = { error: e_19_1 }; }\n            finally {\n                try {\n                    if (changes_3_1 && !changes_3_1.done && (_a = changes_3.return)) _a.call(changes_3);\n                }\n                finally { if (e_19) throw e_19.error; }\n            }\n            return true;\n        });\n        return new LinesDiff(changes, moves, hitTimeout);\n    };\n    DefaultLinesDiffComputer.prototype.computeMoves = function (changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout, considerWhitespaceChanges, options) {\n        var _this = this;\n        var moves = computeMovedLines(changes, originalLines, modifiedLines, hashedOriginalLines, hashedModifiedLines, timeout);\n        var movesWithDiffs = moves.map(function (m) {\n            var moveChanges = _this.refineDiff(originalLines, modifiedLines, new SequenceDiff(m.original.toOffsetRange(), m.modified.toOffsetRange()), timeout, considerWhitespaceChanges, options);\n            var mappings = lineRangeMappingFromRangeMappings(moveChanges.mappings, new ArrayText(originalLines), new ArrayText(modifiedLines), true);\n            return new MovedText(m, mappings);\n        });\n        return movesWithDiffs;\n    };\n    DefaultLinesDiffComputer.prototype.refineDiff = function (originalLines, modifiedLines, diff, timeout, considerWhitespaceChanges, options) {\n        var lineRangeMapping = toLineRangeMapping(diff);\n        var rangeMapping = lineRangeMapping.toRangeMapping2(originalLines, modifiedLines);\n        var slice1 = new LinesSliceCharSequence(originalLines, rangeMapping.originalRange, considerWhitespaceChanges);\n        var slice2 = new LinesSliceCharSequence(modifiedLines, rangeMapping.modifiedRange, considerWhitespaceChanges);\n        var diffResult = slice1.length + slice2.length < 500 ? this.dynamicProgrammingDiffing.compute(slice1, slice2, timeout) : this.myersDiffingAlgorithm.compute(slice1, slice2, timeout);\n        var diffs = diffResult.diffs;\n        diffs = optimizeSequenceDiffs(slice1, slice2, diffs);\n        diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs, function (seq, idx) { return seq.findWordContaining(idx); });\n        if (options.extendToSubwords) {\n            diffs = extendDiffsToEntireWordIfAppropriate(slice1, slice2, diffs, function (seq, idx) { return seq.findSubWordContaining(idx); }, true);\n        }\n        diffs = removeShortMatches(slice1, slice2, diffs);\n        diffs = removeVeryShortMatchingTextBetweenLongDiffs(slice1, slice2, diffs);\n        var result = diffs.map(function (d) { return new RangeMapping(slice1.translateRange(d.seq1Range), slice2.translateRange(d.seq2Range)); });\n        return {\n            mappings: result,\n            hitTimeout: diffResult.hitTimeout\n        };\n    };\n    return DefaultLinesDiffComputer;\n}());\nfunction toLineRangeMapping(sequenceDiff) {\n    return new LineRangeMapping(new LineRange(sequenceDiff.seq1Range.start + 1, sequenceDiff.seq1Range.endExclusive + 1), new LineRange(sequenceDiff.seq2Range.start + 1, sequenceDiff.seq2Range.endExclusive + 1));\n}\nfunction computeDiff(originalLines, modifiedLines, options) {\n    var diffComputer = new DefaultLinesDiffComputer();\n    var result = diffComputer.computeDiff(originalLines, modifiedLines, options);\n    return result === null || result === void 0 ? void 0 : result.changes.map(function (changes) {\n        var originalStartLineNumber;\n        var originalEndLineNumber;\n        var modifiedStartLineNumber;\n        var modifiedEndLineNumber;\n        var innerChanges = changes.innerChanges;\n        originalStartLineNumber = changes.original.startLineNumber - 1;\n        originalEndLineNumber = changes.original.endLineNumberExclusive - 1;\n        modifiedStartLineNumber = changes.modified.startLineNumber - 1;\n        modifiedEndLineNumber = changes.modified.endLineNumberExclusive - 1;\n        return {\n            origStart: originalStartLineNumber,\n            origEnd: originalEndLineNumber,\n            editStart: modifiedStartLineNumber,\n            editEnd: modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(function (m) { return ({\n                originalStartLineNumber: m.originalRange.startLineNumber - 1,\n                originalStartColumn: m.originalRange.startColumn - 1,\n                originalEndLineNumber: m.originalRange.endLineNumber - 1,\n                originalEndColumn: m.originalRange.endColumn - 1,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber - 1,\n                modifiedStartColumn: m.modifiedRange.startColumn - 1,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber - 1,\n                modifiedEndColumn: m.modifiedRange.endColumn - 1\n            }); })\n        };\n    });\n}\nexports.computeDiff = computeDiff;\nvar AceRange = require(\"../../../range\").Range;\nvar DiffChunk = require(\"../base_diff_view\").DiffChunk;\nvar DiffProvider = /** @class */ (function () {\n    function DiffProvider() {\n    }\n    DiffProvider.prototype.compute = function (originalLines, modifiedLines, opts) {\n        if (!opts)\n            opts = {};\n        if (!opts.maxComputationTimeMs)\n            opts.maxComputationTimeMs = 500;\n        var chunks = computeDiff(originalLines, modifiedLines, opts) || [];\n        return chunks.map(function (c) { return new DiffChunk(new AceRange(c.origStart, 0, c.origEnd, 0), new AceRange(c.editStart, 0, c.editEnd, 0), c.charChanges); });\n    };\n    return DiffProvider;\n}());\nexports.DiffProvider = DiffProvider;\n\n});\n\nace.define(\"ace/ext/diff\",[\"require\",\"exports\",\"module\",\"ace/ext/diff/inline_diff_view\",\"ace/ext/diff/split_diff_view\",\"ace/ext/diff/providers/default\"], function(require, exports, module){/**\n * ## Diff extension\n *\n * Provides side-by-side and inline diff view capabilities for comparing code differences between two versions.\n * Supports visual highlighting of additions, deletions, and modifications with customizable diff providers\n * and rendering options. Includes features for synchronized scrolling, line number alignment, and\n * various diff computation algorithms.\n *\n * **Components:**\n * - `InlineDiffView`: Single editor view showing changes inline with markers\n * - `SplitDiffView`: Side-by-side comparison view with two synchronized editors\n * - `DiffProvider`: Configurable algorithms for computing differences\n *\n * **Usage:**\n * ```javascript\n * const diffView = createDiffView({\n *   valueA: originalContent,\n *   valueB: modifiedContent,\n *   inline: false // or 'a'/'b' for inline view\n * });\n * ```\n *\n * @module\n */\nvar InlineDiffView = require(\"./diff/inline_diff_view\").InlineDiffView;\nvar SplitDiffView = require(\"./diff/split_diff_view\").SplitDiffView;\nvar DiffProvider = require(\"./diff/providers/default\").DiffProvider;\nfunction createDiffView(diffModel, options) {\n    diffModel = diffModel || {};\n    diffModel.diffProvider = diffModel.diffProvider || new DiffProvider(); //use default diff provider;\n    var diffView;\n    if (diffModel.inline) {\n        diffView = new InlineDiffView(diffModel);\n    }\n    else {\n        diffView = new SplitDiffView(diffModel);\n    }\n    if (options) {\n        diffView.setOptions(options);\n    }\n    return diffView;\n}\nexports.InlineDiffView = InlineDiffView;\nexports.SplitDiffView = SplitDiffView;\nexports.DiffProvider = DiffProvider;\nexports.createDiffView = createDiffView;\n\n});                (function() {\n                    ace.require([\"ace/ext/diff\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            "],"mappings":"AAAAA,GAAG,CAACC,MAAM,CAAC,oCAAoC,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,sBAAsB,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,IAAIC,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;IAC/L,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;MAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;QAAEC,SAAS,EAAE;MAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;QAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;MAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;QAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAE,CAAC;MACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IAC9B,CAAC;IACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;MACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;MAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;MACnB,SAASW,EAAEA,CAAA,EAAG;QAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;MAAE;MACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC;EACL,CAAC,CAAE,CAAC;EACJ,IAAIG,QAAQ,GAAI,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAK,UAASC,CAAC,EAAE;IAClD,IAAIC,CAAC,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,QAAQ;MAAEC,CAAC,GAAGH,CAAC,IAAID,CAAC,CAACC,CAAC,CAAC;MAAEI,CAAC,GAAG,CAAC;IAC7E,IAAID,CAAC,EAAE,OAAOA,CAAC,CAACX,IAAI,CAACO,CAAC,CAAC;IACvB,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACM,MAAM,KAAK,QAAQ,EAAE,OAAO;MAC1CC,IAAI,EAAE,SAAAA,CAAA,EAAY;QACd,IAAIP,CAAC,IAAIK,CAAC,IAAIL,CAAC,CAACM,MAAM,EAAEN,CAAC,GAAG,KAAK,CAAC;QAClC,OAAO;UAAEQ,KAAK,EAAER,CAAC,IAAIA,CAAC,CAACK,CAAC,EAAE,CAAC;UAAEI,IAAI,EAAE,CAACT;QAAE,CAAC;MAC3C;IACJ,CAAC;IACD,MAAM,IAAIN,SAAS,CAACO,CAAC,GAAG,yBAAyB,GAAG,iCAAiC,CAAC;EAC1F,CAAC;EACD,IAAIS,SAAS,GAAG/B,OAAO,CAAC,wBAAwB,CAAC,CAAC+B,SAAS;EAC3D,IAAIC,mBAAmB,GAAG,aAAe,UAAUC,MAAM,EAAE;IACvD9B,SAAS,CAAC6B,mBAAmB,EAAEC,MAAM,CAAC;IACtC,SAASD,mBAAmBA,CAACE,UAAU,EAAEC,QAAQ,EAAEC,aAAa,EAAE;MAC9D,IAAIC,KAAK,GAAGJ,MAAM,CAACnB,IAAI,CAAC,IAAI,EAAEoB,UAAU,EAAEC,QAAQ,CAAC,IAAI,IAAI;MAC3DE,KAAK,CAACC,MAAM,CAACC,IAAI,CAAC,QAAQ,CAAC,GAAG,sBAAsB;MACpDF,KAAK,CAACC,MAAM,CAACC,IAAI,CAAC,QAAQ,CAAC,GAAG,sBAAsB;MACpDF,KAAK,CAACC,MAAM,CAACE,KAAK,CAAC,QAAQ,CAAC,GAAG,gBAAgB;MAC/CH,KAAK,CAACC,MAAM,CAACE,KAAK,CAAC,QAAQ,CAAC,GAAG,gBAAgB;MAC/CH,KAAK,CAACI,MAAM,GAAG,EAAE;MACjBJ,KAAK,CAACK,cAAc,GAAGN,aAAa;MACpC,OAAOC,KAAK;IAChB;IACAL,mBAAmB,CAACpB,SAAS,CAAC+B,OAAO,GAAG,UAAUC,QAAQ,EAAEC,MAAM,EAAEC,IAAI,EAAE;MACtE,IAAI,CAACL,MAAM,CAACM,IAAI,CAAC;QACbH,QAAQ,EAAEA,QAAQ;QAClBC,MAAM,EAAEA,MAAM;QACdC,IAAI,EAAEA;MACV,CAAC,CAAC;IACN,CAAC;IACDd,mBAAmB,CAACpB,SAAS,CAACoC,WAAW,GAAG,UAAUC,QAAQ,EAAEC,QAAQ,EAAE;MACtE,IAAI,CAACD,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACC,QAAQ,GAAGA,QAAQ;IAC5B,CAAC;IACDlB,mBAAmB,CAACpB,SAAS,CAACuC,iBAAiB,GAAG,UAAUC,MAAM,EAAE;MAChE,IAAI,OAAO,IAAI,CAACC,MAAM,CAACC,UAAU,KAAK,UAAU,EAAE;QAC9C;MACJ;MACArB,MAAM,CAACrB,SAAS,CAACuC,iBAAiB,CAACrC,IAAI,CAAC,IAAI,EAAEsC,MAAM,CAAC;MACrD,IAAI,IAAI,CAACX,MAAM,CAACd,MAAM,GAAG,CAAC,EAAE;QACxB,IAAIW,MAAM,GAAI,IAAI,CAACH,QAAQ,CAACoB,KAAK,CAACC,MAAM,KAAK,IAAI,GAAI,IAAI,CAAClB,MAAM,CAACC,IAAI,GAAG,IAAI,CAACD,MAAM,CAACE,KAAK;QACzF,IAAIiB,GAAG,GAAG,IAAI,CAACJ,MAAM,CAACC,UAAU,CAAC,IAAI,CAAC;QACtC,IAAI,CAACI,kBAAkB,CAACD,GAAG,EAAEnB,MAAM,CAAC;MACxC;IACJ,CAAC;IACDN,mBAAmB,CAACpB,SAAS,CAAC+C,kBAAkB,GAAG,UAAUC,GAAG,EAAEd,IAAI,EAAE;MACpE,IAAIA,IAAI,IAAI,QAAQ,EAAE;QAClB,OAAO,IAAI,CAACG,QAAQ,CAACY,mBAAmB,CAACD,GAAG,EAAE,CAAC,CAAC;MACpD,CAAC,MACI;QACD,OAAO,IAAI,CAACV,QAAQ,CAACW,mBAAmB,CAACD,GAAG,EAAE,CAAC,CAAC;MACpD;IACJ,CAAC;IACD5B,mBAAmB,CAACpB,SAAS,CAAC8C,kBAAkB,GAAG,UAAUD,GAAG,EAAEnB,MAAM,EAAE;MACtE,IAAIwB,GAAG,EAAEC,EAAE;MACX,IAAI1B,KAAK,GAAG,IAAI;MAChB,SAAS2B,OAAOA,CAACC,CAAC,EAAE3D,CAAC,EAAE;QACnB,IAAI2D,CAAC,CAACC,IAAI,KAAK5D,CAAC,CAAC4D,IAAI,EAAE;UACnB,OAAOD,CAAC,CAACE,EAAE,GAAG7D,CAAC,CAAC6D,EAAE;QACtB;QACA,OAAOF,CAAC,CAACC,IAAI,GAAG5D,CAAC,CAAC4D,IAAI;MAC1B;MACA,IAAIE,KAAK,GAAG,IAAI,CAAC3B,MAAM;MACvB,IAAI2B,KAAK,EAAE;QACP,IAAIC,aAAa,GAAG,EAAE;QACtB,IAAIC,WAAW,GAAGF,KAAK,CAACG,MAAM,CAAC,UAAUC,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC1B,IAAI,KAAK,QAAQ;QAAE,CAAC,CAAC;QAC5E,IAAI2B,WAAW,GAAGL,KAAK,CAACG,MAAM,CAAC,UAAUC,CAAC,EAAE;UAAE,OAAOA,CAAC,CAAC1B,IAAI,KAAK,QAAQ;QAAE,CAAC,CAAC;QAC5E,CAACwB,WAAW,EAAEG,WAAW,CAAC,CAACC,OAAO,CAAC,UAAUC,SAAS,EAAE;UACpDA,SAAS,CAACD,OAAO,CAAC,UAAUE,IAAI,EAAElD,CAAC,EAAE;YACjC,IAAImD,OAAO,GAAGxC,KAAK,CAACsB,kBAAkB,CAACiB,IAAI,CAAChC,QAAQ,EAAEgC,IAAI,CAAC9B,IAAI,CAAC,GAAGT,KAAK,CAACyC,UAAU;YACnF,IAAIC,OAAO,GAAG1C,KAAK,CAACsB,kBAAkB,CAACiB,IAAI,CAAC/B,MAAM,EAAE+B,IAAI,CAAC9B,IAAI,CAAC,GAAGT,KAAK,CAACyC,UAAU,GAAGzC,KAAK,CAACyC,UAAU;YACpG,IAAIE,EAAE,GAAGC,IAAI,CAACC,KAAK,CAAC7C,KAAK,CAAC8C,WAAW,GAAGN,OAAO,CAAC;YAChD,IAAIO,EAAE,GAAGH,IAAI,CAACC,KAAK,CAAC7C,KAAK,CAAC8C,WAAW,GAAGJ,OAAO,CAAC;YAChD,IAAIM,OAAO,GAAG,CAAC;YACf,IAAIC,OAAO,GAAGL,IAAI,CAACC,KAAK,CAAC,CAACF,EAAE,GAAGI,EAAE,IAAI,CAAC,CAAC;YACvC,IAAIG,UAAU,GAAIH,EAAE,GAAGE,OAAQ;YAC/B,IAAIC,UAAU,GAAGlD,KAAK,CAACmD,uBAAuB,EAAE;cAC5CD,UAAU,GAAGlD,KAAK,CAACmD,uBAAuB;YAC9C;YACA,IAAIC,YAAY,GAAGpB,aAAa,CAACA,aAAa,CAAC1C,MAAM,GAAG,CAAC,CAAC;YAC1D,IAAID,CAAC,GAAG,CAAC,IAAI+D,YAAY,IAAIA,YAAY,CAAC3C,IAAI,KAAK8B,IAAI,CAAC9B,IAAI,IAAIwC,OAAO,GAAGC,UAAU,GAAGE,YAAY,CAACtB,EAAE,GAAGkB,OAAO,EAAE;cAC9GC,OAAO,GAAGjB,aAAa,CAACA,aAAa,CAAC1C,MAAM,GAAG,CAAC,CAAC,CAACwC,EAAE,GAAGkB,OAAO,GAAGE,UAAU;YAC/E;YACA,IAAID,OAAO,GAAGC,UAAU,GAAG,CAAC,EAAE;cAC1BD,OAAO,GAAGC,UAAU;YACxB;YACA,IAAID,OAAO,GAAGC,UAAU,GAAGlD,KAAK,CAACqD,YAAY,EAAE;cAC3CJ,OAAO,GAAGjD,KAAK,CAACqD,YAAY,GAAGH,UAAU;YAC7C;YACAlB,aAAa,CAACtB,IAAI,CAAC;cACfD,IAAI,EAAE8B,IAAI,CAAC9B,IAAI;cACfoB,IAAI,EAAEoB,OAAO,GAAGC,UAAU;cAC1BpB,EAAE,EAAEmB,OAAO,GAAGC,UAAU;cACxBI,KAAK,EAAErD,MAAM,CAACsC,IAAI,CAAC9B,IAAI,CAAC,IAAI;YAChC,CAAC,CAAC;UACN,CAAC,CAAC;QACN,CAAC,CAAC;QACFuB,aAAa,GAAGA,aAAa,CAACuB,IAAI,CAAC5B,OAAO,CAAC;QAC3C,IAAI;UACA,KAAK,IAAI6B,eAAe,GAAGzE,QAAQ,CAACiD,aAAa,CAAC,EAAEyB,iBAAiB,GAAGD,eAAe,CAACjE,IAAI,CAAC,CAAC,EAAE,CAACkE,iBAAiB,CAAChE,IAAI,EAAEgE,iBAAiB,GAAGD,eAAe,CAACjE,IAAI,CAAC,CAAC,EAAE;YACjK,IAAIgD,IAAI,GAAGkB,iBAAiB,CAACjE,KAAK;YAClC4B,GAAG,CAACsC,SAAS,GAAGnB,IAAI,CAACe,KAAK,IAAI,IAAI;YAClC,IAAIK,QAAQ,GAAGpB,IAAI,CAACV,IAAI;YACxB,IAAI+B,MAAM,GAAGrB,IAAI,CAACT,EAAE;YACpB,IAAI+B,UAAU,GAAGD,MAAM,GAAGD,QAAQ;YAClC,IAAI,IAAI,CAACtD,cAAc,EAAE;cACrBe,GAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACC,YAAY,EAAEJ,QAAQ,EAAE,CAAC,GAAG,IAAI,CAACI,YAAY,EAAEF,UAAU,CAAC;YAChF,CAAC,MACI;cACD,IAAItB,IAAI,CAAC9B,IAAI,IAAI,QAAQ,EAAE;gBACvBW,GAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACC,YAAY,EAAEJ,QAAQ,EAAE,IAAI,CAACI,YAAY,EAAEF,UAAU,CAAC;cAC5E,CAAC,MACI;gBACDzC,GAAG,CAAC0C,QAAQ,CAAC,CAAC,GAAG,IAAI,CAACC,YAAY,EAAEJ,QAAQ,EAAE,IAAI,CAACI,YAAY,EAAEF,UAAU,CAAC;cAChF;YACJ;UACJ;QACJ,CAAC,CACD,OAAOG,KAAK,EAAE;UAAEvC,GAAG,GAAG;YAAEwC,KAAK,EAAED;UAAM,CAAC;QAAE,CAAC,SACjC;UACJ,IAAI;YACA,IAAIP,iBAAiB,IAAI,CAACA,iBAAiB,CAAChE,IAAI,KAAKiC,EAAE,GAAG8B,eAAe,CAACU,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAAC+E,eAAe,CAAC;UAC/G,CAAC,SACO;YAAE,IAAI/B,GAAG,EAAE,MAAMA,GAAG,CAACwC,KAAK;UAAE;QACxC;MACJ;IACJ,CAAC;IACDtE,mBAAmB,CAACpB,SAAS,CAAC4F,YAAY,GAAG,YAAY;MACrD,IAAI,CAACJ,YAAY,GAAGnB,IAAI,CAACC,KAAK,CAAC,IAAI,CAACuB,WAAW,GAAG,CAAC,CAAC;IACxD,CAAC;IACD,OAAOzE,mBAAmB;EAC9B,CAAC,CAACD,SAAS,CAAE;EACb9B,OAAO,CAAC+B,mBAAmB,GAAGA,mBAAmB;AAEjD,CAAC,CAAC;AAEFlC,GAAG,CAACC,MAAM,CAAC,4BAA4B,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAACD,OAAO,CAACyG,OAAO,GAAG,iiGAAiiG;AAE9pG,CAAC,CAAC;AAEF5G,GAAG,CAACC,MAAM,CAAC,+BAA+B,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,aAAa,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,IAAIyG,GAAG,GAAG3G,OAAO,CAAC,eAAe,CAAC;EAC9J,IAAI4G,0BAA0B,GAAG,aAAe,YAAY;IACxD,SAASA,0BAA0BA,CAACC,MAAM,EAAE/D,IAAI,EAAE;MAC9C,IAAI,CAACgE,WAAW,GAAG,8BAA8B;MACjD,IAAI,CAACC,kBAAkB,GAAG;QACtBC,GAAG,EAAE,iBAAiB;QACtBC,MAAM,EAAE;MACZ,CAAC;MACD,IAAI,CAACJ,MAAM,GAAGA,MAAM;MACpB,IAAI,CAAC/D,IAAI,GAAGA,IAAI;MAChB,IAAI,CAACoE,MAAM,GAAG,EAAE;MAChB,IAAI,CAACC,cAAc,CAAC,CAAC;IACzB;IACAP,0BAA0B,CAAChG,SAAS,CAACuG,cAAc,GAAG,YAAY;MAC9D,IAAI,CAACC,aAAa,GAAG,IAAI,CAACA,aAAa,CAACC,IAAI,CAAC,IAAI,CAAC;MAClDV,GAAG,CAACW,WAAW,CAAC,IAAI,CAACT,MAAM,CAAC1E,QAAQ,CAACoF,YAAY,CAACC,OAAO,EAAE,IAAI,CAACV,WAAW,CAAC;MAC5E,IAAI,CAACD,MAAM,CAAC1E,QAAQ,CAACoF,YAAY,CAACE,EAAE,CAAC,aAAa,EAAE,IAAI,CAACL,aAAa,CAAC;IAC3E,CAAC;IACDR,0BAA0B,CAAChG,SAAS,CAACwG,aAAa,GAAG,UAAUM,CAAC,EAAEC,WAAW,EAAE;MAC3E,IAAItF,KAAK,GAAG,IAAI;MAChB,IAAIuF,KAAK,GAAG,IAAI,CAACf,MAAM,CAAC1E,QAAQ,CAACoF,YAAY,CAACM,MAAM,CAACD,KAAK;MAC1DA,KAAK,CAAClD,OAAO,CAAC,UAAUoD,IAAI,EAAE;QAC1BA,IAAI,CAACN,OAAO,CAACO,SAAS,CAACC,MAAM,CAACzH,MAAM,CAAC0H,MAAM,CAAC5F,KAAK,CAAC0E,kBAAkB,CAAC,CAAC;MAC1E,CAAC,CAAC;MACF,IAAImB,GAAG,GAAG,IAAI,CAACpF,IAAI,KAAK,CAAC,CAAC,GAAG,KAAK,GAAG,KAAK;MAC1C,IAAIqF,SAAS,GAAG,IAAI,CAACrF,IAAI,KAAK,CAAC,CAAC,GAAG,IAAI,CAACiE,kBAAkB,CAACE,MAAM,GAAG,IAAI,CAACF,kBAAkB,CAACC,GAAG;MAC/F,IAAI,CAACE,MAAM,CAACxC,OAAO,CAAC,UAAU0D,UAAU,EAAE;QACtC,IAAIxF,QAAQ,GAAGwF,UAAU,CAACF,GAAG,CAAC,CAACG,KAAK,CAACzE,GAAG;QACxC,IAAIf,MAAM,GAAGuF,UAAU,CAACF,GAAG,CAAC,CAACI,GAAG,CAAC1E,GAAG,GAAG,CAAC;QACxCgE,KAAK,CAAClD,OAAO,CAAC,UAAUoD,IAAI,EAAE;UAC1B,IAAIA,IAAI,CAAClE,GAAG,IAAIhB,QAAQ,IAAIkF,IAAI,CAAClE,GAAG,IAAIf,MAAM,EAAE;YAC5CiF,IAAI,CAACN,OAAO,CAACO,SAAS,CAACf,GAAG,CAACmB,SAAS,CAAC;UACzC;QACJ,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;IACDvB,0BAA0B,CAAChG,SAAS,CAAC2H,cAAc,GAAG,UAAUC,OAAO,EAAE;MACrE,IAAI,CAACtB,MAAM,GAAGsB,OAAO;MACrB,IAAI,CAACpB,aAAa,CAAC,CAAC;IACxB,CAAC;IACDR,0BAA0B,CAAChG,SAAS,CAAC6H,OAAO,GAAG,YAAY;MACvD9B,GAAG,CAAC+B,cAAc,CAAC,IAAI,CAAC7B,MAAM,CAAC1E,QAAQ,CAACoF,YAAY,CAACC,OAAO,EAAE,IAAI,CAACV,WAAW,CAAC;MAC/E,IAAI,CAACD,MAAM,CAAC1E,QAAQ,CAACoF,YAAY,CAACoB,GAAG,CAAC,aAAa,EAAE,IAAI,CAACvB,aAAa,CAAC;IAC5E,CAAC;IACD,OAAOR,0BAA0B;EACrC,CAAC,CAAC,CAAE;EACJ3G,OAAO,CAAC2G,0BAA0B,GAAGA,0BAA0B;AAE/D,CAAC,CAAC;AAEF9G,GAAG,CAACC,MAAM,CAAC,6BAA6B,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,aAAa,EAAC,WAAW,EAAC,aAAa,EAAC,YAAY,EAAC,kBAAkB,EAAC,oCAAoC,EAAC,4BAA4B,EAAC,YAAY,EAAC,sBAAsB,EAAC,iBAAiB,EAAC,sBAAsB,EAAC,oBAAoB,EAAC,kBAAkB,EAAC,kBAAkB,EAAC,+BAA+B,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,YAAY;;EAC1a,IAAI0I,MAAM,GAAI,IAAI,IAAI,IAAI,CAACA,MAAM,IAAK,UAAUvH,CAAC,EAAEwH,CAAC,EAAE;IAClD,IAAIpH,CAAC,GAAG,OAAOF,MAAM,KAAK,UAAU,IAAIF,CAAC,CAACE,MAAM,CAACC,QAAQ,CAAC;IAC1D,IAAI,CAACC,CAAC,EAAE,OAAOJ,CAAC;IAChB,IAAIK,CAAC,GAAGD,CAAC,CAACX,IAAI,CAACO,CAAC,CAAC;MAAEyH,CAAC;MAAEC,EAAE,GAAG,EAAE;MAAErB,CAAC;IAChC,IAAI;MACA,OAAO,CAACmB,CAAC,KAAK,KAAK,CAAC,IAAIA,CAAC,EAAE,GAAG,CAAC,KAAK,CAAC,CAACC,CAAC,GAAGpH,CAAC,CAACE,IAAI,CAAC,CAAC,EAAEE,IAAI,EAAEiH,EAAE,CAAChG,IAAI,CAAC+F,CAAC,CAACjH,KAAK,CAAC;IAC9E,CAAC,CACD,OAAOyE,KAAK,EAAE;MAAEoB,CAAC,GAAG;QAAEpB,KAAK,EAAEA;MAAM,CAAC;IAAE,CAAC,SAC/B;MACJ,IAAI;QACA,IAAIwC,CAAC,IAAI,CAACA,CAAC,CAAChH,IAAI,KAAKL,CAAC,GAAGC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAED,CAAC,CAACX,IAAI,CAACY,CAAC,CAAC;MACpD,CAAC,SACO;QAAE,IAAIgG,CAAC,EAAE,MAAMA,CAAC,CAACpB,KAAK;MAAE;IACpC;IACA,OAAOyC,EAAE;EACb,CAAC;EACD,IAAIC,GAAG,GAAGhJ,OAAO,CAAC,eAAe,CAAC;EAClC,IAAIiJ,KAAK,GAAGjJ,OAAO,CAAC,aAAa,CAAC,CAACiJ,KAAK;EACxC,IAAItC,GAAG,GAAG3G,OAAO,CAAC,eAAe,CAAC;EAClC,IAAIoD,MAAM,GAAGpD,OAAO,CAAC,cAAc,CAAC;EACpC,IAAIkJ,WAAW,GAAGlJ,OAAO,CAAC,oBAAoB,CAAC,CAACkJ,WAAW;EAC3D,IAAIlH,mBAAmB,GAAGhC,OAAO,CAAC,yBAAyB,CAAC,CAACgC,mBAAmB;EAChF,IAAImH,GAAG,GAAGnJ,OAAO,CAAC,iBAAiB,CAAC,CAAC0G,OAAO;EAC5C,IAAI0C,MAAM,GAAGpJ,OAAO,CAAC,cAAc,CAAC,CAACoJ,MAAM;EAC3C,IAAIC,QAAQ,GAAGrJ,OAAO,CAAC,wBAAwB,CAAC,CAACsJ,eAAe;EAChE,IAAIC,WAAW,GAAGvJ,OAAO,CAAC,mBAAmB,CAAC,CAACuJ,WAAW;EAC1D,IAAIxH,SAAS,GAAG/B,OAAO,CAAC,wBAAwB,CAAC,CAAC+B,SAAS;EAC3D/B,OAAO,CAAC,sBAAsB,CAAC;EAC/BA,OAAO,CAAC,oBAAoB,CAAC;EAC7B,IAAIwJ,WAAW,GAAGxJ,OAAO,CAAC,oBAAoB,CAAC,CAACwJ,WAAW;EAC3D,IAAI5C,0BAA0B,GAAG5G,OAAO,CAAC,oBAAoB,CAAC,CAAC4G,0BAA0B;EACzF,IAAI6C,iBAAiB,GAAG;IACpBC,OAAO,EAAE,SAAAA,CAAUC,IAAI,EAAEC,IAAI,EAAEC,OAAO,EAAE;MACpC,OAAO,EAAE;IACb;EACJ,CAAC;EACD,IAAIC,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAACC,gBAAgB,EAAEC,SAAS,EAAE;MAC/C,IAAI,CAACC,aAAa,GAAG,IAAI,CAACA,aAAa,CAAC5C,IAAI,CAAC,IAAI,CAAC;MAClD,IAAI,CAAC6C,OAAO,GAAG,IAAI,CAACA,OAAO,CAAC7C,IAAI,CAAC,IAAI,CAAC;MACtC,IAAI,CAAC8C,YAAY,GAAG,IAAI,CAACA,YAAY,CAAC9C,IAAI,CAAC,IAAI,CAAC;MAChD,IAAI,CAAC+C,OAAO,GAAG,IAAI,CAACA,OAAO,CAAC/C,IAAI,CAAC,IAAI,CAAC;MACtC,IAAI,CAACgD,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAChD,IAAI,CAAC,IAAI,CAAC;MACxC,IAAI,CAACiD,iBAAiB,GAAG,IAAI,CAACA,iBAAiB,CAACjD,IAAI,CAAC,IAAI,CAAC;MAC1D,IAAI,CAACkD,cAAc,GAAG,KAAK;MAAE,IAAI,CAACC,WAAW;MAAE,IAAI,CAACtD,MAAM;MAC1D,IAAI,CAAC6C,gBAAgB,GAAGA,gBAAgB,IAAI,KAAK;MACjD,IAAI,CAACU,gBAAgB,GAAG,CAAC;MACzB,IAAI,CAACC,YAAY,GAAGjB,iBAAiB;MACrC,IAAIO,SAAS,EAAE;QACX,IAAI,CAACA,SAAS,GAAGA,SAAS;MAC9B;MACArD,GAAG,CAACgE,eAAe,CAACxB,GAAG,EAAE,cAAc,CAAC;MACxC,IAAI,CAACyB,qBAAqB,GAAG,KAAK;MAClC,IAAI,CAACC,SAAS,GAAG,IAAI;MACrB,IAAI,CAACC,qBAAqB,GAAG,GAAG;MAChC,IAAI,CAACC,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,qBAAqB,GAAG,KAAK;MAClC,IAAI,CAACC,OAAO,GAAG,IAAIC,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC;MACzC,IAAI,CAACC,OAAO,GAAG,IAAID,aAAa,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAC9C;IACApB,YAAY,CAAClJ,SAAS,CAACwK,YAAY,GAAG,UAAUC,SAAS,EAAE;MACvD,IAAIA,SAAS,CAACX,YAAY,EAAE;QACxB,IAAI,CAACY,WAAW,CAACD,SAAS,CAACX,YAAY,CAAC;MAC5C;MACA,IAAI,CAACa,SAAS,GAAGF,SAAS,CAACG,MAAM,IAAIC,SAAS,GAAG,IAAI,GAAGJ,SAAS,CAACG,MAAM,KAAK,GAAG;MAChF,IAAIE,iBAAiB,GAAG,uEAAyE;QAC7FC,aAAa,EAAE,GAAG;QAClBC,mBAAmB,EAAE,KAAK;QAC1BC,mBAAmB,EAAE,KAAK;QAC1BC,cAAc,EAAE,IAAI;QACpBC,eAAe,EAAE,IAAI;QACrBC,uBAAuB,EAAE,IAAI;QAC7BC,eAAe,EAAE,IAAI;QACrBC,eAAe,EAAE,IAAI;QACrBC,cAAc,EAAE;MACpB,CAAE;MACF,IAAI,CAACC,aAAa,GAAGf,SAAS,CAACgB,OAAO,IAAIhB,SAAS,CAACgB,OAAO,CAACC,UAAU,CAACZ,iBAAiB,CAAC;MACzF,IAAI,CAACa,aAAa,GAAGlB,SAAS,CAACmB,OAAO,IAAInB,SAAS,CAACmB,OAAO,CAACF,UAAU,CAACZ,iBAAiB,CAAC;MACzF,IAAI,CAAC,IAAI,CAAC3B,gBAAgB,IAAIsB,SAAS,CAACG,MAAM,KAAK,GAAG,EAAE;QACpD,IAAI,CAACa,OAAO,GAAGhB,SAAS,CAACgB,OAAO,IAAI,IAAI,CAACI,WAAW,CAACpB,SAAS,CAACpI,QAAQ,EAAEoI,SAAS,CAACqB,MAAM,CAAC;QAC1F,IAAI,CAAC1C,SAAS,IAAI,IAAI,CAACA,SAAS,CAAC2C,WAAW,CAAC,IAAI,CAACN,OAAO,CAACrC,SAAS,CAAC;QACpE,IAAI,CAACqC,OAAO,CAACO,UAAU,CAAClB,iBAAiB,CAAC;MAC9C;MACA,IAAI,CAAC,IAAI,CAAC3B,gBAAgB,IAAIsB,SAAS,CAACG,MAAM,KAAK,GAAG,EAAE;QACpD,IAAI,CAACgB,OAAO,GAAGnB,SAAS,CAACmB,OAAO,IAAI,IAAI,CAACC,WAAW,CAACpB,SAAS,CAACnI,QAAQ,EAAEmI,SAAS,CAACwB,MAAM,CAAC;QAC1F,IAAI,CAAC7C,SAAS,IAAI,IAAI,CAACA,SAAS,CAAC2C,WAAW,CAAC,IAAI,CAACH,OAAO,CAACxC,SAAS,CAAC;QACpE,IAAI,CAACwC,OAAO,CAACI,UAAU,CAAClB,iBAAiB,CAAC;MAC9C;MACA,IAAI,IAAI,CAAC3B,gBAAgB,EAAE;QACvB,IAAI,CAAC+C,YAAY,GAAG,IAAI,CAACvB,SAAS,GAAG,IAAI,CAACc,OAAO,GAAG,IAAI,CAACG,OAAO;QAChE,IAAI,CAACO,YAAY,GAAG,IAAI,CAACxB,SAAS,GAAG,IAAI,CAACrI,QAAQ,GAAG,IAAI,CAACD,QAAQ;QAClE,IAAI+J,YAAY,GAAG,IAAI,CAACF,YAAY,CAACR,UAAU,CAAC,CAAC;QACjDU,YAAY,CAACC,QAAQ,GAAG,IAAI;QAC5B,OAAOD,YAAY,CAACE,IAAI;QACxB,IAAI,CAACC,WAAW,GAAG,IAAI/D,MAAM,CAAC,IAAIC,QAAQ,CAAC,IAAI,CAAC,EAAEoC,SAAS,EAAEuB,YAAY,CAAC;QAC1E,IAAI,IAAI,CAACzB,SAAS,EAAE;UAChB,IAAI,CAACiB,OAAO,GAAG,IAAI,CAACW,WAAW;QACnC,CAAC,MACI;UACD,IAAI,CAACd,OAAO,GAAG,IAAI,CAACc,WAAW;QACnC;MACJ;MACA,IAAI,CAACC,cAAc,CAAC;QAChBnK,QAAQ,EAAEoI,SAAS,CAACpI,QAAQ,KAAKoI,SAAS,CAACgB,OAAO,GAAGhB,SAAS,CAACgB,OAAO,CAACgB,OAAO,GAAG,IAAI7D,WAAW,CAAC6B,SAAS,CAACqB,MAAM,IAAI,EAAE,CAAC,CAAC;QACzHxJ,QAAQ,EAAEmI,SAAS,CAACnI,QAAQ,KAAKmI,SAAS,CAACmB,OAAO,GAAGnB,SAAS,CAACmB,OAAO,CAACa,OAAO,GAAG,IAAI7D,WAAW,CAAC6B,SAAS,CAACwB,MAAM,IAAI,EAAE,CAAC,CAAC;QACzH3F,MAAM,EAAE;MACZ,CAAC,CAAC;MACF,IAAI,CAACoG,eAAe,CAAC,CAAC;IAC1B,CAAC;IACDxD,YAAY,CAAClJ,SAAS,CAAC2M,mBAAmB,GAAG,YAAY;MACrD,IAAI,CAAC,IAAI,CAACC,gBAAgB,EACtB,IAAI,CAACA,gBAAgB,GAAG,IAAI5G,0BAA0B,CAAC,IAAI,CAACyF,OAAO,EAAE,CAAC,CAAC,CAAC;MAC5E,IAAI,CAAC,IAAI,CAACoB,gBAAgB,EACtB,IAAI,CAACA,gBAAgB,GAAG,IAAI7G,0BAA0B,CAAC,IAAI,CAAC4F,OAAO,EAAE,CAAC,CAAC;IAC/E,CAAC;IACD1C,YAAY,CAAClJ,SAAS,CAAC6L,WAAW,GAAG,UAAUY,OAAO,EAAExL,KAAK,EAAE;MAC3D,IAAIgF,MAAM,GAAG,IAAIuC,MAAM,CAAC,IAAIC,QAAQ,CAAC,CAAC,EAAEgE,OAAO,CAAC;MAChDxG,MAAM,CAACwG,OAAO,CAACK,cAAc,CAAC,IAAInE,WAAW,CAAC,CAAC,CAAC;MAChD,IAAI1H,KAAK,IAAI4J,SAAS,EAAE;QACpB5E,MAAM,CAAC8G,QAAQ,CAAC9L,KAAK,EAAE,CAAC,CAAC,CAAC;MAC9B;MACA,OAAOgF,MAAM;IACjB,CAAC;IACDiD,YAAY,CAAClJ,SAAS,CAACgN,aAAa,GAAG,YAAY;MAC/C,IAAI1G,MAAM,GAAG,IAAI,CAACA,MAAM;MACxB,IAAI2G,WAAW,GAAG,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC;MACjC,IAAIC,IAAI,GAAG;QACPC,GAAG,EAAE,IAAI/E,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;QAC1BgF,GAAG,EAAE,IAAIhF,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;MAC7B,CAAC;MACD,IAAIiF,YAAY,GAAG,KAAK;MACxB,KAAK,IAAIxM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwF,MAAM,CAACvF,MAAM,GAAG,CAAC,EAAED,CAAC,EAAE,EAAE;QACxC,IAAIyM,OAAO,GAAGjH,MAAM,CAACxF,CAAC,CAAC,IAAI;UACvBsM,GAAG,EAAE,IAAI/E,KAAK,CAAC,IAAI,CAAChG,QAAQ,CAACmL,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACnL,QAAQ,CAACmL,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC;UAC1EH,GAAG,EAAE,IAAIhF,KAAK,CAAC,IAAI,CAAC/F,QAAQ,CAACkL,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAClL,QAAQ,CAACkL,SAAS,CAAC,CAAC,EAAE,CAAC;QAC7E,CAAC;QACD,IAAIC,CAAC,GAAGF,OAAO,CAACF,GAAG,CAAC5F,KAAK,CAACzE,GAAG,GAAGmK,IAAI,CAACE,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,GAAG,CAAC;QACpD,IAAIyK,CAAC,GAAG,CAAC,EAAE;UACP,IAAI/M,CAAC,GAAGyM,IAAI,CAACC,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,GAAG,CAAC;UAC5B,IAAI0K,KAAK,GAAG,IAAI,CAACrL,QAAQ,CAACsL,OAAO,CAACV,WAAW,EAAE,IAAI5E,KAAK,CAAC3H,CAAC,EAAE,CAAC,EAAEA,CAAC,GAAG+M,CAAC,EAAEG,MAAM,CAACC,SAAS,CAAC,CAAC;UACxFnN,CAAC,GAAGyM,IAAI,CAACE,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,GAAG,CAAC;UACxB,IAAI8K,KAAK,GAAG,IAAI,CAACxL,QAAQ,CAACqL,OAAO,CAACV,WAAW,EAAE,IAAI5E,KAAK,CAAC3H,CAAC,EAAE,CAAC,EAAEA,CAAC,GAAG+M,CAAC,EAAEG,MAAM,CAACC,SAAS,CAAC,CAAC;UACxF,IAAIH,KAAK,IAAII,KAAK,EACdR,YAAY,GAAG,IAAI;UACvB,IAAIQ,KAAK,IAAIJ,KAAK,EAAE;YAChBA,KAAK,CAAC,OAAO,CAAC,GAAGI,KAAK;YACtBA,KAAK,CAAC,OAAO,CAAC,GAAGJ,KAAK;UAC1B;QACJ;QACAP,IAAI,GAAGI,OAAO;MAClB;MACA,OAAOD,YAAY;IACvB,CAAC;IACDpE,YAAY,CAAClJ,SAAS,CAAC+N,eAAe,GAAG,YAAY;MACjD,IAAIC,KAAK,GAAG,IAAI,CAAC3L,QAAQ,CAAC4L,WAAW,CAAC,CAAC;MACvC,KAAK,IAAInN,CAAC,GAAGkN,KAAK,CAACjN,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;QACxC,IAAIoN,IAAI,GAAGF,KAAK,CAAClN,CAAC,CAAC;QACnB,IAAIoN,IAAI,CAACjB,WAAW,CAAClM,MAAM,IAAI,GAAG,EAAE;UAChC,IAAI,CAACsB,QAAQ,CAAC8L,UAAU,CAACD,IAAI,CAAC;QAClC;MACJ;IACJ,CAAC;IACDhF,YAAY,CAAClJ,SAAS,CAACoO,mBAAmB,GAAG,YAAY;MACrD,IAAI,CAAC,IAAI,CAACpB,aAAa,CAAC,CAAC,EAAE;QACvB,IAAI,CAACe,eAAe,CAAC,CAAC;MAC1B;IACJ,CAAC;IACD7E,YAAY,CAAClJ,SAAS,CAACwM,cAAc,GAAG,UAAUC,OAAO,EAAE;MACvD,IAAI,IAAI,CAAC7C,WAAW,EAAE;QAClB,IAAI,CAACyE,4BAA4B,CAAC,CAAC;QACnC,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAChC;MACA,IAAI,CAAC1E,WAAW,GAAG6C,OAAO;MAC1B,IAAI,CAACpK,QAAQ,GAAG,IAAI,CAACC,QAAQ,GAAG,IAAI;MACpC,IAAI,IAAI,CAACsH,WAAW,EAAE;QAClB,IAAI,CAACtD,MAAM,GAAG,IAAI,CAACsD,WAAW,CAACtD,MAAM,IAAI,EAAE;QAC3C,IAAI,CAACmF,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC8C,UAAU,CAAC9B,OAAO,CAACpK,QAAQ,CAAC;QACzD,IAAI,CAACuJ,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC2C,UAAU,CAAC9B,OAAO,CAACnK,QAAQ,CAAC;QACzD,IAAI,CAACD,QAAQ,GAAG,IAAI,CAACuH,WAAW,CAACvH,QAAQ;QACzC,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACsH,WAAW,CAACtH,QAAQ;QACzC,IAAI,CAACkM,4BAA4B,CAAC,CAAC;QACnC,IAAI,CAACC,oBAAoB,CAAC,CAAC;MAC/B;MACA,IAAI,CAACtC,YAAY,GAAG,IAAI,CAACxB,SAAS,GAAG,IAAI,CAACrI,QAAQ,GAAG,IAAI,CAACD,QAAQ;IACtE,CAAC;IACD6G,YAAY,CAAClJ,SAAS,CAACwO,4BAA4B,GAAG,YAAY,CAClE,CAAC;IACDtF,YAAY,CAAClJ,SAAS,CAACqO,4BAA4B,GAAG,YAAY,CAClE,CAAC;IACDnF,YAAY,CAAClJ,SAAS,CAAC0O,cAAc,GAAG,YAAY;MAChD,OAAO,IAAI,CAAC9E,WAAW;IAC3B,CAAC;IACDV,YAAY,CAAClJ,SAAS,CAAC2O,QAAQ,GAAG,UAAUhM,KAAK,EAAE;MAC/C,IAAI,CAAC8I,OAAO,IAAI,IAAI,CAACA,OAAO,CAACkD,QAAQ,CAAChM,KAAK,CAAC;MAC5C,IAAI,CAACiJ,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC+C,QAAQ,CAAChM,KAAK,CAAC;IAChD,CAAC;IACDuG,YAAY,CAAClJ,SAAS,CAAC4O,QAAQ,GAAG,YAAY;MAC1C,OAAO,CAAC,IAAI,CAACnD,OAAO,IAAI,IAAI,CAACG,OAAO,EAAEgD,QAAQ,CAAC,CAAC;IACpD,CAAC;IACD1F,YAAY,CAAClJ,SAAS,CAACqJ,aAAa,GAAG,UAAUvC,CAAC,EAAE;MAChD,IAAInE,KAAK,GAAGmE,CAAC,IAAIA,CAAC,CAACnE,KAAK,IAAI,IAAI,CAACiM,QAAQ,CAAC,CAAC;MAC3C,IAAI,IAAI,CAACnD,OAAO,IAAI,IAAI,CAACA,OAAO,CAACmD,QAAQ,CAAC,CAAC,KAAKjM,KAAK,EAAE;QACnD,IAAI,CAAC8I,OAAO,CAACkD,QAAQ,CAAChM,KAAK,CAAC;MAChC;MACA,IAAI,IAAI,CAACiJ,OAAO,IAAI,IAAI,CAACA,OAAO,CAACgD,QAAQ,CAAC,CAAC,KAAKjM,KAAK,EAAE;QACnD,IAAI,CAACiJ,OAAO,CAAC+C,QAAQ,CAAChM,KAAK,CAAC;MAChC;IACJ,CAAC;IACDuG,YAAY,CAAClJ,SAAS,CAAC6O,MAAM,GAAG,UAAUC,KAAK,EAAE;MAC7C,IAAI,CAACrD,OAAO,IAAI,IAAI,CAACA,OAAO,CAACoD,MAAM,CAACC,KAAK,CAAC;MAC1C,IAAI,CAAClD,OAAO,IAAI,IAAI,CAACA,OAAO,CAACiD,MAAM,CAACC,KAAK,CAAC;IAC9C,CAAC;IACD5F,YAAY,CAAClJ,SAAS,CAAC+O,eAAe,GAAG,YAAY;MACjD,IAAItN,KAAK,GAAG,IAAI;MAChB,IAAI,IAAI,CAACuN,aAAa,EAClB;MACJ,IAAI,CAACA,aAAa,GAAGC,UAAU,CAAC,YAAY;QACxCxN,KAAK,CAACuN,aAAa,GAAG,IAAI;QAC1BvN,KAAK,CAAC6H,OAAO,CAAC,CAAC;MACnB,CAAC,CAAC;IACN,CAAC;IACDJ,YAAY,CAAClJ,SAAS,CAACsJ,OAAO,GAAG,YAAY;MACzC,IAAI7H,KAAK,GAAG,IAAI;MAChB,IAAI,IAAI,CAACuN,aAAa,EAClBE,YAAY,CAAC,IAAI,CAACF,aAAa,CAAC;MACpC,IAAIjG,IAAI,GAAG,IAAI,CAAC1G,QAAQ,CAAC8M,GAAG,CAACC,WAAW,CAAC,CAAC;MAC1C,IAAIpG,IAAI,GAAG,IAAI,CAAC1G,QAAQ,CAAC6M,GAAG,CAACC,WAAW,CAAC,CAAC;MAC1C,IAAI,CAACC,eAAe,GAAG,IAAI;MAC3B,IAAI,CAACC,eAAe,GAAG,IAAI;MAC3B,IAAIhJ,MAAM,GAAG,IAAI,CAACiJ,UAAU,CAACxG,IAAI,EAAEC,IAAI,CAAC;MACxC,IAAI,CAACY,WAAW,CAACtD,MAAM,GAAG,IAAI,CAACA,MAAM,GAAGA,MAAM;MAC9C,IAAI,CAACsG,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAACjF,cAAc,CAACrB,MAAM,CAAC;MACrE,IAAI,CAACuG,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAAClF,cAAc,CAACrB,MAAM,CAAC;MACrE,IAAI,IAAI,CAACA,MAAM,IAAI,IAAI,CAACA,MAAM,CAACvF,MAAM,GAAG,IAAI,CAACkJ,SAAS,EAAE;QACpD;MACJ;MACA,IAAI,CAACuF,KAAK,CAAC,CAAC;MACZ,IAAI,CAAC/D,OAAO,IAAI,IAAI,CAACA,OAAO,CAAClK,QAAQ,CAACkO,iBAAiB,CAAC,CAAC;MACzD,IAAI,CAAC7D,OAAO,IAAI,IAAI,CAACA,OAAO,CAACrK,QAAQ,CAACkO,iBAAiB,CAAC,CAAC;MACzDR,UAAU,CAAC,YAAY;QACnBxN,KAAK,CAACiO,yBAAyB,CAAC,CAAC;MACrC,CAAC,EAAE,CAAC,CAAC;MACL,IAAI,IAAI,CAACtF,qBAAqB,EAAE;QAC5B,IAAI,CAAC4C,aAAa,CAAC,CAAC;MACxB;IACJ,CAAC;IACD9D,YAAY,CAAClJ,SAAS,CAAC0M,eAAe,GAAG,YAAY;MACjD,IAAIjL,KAAK,GAAG,IAAI;MAChB,IAAIkO,cAAc,GAAG,SAAAA,CAAUpO,QAAQ,EAAE;QACrC0N,UAAU,CAAC,YAAY;UACnBxN,KAAK,CAACmO,uBAAuB,CAACrO,QAAQ,CAAC;UACvCE,KAAK,CAACiO,yBAAyB,CAAC,CAAC;QACrC,CAAC,EAAE,CAAC,CAAC;MACT,CAAC;MACD,IAAI,IAAI,CAACvG,gBAAgB,EAAE;QACvBwG,cAAc,CAAC,IAAI,CAACzD,YAAY,CAAC3K,QAAQ,CAAC;MAC9C,CAAC,MACI;QACDoO,cAAc,CAAC,IAAI,CAAClE,OAAO,CAAClK,QAAQ,CAAC;QACrCoO,cAAc,CAAC,IAAI,CAAC/D,OAAO,CAACrK,QAAQ,CAAC;MACzC;IACJ,CAAC;IACD2H,YAAY,CAAClJ,SAAS,CAAC4P,uBAAuB,GAAG,UAAUrO,QAAQ,EAAE;MACjE,IAAIA,QAAQ,CAACsO,gBAAgB,EAAE;QAC3BtO,QAAQ,CAACsO,gBAAgB,CAACC,OAAO,CAAC,CAAC;MACvC;MACAvO,QAAQ,CAACsO,gBAAgB,GAAG,IAAIzO,mBAAmB,CAACG,QAAQ,CAACwO,UAAU,EAAExO,QAAQ,EAAE,IAAI,CAAC4H,gBAAgB,CAAC;MACzG5H,QAAQ,CAACsO,gBAAgB,CAACzN,WAAW,CAAC,IAAI,CAACC,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC;MACnEf,QAAQ,CAACwO,UAAU,CAACC,UAAU,CAAC,IAAI,CAAC;MACpCzO,QAAQ,CAACwO,UAAU,CAACnJ,OAAO,CAACqJ,KAAK,CAACC,MAAM,GAAG3O,QAAQ,CAAC4O,UAAU,CAACC,SAAS,CAAC,CAAC,GAAG,IAAI;IACrF,CAAC;IACDlH,YAAY,CAAClJ,SAAS,CAACqQ,gBAAgB,GAAG,UAAU9O,QAAQ,EAAE;MAC1D,IAAIA,QAAQ,CAACsO,gBAAgB,EAAE;QAC3BtO,QAAQ,CAACsO,gBAAgB,CAACC,OAAO,CAAC,CAAC;MACvC;MACAvO,QAAQ,CAACsO,gBAAgB,GAAG,IAAI1O,SAAS,CAACI,QAAQ,CAACwO,UAAU,EAAExO,QAAQ,CAAC;IAC5E,CAAC;IACD2H,YAAY,CAAClJ,SAAS,CAAC0P,yBAAyB,GAAG,YAAY;MAC3D,IAAIjO,KAAK,GAAG,IAAI;MAChB,IAAI,IAAI,CAAC0H,gBAAgB,EAAE;QACvB,IAAI,CAAC,IAAI,CAAC+C,YAAY,EAAE;UACpB;QACJ;QACA,IAAI,CAACA,YAAY,CAAC3K,QAAQ,CAACsO,gBAAgB,CAAChO,MAAM,GAAG,EAAE;MAC3D,CAAC,MACI;QACD,IAAI,CAAC,IAAI,CAAC4J,OAAO,IAAI,CAAC,IAAI,CAACG,OAAO,EAAE;UAChC;QACJ;QACA,IAAI,CAACH,OAAO,CAAClK,QAAQ,CAACsO,gBAAgB,CAAChO,MAAM,GAAG,EAAE;QAClD,IAAI,CAAC+J,OAAO,CAACrK,QAAQ,CAACsO,gBAAgB,CAAChO,MAAM,GAAG,EAAE;MACtD;MACA,IAAIyO,gBAAgB,GAAG,SAAAA,CAAUrK,MAAM,EAAEsK,MAAM,EAAE;QAC7C,IAAI,CAACtK,MAAM,EAAE;UACT;QACJ;QACA,IAAI,OAAOA,MAAM,CAAC1E,QAAQ,CAACsO,gBAAgB,CAAC9N,OAAO,KAAK,UAAU,EAAE;UAChE;QACJ;QACA,IAAIwO,MAAM,CAACnD,GAAG,CAAC3F,KAAK,CAACzE,GAAG,IAAIuN,MAAM,CAACnD,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,EAAE;UAC5CiD,MAAM,CAAC1E,QAAQ,CAACsO,gBAAgB,CAAC9N,OAAO,CAACwO,MAAM,CAACnD,GAAG,CAAC3F,KAAK,CAACzE,GAAG,EAAEuN,MAAM,CAACnD,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,GAAG,CAAC,EAAE,QAAQ,CAAC;QACpG;QACA,IAAIuN,MAAM,CAAClD,GAAG,CAAC5F,KAAK,CAACzE,GAAG,IAAIuN,MAAM,CAAClD,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,EAAE;UAC5CiD,MAAM,CAAC1E,QAAQ,CAACsO,gBAAgB,CAAC9N,OAAO,CAACwO,MAAM,CAAClD,GAAG,CAAC5F,KAAK,CAACzE,GAAG,EAAEuN,MAAM,CAAClD,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,GAAG,CAAC,EAAE,QAAQ,CAAC;QACpG;MACJ,CAAC;MACD,IAAI,IAAI,CAACmG,gBAAgB,EAAE;QACvB,IAAI,CAAC7C,MAAM,IAAI,IAAI,CAACA,MAAM,CAACxC,OAAO,CAAC,UAAU0D,UAAU,EAAE;UACrD8I,gBAAgB,CAAC7O,KAAK,CAACyK,YAAY,EAAE1E,UAAU,CAAC;QACpD,CAAC,CAAC;QACF,IAAI,CAAC0E,YAAY,CAAC3K,QAAQ,CAACsO,gBAAgB,CAACtN,iBAAiB,CAAC,IAAI,CAAC2J,YAAY,CAAC3K,QAAQ,CAACiP,WAAW,CAAC;MACzG,CAAC,MACI;QACD,IAAI,CAAClK,MAAM,IAAI,IAAI,CAACA,MAAM,CAACxC,OAAO,CAAC,UAAU0D,UAAU,EAAE;UACrD8I,gBAAgB,CAAC7O,KAAK,CAACgK,OAAO,EAAEjE,UAAU,CAAC;UAC3C8I,gBAAgB,CAAC7O,KAAK,CAACmK,OAAO,EAAEpE,UAAU,CAAC;QAC/C,CAAC,CAAC;QACF,IAAI,CAACiE,OAAO,CAAClK,QAAQ,CAACsO,gBAAgB,CAACtN,iBAAiB,CAAC,IAAI,CAACkJ,OAAO,CAAClK,QAAQ,CAACiP,WAAW,CAAC;QAC3F,IAAI,CAAC5E,OAAO,CAACrK,QAAQ,CAACsO,gBAAgB,CAACtN,iBAAiB,CAAC,IAAI,CAACqJ,OAAO,CAACrK,QAAQ,CAACiP,WAAW,CAAC;MAC/F;IACJ,CAAC;IACDtH,YAAY,CAAClJ,SAAS,CAACuP,UAAU,GAAG,UAAUxG,IAAI,EAAEC,IAAI,EAAE;MACtD,OAAO,IAAI,CAACc,YAAY,CAAChB,OAAO,CAACC,IAAI,EAAEC,IAAI,EAAE;QACzCyH,oBAAoB,EAAE,IAAI,CAACzG,qBAAqB;QAChD0G,oBAAoB,EAAE,IAAI,CAACxG;MAC/B,CAAC,CAAC;IACN,CAAC;IACDhB,YAAY,CAAClJ,SAAS,CAAC0K,WAAW,GAAG,UAAUiG,QAAQ,EAAE;MACrD,IAAI,CAAC7G,YAAY,GAAG6G,QAAQ;IAChC,CAAC;IACDzH,YAAY,CAAClJ,SAAS,CAAC4Q,UAAU,GAAG,UAAUnE,OAAO,EAAEoE,CAAC,EAAE;MACtD,IAAIC,UAAU,GAAGrE,OAAO,CAACsE,WAAW,CAACF,CAAC,CAAC7N,GAAG,CAAC;MAC3C,IAAI8N,UAAU,EAAE;QACZD,CAAC,CAACG,SAAS,IAAIF,UAAU,CAACE,SAAS,GAAGH,CAAC,CAACG,SAAS,GAAGF,UAAU,CAACE,SAAS,GAAGH,CAAC,CAACG,SAAS;QACtFH,CAAC,CAACI,QAAQ,IAAIH,UAAU,CAACG,QAAQ;MACrC;MACAxE,OAAO,CAACsE,WAAW,CAACF,CAAC,CAAC7N,GAAG,CAAC,GAAG6N,CAAC;MAC9BpE,OAAO,CAACyE,aAAa,CAACH,WAAW,CAACF,CAAC,CAAC7N,GAAG,CAAC,GAAG6N,CAAC;MAC5CpE,OAAO,CAAC0E,cAAc,CAACN,CAAC,CAAC7N,GAAG,CAAC;MAC7B,IAAIkL,IAAI,GAAGzB,OAAO,CAAC2E,SAAS,CAACP,CAAC,CAAC7N,GAAG,EAAE,CAAC,CAAC;MACtC,IAAIkL,IAAI,EAAE;QACNzB,OAAO,CAACyE,aAAa,CAACG,YAAY,CAAC;UAC/BC,IAAI,EAAEpD,IAAI;UACVqD,MAAM,EAAE;QACZ,CAAC,EAAE9E,OAAO,CAAC;MACf;IACJ,CAAC;IACDvD,YAAY,CAAClJ,SAAS,CAACwR,YAAY,GAAG,UAAUvL,MAAM,EAAE;MACpD,IAAIwG,OAAO,GAAGxG,MAAM,CAACwG,OAAO;MAC5B,IAAI,CAACA,OAAO,CAACyE,aAAa,EAAE;QACxBzE,OAAO,CAACyE,aAAa,GAAG,IAAI5I,WAAW,CAACmE,OAAO,CAAC;QAChDA,OAAO,CAACyE,aAAa,CAACO,MAAM,CAACxL,MAAM,CAAC;MACxC;MACAA,MAAM,CAACwG,OAAO,CAACsE,WAAW,GAAG,EAAE;MAC/B9K,MAAM,CAACwG,OAAO,CAACyE,aAAa,CAACH,WAAW,GAAG,EAAE;MAC7C9K,MAAM,CAACwG,OAAO,CAAC0E,cAAc,CAAC,CAAC,CAAC;IACpC,CAAC;IACDjI,YAAY,CAAClJ,SAAS,CAAC0R,UAAU,GAAG,UAAUC,GAAG,EAAElF,OAAO,EAAE;MACxD,IAAIzJ,GAAG,GAAGyJ,OAAO,CAACmF,wBAAwB,CAACD,GAAG,CAAC,CAAC3O,GAAG;MACnD,IAAI6O,QAAQ,GAAGF,GAAG,CAAC3O,GAAG,GAAGyJ,OAAO,CAACe,SAAS,CAAC,CAAC,GAAG,CAAC;MAChD,IAAIqE,QAAQ,GAAG,CAAC,EAAE;QACd7O,GAAG,IAAI6O,QAAQ;MACnB;MACA,OAAO7O,GAAG;IACd,CAAC;IACDkG,YAAY,CAAClJ,SAAS,CAACwP,KAAK,GAAG,YAAY,CAAE,CAAC;IAC9CtG,YAAY,CAAClJ,SAAS,CAAC0J,iBAAiB,GAAG,UAAU5C,CAAC,EAAE2F,OAAO,EAAE,CAAE,CAAC;IACpEvD,YAAY,CAAClJ,SAAS,CAACyJ,QAAQ,GAAG,UAAU3C,CAAC,EAAEgL,SAAS,EAAE;MACtD,IAAI,CAACC,eAAe,CAACD,SAAS,CAAC;MAC/B,IAAI,CAACE,UAAU,CAACF,SAAS,CAAC;IAC9B,CAAC;IACD5I,YAAY,CAAClJ,SAAS,CAACgS,UAAU,GAAG,UAAUF,SAAS,EAAE;MACrD,IAAI,IAAI,CAACG,kBAAkB,EACvB;MACJ,IAAIC,KAAK,GAAGJ,SAAS,CAACrF,OAAO,KAAK,IAAI,CAACpK,QAAQ;MAC/C,IAAI8P,cAAc,GAAGL,SAAS,CAACM,QAAQ,CAAC,CAAC;MACzC,IAAIC,kBAAkB,GAAGH,KAAK,GAAG,IAAI,CAAC7C,eAAe,GAAG,IAAI,CAACC,eAAe;MAC5E,IAAI+C,kBAAkB,IAAIF,cAAc,CAACG,OAAO,CAACD,kBAAkB,CAAC,EAChE;MACJ,IAAIH,KAAK,EAAE;QACP,IAAI,CAAC7C,eAAe,GAAG8C,cAAc;MACzC,CAAC,MACI;QACD,IAAI,CAAC7C,eAAe,GAAG6C,cAAc;MACzC;MACA,IAAI,CAACF,kBAAkB,GAAG,IAAI;MAC9B,IAAIM,QAAQ,GAAG,IAAI,CAACC,cAAc,CAACL,cAAc,EAAED,KAAK,CAAC;MACzD,IAAI,IAAI,CAAC/H,eAAe,EAAE;QACtB,CAAC+H,KAAK,GAAG,IAAI,CAACtG,OAAO,GAAG,IAAI,CAACH,OAAO,EAAEgB,OAAO,CAACqF,SAAS,CAACW,iBAAiB,CAACF,QAAQ,CAAC;MACvF;MACA,IAAI,CAACN,kBAAkB,GAAG,KAAK;MAC/B,IAAIC,KAAK,EAAE;QACP,IAAI,CAAC7C,eAAe,GAAG8C,cAAc;QACrC,IAAI,CAAC7C,eAAe,GAAGiD,QAAQ;MACnC,CAAC,MACI;QACD,IAAI,CAAClD,eAAe,GAAGkD,QAAQ;QAC/B,IAAI,CAACjD,eAAe,GAAG6C,cAAc;MACzC;MACA,IAAI,CAACO,qBAAqB,CAAC,IAAI,CAACC,oBAAoB,EAAE,IAAI,CAACtQ,QAAQ,EAAE,IAAI,CAACgN,eAAe,CAAC;MAC1F,IAAI,CAACqD,qBAAqB,CAAC,IAAI,CAACE,oBAAoB,EAAE,IAAI,CAACtQ,QAAQ,EAAE,IAAI,CAACgN,eAAe,CAAC;IAC9F,CAAC;IACDpG,YAAY,CAAClJ,SAAS,CAAC0S,qBAAqB,GAAG,UAAUG,MAAM,EAAEpG,OAAO,EAAEqG,KAAK,EAAE;MAC7ED,MAAM,CAACE,QAAQ,CAACD,KAAK,CAAC;MACtBrG,OAAO,CAACuG,OAAO,CAAC,mBAAmB,CAAC;IACxC,CAAC;IACD9J,YAAY,CAAClJ,SAAS,CAACuJ,YAAY,GAAG,UAAU0J,EAAE,EAAExG,OAAO,EAAE;MACzD,IAAIyB,IAAI,GAAG+E,EAAE,CAAC3B,IAAI;MAClB,IAAI,IAAI,CAAC4B,YAAY,IAAI,CAAChF,IAAI,IAAI,CAAC+E,EAAE,CAAC1B,MAAM,EACxC;MACJ,IAAI,CAAC4B,eAAe,CAAC,CAAC;MACtB,IAAIC,MAAM,GAAG3G,OAAO,KAAK,IAAI,CAACpK,QAAQ;MACtC,IAAIgR,KAAK,GAAGD,MAAM,GAAG,IAAI,CAAC9Q,QAAQ,GAAG,IAAI,CAACD,QAAQ;MAClD,IAAI4Q,EAAE,CAAC1B,MAAM,KAAK,QAAQ,EAAE;QACxB,IAAIrD,IAAI,CAACmF,KAAK,EAAE;UACZnF,IAAI,CAACmF,KAAK,CAACA,KAAK,GAAG,IAAI;UACvBA,KAAK,CAAClF,UAAU,CAACD,IAAI,CAACmF,KAAK,CAAC;QAChC,CAAC,MACI,IAAInF,IAAI,CAAC4C,UAAU,EAAE;UACtBuC,KAAK,CAACnC,aAAa,CAACoC,aAAa,CAACpF,IAAI,CAAC4C,UAAU,CAAC;UAClD5C,IAAI,CAAC4C,UAAU,GAAG,IAAI;UACtB,IAAIuC,KAAK,CAAC,SAAS,CAAC,EAAE;YAClBA,KAAK,CAAC,SAAS,CAAC,CAAC9R,QAAQ,CAACkO,iBAAiB,CAAC,CAAC;UACjD;QACJ;MACJ;MACA,IAAIwD,EAAE,CAAC1B,MAAM,KAAK,KAAK,EAAE;QACrB,IAAIuB,KAAK,GAAG,IAAI,CAACN,cAAc,CAACtE,IAAI,CAAC4E,KAAK,EAAEM,MAAM,CAAC;QACnD,IAAIN,KAAK,CAACS,OAAO,CAAC,CAAC,EAAE;UACjB,IAAIvQ,GAAG,GAAG8P,KAAK,CAACrL,KAAK,CAACzE,GAAG,GAAG,CAAC;UAC7B,IAAIqQ,KAAK,CAACtC,WAAW,CAAC/N,GAAG,CAAC,EAAE;YACxBkL,IAAI,CAAC4C,UAAU,GAAGuC,KAAK,CAACtC,WAAW,CAAC/N,GAAG,CAAC;YACxCqQ,KAAK,CAACnC,aAAa,CAACsC,gBAAgB,CAACtF,IAAI,CAAC4C,UAAU,CAAC;YACrD,IAAIuC,KAAK,CAAC,SAAS,CAAC,EAAE;cAClBA,KAAK,CAAC,SAAS,CAAC,CAAC9R,QAAQ,CAACkO,iBAAiB,CAAC,CAAC;YACjD;UACJ;QACJ,CAAC,MACI;UACD,IAAI,CAACyD,YAAY,GAAG,IAAI;UACxBhF,IAAI,CAACmF,KAAK,GAAGA,KAAK,CAAC1F,OAAO,CAACO,IAAI,CAACjB,WAAW,EAAE6F,KAAK,CAAC;UACnD,IAAI5E,IAAI,CAACmF,KAAK,EAAE;YACZnF,IAAI,CAACmF,KAAK,CAACA,KAAK,GAAGnF,IAAI;UAC3B;UACA,IAAI,CAACgF,YAAY,GAAG,KAAK;QAC7B;MACJ;IACJ,CAAC;IACDhK,YAAY,CAAClJ,SAAS,CAACmT,eAAe,GAAG,YAAY;MACjD,IAAI,CAAC,IAAI,CAACxJ,cAAc,EAAE;QACtB,IAAI,CAACA,cAAc,GAAG,IAAI;QAC1B,IAAI,CAAC8B,OAAO,CAAClK,QAAQ,CAACsF,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC2C,OAAO,CAAC;QACtD,IAAI,CAACoC,OAAO,CAACrK,QAAQ,CAACsF,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC2C,OAAO,CAAC;MAC1D;IACJ,CAAC;IACDN,YAAY,CAAClJ,SAAS,CAACwJ,OAAO,GAAG,YAAY;MACzC,IAAI,CAACG,cAAc,GAAG,IAAI;MAC1B,IAAI,CAAC8B,OAAO,CAAClK,QAAQ,CAACwG,GAAG,CAAC,cAAc,EAAE,IAAI,CAACyB,OAAO,CAAC;MACvD,IAAI,CAACoC,OAAO,CAACrK,QAAQ,CAACwG,GAAG,CAAC,cAAc,EAAE,IAAI,CAACyB,OAAO,CAAC;MACvD,IAAI,CAACgG,KAAK,CAAC,CAAC;MACZ,IAAI,CAAC7F,cAAc,GAAG,KAAK;IAC/B,CAAC;IACDT,YAAY,CAAClJ,SAAS,CAACyT,MAAM,GAAG,YAAY;MACxC,IAAI,CAAC,IAAI,CAAChI,OAAO,IAAI,CAAC,IAAI,CAACG,OAAO,EAC9B;MACJ,IAAI,IAAI,CAACJ,aAAa,EAClB,IAAI,CAACC,OAAO,CAACO,UAAU,CAAC,IAAI,CAACR,aAAa,CAAC;MAC/C,IAAI,IAAI,CAACG,aAAa,EAClB,IAAI,CAACC,OAAO,CAACI,UAAU,CAAC,IAAI,CAACL,aAAa,CAAC;MAC/C,IAAI,CAACF,OAAO,CAAClK,QAAQ,CAACwG,GAAG,CAAC,cAAc,EAAE,IAAI,CAACyB,OAAO,CAAC;MACvD,IAAI,CAACoC,OAAO,CAACrK,QAAQ,CAACwG,GAAG,CAAC,cAAc,EAAE,IAAI,CAACyB,OAAO,CAAC;MACvD,IAAI,CAACkK,oBAAoB,CAAC,CAAC;MAC3B,IAAI,CAACC,kBAAkB,CAAC,IAAI,CAACtR,QAAQ,CAAC;MACtC,IAAI,CAACsR,kBAAkB,CAAC,IAAI,CAACrR,QAAQ,CAAC;MACtC,IAAI,CAACsK,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAAC/E,OAAO,CAAC,CAAC;MACxD,IAAI,CAACgF,gBAAgB,IAAI,IAAI,CAACA,gBAAgB,CAAChF,OAAO,CAAC,CAAC;MACxD,IAAI,CAACxF,QAAQ,CAACyP,SAAS,CAAC8B,cAAc,CAAC,CAAC;MACxC,IAAI,CAACtR,QAAQ,CAACwP,SAAS,CAAC8B,cAAc,CAAC,CAAC;MACxC,IAAI,IAAI,CAACpI,aAAa,IAAI,IAAI,CAACA,aAAa,CAACL,eAAe,EAAE;QAC1D,IAAI,CAACkF,gBAAgB,CAAC,IAAI,CAAC5E,OAAO,CAAClK,QAAQ,CAAC;MAChD;MACA,IAAI,IAAI,CAACoK,aAAa,IAAI,IAAI,CAACA,aAAa,CAACR,eAAe,EAAE;QAC1D,IAAI,CAACkF,gBAAgB,CAAC,IAAI,CAACzE,OAAO,CAACrK,QAAQ,CAAC;MAChD;IACJ,CAAC;IACD2H,YAAY,CAAClJ,SAAS,CAAC2T,kBAAkB,GAAG,UAAUlH,OAAO,EAAE;MAC3DA,OAAO,CAACsE,WAAW,GAAG,EAAE;MACxBtE,OAAO,CAACyE,aAAa,CAACH,WAAW,GAAG,EAAE;MACtCtE,OAAO,CAACuG,OAAO,CAAC,YAAY,EAAE;QAAE1B,IAAI,EAAE;UAAE7J,KAAK,EAAE;YAAEzE,GAAG,EAAE;UAAE;QAAE;MAAE,CAAC,CAAC;IAClE,CAAC;IACDkG,YAAY,CAAClJ,SAAS,CAAC0T,oBAAoB,GAAG,YAAY,CAC1D,CAAC;IACDxK,YAAY,CAAClJ,SAAS,CAAC8P,OAAO,GAAG,YAAY;MACzC,IAAI,CAAC2D,MAAM,CAAC,CAAC;MACb,IAAI,CAAChI,OAAO,IAAI,IAAI,CAACA,OAAO,CAACqE,OAAO,CAAC,CAAC;MACtC,IAAI,CAAClE,OAAO,IAAI,IAAI,CAACA,OAAO,CAACkE,OAAO,CAAC,CAAC;MACtC,IAAI,CAACrE,OAAO,GAAG,IAAI,CAACG,OAAO,GAAG,IAAI;IACtC,CAAC;IACD1C,YAAY,CAAClJ,SAAS,CAAC6T,QAAQ,GAAG,UAAUvM,GAAG,EAAE;MAC7C,IAAIpI,GAAG,GAAG,IAAI,CAACgN,YAAY,IAAI,IAAI,CAACT,OAAO;MAC3C,IAAI,IAAI,CAACtC,gBAAgB,EAAE;QACvBjK,GAAG,GAAG,IAAI,CAACuM,OAAO;MACtB;MACA,IAAIqI,KAAK,GAAG5U,GAAG,IAAI,IAAI,CAACuM,OAAO;MAC/B,IAAIzI,GAAG,GAAG9D,GAAG,CAAC4S,SAAS,CAACiC,IAAI,CAAC/Q,GAAG;MAChC,IAAIlC,CAAC,GAAG,IAAI,CAACkT,cAAc,CAAC,IAAI,CAAC1N,MAAM,EAAEtD,GAAG,EAAE8Q,KAAK,CAAC;MACpD,IAAIG,KAAK,GAAG,IAAI,CAAC3N,MAAM,CAACxF,CAAC,GAAGwG,GAAG,CAAC,IAAI,IAAI,CAAChB,MAAM,CAACxF,CAAC,CAAC;MAClD,IAAIoT,SAAS,GAAGhV,GAAG,CAACuN,OAAO,CAAC0H,YAAY,CAAC,CAAC;MAC1C,IAAIF,KAAK,EAAE;QACP,IAAInB,KAAK,GAAGmB,KAAK,CAACH,KAAK,GAAG,KAAK,GAAG,KAAK,CAAC;QACxC,IAAIM,IAAI,GAAG/P,IAAI,CAACgQ,GAAG,CAACvB,KAAK,CAACrL,KAAK,CAACzE,GAAG,EAAE8P,KAAK,CAACpL,GAAG,CAAC1E,GAAG,GAAG,CAAC,CAAC;QACvD9D,GAAG,CAAC4S,SAAS,CAACiB,QAAQ,CAAC,IAAI1K,KAAK,CAAC+L,IAAI,EAAE,CAAC,EAAEA,IAAI,EAAE,CAAC,CAAC,CAAC;MACvD;MACAlV,GAAG,CAACqC,QAAQ,CAAC+S,uBAAuB,CAACpV,GAAG,CAAC4S,SAAS,CAACiC,IAAI,EAAE7U,GAAG,CAAC4S,SAAS,CAACyC,MAAM,EAAE,GAAG,CAAC;MACnFrV,GAAG,CAACqC,QAAQ,CAACiT,gBAAgB,CAACN,SAAS,CAAC;IAC5C,CAAC;IACDhL,YAAY,CAAClJ,SAAS,CAACyU,iBAAiB,GAAG,YAAY;MACnD,OAAO,IAAI,CAAC5K,gBAAgB,IAAI,CAAC;IACrC,CAAC;IACDX,YAAY,CAAClJ,SAAS,CAAC0U,gBAAgB,GAAG,YAAY;MAClD,OAAO,IAAI,CAAC7K,gBAAgB,GAAG,IAAI,CAACvD,MAAM,CAACvF,MAAM,GAAG,CAAC;IACzD,CAAC;IACDmI,YAAY,CAAClJ,SAAS,CAACwS,cAAc,GAAG,UAAUM,KAAK,EAAE6B,UAAU,EAAE;MACjE,OAAOtM,KAAK,CAACuM,UAAU,CAAC,IAAI,CAACC,iBAAiB,CAAC/B,KAAK,CAACrL,KAAK,EAAEkN,UAAU,CAAC,EAAE,IAAI,CAACE,iBAAiB,CAAC/B,KAAK,CAACpL,GAAG,EAAEiN,UAAU,CAAC,CAAC;IAC3H,CAAC;IACDzL,YAAY,CAAClJ,SAAS,CAAC6U,iBAAiB,GAAG,UAAUlD,GAAG,EAAEgD,UAAU,EAAE;MAClE,IAAIG,UAAU,GAAG,IAAI,CAACd,cAAc,CAAC,IAAI,CAAC1N,MAAM,EAAEqL,GAAG,CAAC3O,GAAG,EAAE2R,UAAU,CAAC;MACtE,IAAIV,KAAK,GAAG,IAAI,CAAC3N,MAAM,CAACwO,UAAU,CAAC;MACnC,IAAIC,QAAQ,GAAG,IAAI,CAACzS,QAAQ,CAAC6M,GAAG,CAAC4F,QAAQ;MACzC,IAAIC,MAAM,GAAGD,QAAQ,CAACpD,GAAG,CAAC;MAC1B,IAAIxO,EAAE,GAAG6E,MAAM,CAAC2M,UAAU,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC;QAAErR,IAAI,GAAGH,EAAE,CAAC,CAAC,CAAC;QAAEI,EAAE,GAAGJ,EAAE,CAAC,CAAC,CAAC;MAC1F,IAAI8R,SAAS,GAAG,CAAC;MACjB,IAAIC,YAAY,GAAG,KAAK;MACxB,IAAIjB,KAAK,EAAE;QACP,IAAIA,KAAK,CAAC3Q,IAAI,CAAC,CAACoE,GAAG,CAAC1E,GAAG,IAAI2O,GAAG,CAAC3O,GAAG,EAAE;UAChCgS,MAAM,CAAChS,GAAG,IAAIiR,KAAK,CAAC3Q,IAAI,CAAC,CAACoE,GAAG,CAAC1E,GAAG,GAAGiR,KAAK,CAAC1Q,EAAE,CAAC,CAACmE,GAAG,CAAC1E,GAAG;QACzD,CAAC,MACI,IAAIiR,KAAK,CAACkB,WAAW,EAAE;UACxB,KAAK,IAAIrU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmT,KAAK,CAACkB,WAAW,CAACpU,MAAM,EAAED,CAAC,EAAE,EAAE;YAC/C,IAAIyP,MAAM,GAAG0D,KAAK,CAACkB,WAAW,CAACrU,CAAC,CAAC;YACjC,IAAIsU,SAAS,GAAG7E,MAAM,CAACjN,IAAI,CAAC;YAC5B,IAAI+R,OAAO,GAAG9E,MAAM,CAAChN,EAAE,CAAC;YACxB,IAAI6R,SAAS,CAAC1N,GAAG,CAAC1E,GAAG,GAAG2O,GAAG,CAAC3O,GAAG,EAC3B;YACJ,IAAIoS,SAAS,CAAC3N,KAAK,CAACzE,GAAG,GAAG2O,GAAG,CAAC3O,GAAG,EAC7B;YACJ,IAAIoS,SAAS,CAACE,WAAW,CAAC,CAAC,IAAIF,SAAS,CAACG,QAAQ,CAAC5D,GAAG,CAAC3O,GAAG,EAAE2O,GAAG,CAAC6D,MAAM,CAAC,EAAE;cACpER,MAAM,CAAChS,GAAG,GAAGqS,OAAO,CAAC5N,KAAK,CAACzE,GAAG,GAAG2O,GAAG,CAAC3O,GAAG,GAAGoS,SAAS,CAAC3N,KAAK,CAACzE,GAAG;cAC9D,IAAIyS,MAAM,GAAGJ,OAAO,CAAC3N,GAAG,CAAC1E,GAAG;cAC5B,IAAIqS,OAAO,CAAC3N,GAAG,CAAC8N,MAAM,KAAK,CAAC,EACxBC,MAAM,EAAE;cACZ,IAAIT,MAAM,CAAChS,GAAG,GAAGyS,MAAM,EAAE;gBACrBT,MAAM,CAAChS,GAAG,GAAGyS,MAAM;gBACnBT,MAAM,CAACQ,MAAM,GAAG,CAACb,UAAU,GAAG,IAAI,CAACrS,QAAQ,GAAG,IAAI,CAACD,QAAQ,EAAEqT,OAAO,CAACD,MAAM,CAAC,CAAC1U,MAAM;gBACnFmU,YAAY,GAAG,IAAI;cACvB;cACAF,MAAM,CAAChS,GAAG,GAAGqB,IAAI,CAACsR,GAAG,CAACX,MAAM,CAAChS,GAAG,EAAEyS,MAAM,CAAC;YAC7C,CAAC,MACI;cACDT,MAAM,CAAChS,GAAG,GAAGqS,OAAO,CAAC5N,KAAK,CAACzE,GAAG;cAC9B,IAAIoS,SAAS,CAAC3N,KAAK,CAAC+N,MAAM,GAAG7D,GAAG,CAAC6D,MAAM,EACnC;cACJN,YAAY,GAAG,IAAI;cACnB,IAAI,CAACE,SAAS,CAAC7B,OAAO,CAAC,CAAC,IAAI6B,SAAS,CAACG,QAAQ,CAAC5D,GAAG,CAAC3O,GAAG,EAAE2O,GAAG,CAAC6D,MAAM,CAAC,EAAE;gBACjER,MAAM,CAACQ,MAAM,GAAGH,OAAO,CAAC5N,KAAK,CAAC+N,MAAM;gBACpCP,SAAS,GAAGtD,GAAG,CAAC6D,MAAM,GAAGJ,SAAS,CAAC3N,KAAK,CAAC+N,MAAM;gBAC/CP,SAAS,GAAG5Q,IAAI,CAACsR,GAAG,CAACV,SAAS,EAAEI,OAAO,CAAC3N,GAAG,CAAC8N,MAAM,GAAGH,OAAO,CAAC5N,KAAK,CAAC+N,MAAM,CAAC;cAC9E,CAAC,MACI;gBACDR,MAAM,GAAGD,QAAQ,CAACM,OAAO,CAAC3N,GAAG,CAAC;gBAC9BuN,SAAS,GAAGtD,GAAG,CAAC6D,MAAM,GAAGJ,SAAS,CAAC1N,GAAG,CAAC8N,MAAM;cACjD;YACJ;UACJ;QACJ,CAAC,MACI,IAAIvB,KAAK,CAAC3Q,IAAI,CAAC,CAACmE,KAAK,CAACzE,GAAG,IAAI2O,GAAG,CAAC3O,GAAG,EAAE;UACvCgS,MAAM,CAAChS,GAAG,IAAIiR,KAAK,CAAC1Q,EAAE,CAAC,CAACkE,KAAK,CAACzE,GAAG,GAAGiR,KAAK,CAAC3Q,IAAI,CAAC,CAACmE,KAAK,CAACzE,GAAG;UACzD,IAAIgS,MAAM,CAAChS,GAAG,IAAIiR,KAAK,CAAC1Q,EAAE,CAAC,CAACmE,GAAG,CAAC1E,GAAG,EAAE;YACjCgS,MAAM,CAAChS,GAAG,GAAGiR,KAAK,CAAC1Q,EAAE,CAAC,CAACmE,GAAG,CAAC1E,GAAG,GAAG,CAAC;YAClCgS,MAAM,CAACQ,MAAM,GAAG,CAACb,UAAU,GAAG,IAAI,CAACrS,QAAQ,GAAG,IAAI,CAACD,QAAQ,EAAEqT,OAAO,CAACV,MAAM,CAAChS,GAAG,CAAC,CAACjC,MAAM;UAC3F;QACJ;MACJ;MACA,IAAI,CAACmU,YAAY,EAAE;QAAE;QACjB,IAAIU,EAAE,GAAG5N,MAAM,CAAC2M,UAAU,GAAG,CAAC,IAAI,CAACtS,QAAQ,EAAE,IAAI,CAACC,QAAQ,CAAC,GAAG,CAC1D,IAAI,CAACA,QAAQ,EAAE,IAAI,CAACD,QAAQ,CAC/B,EAAE,CAAC,CAAC;UAAEwT,eAAe,GAAGD,EAAE,CAAC,CAAC,CAAC;UAAEE,aAAa,GAAGF,EAAE,CAAC,CAAC,CAAC;QACrDX,SAAS,IAAI,IAAI,CAACc,eAAe,CAACF,eAAe,EAAEC,aAAa,EAAEnE,GAAG,CAAC3O,GAAG,EAAEgS,MAAM,CAAChS,GAAG,CAAC;MAC1F;MACAgS,MAAM,CAACQ,MAAM,IAAIP,SAAS;MAC1B,OAAOD,MAAM;IACjB,CAAC;IACD9L,YAAY,CAAClJ,SAAS,CAAC+V,eAAe,GAAG,UAAUF,eAAe,EAAEC,aAAa,EAAEE,QAAQ,EAAEC,MAAM,EAAE;MACjG,IAAIC,UAAU,GAAG,IAAI,CAACC,UAAU,CAACN,eAAe,EAAEG,QAAQ,CAAC;MAC3D,IAAII,UAAU,GAAG,IAAI,CAACD,UAAU,CAACL,aAAa,EAAEG,MAAM,CAAC;MACvD,OAAOC,UAAU,GAAGE,UAAU;IAClC,CAAC;IACDlN,YAAY,CAAClJ,SAAS,CAACmW,UAAU,GAAG,UAAUE,WAAW,EAAEjC,IAAI,EAAE;MAC7D,OAAOiC,WAAW,CAACX,OAAO,CAACtB,IAAI,CAAC,CAACkC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACvV,MAAM;IAC5D,CAAC;IACDmI,YAAY,CAAClJ,SAAS,CAACuW,UAAU,GAAG,YAAY;MAC5C,IAAI,CAACjQ,MAAM,CAACxC,OAAO,CAAC,UAAU0S,IAAI,EAAE;QAChCC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,QAAQ,CAAC,CAAC,CAAC;MAChC,CAAC,CAAC;IACN,CAAC;IACDzN,YAAY,CAAClJ,SAAS,CAACgU,cAAc,GAAG,UAAU1N,MAAM,EAAEtD,GAAG,EAAE2R,UAAU,EAAE;MACvE,KAAK,IAAI7T,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwF,MAAM,CAACvF,MAAM,EAAED,CAAC,EAAE,EAAE;QACpC,IAAI8V,EAAE,GAAGtQ,MAAM,CAACxF,CAAC,CAAC;QAClB,IAAImT,KAAK,GAAGU,UAAU,GAAGiC,EAAE,CAACxJ,GAAG,GAAGwJ,EAAE,CAACvJ,GAAG;QACxC,IAAI4G,KAAK,CAACvM,GAAG,CAAC1E,GAAG,GAAGA,GAAG,EACnB;QACJ,IAAIiR,KAAK,CAACxM,KAAK,CAACzE,GAAG,GAAGA,GAAG,EACrB;MACR;MACA,IAAI,CAAC6G,gBAAgB,GAAG/I,CAAC;MACzB,OAAOA,CAAC,GAAG,CAAC;IAChB,CAAC;IACDoI,YAAY,CAAClJ,SAAS,CAAC+R,eAAe,GAAG,UAAUD,SAAS,EAAE;MAC1D,IAAI,IAAI,CAAC3H,eAAe,IAAI,IAAI,CAAChB,gBAAgB,EAAE;QAC/C;MACJ;MACA,IAAI0N,WAAW,GAAG/E,SAAS,CAACrF,OAAO;MACnC,IAAIN,YAAY,GAAG0K,WAAW,KAAK,IAAI,CAACxU,QAAQ,GAC1C,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACD,QAAQ;MACnC8J,YAAY,CAAC2K,SAAS,CAACD,WAAW,CAACE,gBAAgB,CAACC,MAAM,CAAC;MAC3D7K,YAAY,CAAC6G,OAAO,CAAC,kBAAkB,CAAC;IAC5C,CAAC;IACD9J,YAAY,CAAClJ,SAAS,CAACyO,oBAAoB,GAAG,YAAY;MACtD,IAAI,CAACkE,oBAAoB,GAAG,IAAIsE,mBAAmB,CAAC,CAAC;MACrD,IAAI,CAACrE,oBAAoB,GAAG,IAAIqE,mBAAmB,CAAC,CAAC;MACrD,IAAI,CAAC5U,QAAQ,CAAC6U,gBAAgB,CAAC,IAAI,CAACvE,oBAAoB,EAAE,IAAI,CAAC;MAC/D,IAAI,CAACrQ,QAAQ,CAAC4U,gBAAgB,CAAC,IAAI,CAACtE,oBAAoB,EAAE,IAAI,CAAC;IACnE,CAAC;IACD1J,YAAY,CAAClJ,SAAS,CAACsO,qBAAqB,GAAG,YAAY;MACvD,IAAI,CAACjM,QAAQ,CAAC8U,YAAY,CAAC,IAAI,CAACxE,oBAAoB,CAACyE,EAAE,CAAC;MACxD,IAAI,CAAC9U,QAAQ,CAAC6U,YAAY,CAAC,IAAI,CAACvE,oBAAoB,CAACwE,EAAE,CAAC;IAC5D,CAAC;IACD,OAAOlO,YAAY;EACvB,CAAC,CAAC,CAAE;EACJ1G,MAAM,CAAC6U,aAAa,CAACnO,YAAY,CAAClJ,SAAS,EAAE,UAAU,EAAE;IACrDsX,oBAAoB,EAAE;MAClBC,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE;QAClB,IAAI,IAAI,CAAC8F,WAAW,EAAE;UAClB,IAAI,CAACA,WAAW,CAACyQ,SAAS,GAAGvW,KAAK,GAAG,IAAI,GAAGwW,mBAAmB;UAC/D,IAAI,CAAChM,OAAO,CAAClK,QAAQ,CAACmW,UAAU,CAAC,CAAC;QACtC;MACJ,CAAC;MACDC,YAAY,EAAE;IAClB,CAAC;IACDC,OAAO,EAAE;MACLL,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE;QAClB,IAAI,CAACwK,OAAO,CAACoM,SAAS,CAAC,iBAAiB,EAAE5W,KAAK,CAAC;QAChD,IAAI,CAAC2K,OAAO,CAACiM,SAAS,CAAC,iBAAiB,EAAE5W,KAAK,CAAC;QAChD,IAAI,CAACA,KAAK,EAAE;UACR,IAAI6W,IAAI,GAAG,EAAE;UACb,IAAIC,IAAI,GAAG,EAAE;UACb,IAAI,IAAI,CAACzR,MAAM,EAAE;YACb,IAAI,CAACA,MAAM,CAACxC,OAAO,CAAC,UAAUkU,CAAC,EAAE;cAC7BF,IAAI,CAAC3V,IAAI,CAAC6V,CAAC,CAAC5K,GAAG,CAAC3F,KAAK,EAAEuQ,CAAC,CAAC5K,GAAG,CAAC1F,GAAG,CAAC;cACjCqQ,IAAI,CAAC5V,IAAI,CAAC6V,CAAC,CAAC3K,GAAG,CAAC5F,KAAK,EAAEuQ,CAAC,CAAC3K,GAAG,CAAC3F,GAAG,CAAC;YACrC,CAAC,CAAC;UACN;UACA,IAAI,CAACrF,QAAQ,CAAC4V,MAAM,CAACH,IAAI,CAAC;UAC1B,IAAI,CAACxV,QAAQ,CAAC2V,MAAM,CAACF,IAAI,CAAC;QAC9B;MACJ;IACJ,CAAC;IACDG,cAAc,EAAE;MACZX,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE,CACtB;IACJ,CAAC;IACDwP,oBAAoB,EAAE;MAClB8G,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE;QAClB,IAAI,CAAC8N,eAAe,CAAC,CAAC;MAC1B;IACJ,CAAC;IACDoJ,IAAI,EAAE;MACFZ,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE;QAClB,IAAI,CAACoB,QAAQ,CAACwV,SAAS,CAAC,MAAM,EAAE5W,KAAK,CAAC;QACtC,IAAI,CAACqB,QAAQ,CAACuV,SAAS,CAAC,MAAM,EAAE5W,KAAK,CAAC;MAC1C;IACJ,CAAC;IACDmX,QAAQ,EAAE;MACNnX,KAAK,EAAE;IACX,CAAC;IACD0B,KAAK,EAAE;MACH4U,GAAG,EAAE,SAAAA,CAAUtW,KAAK,EAAE;QAClB,IAAI,CAAC0N,QAAQ,CAAC1N,KAAK,CAAC;MACxB,CAAC;MACDoX,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC5M,OAAO,CAACmD,QAAQ,CAAC,CAAC;MAClC;IACJ;EACJ,CAAC,CAAC;EACF,IAAI6I,mBAAmB,GAAG;IACtBa,OAAO,EAAE,SAASC,IAAIA,CAACC,MAAM,EAAE;MAC3B,OAAO,EAAE;IACb,CAAC;IACDC,QAAQ,EAAE,SAAAA,CAAA,EAAY;MAClB,OAAO,CAAC;IACZ;EACJ,CAAC;EACDpZ,OAAO,CAAC6J,YAAY,GAAGA,YAAY;EACnC,IAAIwP,SAAS,GAAG,aAAe,YAAY;IACvC,SAASA,SAASA,CAACC,aAAa,EAAEC,aAAa,EAAEzD,WAAW,EAAE;MAC1D,IAAI,CAAC/H,GAAG,GAAGuL,aAAa;MACxB,IAAI,CAACtL,GAAG,GAAGuL,aAAa;MACxB,IAAI,CAACzD,WAAW,GAAGA,WAAW,IAAIA,WAAW,CAAC0D,GAAG,CAAC,UAAUhY,CAAC,EAAE;QAAE,OAAO,IAAI6X,SAAS,CAAC,IAAIrQ,KAAK,CAACxH,CAAC,CAACiY,uBAAuB,EAAEjY,CAAC,CAACkY,mBAAmB,EAAElY,CAAC,CAACmY,qBAAqB,EAAEnY,CAAC,CAACoY,iBAAiB,CAAC,EAAE,IAAI5Q,KAAK,CAACxH,CAAC,CAACqY,uBAAuB,EAAErY,CAAC,CAACsY,mBAAmB,EAAEtY,CAAC,CAACuY,qBAAqB,EAAEvY,CAAC,CAACwY,iBAAiB,CAAC,CAAC;MAAE,CAAC,CAAC;IACnT;IACA,OAAOX,SAAS;EACpB,CAAC,CAAC,CAAE;EACJ,IAAIpO,aAAa,GAAG,aAAe,YAAY;IAC3C,SAASA,aAAaA,CAACgP,QAAQ,EAAEpX,IAAI,EAAE;MAAE,IAAI,CAACkV,EAAE;MAC5C,IAAI,CAACkC,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACpX,IAAI,GAAGA,IAAI;IACpB;IACAoI,aAAa,CAACtK,SAAS,CAACuZ,MAAM,GAAG,UAAUC,IAAI,EAAEC,WAAW,EAAEhN,OAAO,EAAEjK,MAAM,EAAE;MAC3E,IAAI8E,GAAG,EAAEoS,SAAS,EAAEC,WAAW;MAC/B,IAAIL,QAAQ,GAAG,IAAI,CAACA,QAAQ;MAC5B,IAAI,IAAI,CAACpX,IAAI,KAAK,CAAC,CAAC,EAAE;QAAE;QACpBoF,GAAG,GAAG,KAAK;QACXoS,SAAS,GAAG,QAAQ;QACpBC,WAAW,GAAG,QAAQ;MAC1B,CAAC,MACI;QAAE;QACHrS,GAAG,GAAG,KAAK;QACXoS,SAAS,GAAG,QAAQ;QACpBC,WAAW,GAAG,QAAQ;MAC1B;MACA,IAAIlJ,oBAAoB,GAAG6I,QAAQ,CAACtP,qBAAqB;MACzD,IAAI4P,WAAW,GAAGN,QAAQ,CAAChT,MAAM;MACjC,IAAImG,OAAO,CAACsE,WAAW,IAAI,CAACuI,QAAQ,CAACnQ,gBAAgB,EAAE;QACnD,KAAK,IAAInG,GAAG,GAAGR,MAAM,CAACqX,QAAQ,EAAE7W,GAAG,IAAIR,MAAM,CAACsX,OAAO,EAAE9W,GAAG,EAAE,EAAE;UAC1D,IAAI8N,UAAU,GAAGrE,OAAO,CAACsE,WAAW,CAAC/N,GAAG,CAAC;UACzC,IAAI,CAAC8N,UAAU,IAAIA,UAAU,CAACiJ,MAAM,EAChC;UACJ,IAAItS,KAAK,GAAGgF,OAAO,CAACxJ,mBAAmB,CAACD,GAAG,EAAE,CAAC,CAAC;UAC/C,IAAI8N,UAAU,CAACE,SAAS,GAAG,CAAC,EAAE;YAC1B,IAAI8B,KAAK,GAAG,IAAIzK,KAAK,CAACZ,KAAK,GAAGqJ,UAAU,CAACE,SAAS,EAAE,CAAC,EAAEvJ,KAAK,GAAG,CAAC,EAAEmG,MAAM,CAACC,SAAS,CAAC;YACnF4L,WAAW,CAACO,kBAAkB,CAACR,IAAI,EAAE1G,KAAK,EAAE,uBAAuB,EAAEtQ,MAAM,CAAC;UAChF;UACA,IAAIkF,GAAG,GAAGD,KAAK,GAAGqJ,UAAU,CAACG,QAAQ,IAAIH,UAAU,CAACE,SAAS,IAAI,CAAC,CAAC;UACnE,IAAI8B,KAAK,GAAG,IAAIzK,KAAK,CAACZ,KAAK,GAAG,CAAC,EAAE,CAAC,EAAEC,GAAG,EAAEkG,MAAM,CAACC,SAAS,CAAC;UAC1D4L,WAAW,CAACO,kBAAkB,CAACR,IAAI,EAAE1G,KAAK,EAAE,uBAAuB,EAAEtQ,MAAM,CAAC;QAChF;MACJ;MACAoX,WAAW,CAAC9V,OAAO,CAAC,UAAU0D,UAAU,EAAE;QACtC,IAAIxF,QAAQ,GAAGwF,UAAU,CAACF,GAAG,CAAC,CAACG,KAAK,CAACzE,GAAG;QACxC,IAAIf,MAAM,GAAGuF,UAAU,CAACF,GAAG,CAAC,CAACI,GAAG,CAAC1E,GAAG;QACpC,IAAIf,MAAM,GAAGO,MAAM,CAACqX,QAAQ,IAAI7X,QAAQ,GAAGQ,MAAM,CAACsX,OAAO,EACrD;QACJ,IAAIhH,KAAK,GAAG,IAAIzK,KAAK,CAACrG,QAAQ,EAAE,CAAC,EAAEC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,CAAC;QACvD,IAAID,QAAQ,KAAKC,MAAM,EAAE;UACrB6Q,KAAK,GAAGA,KAAK,CAACmH,aAAa,CAACxN,OAAO,CAAC;UACpCgN,WAAW,CAACO,kBAAkB,CAACR,IAAI,EAAE1G,KAAK,EAAE,WAAW,GAAG4G,SAAS,EAAElX,MAAM,CAAC;QAChF;QACA,IAAIgF,UAAU,CAAC2N,WAAW,EAAE;UACxB,KAAK,IAAIrU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0G,UAAU,CAAC2N,WAAW,CAACpU,MAAM,EAAED,CAAC,EAAE,EAAE;YACpD,IAAIoZ,WAAW,GAAG1S,UAAU,CAAC2N,WAAW,CAACrU,CAAC,CAAC,CAACwG,GAAG,CAAC;YAChD,IAAI4S,WAAW,CAACxS,GAAG,CAAC8N,MAAM,IAAI,CAAC,IAAI0E,WAAW,CAACxS,GAAG,CAAC1E,GAAG,GAAGkX,WAAW,CAACzS,KAAK,CAACzE,GAAG,IAAIkX,WAAW,CAACxS,GAAG,CAAC1E,GAAG,IAAIwE,UAAU,CAACF,GAAG,CAAC,CAACI,GAAG,CAAC1E,GAAG,EAAE;cAC9HkX,WAAW,CAACxS,GAAG,CAAC1E,GAAG,EAAE;cACrBkX,WAAW,CAACxS,GAAG,CAAC8N,MAAM,GAAG5H,MAAM,CAACC,SAAS;YAC7C;YACA,IAAI4C,oBAAoB,EAAE;cACtB,KAAK,IAAI0J,UAAU,GAAGD,WAAW,CAACzS,KAAK,CAACzE,GAAG,EAAEmX,UAAU,IAAID,WAAW,CAACxS,GAAG,CAAC1E,GAAG,EAAEmX,UAAU,EAAE,EAAE;gBAC1F,IAAIC,WAAW,GAAG,KAAK,CAAC;gBACxB,IAAIC,SAAS,GAAG,KAAK,CAAC;gBACtB,IAAIC,gBAAgB,GAAG7N,OAAO,CAACiJ,OAAO,CAACyE,UAAU,CAAC,CAAC7D,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAACvV,MAAM;gBAC1E,IAAIwZ,cAAc,GAAG9N,OAAO,CAACiJ,OAAO,CAACyE,UAAU,CAAC,CAACpZ,MAAM;gBACvD,IAAIoZ,UAAU,KAAKD,WAAW,CAACzS,KAAK,CAACzE,GAAG,EAAE;kBACtCoX,WAAW,GAAGF,WAAW,CAACzS,KAAK,CAAC+N,MAAM;gBAC1C,CAAC,MACI;kBACD4E,WAAW,GAAGE,gBAAgB;gBAClC;gBACA,IAAIH,UAAU,KAAKD,WAAW,CAACxS,GAAG,CAAC1E,GAAG,EAAE;kBACpCqX,SAAS,GAAGH,WAAW,CAACxS,GAAG,CAAC8N,MAAM;gBACtC,CAAC,MACI;kBACD6E,SAAS,GAAGE,cAAc;gBAC9B;gBACA,IAAIC,OAAO,GAAG,IAAInS,KAAK,CAAC8R,UAAU,EAAEC,WAAW,EAAED,UAAU,EAAEE,SAAS,CAAC;gBACvE,IAAII,WAAW,GAAGD,OAAO,CAACP,aAAa,CAACxN,OAAO,CAAC;gBAChD,IAAI6N,gBAAgB,KAAKF,WAAW,IAAIG,cAAc,KAAKF,SAAS,EAAE;kBAClE;gBACJ;gBACA,IAAIK,QAAQ,GAAG,SAAS,GAAGhB,SAAS;gBACpC,IAAIc,OAAO,CAACjH,OAAO,CAAC,CAAC,IAAI6G,WAAW,KAAK,CAAC,EAAE;kBACxCM,QAAQ,GAAG,SAAS,GAAGf,WAAW,GAAG,QAAQ;gBACjD;gBACAF,WAAW,CAACkB,oBAAoB,CAACnB,IAAI,EAAEiB,WAAW,EAAE,WAAW,GAAGC,QAAQ,EAAElY,MAAM,CAAC;cACvF;YACJ,CAAC,MACI;cACD,IAAIoY,OAAO,GAAG,IAAIvS,KAAK,CAAC6R,WAAW,CAACzS,KAAK,CAACzE,GAAG,EAAEkX,WAAW,CAACzS,KAAK,CAAC+N,MAAM,EAAE0E,WAAW,CAACxS,GAAG,CAAC1E,GAAG,EAAEkX,WAAW,CAACxS,GAAG,CAAC8N,MAAM,CAAC;cACrH,IAAIiF,WAAW,GAAGG,OAAO,CAACX,aAAa,CAACxN,OAAO,CAAC;cAChD,IAAIiO,QAAQ,GAAG,SAAS,GAAGhB,SAAS;cACpC,IAAIkB,OAAO,CAACrH,OAAO,CAAC,CAAC,IAAI2G,WAAW,CAACzS,KAAK,CAAC+N,MAAM,KAAK,CAAC,EAAE;gBACrDkF,QAAQ,GAAG,eAAe,GAAGf,WAAW;cAC5C;cACA,IAAIc,WAAW,CAACnF,WAAW,CAAC,CAAC,EAAE;gBAC3BmE,WAAW,CAACoB,cAAc,CAACrB,IAAI,EAAEiB,WAAW,EAAE,WAAW,GAAGC,QAAQ,EAAElY,MAAM,CAAC;cACjF,CAAC,MACI;gBACDiX,WAAW,CAACkB,oBAAoB,CAACnB,IAAI,EAAEiB,WAAW,EAAE,WAAW,GAAGC,QAAQ,EAAElY,MAAM,CAAC;cACvF;YACJ;UACJ;QACJ;MACJ,CAAC,CAAC;IACN,CAAC;IACD,OAAO8H,aAAa;EACxB,CAAC,CAAC,CAAE;EACJ,IAAI2M,mBAAmB,GAAG,aAAe,YAAY;IACjD,SAASA,mBAAmBA,CAAA,EAAG;MAAE,IAAI,CAACG,EAAE;MACpC,IAAI,CAAClV,IAAI,GAAG,UAAU;MACtB,IAAI,CAAC4Y,KAAK,GAAG,sBAAsB;IACvC;IACA7D,mBAAmB,CAACjX,SAAS,CAACuZ,MAAM,GAAG,UAAUC,IAAI,EAAEC,WAAW,EAAEhN,OAAO,EAAEjK,MAAM,EAAE,CACrF,CAAC;IACDyU,mBAAmB,CAACjX,SAAS,CAAC+S,QAAQ,GAAG,UAAUD,KAAK,EAAE;MACtD,IAAIP,QAAQ,GAAGO,KAAK,CAACiI,KAAK,CAAC,CAAC;MAC5BxI,QAAQ,CAAC7K,GAAG,CAAC8N,MAAM,EAAE;MACrB,IAAI,CAAC1C,KAAK,GAAGP,QAAQ;IACzB,CAAC;IACD,OAAO0E,mBAAmB;EAC9B,CAAC,CAAC,CAAE;EACJ5X,OAAO,CAACqZ,SAAS,GAAGA,SAAS;EAC7BrZ,OAAO,CAACiL,aAAa,GAAGA,aAAa;AAErC,CAAC,CAAC;AAEFpL,GAAG,CAACC,MAAM,CAAC,+BAA+B,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,6BAA6B,EAAC,sBAAsB,EAAC,YAAY,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,YAAY;;EAC5L,IAAIC,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;IACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;MAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;QAAEC,SAAS,EAAE;MAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;QAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;MAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;QAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAE,CAAC;MACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IAC9B,CAAC;IACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;MACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;MAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;MACnB,SAASW,EAAEA,CAAA,EAAG;QAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;MAAE;MACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC;EACL,CAAC,CAAE,CAAC;EACJ,IAAI6I,YAAY,GAAG9J,OAAO,CAAC,kBAAkB,CAAC,CAAC8J,YAAY;EAC3D,IAAIT,QAAQ,GAAGrJ,OAAO,CAAC,wBAAwB,CAAC,CAACsJ,eAAe;EAChE,IAAIlG,MAAM,GAAGpD,OAAO,CAAC,cAAc,CAAC;EACpC,IAAI4b,cAAc,GAAG,aAAe,UAAU3Z,MAAM,EAAE;IAClD9B,SAAS,CAACyb,cAAc,EAAE3Z,MAAM,CAAC;IACjC,SAAS2Z,cAAcA,CAACvQ,SAAS,EAAErB,SAAS,EAAE;MAC1C,IAAI3H,KAAK,GAAG,IAAI;MAChBgJ,SAAS,GAAGA,SAAS,IAAI,CAAC,CAAC;MAC3BA,SAAS,CAACG,MAAM,GAAGH,SAAS,CAACG,MAAM,IAAI,GAAG;MAC1CnJ,KAAK,GAAGJ,MAAM,CAACnB,IAAI,CAAC,IAAI,EAAE,IAAI,EAAEkJ,SAAS,CAAC,IAAI,IAAI;MAClD3H,KAAK,CAACwZ,IAAI,CAACxQ,SAAS,CAAC;MACrB,OAAOhJ,KAAK;IAChB;IACAuZ,cAAc,CAAChb,SAAS,CAACib,IAAI,GAAG,UAAUxQ,SAAS,EAAE;MACjD,IAAI,CAAChB,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAAChD,IAAI,CAAC,IAAI,CAAC;MACxC,IAAI,CAACyU,aAAa,GAAG,IAAI,CAACA,aAAa,CAACzU,IAAI,CAAC,IAAI,CAAC;MAClD,IAAI,CAAC+D,YAAY,CAACC,SAAS,CAAC;MAC5B,IAAI,CAACpB,aAAa,CAAC,CAAC;MACpB7G,MAAM,CAAC2Y,YAAY,CAAC,IAAI,CAAC;MACzB3Y,MAAM,CAAC,SAAS,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC;MACnC,IAAIiC,OAAO,GAAG,IAAI,CAACyH,YAAY,CAAC3K,QAAQ,CAAC6Z,QAAQ;MACjD,IAAI,CAACzO,mBAAmB,CAAC,CAAC;MAC1B,IAAI,CAACJ,WAAW,CAAChL,QAAQ,CAAC8Z,UAAU,CAAC5W,OAAO,CAAC;MAC7C,IAAI,CAAC6W,SAAS,GAAG,IAAI,CAAC/O,WAAW,CAAChL,QAAQ,CAACga,UAAU;MACrD,IAAI,CAAC9B,WAAW,GAAG,IAAI,CAAClN,WAAW,CAAChL,QAAQ,CAACia,WAAW;MACxD,IAAI,CAACzU,WAAW,GAAG,IAAI,CAACwF,WAAW,CAAChL,QAAQ,CAACoF,YAAY;MACzD,IAAI,CAAC8U,WAAW,GAAG,IAAI,CAAClP,WAAW,CAAChL,QAAQ,CAACma,YAAY;MACzD,IAAI,CAACnP,WAAW,CAAChL,QAAQ,CAACoa,iBAAiB,GAAG,YAAY,CAC1D,CAAC;MACD,IAAIC,gBAAgB,GAAG,IAAI,CAAC1P,YAAY,CAAC3K,QAAQ,CAACga,UAAU,CAAC3U,OAAO;MACpEgV,gBAAgB,CAACC,UAAU,CAACC,YAAY,CAAC,IAAI,CAACR,SAAS,CAAC1U,OAAO,EAAEgV,gBAAgB,CAAC;MAClF,IAAIG,kBAAkB,GAAG,IAAI,CAAC7P,YAAY,CAAC3K,QAAQ,CAACia,WAAW,CAAC5U,OAAO;MACvEmV,kBAAkB,CAACF,UAAU,CAACC,YAAY,CAAC,IAAI,CAACrC,WAAW,CAAC7S,OAAO,EAAEmV,kBAAkB,CAACC,WAAW,CAAC;MACpG,IAAIC,kBAAkB,GAAG,IAAI,CAAC/P,YAAY,CAAC3K,QAAQ,CAACoF,YAAY,CAACC,OAAO;MACxEqV,kBAAkB,CAACJ,UAAU,CAACC,YAAY,CAAC,IAAI,CAAC/U,WAAW,CAACH,OAAO,EAAEqV,kBAAkB,CAACD,WAAW,CAAC;MACpGC,kBAAkB,CAAChM,KAAK,CAACiM,QAAQ,GAAG,UAAU;MAC9C,IAAI,CAACnV,WAAW,CAACH,OAAO,CAACqJ,KAAK,CAACiM,QAAQ,GAAG,UAAU;MACpD,IAAI,CAACnV,WAAW,CAACH,OAAO,CAACqJ,KAAK,CAACkM,KAAK,GAAG,MAAM;MAC7C,IAAI,CAACpV,WAAW,CAACH,OAAO,CAACO,SAAS,CAACf,GAAG,CAAC,4BAA4B,CAAC;MACpE,IAAI,CAACW,WAAW,CAACqV,kBAAkB,GAAG,YAAY,CAAE,CAAC;MACrD,IAAI,CAACC,SAAS,CAAC,CAAC;MAChB,IAAI,CAACC,aAAa,CAAC,CAAC;MACpB,IAAI,CAACC,aAAa,CAAC,CAAC;MACpB,IAAI,CAACC,YAAY,CAAC,CAAC;MACnB,IAAI,CAACC,oBAAoB,CAAC,CAAC;MAC3B,IAAI,CAACC,YAAY,CAAC,IAAI,CAACxQ,YAAY,CAAC;IACxC,CAAC;IACD8O,cAAc,CAAChb,SAAS,CAACwc,YAAY,GAAG,UAAUG,OAAO,EAAE;MACvD,IAAIlb,KAAK,GAAG,IAAI;MAChB,IAAIkb,OAAO,EAAE;QACT,OAAO,IAAI,CAACzQ,YAAY,CAAC3K,QAAQ,CAACqb,eAAe;MACrD,CAAC,MACI;QACD,IAAI,CAACnR,OAAO,CAAClK,QAAQ,CAACqb,eAAe,GACjC,IAAI,CAAChR,OAAO,CAACrK,QAAQ,CAACqb,eAAe,GAAG,YAAY;UAChD,IAAIC,cAAc,GAAGpU,QAAQ,CAACzI,SAAS,CAAC4c,eAAe;UACvD,OAAOvY,IAAI,CAACgQ,GAAG,CAACwI,cAAc,CAAC3c,IAAI,CAACuB,KAAK,CAACgK,OAAO,CAAClK,QAAQ,CAAC,EAAEsb,cAAc,CAAC3c,IAAI,CAACuB,KAAK,CAACmK,OAAO,CAACrK,QAAQ,CAAC,CAAC;QAC7G,CAAC;MACT;IACJ,CAAC;IACDyZ,cAAc,CAAChb,SAAS,CAACuc,aAAa,GAAG,YAAY;MACjD,IAAIO,UAAU,GAAG,IAAI,CAACxB,SAAS,CAACyB,WAAW;MAC3C,IAAIzD,QAAQ,GAAG,IAAI;MACnB,IAAI,CAAC/M,WAAW,CAAChL,QAAQ,CAACga,UAAU,CAACwB,WAAW,GAAG,UAAUC,MAAM,EAAEha,GAAG,EAAEia,QAAQ,EAAE;QAChF,IAAIC,YAAY,CAAC5D,QAAQ,CAAChT,MAAM,EAAEtD,GAAG,CAAC,EAAE;UACpC8Z,UAAU,CAAC5c,IAAI,CAAC,IAAI,EAAE8c,MAAM,EAAEha,GAAG,EAAEia,QAAQ,CAAC;QAChD;MACJ,CAAC;MACD,IAAIE,IAAI,GAAG,IAAI,CAACxS,SAAS,GAAG,KAAK,GAAG,KAAK;MACzC,SAASuS,YAAYA,CAAC5W,MAAM,EAAEtD,GAAG,EAAE;QAC/B,IAAI2S,GAAG,GAAG,CAAC;QACX,IAAItB,GAAG,GAAG/N,MAAM,CAACvF,MAAM,GAAG,CAAC;QAC3B,IAAIiU,MAAM,GAAG,CAAC,CAAC;QACf,OAAOW,GAAG,GAAGtB,GAAG,EAAE;UACd,IAAI+I,GAAG,GAAG/Y,IAAI,CAACgZ,KAAK,CAAC,CAAC1H,GAAG,GAAGtB,GAAG,IAAI,CAAC,CAAC;UACrC,IAAIiJ,UAAU,GAAGhX,MAAM,CAAC8W,GAAG,CAAC,CAACD,IAAI,CAAC,CAAC1V,KAAK,CAACzE,GAAG;UAC5C,IAAIsa,UAAU,GAAGta,GAAG,EAAE;YAClBgS,MAAM,GAAGoI,GAAG;YACZzH,GAAG,GAAGyH,GAAG,GAAG,CAAC;UACjB,CAAC,MACI,IAAIE,UAAU,GAAGta,GAAG,EAAE;YACvBqR,GAAG,GAAG+I,GAAG,GAAG,CAAC;UACjB,CAAC,MACI;YACDpI,MAAM,GAAGoI,GAAG;YACZ;UACJ;QACJ;QACA,IAAI9W,MAAM,CAAC0O,MAAM,GAAG,CAAC,CAAC,IAAI1O,MAAM,CAAC0O,MAAM,GAAG,CAAC,CAAC,CAACmI,IAAI,CAAC,CAAC1V,KAAK,CAACzE,GAAG,IAAIA,GAAG,EAAE;UACjEgS,MAAM,EAAE;QACZ;QACA,IAAIlC,KAAK,GAAGxM,MAAM,CAAC0O,MAAM,CAAC,IAAI1O,MAAM,CAAC0O,MAAM,CAAC,CAACmI,IAAI,CAAC;QAClD,IAAIrK,KAAK,IAAIA,KAAK,CAACpL,GAAG,CAAC1E,GAAG,GAAGA,GAAG,EAAE;UAC9B,OAAO,IAAI;QACf;QACA,OAAO,KAAK;MAChB;IACJ,CAAC;IACDgY,cAAc,CAAChb,SAAS,CAACsc,aAAa,GAAG,UAAUK,OAAO,EAAE;MACxD,IAAIA,OAAO,EAAE;QACT,IAAI,CAACpQ,WAAW,CAACgR,SAAS,GAAG,IAAI,CAACC,cAAc;QAChD,IAAI,CAACjR,WAAW,CAACnD,SAAS,GAAG,IAAI,CAACqU,oBAAoB;MAC1D,CAAC,MACI;QACD,IAAI,CAACD,cAAc,GAAG,IAAI,CAACjR,WAAW,CAACgR,SAAS;QAChD,IAAI,CAAChR,WAAW,CAACgR,SAAS,GAAG,IAAI,CAACrR,YAAY,CAACqR,SAAS;QACxD,IAAI,CAACE,oBAAoB,GAAG,IAAI,CAAClR,WAAW,CAACnD,SAAS;QACtD,IAAI,CAACmD,WAAW,CAACnD,SAAS,GAAG,IAAI,CAAC8C,YAAY,CAAC9C,SAAS;MAC5D;IACJ,CAAC;IACD4R,cAAc,CAAChb,SAAS,CAAC0c,YAAY,GAAG,UAAUzW,MAAM,EAAE;MACtD,IAAIA,MAAM,IAAI,IAAI,CAACiG,YAAY,EAAE;QAC7B,IAAI,CAACK,WAAW,CAACuF,SAAS,CAAC8B,cAAc,CAAC,CAAC;QAC3C,IAAI,CAAC1H,YAAY,CAACqR,SAAS,CAACG,OAAO,CAAC,IAAI,CAACxR,YAAY,CAAC;QACtD,IAAI,CAACA,YAAY,CAACyR,QAAQ,CAAC,gBAAgB,EAAE,KAAK,CAAC;QACnD,IAAI,CAAClC,WAAW,CAAC7U,OAAO,CAACQ,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC8E,YAAY,CAAC3K,QAAQ,CAACma,YAAY,CAAC9U,OAAO,CAACqJ,KAAK,CAAC2N,OAAO,GAAG,OAAO;QACvE,IAAI,IAAI,CAACjT,SAAS,EAAE;UAChB,IAAI,CAACtI,QAAQ,CAAC8U,YAAY,CAAC,IAAI,CAACxE,oBAAoB,CAACyE,EAAE,CAAC;UACxD,IAAI,CAAC/U,QAAQ,CAAC6U,gBAAgB,CAAC,IAAI,CAACvE,oBAAoB,EAAE,IAAI,CAAC;QACnE;QACA,IAAI,CAAC8G,WAAW,CAAC7S,OAAO,CAACO,SAAS,CAACf,GAAG,CAAC,yBAAyB,CAAC;QACjE,IAAI,CAAC8F,YAAY,CAAC3K,QAAQ,CAACia,WAAW,CAAC5U,OAAO,CAACO,SAAS,CAACC,MAAM,CAAC,yBAAyB,CAAC;QAC1F,IAAI,CAACyW,sBAAsB,CAAC,IAAI,CAACtR,WAAW,CAAC;MACjD,CAAC,MACI;QACD,IAAI,CAACL,YAAY,CAAC4F,SAAS,CAAC8B,cAAc,CAAC,CAAC;QAC5C,IAAI,CAAC1H,YAAY,CAACqR,SAAS,CAACG,OAAO,CAAC,IAAI,CAACnR,WAAW,CAAC;QACrD,IAAI,CAACL,YAAY,CAACyR,QAAQ,CAAC,gBAAgB,CAAC;QAC5C,IAAI,CAACzR,YAAY,CAAC3K,QAAQ,CAACma,YAAY,CAAC9U,OAAO,CAACiV,UAAU,CAAC9P,WAAW,CAAC,IAAI,CAAC0P,WAAW,CAAC7U,OAAO,CAAC;QAChG,IAAI,CAACsF,YAAY,CAAC3K,QAAQ,CAACma,YAAY,CAAC9U,OAAO,CAACqJ,KAAK,CAAC2N,OAAO,GAAG,MAAM;QACtE,IAAI,IAAI,CAAC1R,YAAY,CAAC4R,UAAU,EAAE;UAC9B,IAAI,CAACvR,WAAW,CAACwR,OAAO,CAAC,CAAC;QAC9B;QACA,IAAI,IAAI,CAACpT,SAAS,EAAE;UAChB,IAAI,CAACtI,QAAQ,CAAC8U,YAAY,CAAC,IAAI,CAACxE,oBAAoB,CAACyE,EAAE,CAAC;QAC5D;QACA,IAAI,CAACqC,WAAW,CAAC7S,OAAO,CAACO,SAAS,CAACC,MAAM,CAAC,yBAAyB,CAAC;QACpE,IAAI,CAAC8E,YAAY,CAAC3K,QAAQ,CAACia,WAAW,CAAC5U,OAAO,CAACO,SAAS,CAACf,GAAG,CAAC,yBAAyB,CAAC;QACvF,IAAI,CAACyX,sBAAsB,CAAC,IAAI,CAAC3R,YAAY,CAAC;MAClD;IACJ,CAAC;IACD8O,cAAc,CAAChb,SAAS,CAAC6d,sBAAsB,GAAG,UAAU5X,MAAM,EAAE;MAChE,IAAIwG,OAAO,GAAGxG,MAAM,CAACwG,OAAO;MAC5B,IAAIA,OAAO,CAACuR,iBAAiB,EAAE;QAC3BvR,OAAO,CAACuR,iBAAiB,CAACC,SAAS,CAACna,OAAO,CAAC,UAAUsT,EAAE,EAAE;UACtD3K,OAAO,CAAC0K,YAAY,CAACC,EAAE,CAAC;QAC5B,CAAC,CAAC;QACF3K,OAAO,CAACuR,iBAAiB,GAAG,IAAI;MACpC;IACJ,CAAC;IACDhD,cAAc,CAAChb,SAAS,CAACqc,SAAS,GAAG,YAAY;MAC7C,IAAI5a,KAAK,GAAG,IAAI;MAChB,IAAI,CAAC8K,WAAW,CAAChL,QAAQ,CAAC2c,KAAK,GAAG,IAAI,CAAChS,YAAY,CAAC3K,QAAQ,CAAC2c,KAAK;MAClE,IAAI,CAAC3R,WAAW,CAAChL,QAAQ,CAAC4c,QAAQ,GAAG;QACjCC,qBAAqB,EAAE,SAAAA,CAAA,EAAY;UAC/B,OAAO3c,KAAK,CAACyK,YAAY,CAAC3K,QAAQ,CAAC4c,QAAQ,CAACC,qBAAqB,CAAC,CAAC;QACvE,CAAC;QACDnO,KAAK,EAAE,IAAI,CAAC/D,YAAY,CAAC3K,QAAQ,CAAC4c,QAAQ,CAAClO;MAC/C,CAAC;MACD,IAAIoO,YAAY,GAAG,SAAAA,CAAUpL,EAAE,EAAE;QAC7B,IAAI,CAACA,EAAE,CAACqL,QAAQ,EACZ;QACJ,IAAIC,SAAS,GAAGtL,EAAE,CAAChN,MAAM,CAAC1E,QAAQ,CAACid,wBAAwB,CAACvL,EAAE,CAACwL,OAAO,EAAExL,EAAE,CAACyL,OAAO,CAAC;QACnF,IAAIrc,QAAQ,GAAGZ,KAAK,CAACyK,YAAY,CAACO,OAAO;QACzC,IAAInK,QAAQ,GAAGb,KAAK,CAAC8K,WAAW,CAACE,OAAO;QACxC,IAAIqL,IAAI,GAAGzV,QAAQ,CAACsc,wBAAwB,CAACJ,SAAS,CAACvb,GAAG,EAAEub,SAAS,CAAC/I,MAAM,EAAE+I,SAAS,CAACK,OAAO,CAAC;QAChG,IAAI7G,IAAI,GAAGzV,QAAQ,CAACqc,wBAAwB,CAACJ,SAAS,CAACvb,GAAG,EAAEub,SAAS,CAAC/I,MAAM,EAAE+I,SAAS,CAACK,OAAO,CAAC;QAChG,IAAIC,KAAK,GAAGxc,QAAQ,CAACuP,wBAAwB,CAACkG,IAAI,CAAC;QACnD,IAAIgH,KAAK,GAAGxc,QAAQ,CAACsP,wBAAwB,CAACmG,IAAI,CAAC;QACnD,IAAI9E,EAAE,CAAChN,MAAM,IAAIxE,KAAK,CAACyK,YAAY,EAAE;UACjC,IAAI4S,KAAK,CAAC9b,GAAG,IAAIub,SAAS,CAACvb,GAAG,IAAI6b,KAAK,CAAC7b,GAAG,IAAIub,SAAS,CAACvb,GAAG,EAAE;YAC1D,IAAIiQ,EAAE,CAAC/Q,IAAI,IAAI,WAAW,EAAE;cACxBT,KAAK,CAACib,YAAY,CAACjb,KAAK,CAAC8K,WAAW,CAAC;YACzC;YACA0G,EAAE,CAAC8L,kBAAkB,GAAG,IAAI;YAC5B9L,EAAE,CAAC+L,gBAAgB,GAAG,IAAI;YAC1Bvd,KAAK,CAAC8K,WAAW,CAAC0S,aAAa,CAACC,YAAY,CAACjM,EAAE,CAAC/Q,IAAI,EAAE+Q,EAAE,CAACqL,QAAQ,CAAC;UACtE,CAAC,MACI,IAAIrL,EAAE,CAAC/Q,IAAI,IAAI,WAAW,EAAE;YAC7BT,KAAK,CAACib,YAAY,CAACjb,KAAK,CAACyK,YAAY,CAAC;UAC1C;QACJ;MACJ,CAAC;MACD,IAAIiT,MAAM,GAAG,CACT,WAAW,EACX,OAAO,EACP,SAAS,EACT,UAAU,EACV,aAAa,EACb,WAAW,CACd;MACDA,MAAM,CAACrb,OAAO,CAAC,UAAUsb,KAAK,EAAE;QAC5B3d,KAAK,CAACyK,YAAY,CAACrF,EAAE,CAACuY,KAAK,EAAEf,YAAY,EAAE,IAAI,CAAC;QAChD5c,KAAK,CAACyK,YAAY,CAACrF,EAAE,CAAC,QAAQ,GAAGuY,KAAK,EAAEf,YAAY,EAAE,IAAI,CAAC;MAC/D,CAAC,CAAC;MACF,IAAIN,OAAO,GAAG,SAAAA,CAAUjX,CAAC,EAAE;QACvBrF,KAAK,CAACyK,YAAY,CAAC6R,OAAO,CAACjX,CAAC,CAAC;MACjC,CAAC;MACD,IAAIuY,MAAM,GAAG,SAAAA,CAAUvY,CAAC,EAAE;QACtBrF,KAAK,CAACyK,YAAY,CAACmT,MAAM,CAACvY,CAAC,CAAC;MAChC,CAAC;MACD,IAAI,CAACyF,WAAW,CAAC1F,EAAE,CAAC,OAAO,EAAEkX,OAAO,CAAC;MACrC,IAAI,CAACxR,WAAW,CAAC1F,EAAE,CAAC,MAAM,EAAEwY,MAAM,CAAC;MACnC,IAAI,CAACC,aAAa,GAAG,YAAY;QAC7BH,MAAM,CAACrb,OAAO,CAAC,UAAUsb,KAAK,EAAE;UAC5B3d,KAAK,CAACyK,YAAY,CAACnE,GAAG,CAACqX,KAAK,EAAEf,YAAY,EAAE,IAAI,CAAC;UACjD5c,KAAK,CAACyK,YAAY,CAACnE,GAAG,CAAC,QAAQ,GAAGqX,KAAK,EAAEf,YAAY,EAAE,IAAI,CAAC;QAChE,CAAC,CAAC;QACF5c,KAAK,CAAC8K,WAAW,CAACxE,GAAG,CAAC,OAAO,EAAEgW,OAAO,CAAC;QACvCtc,KAAK,CAAC8K,WAAW,CAACxE,GAAG,CAAC,MAAM,EAAEsX,MAAM,CAAC;MACzC,CAAC;IACL,CAAC;IACDrE,cAAc,CAAChb,SAAS,CAACwP,KAAK,GAAG,YAAY;MACzC,IAAI8J,QAAQ,GAAG,IAAI;MACnB,IAAI,CAAC9H,YAAY,CAAC8H,QAAQ,CAAC7N,OAAO,CAAC;MACnC,IAAI,CAAC+F,YAAY,CAAC8H,QAAQ,CAAC1N,OAAO,CAAC;MACnC0N,QAAQ,CAAChT,MAAM,CAACxC,OAAO,CAAC,UAAU8S,EAAE,EAAE;QAClC,IAAI2I,KAAK,GAAGjG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,EAAE4R,QAAQ,CAACjX,QAAQ,CAAC,GACxDiX,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACxJ,GAAG,CAAC3F,KAAK,EAAE6R,QAAQ,CAACjX,QAAQ,CAAC;QAC1D,IAAImd,KAAK,GAAGlG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACvJ,GAAG,CAAC3F,GAAG,EAAE4R,QAAQ,CAAChX,QAAQ,CAAC,GACxDgX,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,EAAE6R,QAAQ,CAAChX,QAAQ,CAAC;QAC1DgX,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAACjX,QAAQ,EAAE;UACnC4O,QAAQ,EAAEuO,KAAK;UACfxO,SAAS,EAAE4F,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAGwc,KAAK,GAAG,CAAC;UAC3Cxc,GAAG,EAAE4T,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG4T,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,GAAG;QACrD,CAAC,CAAC;QACFsW,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAAChX,QAAQ,EAAE;UACnC2O,QAAQ,EAAEsO,KAAK;UACfvO,SAAS,EAAEuO,KAAK;UAChBvc,GAAG,EAAE4T,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,CAACzE;QACtB,CAAC,CAAC;MACN,CAAC,CAAC;MACFsW,QAAQ,CAACjX,QAAQ,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE;QAAEiP,IAAI,EAAE;UAAE7J,KAAK,EAAE;YAAEzE,GAAG,EAAE;UAAE;QAAE;MAAE,CAAC,CAAC;MACzEsW,QAAQ,CAAChX,QAAQ,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE;QAAEgP,IAAI,EAAE;UAAE7J,KAAK,EAAE;YAAEzE,GAAG,EAAE;UAAE;QAAE;MAAE,CAAC,CAAC;IAC7E,CAAC;IACDgY,cAAc,CAAChb,SAAS,CAAC0J,iBAAiB,GAAG,YAAY;MACrD,IAAI,CAACpH,QAAQ,CAACmd,eAAe,CAAC,IAAI,CAACpd,QAAQ,CAACqd,UAAU,CAAC;MACvD,IAAI,CAACvM,eAAe,CAAC,CAAC;IAC1B,CAAC;IACD6H,cAAc,CAAChb,SAAS,CAACwO,4BAA4B,GAAG,YAAY;MAChE,IAAI,CAACmR,2BAA2B,CAAC,IAAI,CAAClU,OAAO,EAAE,IAAI,CAAClB,OAAO,CAAC;MAC5D,IAAI,CAACoV,2BAA2B,CAAC,IAAI,CAAC/T,OAAO,EAAE,IAAI,CAACvB,OAAO,CAAC;MAC5D,IAAI,CAAChI,QAAQ,CAACwE,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC6C,iBAAiB,CAAC;MAC3D,IAAI,CAACrH,QAAQ,CAACwE,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC6C,iBAAiB,CAAC;IAC9D,CAAC;IACDsR,cAAc,CAAChb,SAAS,CAAC2f,2BAA2B,GAAG,UAAU1Z,MAAM,EAAE4M,MAAM,EAAE;MAC7E5M,MAAM,CAACwG,OAAO,CAAC5F,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC0C,YAAY,CAAC;MAClDtD,MAAM,CAACwG,OAAO,CAACyK,gBAAgB,CAACrE,MAAM,CAAC;MACvC5M,MAAM,CAAC6L,SAAS,CAACjL,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC4C,QAAQ,CAAC;MAClDxD,MAAM,CAAC6L,SAAS,CAACjL,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC4C,QAAQ,CAAC;IACzD,CAAC;IACDuR,cAAc,CAAChb,SAAS,CAACqO,4BAA4B,GAAG,YAAY;MAChE,IAAI,CAACuR,sBAAsB,CAAC,IAAI,CAACnU,OAAO,EAAE,IAAI,CAAClB,OAAO,CAAC;MACvD,IAAI,CAACqV,sBAAsB,CAAC,IAAI,CAAChU,OAAO,EAAE,IAAI,CAACvB,OAAO,CAAC;MACvD,IAAI,CAAC8B,YAAY,CAAC0T,WAAW,CAACC,KAAK,CAACC,IAAI,CAAClV,SAAS,CAAC;MACnD,IAAI,CAACxI,QAAQ,CAAC0F,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC2B,iBAAiB,CAAC;MAC5D,IAAI,CAACrH,QAAQ,CAAC0F,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC2B,iBAAiB,CAAC;IAC/D,CAAC;IACDsR,cAAc,CAAChb,SAAS,CAAC4f,sBAAsB,GAAG,UAAU3Z,MAAM,EAAE4M,MAAM,EAAE;MACxE5M,MAAM,CAACwG,OAAO,CAAC0K,YAAY,CAACtE,MAAM,CAACuE,EAAE,CAAC;MACtCnR,MAAM,CAAC6L,SAAS,CAAC/J,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC0B,QAAQ,CAAC;MACnDxD,MAAM,CAAC6L,SAAS,CAAC/J,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC0B,QAAQ,CAAC;MACtDxD,MAAM,CAACwG,OAAO,CAAC1E,GAAG,CAAC,YAAY,EAAE,IAAI,CAACwB,YAAY,CAAC;IACvD,CAAC;IACDyR,cAAc,CAAChb,SAAS,CAACyc,oBAAoB,GAAG,YAAY;MACxD,IAAI,CAACvQ,YAAY,CAACrF,EAAE,CAAC,OAAO,EAAE,IAAI,CAACyC,OAAO,CAAC;MAC3C,IAAI,CAAC4C,YAAY,CAAC3K,QAAQ,CAACsF,EAAE,CAAC,aAAa,EAAE,IAAI,CAACqU,aAAa,CAAC;MAChE,IAAI,CAAC/O,YAAY,CAACtF,EAAE,CAAC,QAAQ,EAAE,IAAI,CAACyC,OAAO,CAAC;IAChD,CAAC;IACD0R,cAAc,CAAChb,SAAS,CAAC0T,oBAAoB,GAAG,YAAY;MACxD,IAAI,CAACrF,4BAA4B,CAAC,CAAC;MACnC,IAAI,CAACnC,YAAY,CAACnE,GAAG,CAAC,OAAO,EAAE,IAAI,CAACuB,OAAO,CAAC;MAC5C,IAAI,CAAC4C,YAAY,CAAC3K,QAAQ,CAACwG,GAAG,CAAC,aAAa,EAAE,IAAI,CAACmT,aAAa,CAAC;MACjE,IAAI,CAAC/O,YAAY,CAACpE,GAAG,CAAC,QAAQ,EAAE,IAAI,CAACuB,OAAO,CAAC;MAC7C,IAAI,CAACgS,SAAS,CAAC1U,OAAO,CAACoZ,WAAW,GAAG,EAAE;MACvC,IAAI,CAAC1E,SAAS,CAAC1U,OAAO,CAACQ,MAAM,CAAC,CAAC;MAC/B,IAAI,CAACL,WAAW,CAACH,OAAO,CAACoZ,WAAW,GAAG,EAAE;MACzC,IAAI,CAACjZ,WAAW,CAACH,OAAO,CAACQ,MAAM,CAAC,CAAC;MACjC,IAAI,CAACqS,WAAW,CAAC7S,OAAO,CAACoZ,WAAW,GAAG,EAAE;MACzC,IAAI,CAACvG,WAAW,CAAC7S,OAAO,CAACQ,MAAM,CAAC,CAAC;MACjC,IAAI,CAACkY,aAAa,CAAC,CAAC;MACpB,IAAI,CAAC5C,YAAY,CAAC,IAAI,CAACxQ,YAAY,CAAC;MACpC,IAAI,CAACoC,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAAC/B,WAAW,CAACgC,UAAU,CAAC,IAAI,CAAC;MACjC,IAAI,CAAChC,WAAW,CAAChL,QAAQ,CAAC2c,KAAK,GAAG,IAAI;MACtC,IAAI,CAAC5B,aAAa,CAAC,IAAI,CAAC;MACxB,IAAI,CAACE,YAAY,CAAC,IAAI,CAAC;MACvB,IAAI,CAACjQ,WAAW,CAACuD,OAAO,CAAC,CAAC;IAC9B,CAAC;IACDkL,cAAc,CAAChb,SAAS,CAACkb,aAAa,GAAG,UAAUtT,OAAO,EAAErG,QAAQ,EAAE;MAClE,IAAIiB,MAAM,GAAGjB,QAAQ,CAACiP,WAAW;MACjC,IAAI/D,OAAO,GAAG,IAAI,CAACN,YAAY;MAC/B,IAAI8T,aAAa,GAAG,IAAI,CAAC1T,WAAW,CAAChL,QAAQ;MAC7CkL,OAAO,CAACyT,UAAU,GAAG3e,QAAQ,CAAC2S,SAAS;MACvCzH,OAAO,CAAC0T,WAAW,GAAG5e,QAAQ,CAAC6e,UAAU;MACzC,CACI,gBAAgB,EAChB,YAAY,EACZ,WAAW,EACX,YAAY,EACZ,cAAc,EACd,UAAU,EACV,OAAO,EACP,aAAa,EACb,cAAc,EACd,UAAU,CACb,CAACtc,OAAO,CAAC,UAAUuc,IAAI,EAAE;QACtBJ,aAAa,CAACI,IAAI,CAAC,GAAG9e,QAAQ,CAAC8e,IAAI,CAAC;MACxC,CAAC,CAAC;MACFJ,aAAa,CAACK,mBAAmB,CAAC,CAAC;MACnC,IAAIC,SAAS,GAAGN,aAAa,CAACzP,WAAW;MACzC,IAAI,CAACzJ,WAAW,CAACwS,MAAM,CAACgH,SAAS,CAAC;MAClCA,SAAS,CAACC,cAAc,GAAGhe,MAAM,CAACge,cAAc;MAChDP,aAAa,CAACvE,YAAY,CAAClZ,MAAM,GAAG+d,SAAS;MAC7CN,aAAa,CAACvE,YAAY,CAACnC,MAAM,CAACgH,SAAS,CAAC;MAC5C,IAAI3Y,OAAO,GAAGqY,aAAa,CAACQ,YAAY,IACjC7Y,OAAO,GAAGqY,aAAa,CAACS,WAAW,IACnC9Y,OAAO,GAAGqY,aAAa,CAACU,aAAa,IACrC/Y,OAAO,GAAGqY,aAAa,CAACW,WAAW,EACtC,IAAI,CAACtF,SAAS,CAAC/B,MAAM,CAACgH,SAAS,CAAC;MACpC,IAAI,CAAC9G,WAAW,CAACoH,UAAU,CAAC,IAAI,CAAC1U,YAAY,CAAC2U,UAAU,CAAC,CAAC,CAAC;MAC3D,IAAI,CAACrH,WAAW,CAACF,MAAM,CAACgH,SAAS,CAAC;IACtC,CAAC;IACDvF,cAAc,CAAChb,SAAS,CAACyT,MAAM,GAAG,YAAY;MAC1CpS,MAAM,CAACrB,SAAS,CAACyT,MAAM,CAACvT,IAAI,CAAC,IAAI,CAAC;MAClC,IAAI,CAACqM,WAAW,IAAI,IAAI,CAACA,WAAW,CAACuD,OAAO,CAAC,CAAC;IAClD,CAAC;IACD,OAAOkL,cAAc;EACzB,CAAC,CAAC9R,YAAY,CAAE;EAChB7J,OAAO,CAAC2b,cAAc,GAAGA,cAAc;AAEvC,CAAC,CAAC;AAEF9b,GAAG,CAACC,MAAM,CAAC,8BAA8B,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,6BAA6B,EAAC,YAAY,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,YAAY;;EACpK,IAAIC,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;IACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;MAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;QAAEC,SAAS,EAAE;MAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;QAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;MAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;QAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAE,CAAC;MACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IAC9B,CAAC;IACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;MACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;MAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;MACnB,SAASW,EAAEA,CAAA,EAAG;QAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;MAAE;MACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC;EACL,CAAC,CAAE,CAAC;EACJ,IAAI6I,YAAY,GAAG9J,OAAO,CAAC,kBAAkB,CAAC,CAAC8J,YAAY;EAC3D,IAAI1G,MAAM,GAAGpD,OAAO,CAAC,cAAc,CAAC;EACpC,IAAI2hB,aAAa,GAAG,aAAe,UAAU1f,MAAM,EAAE;IACjD9B,SAAS,CAACwhB,aAAa,EAAE1f,MAAM,CAAC;IAChC,SAAS0f,aAAaA,CAACtW,SAAS,EAAE;MAC9B,IAAIhJ,KAAK,GAAG,IAAI;MAChBgJ,SAAS,GAAGA,SAAS,IAAI,CAAC,CAAC;MAC3BhJ,KAAK,GAAGJ,MAAM,CAACnB,IAAI,CAAC,IAAI,CAAC,IAAI,IAAI;MACjCuB,KAAK,CAACwZ,IAAI,CAACxQ,SAAS,CAAC;MACrB,OAAOhJ,KAAK;IAChB;IACAsf,aAAa,CAAC/gB,SAAS,CAACib,IAAI,GAAG,UAAUxQ,SAAS,EAAE;MAChD,IAAI,CAACpB,aAAa,GAAG,IAAI,CAACA,aAAa,CAAC5C,IAAI,CAAC,IAAI,CAAC;MAClD,IAAI,CAACua,YAAY,GAAG,IAAI,CAACA,YAAY,CAACva,IAAI,CAAC,IAAI,CAAC;MAChD,IAAI,CAACwa,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACxa,IAAI,CAAC,IAAI,CAAC;MACxC,IAAI,CAAC+D,YAAY,CAACC,SAAS,CAAC;MAC5B,IAAI,CAACkC,mBAAmB,CAAC,CAAC;MAC1B,IAAI,CAACtD,aAAa,CAAC,CAAC;MACpB7G,MAAM,CAAC2Y,YAAY,CAAC,IAAI,CAAC;MACzB3Y,MAAM,CAAC,SAAS,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC;MACnC,IAAI,CAACia,oBAAoB,CAAC,CAAC;IAC/B,CAAC;IACDsE,aAAa,CAAC/gB,SAAS,CAAC0J,iBAAiB,GAAG,YAAY;MACpD,IAAI,CAACyJ,eAAe,CAAC,CAAC;IAC1B,CAAC;IACD4N,aAAa,CAAC/gB,SAAS,CAACwP,KAAK,GAAG,YAAY;MACxC,IAAI8J,QAAQ,GAAG,IAAI;MACnB,IAAI,CAAC9H,YAAY,CAAC8H,QAAQ,CAAC7N,OAAO,CAAC;MACnC,IAAI,CAAC+F,YAAY,CAAC8H,QAAQ,CAAC1N,OAAO,CAAC;MACnC0N,QAAQ,CAAChT,MAAM,CAACxC,OAAO,CAAC,UAAU8S,EAAE,EAAE;QAClC,IAAI2I,KAAK,GAAGjG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACxJ,GAAG,CAAC3F,KAAK,EAAE6R,QAAQ,CAACjX,QAAQ,CAAC;QAChE,IAAImd,KAAK,GAAGlG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,EAAE6R,QAAQ,CAAChX,QAAQ,CAAC;QAChE,IAAIid,KAAK,GAAGC,KAAK,EAAE;UACflG,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAACjX,QAAQ,EAAE;YACnC4O,QAAQ,EAAEuO,KAAK,GAAGD,KAAK;YACvBvO,SAAS,EAAE4F,EAAE,CAACxJ,GAAG,CAAC3F,KAAK,CAACzE,GAAG,KAAK,CAAC,GAAGwc,KAAK,GAAGD,KAAK,GAAG,CAAC;YACrDvc,GAAG,EAAE4T,EAAE,CAACxJ,GAAG,CAAC3F,KAAK,CAACzE,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG4T,EAAE,CAACxJ,GAAG,CAAC3F,KAAK,CAACzE,GAAG,GAAG;UACzD,CAAC,CAAC;QACN,CAAC,MACI,IAAIuc,KAAK,GAAGC,KAAK,EAAE;UACpBlG,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAAChX,QAAQ,EAAE;YACnC2O,QAAQ,EAAEsO,KAAK,GAAGC,KAAK;YACvBxO,SAAS,EAAE4F,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,CAACzE,GAAG,KAAK,CAAC,GAAGuc,KAAK,GAAGC,KAAK,GAAG,CAAC;YACrDxc,GAAG,EAAE4T,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,CAACzE,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG4T,EAAE,CAACvJ,GAAG,CAAC5F,KAAK,CAACzE,GAAG,GAAG;UACzD,CAAC,CAAC;QACN;QACA,IAAIuc,KAAK,GAAGjG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,EAAE4R,QAAQ,CAACjX,QAAQ,CAAC;QAC9D,IAAImd,KAAK,GAAGlG,QAAQ,CAAC5H,UAAU,CAACkF,EAAE,CAACvJ,GAAG,CAAC3F,GAAG,EAAE4R,QAAQ,CAAChX,QAAQ,CAAC;QAC9D,IAAIid,KAAK,GAAGC,KAAK,EAAE;UACflG,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAACjX,QAAQ,EAAE;YACnC4O,QAAQ,EAAEuO,KAAK,GAAGD,KAAK;YACvBvO,SAAS,EAAE4F,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAGwc,KAAK,GAAGD,KAAK,GAAG,CAAC;YACnDvc,GAAG,EAAE4T,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG4T,EAAE,CAACxJ,GAAG,CAAC1F,GAAG,CAAC1E,GAAG,GAAG;UACrD,CAAC,CAAC;QACN,CAAC,MACI,IAAIuc,KAAK,GAAGC,KAAK,EAAE;UACpBlG,QAAQ,CAAC1I,UAAU,CAAC0I,QAAQ,CAAChX,QAAQ,EAAE;YACnC2O,QAAQ,EAAEsO,KAAK,GAAGC,KAAK;YACvBxO,SAAS,EAAE4F,EAAE,CAACvJ,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAGuc,KAAK,GAAGC,KAAK,GAAG,CAAC;YACnDxc,GAAG,EAAE4T,EAAE,CAACvJ,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG4T,EAAE,CAACvJ,GAAG,CAAC3F,GAAG,CAAC1E,GAAG,GAAG;UACrD,CAAC,CAAC;QACN;MACJ,CAAC,CAAC;MACFsW,QAAQ,CAACjX,QAAQ,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE;QAAEiP,IAAI,EAAE;UAAE7J,KAAK,EAAE;YAAEzE,GAAG,EAAE;UAAE;QAAE;MAAE,CAAC,CAAC;MACzEsW,QAAQ,CAAChX,QAAQ,CAAC,OAAO,CAAC,CAAC,YAAY,EAAE;QAAEgP,IAAI,EAAE;UAAE7J,KAAK,EAAE;YAAEzE,GAAG,EAAE;UAAE;QAAE;MAAE,CAAC,CAAC;IAC7E,CAAC;IACD+d,aAAa,CAAC/gB,SAAS,CAACihB,QAAQ,GAAG,UAAUna,CAAC,EAAE2F,OAAO,EAAE;MACrD,IAAI,CAACyU,UAAU,CAAC,IAAI,CAAC7e,QAAQ,KAAKoK,OAAO,GAAG,IAAI,CAAChB,OAAO,CAAClK,QAAQ,GAAG,IAAI,CAACqK,OAAO,CAACrK,QAAQ,CAAC;IAC9F,CAAC;IACDwf,aAAa,CAAC/gB,SAAS,CAACkhB,UAAU,GAAG,UAAU3f,QAAQ,EAAE;MACrD,IAAI,IAAI,CAAC4f,WAAW,IAAI,KAAK,EACzB;MACJ,IAAIC,EAAE,GAAG,IAAI,CAAC3V,OAAO,CAAClK,QAAQ;MAC9B,IAAI8f,EAAE,GAAG,IAAI,CAACzV,OAAO,CAACrK,QAAQ;MAC9B,IAAI6R,MAAM,GAAG7R,QAAQ,IAAI6f,EAAE;MAC3B,IAAIA,EAAE,CAAC,kBAAkB,CAAC,IAAIC,EAAE,CAAC,kBAAkB,CAAC,EAChD;MACJ,IAAIC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;MACpB,IAAI,IAAI,CAACE,WAAW,IAAIjgB,QAAQ,IAAI+f,GAAG,GAAG,IAAI,CAACG,WAAW,GAAG,GAAG,EAC5D;MACJ,IAAIvZ,CAAC,GAAGkL,MAAM,GAAGgO,EAAE,GAAGC,EAAE;MACxB,IAAI,IAAI,CAACG,WAAW,IAAIjgB,QAAQ,EAAE;QAC9B,IAAI6R,MAAM,IAAI,IAAI,CAACsO,OAAO,IAAIxZ,CAAC,CAACuE,OAAO,CAAC0H,YAAY,CAAC,CAAC,EAClD,OAAO,KACN,IAAI,CAACf,MAAM,IAAI,IAAI,CAACuO,OAAO,IACzBzZ,CAAC,CAACuE,OAAO,CAAC0H,YAAY,CAAC,CAAC,EAC3B;MACR;MACA,IAAIyN,MAAM,GAAGxO,MAAM,GAAGiO,EAAE,GAAGD,EAAE;MAC7B,IAAIS,SAAS,GAAG3Z,CAAC,CAACuE,OAAO,CAAC0H,YAAY,CAAC,CAAC;MACxC,IAAI,CAACgN,WAAW,GAAG,KAAK;MACxB,IAAI/N,MAAM,EAAE;QACR,IAAI,CAACsO,OAAO,GAAGxZ,CAAC,CAACuE,OAAO,CAAC0H,YAAY,CAAC,CAAC;QACvC,IAAI,CAACwN,OAAO,GAAGE,SAAS;MAC5B,CAAC,MACI;QACD,IAAI,CAACH,OAAO,GAAGG,SAAS;QACxB,IAAI,CAACF,OAAO,GAAGzZ,CAAC,CAACuE,OAAO,CAAC0H,YAAY,CAAC,CAAC;MAC3C;MACA,IAAI,CAACqN,WAAW,GAAGjgB,QAAQ;MAC3BqgB,MAAM,CAACnV,OAAO,CAACqV,YAAY,CAACD,SAAS,CAAC;MACtC,IAAI,CAACV,WAAW,GAAG,IAAI;MACvB,IAAI,CAACM,WAAW,GAAGH,GAAG;IAC1B,CAAC;IACDP,aAAa,CAAC/gB,SAAS,CAACghB,YAAY,GAAG,UAAU/N,EAAE,EAAE;MACjD,IAAIA,EAAE,CAAC8O,WAAW,CAAC,CAAC,EAChB;MACJ,IAAI9O,EAAE,CAAC+O,WAAW,CAAC,CAAC,IAAI/O,EAAE,CAACgP,MAAM,IAAI,CAAChP,EAAE,CAACiP,MAAM,EAAE;QAC7CjP,EAAE,CAACiP,MAAM,GAAGjP,EAAE,CAACgP,MAAM;QACrBhP,EAAE,CAACgP,MAAM,GAAG,CAAC;MACjB;MACA,IAAIhc,MAAM,GAAGgN,EAAE,CAAChN,MAAM;MACtB,IAAIkc,WAAW,GAAGlc,MAAM,CAAC1E,QAAQ,CAAC6gB,cAAc,CAACnP,EAAE,CAACiP,MAAM,GAAGjP,EAAE,CAACoP,KAAK,EAAEpP,EAAE,CAACgP,MAAM,GAAGhP,EAAE,CAACoP,KAAK,CAAC;MAC5F,IAAI,CAACF,WAAW,EAAE;QACd,IAAI9O,KAAK,GAAGpN,MAAM,IAAI,IAAI,CAACwF,OAAO,GAAG,IAAI,CAACG,OAAO,GAAG,IAAI,CAACH,OAAO;QAChE,IAAI4H,KAAK,CAAC9R,QAAQ,CAAC6gB,cAAc,CAACnP,EAAE,CAACiP,MAAM,GAAGjP,EAAE,CAACoP,KAAK,EAAEpP,EAAE,CAACgP,MAAM,GAAGhP,EAAE,CAACoP,KAAK,CAAC,EACzEhP,KAAK,CAAC9R,QAAQ,CAAC+gB,QAAQ,CAACrP,EAAE,CAACiP,MAAM,GAAGjP,EAAE,CAACoP,KAAK,EAAEpP,EAAE,CAACgP,MAAM,GAAGhP,EAAE,CAACoP,KAAK,CAAC;QACvE,OAAOpP,EAAE,CAACsP,IAAI,CAAC,CAAC;MACpB;IACJ,CAAC;IACDxB,aAAa,CAAC/gB,SAAS,CAACwO,4BAA4B,GAAG,YAAY;MAC/D,IAAI,CAACmR,2BAA2B,CAAC,IAAI,CAAClU,OAAO,EAAE,IAAI,CAAClB,OAAO,CAAC;MAC5D,IAAI,CAACoV,2BAA2B,CAAC,IAAI,CAAC/T,OAAO,EAAE,IAAI,CAACvB,OAAO,CAAC;IAChE,CAAC;IACD0W,aAAa,CAAC/gB,SAAS,CAAC2f,2BAA2B,GAAG,UAAU1Z,MAAM,EAAE4M,MAAM,EAAE;MAC5E5M,MAAM,CAACwG,OAAO,CAAC5F,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAACoa,QAAQ,CAAC;MACnDhb,MAAM,CAACwG,OAAO,CAAC5F,EAAE,CAAC,YAAY,EAAE,IAAI,CAAC0C,YAAY,CAAC;MAClDtD,MAAM,CAACwG,OAAO,CAACyK,gBAAgB,CAACrE,MAAM,CAAC;MACvC5M,MAAM,CAAC6L,SAAS,CAACjL,EAAE,CAAC,cAAc,EAAE,IAAI,CAAC4C,QAAQ,CAAC;MAClDxD,MAAM,CAAC6L,SAAS,CAACjL,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC4C,QAAQ,CAAC;MACrDxD,MAAM,CAACwG,OAAO,CAAC5F,EAAE,CAAC,iBAAiB,EAAE,IAAI,CAAC6C,iBAAiB,CAAC;MAC5DzD,MAAM,CAACwG,OAAO,CAAC5F,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAAC6C,iBAAiB,CAAC;IAC/D,CAAC;IACDqX,aAAa,CAAC/gB,SAAS,CAACqO,4BAA4B,GAAG,YAAY;MAC/D,IAAI,CAACuR,sBAAsB,CAAC,IAAI,CAACnU,OAAO,EAAE,IAAI,CAAClB,OAAO,CAAC;MACvD,IAAI,CAACqV,sBAAsB,CAAC,IAAI,CAAChU,OAAO,EAAE,IAAI,CAACvB,OAAO,CAAC;IAC3D,CAAC;IACD0W,aAAa,CAAC/gB,SAAS,CAAC4f,sBAAsB,GAAG,UAAU3Z,MAAM,EAAE4M,MAAM,EAAE;MACvE5M,MAAM,CAACwG,OAAO,CAAC1E,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAACkZ,QAAQ,CAAC;MACpDhb,MAAM,CAACwG,OAAO,CAAC1E,GAAG,CAAC,YAAY,EAAE,IAAI,CAACwB,YAAY,CAAC;MACnDtD,MAAM,CAACwG,OAAO,CAAC0K,YAAY,CAACtE,MAAM,CAACuE,EAAE,CAAC;MACtCnR,MAAM,CAAC6L,SAAS,CAAC/J,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC0B,QAAQ,CAAC;MACnDxD,MAAM,CAAC6L,SAAS,CAAC/J,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC0B,QAAQ,CAAC;MACtDxD,MAAM,CAACwG,OAAO,CAAC1E,GAAG,CAAC,iBAAiB,EAAE,IAAI,CAAC2B,iBAAiB,CAAC;MAC7DzD,MAAM,CAACwG,OAAO,CAAC1E,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC2B,iBAAiB,CAAC;IAChE,CAAC;IACDqX,aAAa,CAAC/gB,SAAS,CAACyc,oBAAoB,GAAG,YAAY;MACvD,IAAI,CAAChR,OAAO,CAAClK,QAAQ,CAACsF,EAAE,CAAC,aAAa,EAAE,IAAI,CAACwC,aAAa,CAAC;MAC3D,IAAI,CAACuC,OAAO,CAACrK,QAAQ,CAACsF,EAAE,CAAC,aAAa,EAAE,IAAI,CAACwC,aAAa,CAAC;MAC3D,IAAI,CAACoC,OAAO,CAAC5E,EAAE,CAAC,YAAY,EAAE,IAAI,CAACma,YAAY,CAAC;MAChD,IAAI,CAACpV,OAAO,CAAC/E,EAAE,CAAC,YAAY,EAAE,IAAI,CAACma,YAAY,CAAC;MAChD,IAAI,CAACvV,OAAO,CAAC5E,EAAE,CAAC,OAAO,EAAE,IAAI,CAACyC,OAAO,CAAC;MACtC,IAAI,CAACsC,OAAO,CAAC/E,EAAE,CAAC,OAAO,EAAE,IAAI,CAACyC,OAAO,CAAC;IAC1C,CAAC;IACDyX,aAAa,CAAC/gB,SAAS,CAAC0T,oBAAoB,GAAG,YAAY;MACvD,IAAI,CAACrF,4BAA4B,CAAC,CAAC;MACnC,IAAI,CAACC,qBAAqB,CAAC,CAAC;MAC5B,IAAI,CAAC7C,OAAO,CAAClK,QAAQ,CAACwG,GAAG,CAAC,aAAa,EAAE,IAAI,CAACsB,aAAa,CAAC;MAC5D,IAAI,CAACuC,OAAO,CAACrK,QAAQ,CAACwG,GAAG,CAAC,aAAa,EAAE,IAAI,CAACsB,aAAa,CAAC;MAC5D,IAAI,CAACmZ,0BAA0B,CAAC,IAAI,CAAC/W,OAAO,CAAC;MAC7C,IAAI,CAAC+W,0BAA0B,CAAC,IAAI,CAAC5W,OAAO,CAAC;IACjD,CAAC;IACDmV,aAAa,CAAC/gB,SAAS,CAACwiB,0BAA0B,GAAG,UAAUvc,MAAM,EAAE;MACnEA,MAAM,CAAC8B,GAAG,CAAC,YAAY,EAAE,IAAI,CAACiZ,YAAY,CAAC;MAC3C/a,MAAM,CAAC8B,GAAG,CAAC,OAAO,EAAE,IAAI,CAACuB,OAAO,CAAC;IACrC,CAAC;IACD,OAAOyX,aAAa;EACxB,CAAC,CAAC7X,YAAY,CAAE;EAChB7J,OAAO,CAAC0hB,aAAa,GAAGA,aAAa;AAErC,CAAC,CAAC;AAEF7hB,GAAG,CAACC,MAAM,CAAC,gCAAgC,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,WAAW,EAAC,6BAA6B,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC,YAAY;;EACrK,IAAIC,SAAS,GAAI,IAAI,IAAI,IAAI,CAACA,SAAS,IAAM,YAAY;IACrD,IAAIC,aAAa,GAAG,SAAAA,CAAUC,CAAC,EAAEC,CAAC,EAAE;MAChCF,aAAa,GAAGG,MAAM,CAACC,cAAc,IAChC;QAAEC,SAAS,EAAE;MAAG,CAAC,YAAYC,KAAK,IAAI,UAAUL,CAAC,EAAEC,CAAC,EAAE;QAAED,CAAC,CAACI,SAAS,GAAGH,CAAC;MAAE,CAAE,IAC5E,UAAUD,CAAC,EAAEC,CAAC,EAAE;QAAE,KAAK,IAAIK,CAAC,IAAIL,CAAC,EAAE,IAAIC,MAAM,CAACK,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,CAAC,EAAEK,CAAC,CAAC,EAAEN,CAAC,CAACM,CAAC,CAAC,GAAGL,CAAC,CAACK,CAAC,CAAC;MAAE,CAAC;MACrG,OAAOP,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;IAC9B,CAAC;IACD,OAAO,UAAUD,CAAC,EAAEC,CAAC,EAAE;MACnB,IAAI,OAAOA,CAAC,KAAK,UAAU,IAAIA,CAAC,KAAK,IAAI,EACrC,MAAM,IAAIS,SAAS,CAAC,sBAAsB,GAAGC,MAAM,CAACV,CAAC,CAAC,GAAG,+BAA+B,CAAC;MAC7FF,aAAa,CAACC,CAAC,EAAEC,CAAC,CAAC;MACnB,SAASW,EAAEA,CAAA,EAAG;QAAE,IAAI,CAACC,WAAW,GAAGb,CAAC;MAAE;MACtCA,CAAC,CAACO,SAAS,GAAGN,CAAC,KAAK,IAAI,GAAGC,MAAM,CAACY,MAAM,CAACb,CAAC,CAAC,IAAIW,EAAE,CAACL,SAAS,GAAGN,CAAC,CAACM,SAAS,EAAE,IAAIK,EAAE,CAAC,CAAC,CAAC;IACxF,CAAC;EACL,CAAC,CAAE,CAAC;EACJ,IAAIoiB,WAAW,GAAI,IAAI,IAAI,IAAI,CAACA,WAAW,IAAK,UAAUC,OAAO,EAAEC,IAAI,EAAE;IACrE,IAAIC,CAAC,GAAG;QAAEC,KAAK,EAAE,CAAC;QAAEC,IAAI,EAAE,SAAAA,CAAA,EAAW;UAAE,IAAIC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,CAAC,CAAC,CAAC,CAAC;UAAE,OAAOA,CAAC,CAAC,CAAC,CAAC;QAAE,CAAC;QAAEC,IAAI,EAAE,EAAE;QAAEC,GAAG,EAAE;MAAG,CAAC;MAAEC,CAAC;MAAEC,CAAC;MAAEJ,CAAC;MAAEK,CAAC,GAAGzjB,MAAM,CAACY,MAAM,CAAC,CAAC,OAAO8iB,QAAQ,KAAK,UAAU,GAAGA,QAAQ,GAAG1jB,MAAM,EAAEK,SAAS,CAAC;IAChM,OAAOojB,CAAC,CAACpiB,IAAI,GAAGsiB,IAAI,CAAC,CAAC,CAAC,EAAEF,CAAC,CAAC,OAAO,CAAC,GAAGE,IAAI,CAAC,CAAC,CAAC,EAAEF,CAAC,CAAC,QAAQ,CAAC,GAAGE,IAAI,CAAC,CAAC,CAAC,EAAE,OAAO3iB,MAAM,KAAK,UAAU,KAAKyiB,CAAC,CAACziB,MAAM,CAACC,QAAQ,CAAC,GAAG,YAAW;MAAE,OAAO,IAAI;IAAE,CAAC,CAAC,EAAEwiB,CAAC;IAC3J,SAASE,IAAIA,CAACrb,CAAC,EAAE;MAAE,OAAO,UAAUsb,CAAC,EAAE;QAAE,OAAOC,IAAI,CAAC,CAACvb,CAAC,EAAEsb,CAAC,CAAC,CAAC;MAAE,CAAC;IAAE;IACjE,SAASC,IAAIA,CAACC,EAAE,EAAE;MACd,IAAIP,CAAC,EAAE,MAAM,IAAI/iB,SAAS,CAAC,iCAAiC,CAAC;MAC7D,OAAOijB,CAAC,KAAKA,CAAC,GAAG,CAAC,EAAEK,EAAE,CAAC,CAAC,CAAC,KAAKb,CAAC,GAAG,CAAC,CAAC,CAAC,EAAEA,CAAC,EAAE,IAAI;QAC1C,IAAIM,CAAC,GAAG,CAAC,EAAEC,CAAC,KAAKJ,CAAC,GAAGU,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,GAAGN,CAAC,CAAC,QAAQ,CAAC,GAAGM,EAAE,CAAC,CAAC,CAAC,GAAGN,CAAC,CAAC,OAAO,CAAC,KAAK,CAACJ,CAAC,GAAGI,CAAC,CAAC,QAAQ,CAAC,KAAKJ,CAAC,CAAC7iB,IAAI,CAACijB,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,CAAC,CAACniB,IAAI,CAAC,IAAI,CAAC,CAAC+hB,CAAC,GAAGA,CAAC,CAAC7iB,IAAI,CAACijB,CAAC,EAAEM,EAAE,CAAC,CAAC,CAAC,CAAC,EAAEviB,IAAI,EAAE,OAAO6hB,CAAC;QAC5J,IAAII,CAAC,GAAG,CAAC,EAAEJ,CAAC,EAAEU,EAAE,GAAG,CAACA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAEV,CAAC,CAAC9hB,KAAK,CAAC;QACvC,QAAQwiB,EAAE,CAAC,CAAC,CAAC;UACT,KAAK,CAAC;UAAE,KAAK,CAAC;YAAEV,CAAC,GAAGU,EAAE;YAAE;UACxB,KAAK,CAAC;YAAEb,CAAC,CAACC,KAAK,EAAE;YAAE,OAAO;cAAE5hB,KAAK,EAAEwiB,EAAE,CAAC,CAAC,CAAC;cAAEviB,IAAI,EAAE;YAAM,CAAC;UACvD,KAAK,CAAC;YAAE0hB,CAAC,CAACC,KAAK,EAAE;YAAEM,CAAC,GAAGM,EAAE,CAAC,CAAC,CAAC;YAAEA,EAAE,GAAG,CAAC,CAAC,CAAC;YAAE;UACxC,KAAK,CAAC;YAAEA,EAAE,GAAGb,CAAC,CAACK,GAAG,CAACS,GAAG,CAAC,CAAC;YAAEd,CAAC,CAACI,IAAI,CAACU,GAAG,CAAC,CAAC;YAAE;UACxC;YACI,IAAI,EAAEX,CAAC,GAAGH,CAAC,CAACI,IAAI,EAAED,CAAC,GAAGA,CAAC,CAAChiB,MAAM,GAAG,CAAC,IAAIgiB,CAAC,CAACA,CAAC,CAAChiB,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK0iB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;cAAEb,CAAC,GAAG,CAAC;cAAE;YAAU;YAC3G,IAAIa,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAACV,CAAC,IAAKU,EAAE,CAAC,CAAC,CAAC,GAAGV,CAAC,CAAC,CAAC,CAAC,IAAIU,EAAE,CAAC,CAAC,CAAC,GAAGV,CAAC,CAAC,CAAC,CAAE,CAAC,EAAE;cAAEH,CAAC,CAACC,KAAK,GAAGY,EAAE,CAAC,CAAC,CAAC;cAAE;YAAO;YACrF,IAAIA,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,IAAIb,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC,EAAE;cAAEH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC;cAAEA,CAAC,GAAGU,EAAE;cAAE;YAAO;YACpE,IAAIV,CAAC,IAAIH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC,EAAE;cAAEH,CAAC,CAACC,KAAK,GAAGE,CAAC,CAAC,CAAC,CAAC;cAAEH,CAAC,CAACK,GAAG,CAAC9gB,IAAI,CAACshB,EAAE,CAAC;cAAE;YAAO;YAClE,IAAIV,CAAC,CAAC,CAAC,CAAC,EAAEH,CAAC,CAACK,GAAG,CAACS,GAAG,CAAC,CAAC;YACrBd,CAAC,CAACI,IAAI,CAACU,GAAG,CAAC,CAAC;YAAE;QACtB;QACAD,EAAE,GAAGd,IAAI,CAACziB,IAAI,CAACwiB,OAAO,EAAEE,CAAC,CAAC;MAC9B,CAAC,CAAC,OAAO9b,CAAC,EAAE;QAAE2c,EAAE,GAAG,CAAC,CAAC,EAAE3c,CAAC,CAAC;QAAEqc,CAAC,GAAG,CAAC;MAAE,CAAC,SAAS;QAAED,CAAC,GAAGH,CAAC,GAAG,CAAC;MAAE;MACzD,IAAIU,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,MAAMA,EAAE,CAAC,CAAC,CAAC;MAAE,OAAO;QAAExiB,KAAK,EAAEwiB,EAAE,CAAC,CAAC,CAAC,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC;QAAEviB,IAAI,EAAE;MAAK,CAAC;IACpF;EACJ,CAAC;EACD,IAAIV,QAAQ,GAAI,IAAI,IAAI,IAAI,CAACA,QAAQ,IAAK,UAASC,CAAC,EAAE;IAClD,IAAIC,CAAC,GAAG,OAAOC,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,QAAQ;MAAEC,CAAC,GAAGH,CAAC,IAAID,CAAC,CAACC,CAAC,CAAC;MAAEI,CAAC,GAAG,CAAC;IAC7E,IAAID,CAAC,EAAE,OAAOA,CAAC,CAACX,IAAI,CAACO,CAAC,CAAC;IACvB,IAAIA,CAAC,IAAI,OAAOA,CAAC,CAACM,MAAM,KAAK,QAAQ,EAAE,OAAO;MAC1CC,IAAI,EAAE,SAAAA,CAAA,EAAY;QACd,IAAIP,CAAC,IAAIK,CAAC,IAAIL,CAAC,CAACM,MAAM,EAAEN,CAAC,GAAG,KAAK,CAAC;QAClC,OAAO;UAAEQ,KAAK,EAAER,CAAC,IAAIA,CAAC,CAACK,CAAC,EAAE,CAAC;UAAEI,IAAI,EAAE,CAACT;QAAE,CAAC;MAC3C;IACJ,CAAC;IACD,MAAM,IAAIN,SAAS,CAACO,CAAC,GAAG,yBAAyB,GAAG,iCAAiC,CAAC;EAC1F,CAAC;EACD,IAAIyC,EAAE;EACN,IAAIyS,EAAE,EAAE+N,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;EACtB,SAASC,MAAMA,CAACC,GAAG,EAAE3Q,KAAK,EAAE4Q,UAAU,EAAE;IACpC,IAAIA,UAAU,KAAK,KAAK,CAAC,EAAE;MAAEA,UAAU,GAAG,SAAAA,CAAU5gB,CAAC,EAAE3D,CAAC,EAAE;QAAE,OAAO2D,CAAC,KAAK3D,CAAC;MAAE,CAAC;IAAE;IAC/E,IAAIskB,GAAG,KAAK3Q,KAAK,EAAE;MACf,OAAO,IAAI;IACf;IACA,IAAI,CAAC2Q,GAAG,IAAI,CAAC3Q,KAAK,EAAE;MAChB,OAAO,KAAK;IAChB;IACA,IAAI2Q,GAAG,CAACjjB,MAAM,KAAKsS,KAAK,CAACtS,MAAM,EAAE;MAC7B,OAAO,KAAK;IAChB;IACA,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEojB,GAAG,GAAGF,GAAG,CAACjjB,MAAM,EAAED,CAAC,GAAGojB,GAAG,EAAEpjB,CAAC,EAAE,EAAE;MAC5C,IAAI,CAACmjB,UAAU,CAACD,GAAG,CAACljB,CAAC,CAAC,EAAEuS,KAAK,CAACvS,CAAC,CAAC,CAAC,EAAE;QAC/B,OAAO,KAAK;MAChB;IACJ;IACA,OAAO,IAAI;EACf;EACA,SAASqjB,eAAeA,CAACC,KAAK,EAAEC,eAAe,EAAE;IAC7C,IAAIC,YAAY,EAAEC,IAAI,EAAEC,OAAO,EAAEC,SAAS,EAAEC,IAAI,EAAEjf,KAAK;IACvD,IAAIvC,GAAG,EAAEC,EAAE;IACX,OAAOsf,WAAW,CAAC,IAAI,EAAE,UAAUkC,EAAE,EAAE;MACnC,QAAQA,EAAE,CAAC9B,KAAK;QACZ,KAAK,CAAC;UACF8B,EAAE,CAAC3B,IAAI,CAAC7gB,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;UAC3BqiB,OAAO,GAAGhkB,QAAQ,CAAC4jB,KAAK,CAAC,EAAEK,SAAS,GAAGD,OAAO,CAACxjB,IAAI,CAAC,CAAC;UACrD2jB,EAAE,CAAC9B,KAAK,GAAG,CAAC;QAChB,KAAK,CAAC;UACF,IAAI,CAAC,CAAC4B,SAAS,CAACvjB,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;UAC7CwjB,IAAI,GAAGD,SAAS,CAACxjB,KAAK;UACtB,IAAI,EAAEsjB,IAAI,KAAK1Z,SAAS,IAAIwZ,eAAe,CAACE,IAAI,EAAEG,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;UACjFJ,YAAY,CAACniB,IAAI,CAACuiB,IAAI,CAAC;UACvB,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAC3B,KAAK,CAAC;UACF,IAAI,CAACJ,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;UAC1C,OAAO,CAAC,CAAC,CAAC,WAAWA,YAAY,CAAC;QACtC,KAAK,CAAC;UACFK,EAAE,CAAC7B,IAAI,CAAC,CAAC;UACT6B,EAAE,CAAC9B,KAAK,GAAG,CAAC;QAChB,KAAK,CAAC;UACFyB,YAAY,GAAG,CAACI,IAAI,CAAC;UACrBC,EAAE,CAAC9B,KAAK,GAAG,CAAC;QAChB,KAAK,CAAC;UACF0B,IAAI,GAAGG,IAAI;UACXC,EAAE,CAAC9B,KAAK,GAAG,CAAC;QAChB,KAAK,CAAC;UACF4B,SAAS,GAAGD,OAAO,CAACxjB,IAAI,CAAC,CAAC;UAC1B,OAAO,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAC3B,KAAK,CAAC;UAAE,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAChC,KAAK,CAAC;UACFyE,KAAK,GAAGkf,EAAE,CAAC7B,IAAI,CAAC,CAAC;UACjB5f,GAAG,GAAG;YAAEwC,KAAK,EAAED;UAAM,CAAC;UACtB,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;QAC5B,KAAK,CAAC;UACF,IAAI;YACA,IAAIgf,SAAS,IAAI,CAACA,SAAS,CAACvjB,IAAI,KAAKiC,EAAE,GAAGqhB,OAAO,CAAC7e,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACskB,OAAO,CAAC;UAC/E,CAAC,SACO;YAAE,IAAIthB,GAAG,EAAE,MAAMA,GAAG,CAACwC,KAAK;UAAE;UACpC,OAAO,CAAC,CAAC,CAAC,eAAe;QAC7B,KAAK,EAAE;UACH,IAAI,CAAC4e,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC;UAC3C,OAAO,CAAC,CAAC,CAAC,WAAWA,YAAY,CAAC;QACtC,KAAK,EAAE;UACHK,EAAE,CAAC7B,IAAI,CAAC,CAAC;UACT6B,EAAE,CAAC9B,KAAK,GAAG,EAAE;QACjB,KAAK,EAAE;UAAE,OAAO,CAAC,CAAC,CAAC,WAAW;MAClC;IACJ,CAAC,CAAC;EACN;EACA,SAAS+B,eAAeA,CAACC,GAAG,EAAE3B,CAAC,EAAE;IAC7B,KAAK,IAAIpiB,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI+jB,GAAG,CAAC9jB,MAAM,EAAED,CAAC,EAAE,EAAE;MAClCoiB,CAAC,CAACpiB,CAAC,KAAK,CAAC,GAAG+J,SAAS,GAAGga,GAAG,CAAC/jB,CAAC,GAAG,CAAC,CAAC,EAAEA,CAAC,KAAK+jB,GAAG,CAAC9jB,MAAM,GAAG8J,SAAS,GAAGga,GAAG,CAAC/jB,CAAC,CAAC,CAAC;IAC9E;EACJ;EACA,SAASgkB,oBAAoBA,CAACD,GAAG,EAAE3B,CAAC,EAAE;IAClC,KAAK,IAAIpiB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+jB,GAAG,CAAC9jB,MAAM,EAAED,CAAC,EAAE,EAAE;MACjCoiB,CAAC,CAACpiB,CAAC,KAAK,CAAC,GAAG+J,SAAS,GAAGga,GAAG,CAAC/jB,CAAC,GAAG,CAAC,CAAC,EAAE+jB,GAAG,CAAC/jB,CAAC,CAAC,EAAEA,CAAC,GAAG,CAAC,KAAK+jB,GAAG,CAAC9jB,MAAM,GAAG8J,SAAS,GAAGga,GAAG,CAAC/jB,CAAC,GAAG,CAAC,CAAC,CAAC;IAC9F;EACJ;EACA,SAASikB,QAAQA,CAACF,GAAG,EAAET,KAAK,EAAE;IAC1B,IAAIY,GAAG,EAAE7hB,EAAE;IACX,IAAI;MACA,KAAK,IAAI8hB,OAAO,GAAGzkB,QAAQ,CAAC4jB,KAAK,CAAC,EAAEc,SAAS,GAAGD,OAAO,CAACjkB,IAAI,CAAC,CAAC,EAAE,CAACkkB,SAAS,CAAChkB,IAAI,EAAEgkB,SAAS,GAAGD,OAAO,CAACjkB,IAAI,CAAC,CAAC,EAAE;QACzG,IAAI0jB,IAAI,GAAGQ,SAAS,CAACjkB,KAAK;QAC1B4jB,GAAG,CAAC1iB,IAAI,CAACuiB,IAAI,CAAC;MAClB;IACJ,CAAC,CACD,OAAOS,KAAK,EAAE;MAAEH,GAAG,GAAG;QAAEtf,KAAK,EAAEyf;MAAM,CAAC;IAAE,CAAC,SACjC;MACJ,IAAI;QACA,IAAID,SAAS,IAAI,CAACA,SAAS,CAAChkB,IAAI,KAAKiC,EAAE,GAAG8hB,OAAO,CAACtf,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAAC+kB,OAAO,CAAC;MAC/E,CAAC,SACO;QAAE,IAAID,GAAG,EAAE,MAAMA,GAAG,CAACtf,KAAK;MAAE;IACxC;EACJ;EACA,SAAS0f,SAASA,CAACC,QAAQ,EAAEC,UAAU,EAAE;IACrC,OAAO,UAAUjiB,CAAC,EAAE3D,CAAC,EAAE;MAAE,OAAO4lB,UAAU,CAACD,QAAQ,CAAChiB,CAAC,CAAC,EAAEgiB,QAAQ,CAAC3lB,CAAC,CAAC,CAAC;IAAE,CAAC;EAC3E;EACA,IAAI6lB,gBAAgB,GAAG,SAAAA,CAAUliB,CAAC,EAAE3D,CAAC,EAAE;IAAE,OAAO2D,CAAC,GAAG3D,CAAC;EAAE,CAAC;EACxD,SAAS8lB,YAAYA,CAACF,UAAU,EAAE;IAC9B,OAAO,UAAUjiB,CAAC,EAAE3D,CAAC,EAAE;MAAE,OAAO,CAAC4lB,UAAU,CAACjiB,CAAC,EAAE3D,CAAC,CAAC;IAAE,CAAC;EACxD;EACA,IAAI+lB,kBAAkB,GAAG,aAAe,UAAUpkB,MAAM,EAAE;IACtD9B,SAAS,CAACkmB,kBAAkB,EAAEpkB,MAAM,CAAC;IACrC,SAASokB,kBAAkBA,CAACC,OAAO,EAAE;MACjC,IAAIjkB,KAAK,GAAGJ,MAAM,CAACnB,IAAI,CAAC,IAAI,EAAEwlB,OAAO,IAAI,6BAA6B,CAAC,IAAI,IAAI;MAC/E/lB,MAAM,CAACC,cAAc,CAAC6B,KAAK,EAAEgkB,kBAAkB,CAACzlB,SAAS,CAAC;MAC1D,OAAOyB,KAAK;IAChB;IACA,OAAOgkB,kBAAkB;EAC7B,CAAC,CAACE,KAAK,CAAE;EACT,SAASC,MAAMA,CAACC,SAAS,EAAEH,OAAO,EAAE;IAChC,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;MAAEA,OAAO,GAAG,kBAAkB;IAAE;IACxD,IAAI,CAACG,SAAS,EAAE;MACZ,MAAM,IAAIJ,kBAAkB,CAAC,oBAAoB,CAACK,MAAM,CAACJ,OAAO,CAAC,CAAC;IACtE;EACJ;EACA,SAASK,QAAQA,CAACF,SAAS,EAAE;IACzBA,SAAS,CAAC,CAAC;EACf;EACA,SAASG,kBAAkBA,CAAC5B,KAAK,EAAE6B,SAAS,EAAE;IAC1C,IAAInlB,CAAC,GAAG,CAAC;IACT,OAAOA,CAAC,GAAGsjB,KAAK,CAACrjB,MAAM,GAAG,CAAC,EAAE;MACzB,IAAIsC,CAAC,GAAG+gB,KAAK,CAACtjB,CAAC,CAAC;MAChB,IAAIpB,CAAC,GAAG0kB,KAAK,CAACtjB,CAAC,GAAG,CAAC,CAAC;MACpB,IAAI,CAACmlB,SAAS,CAAC5iB,CAAC,EAAE3D,CAAC,CAAC,EAAE;QAClB,OAAO,KAAK;MAChB;MACAoB,CAAC,EAAE;IACP;IACA,OAAO,IAAI;EACf;EACA,IAAIolB,WAAW,GAAG,aAAe,YAAY;IACzC,SAASA,WAAWA,CAACze,KAAK,EAAE0e,YAAY,EAAE;MACtC,IAAI,CAAC1e,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC0e,YAAY,GAAGA,YAAY;MAChC,IAAI1e,KAAK,GAAG0e,YAAY,EAAE;QACtB,MAAM,IAAIV,kBAAkB,CAAC,iBAAiB,CAACK,MAAM,CAAC,IAAI,CAACnP,QAAQ,CAAC,CAAC,CAAC,CAAC;MAC3E;IACJ;IACAuP,WAAW,CAACE,MAAM,GAAG,UAAU3e,KAAK,EAAE0e,YAAY,EAAE;MAChD,OAAO,IAAID,WAAW,CAACze,KAAK,EAAE0e,YAAY,CAAC;IAC/C,CAAC;IACDD,WAAW,CAACG,QAAQ,GAAG,UAAUvT,KAAK,EAAEwT,YAAY,EAAE;MAClD,IAAIxlB,CAAC,GAAG,CAAC;MACT,OAAOA,CAAC,GAAGwlB,YAAY,CAACvlB,MAAM,IAAIulB,YAAY,CAACxlB,CAAC,CAAC,CAACqlB,YAAY,GAAGrT,KAAK,CAACrL,KAAK,EAAE;QAC1E3G,CAAC,EAAE;MACP;MACA,IAAIylB,CAAC,GAAGzlB,CAAC;MACT,OAAOylB,CAAC,GAAGD,YAAY,CAACvlB,MAAM,IAAIulB,YAAY,CAACC,CAAC,CAAC,CAAC9e,KAAK,IAAIqL,KAAK,CAACqT,YAAY,EAAE;QAC3EI,CAAC,EAAE;MACP;MACA,IAAIzlB,CAAC,KAAKylB,CAAC,EAAE;QACTD,YAAY,CAACE,MAAM,CAAC1lB,CAAC,EAAE,CAAC,EAAEgS,KAAK,CAAC;MACpC,CAAC,MACI;QACD,IAAIrL,KAAK,GAAGpD,IAAI,CAACsR,GAAG,CAAC7C,KAAK,CAACrL,KAAK,EAAE6e,YAAY,CAACxlB,CAAC,CAAC,CAAC2G,KAAK,CAAC;QACxD,IAAIC,GAAG,GAAGrD,IAAI,CAACgQ,GAAG,CAACvB,KAAK,CAACqT,YAAY,EAAEG,YAAY,CAACC,CAAC,GAAG,CAAC,CAAC,CAACJ,YAAY,CAAC;QACxEG,YAAY,CAACE,MAAM,CAAC1lB,CAAC,EAAEylB,CAAC,GAAGzlB,CAAC,EAAE,IAAIolB,WAAW,CAACze,KAAK,EAAEC,GAAG,CAAC,CAAC;MAC9D;IACJ,CAAC;IACDwe,WAAW,CAACO,SAAS,GAAG,UAAUhf,KAAK,EAAE0e,YAAY,EAAE;MACnD,IAAI1e,KAAK,GAAG0e,YAAY,EAAE;QACtB,OAAOtb,SAAS;MACpB;MACA,OAAO,IAAIqb,WAAW,CAACze,KAAK,EAAE0e,YAAY,CAAC;IAC/C,CAAC;IACDD,WAAW,CAACQ,QAAQ,GAAG,UAAU3lB,MAAM,EAAE;MACrC,OAAO,IAAImlB,WAAW,CAAC,CAAC,EAAEnlB,MAAM,CAAC;IACrC,CAAC;IACDmlB,WAAW,CAACS,gBAAgB,GAAG,UAAUlf,KAAK,EAAE1G,MAAM,EAAE;MACpD,OAAO,IAAImlB,WAAW,CAACze,KAAK,EAAEA,KAAK,GAAG1G,MAAM,CAAC;IACjD,CAAC;IACDmlB,WAAW,CAACU,OAAO,GAAG,UAAUC,MAAM,EAAE;MACpC,OAAO,IAAIX,WAAW,CAACW,MAAM,EAAEA,MAAM,CAAC;IAC1C,CAAC;IACDlnB,MAAM,CAACmnB,cAAc,CAACZ,WAAW,CAAClmB,SAAS,EAAE,SAAS,EAAE;MACpDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC5Q,KAAK,KAAK,IAAI,CAAC0e,YAAY;MAC3C,CAAC;MACDY,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFd,WAAW,CAAClmB,SAAS,CAACinB,KAAK,GAAG,UAAUJ,MAAM,EAAE;MAC5C,OAAO,IAAIX,WAAW,CAAC,IAAI,CAACze,KAAK,GAAGof,MAAM,EAAE,IAAI,CAACV,YAAY,GAAGU,MAAM,CAAC;IAC3E,CAAC;IACDX,WAAW,CAAClmB,SAAS,CAACknB,UAAU,GAAG,UAAUL,MAAM,EAAE;MACjD,OAAO,IAAIX,WAAW,CAAC,IAAI,CAACze,KAAK,GAAGof,MAAM,EAAE,IAAI,CAACV,YAAY,CAAC;IAClE,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAACmnB,QAAQ,GAAG,UAAUN,MAAM,EAAE;MAC/C,OAAO,IAAIX,WAAW,CAAC,IAAI,CAACze,KAAK,EAAE,IAAI,CAAC0e,YAAY,GAAGU,MAAM,CAAC;IAClE,CAAC;IACDlnB,MAAM,CAACmnB,cAAc,CAACZ,WAAW,CAAClmB,SAAS,EAAE,QAAQ,EAAE;MACnDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC8N,YAAY,GAAG,IAAI,CAAC1e,KAAK;MACzC,CAAC;MACDsf,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFd,WAAW,CAAClmB,SAAS,CAAC2W,QAAQ,GAAG,YAAY;MACzC,OAAO,GAAG,CAACmP,MAAM,CAAC,IAAI,CAACre,KAAK,EAAE,IAAI,CAAC,CAACqe,MAAM,CAAC,IAAI,CAACK,YAAY,EAAE,GAAG,CAAC;IACtE,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAAC+jB,MAAM,GAAG,UAAU1Q,KAAK,EAAE;MAC5C,OAAO,IAAI,CAAC5L,KAAK,KAAK4L,KAAK,CAAC5L,KAAK,IAAI,IAAI,CAAC0e,YAAY,KAAK9S,KAAK,CAAC8S,YAAY;IACjF,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAAConB,aAAa,GAAG,UAAU/T,KAAK,EAAE;MACnD,OAAO,IAAI,CAAC5L,KAAK,IAAI4L,KAAK,CAAC5L,KAAK,IAAI4L,KAAK,CAAC8S,YAAY,IAAI,IAAI,CAACA,YAAY;IAC/E,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAACuV,QAAQ,GAAG,UAAUsR,MAAM,EAAE;MAC/C,OAAO,IAAI,CAACpf,KAAK,IAAIof,MAAM,IAAIA,MAAM,GAAG,IAAI,CAACV,YAAY;IAC7D,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAACqnB,IAAI,GAAG,UAAUhU,KAAK,EAAE;MAC1C,OAAO,IAAI6S,WAAW,CAAC7hB,IAAI,CAACsR,GAAG,CAAC,IAAI,CAAClO,KAAK,EAAE4L,KAAK,CAAC5L,KAAK,CAAC,EAAEpD,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC8R,YAAY,EAAE9S,KAAK,CAAC8S,YAAY,CAAC,CAAC;IAC9G,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAACsnB,SAAS,GAAG,UAAUjU,KAAK,EAAE;MAC/C,IAAI5L,KAAK,GAAGpD,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC5M,KAAK,EAAE4L,KAAK,CAAC5L,KAAK,CAAC;MAC7C,IAAIC,GAAG,GAAGrD,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwQ,YAAY,EAAE9S,KAAK,CAAC8S,YAAY,CAAC;MACzD,IAAI1e,KAAK,IAAIC,GAAG,EAAE;QACd,OAAO,IAAIwe,WAAW,CAACze,KAAK,EAAEC,GAAG,CAAC;MACtC;MACA,OAAOmD,SAAS;IACpB,CAAC;IACDqb,WAAW,CAAClmB,SAAS,CAACunB,kBAAkB,GAAG,UAAUzU,KAAK,EAAE;MACxD,IAAIrL,KAAK,GAAGpD,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC5M,KAAK,EAAEqL,KAAK,CAACrL,KAAK,CAAC;MAC7C,IAAIC,GAAG,GAAGrD,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwQ,YAAY,EAAErT,KAAK,CAACqT,YAAY,CAAC;MACzD,OAAO9hB,IAAI,CAACgQ,GAAG,CAAC,CAAC,EAAE3M,GAAG,GAAGD,KAAK,CAAC;IACnC,CAAC;IACDye,WAAW,CAAClmB,SAAS,CAACwnB,UAAU,GAAG,UAAUnU,KAAK,EAAE;MAChD,IAAI5L,KAAK,GAAGpD,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC5M,KAAK,EAAE4L,KAAK,CAAC5L,KAAK,CAAC;MAC7C,IAAIC,GAAG,GAAGrD,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwQ,YAAY,EAAE9S,KAAK,CAAC8S,YAAY,CAAC;MACzD,OAAO1e,KAAK,GAAGC,GAAG;IACtB,CAAC;IACDwe,WAAW,CAAClmB,SAAS,CAACynB,mBAAmB,GAAG,UAAUpU,KAAK,EAAE;MACzD,IAAI5L,KAAK,GAAGpD,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC5M,KAAK,EAAE4L,KAAK,CAAC5L,KAAK,CAAC;MAC7C,IAAIC,GAAG,GAAGrD,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwQ,YAAY,EAAE9S,KAAK,CAAC8S,YAAY,CAAC;MACzD,OAAO1e,KAAK,IAAIC,GAAG;IACvB,CAAC;IACDwe,WAAW,CAAClmB,SAAS,CAAC0nB,QAAQ,GAAG,UAAUrU,KAAK,EAAE;MAC9C,OAAO,IAAI,CAAC8S,YAAY,IAAI9S,KAAK,CAAC5L,KAAK;IAC3C,CAAC;IACDye,WAAW,CAAClmB,SAAS,CAAC2nB,OAAO,GAAG,UAAUtU,KAAK,EAAE;MAC7C,OAAO,IAAI,CAAC5L,KAAK,IAAI4L,KAAK,CAAC8S,YAAY;IAC3C,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAAC4nB,KAAK,GAAG,UAAU/C,GAAG,EAAE;MACzC,OAAOA,GAAG,CAAC+C,KAAK,CAAC,IAAI,CAACngB,KAAK,EAAE,IAAI,CAAC0e,YAAY,CAAC;IACnD,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAAC6nB,SAAS,GAAG,UAAUC,GAAG,EAAE;MAC7C,OAAOA,GAAG,CAACD,SAAS,CAAC,IAAI,CAACpgB,KAAK,EAAE,IAAI,CAAC0e,YAAY,CAAC;IACvD,CAAC;IACDD,WAAW,CAAClmB,SAAS,CAAC+nB,IAAI,GAAG,UAAU9mB,KAAK,EAAE;MAC1C,IAAI,IAAI,CAACsS,OAAO,EAAE;QACd,MAAM,IAAIkS,kBAAkB,CAAC,0BAA0B,CAACK,MAAM,CAAC,IAAI,CAACnP,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpF;MACA,OAAOtS,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC5M,KAAK,EAAEpD,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwQ,YAAY,GAAG,CAAC,EAAEllB,KAAK,CAAC,CAAC;IACvE,CAAC;IACDilB,WAAW,CAAClmB,SAAS,CAACgoB,UAAU,GAAG,UAAU/mB,KAAK,EAAE;MAChD,IAAI,IAAI,CAACsS,OAAO,EAAE;QACd,MAAM,IAAIkS,kBAAkB,CAAC,0BAA0B,CAACK,MAAM,CAAC,IAAI,CAACnP,QAAQ,CAAC,CAAC,CAAC,CAAC;MACpF;MACA,IAAI1V,KAAK,GAAG,IAAI,CAACwG,KAAK,EAAE;QACpB,OAAO,IAAI,CAAC0e,YAAY,GAAG,CAAC,IAAI,CAAC1e,KAAK,GAAGxG,KAAK,IAAI,IAAI,CAACF,MAAM;MACjE;MACA,IAAIE,KAAK,IAAI,IAAI,CAACklB,YAAY,EAAE;QAC5B,OAAO,IAAI,CAAC1e,KAAK,GAAG,CAACxG,KAAK,GAAG,IAAI,CAACwG,KAAK,IAAI,IAAI,CAAC1G,MAAM;MAC1D;MACA,OAAOE,KAAK;IAChB,CAAC;IACDilB,WAAW,CAAClmB,SAAS,CAAC6Y,GAAG,GAAG,UAAUqK,CAAC,EAAE;MACrC,IAAIlO,MAAM,GAAG,EAAE;MACf,KAAK,IAAIlU,CAAC,GAAG,IAAI,CAAC2G,KAAK,EAAE3G,CAAC,GAAG,IAAI,CAACqlB,YAAY,EAAErlB,CAAC,EAAE,EAAE;QACjDkU,MAAM,CAAC7S,IAAI,CAAC+gB,CAAC,CAACpiB,CAAC,CAAC,CAAC;MACrB;MACA,OAAOkU,MAAM;IACjB,CAAC;IACDkR,WAAW,CAAClmB,SAAS,CAAC8D,OAAO,GAAG,UAAUof,CAAC,EAAE;MACzC,KAAK,IAAIpiB,CAAC,GAAG,IAAI,CAAC2G,KAAK,EAAE3G,CAAC,GAAG,IAAI,CAACqlB,YAAY,EAAErlB,CAAC,EAAE,EAAE;QACjDoiB,CAAC,CAACpiB,CAAC,CAAC;MACR;IACJ,CAAC;IACD,OAAOolB,WAAW;EACtB,CAAC,CAAC,CAAE;EACJ,IAAI+B,QAAQ,GAAG,aAAe,YAAY;IACtC,SAASA,QAAQA,CAAC9N,UAAU,EAAE3E,MAAM,EAAE;MAClC,IAAI,CAAC2E,UAAU,GAAGA,UAAU;MAC5B,IAAI,CAAC3E,MAAM,GAAGA,MAAM;IACxB;IACAyS,QAAQ,CAACjoB,SAAS,CAAC+jB,MAAM,GAAG,UAAU1Q,KAAK,EAAE;MACzC,OAAO4U,QAAQ,CAAClE,MAAM,CAAC,IAAI,EAAE1Q,KAAK,CAAC;IACvC,CAAC;IACD4U,QAAQ,CAAClE,MAAM,GAAG,UAAU1gB,CAAC,EAAE3D,CAAC,EAAE;MAC9B,IAAI,CAAC2D,CAAC,IAAI,CAAC3D,CAAC,EAAE;QACV,OAAO,IAAI;MACf;MACA,OAAO,CAAC,CAAC2D,CAAC,IAAI,CAAC,CAAC3D,CAAC,IAAI2D,CAAC,CAAC8W,UAAU,KAAKza,CAAC,CAACya,UAAU,IAAI9W,CAAC,CAACmS,MAAM,KAAK9V,CAAC,CAAC8V,MAAM;IAC/E,CAAC;IACDyS,QAAQ,CAACjoB,SAAS,CAAC0nB,QAAQ,GAAG,UAAUrU,KAAK,EAAE;MAC3C,OAAO4U,QAAQ,CAACP,QAAQ,CAAC,IAAI,EAAErU,KAAK,CAAC;IACzC,CAAC;IACD4U,QAAQ,CAACP,QAAQ,GAAG,UAAUrkB,CAAC,EAAE3D,CAAC,EAAE;MAChC,IAAI2D,CAAC,CAAC8W,UAAU,GAAGza,CAAC,CAACya,UAAU,EAAE;QAC7B,OAAO,IAAI;MACf;MACA,IAAIza,CAAC,CAACya,UAAU,GAAG9W,CAAC,CAAC8W,UAAU,EAAE;QAC7B,OAAO,KAAK;MAChB;MACA,OAAO9W,CAAC,CAACmS,MAAM,GAAG9V,CAAC,CAAC8V,MAAM;IAC9B,CAAC;IACDyS,QAAQ,CAACjoB,SAAS,CAACkoB,eAAe,GAAG,UAAU7U,KAAK,EAAE;MAClD,OAAO4U,QAAQ,CAACC,eAAe,CAAC,IAAI,EAAE7U,KAAK,CAAC;IAChD,CAAC;IACD4U,QAAQ,CAACC,eAAe,GAAG,UAAU7kB,CAAC,EAAE3D,CAAC,EAAE;MACvC,IAAI2D,CAAC,CAAC8W,UAAU,GAAGza,CAAC,CAACya,UAAU,EAAE;QAC7B,OAAO,IAAI;MACf;MACA,IAAIza,CAAC,CAACya,UAAU,GAAG9W,CAAC,CAAC8W,UAAU,EAAE;QAC7B,OAAO,KAAK;MAChB;MACA,OAAO9W,CAAC,CAACmS,MAAM,IAAI9V,CAAC,CAAC8V,MAAM;IAC/B,CAAC;IACD,OAAOyS,QAAQ;EACnB,CAAC,CAAC,CAAE;EACJ,IAAI5f,KAAK,GAAG,aAAe,YAAY;IACnC,SAASA,KAAKA,CAAC8f,eAAe,EAAE/N,WAAW,EAAEgO,aAAa,EAAE/N,SAAS,EAAE;MACnE,IAAI8N,eAAe,GAAGC,aAAa,IAAID,eAAe,KAAKC,aAAa,IAAIhO,WAAW,GAAGC,SAAS,EAAE;QACjG,IAAI,CAAC8N,eAAe,GAAGC,aAAa;QACpC,IAAI,CAAChO,WAAW,GAAGC,SAAS;QAC5B,IAAI,CAAC+N,aAAa,GAAGD,eAAe;QACpC,IAAI,CAAC9N,SAAS,GAAGD,WAAW;MAChC,CAAC,MACI;QACD,IAAI,CAAC+N,eAAe,GAAGA,eAAe;QACtC,IAAI,CAAC/N,WAAW,GAAGA,WAAW;QAC9B,IAAI,CAACgO,aAAa,GAAGA,aAAa;QAClC,IAAI,CAAC/N,SAAS,GAAGA,SAAS;MAC9B;IACJ;IACAhS,KAAK,CAACrI,SAAS,CAACuT,OAAO,GAAG,YAAY;MAClC,OAAOlL,KAAK,CAACkL,OAAO,CAAC,IAAI,CAAC;IAC9B,CAAC;IACDlL,KAAK,CAACkL,OAAO,GAAG,UAAUT,KAAK,EAAE;MAC7B,OAAOA,KAAK,CAACqV,eAAe,KAAKrV,KAAK,CAACsV,aAAa,IAAItV,KAAK,CAACsH,WAAW,KAAKtH,KAAK,CAACuH,SAAS;IACjG,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACqoB,gBAAgB,GAAG,UAAUnM,QAAQ,EAAE;MACnD,OAAO7T,KAAK,CAACggB,gBAAgB,CAAC,IAAI,EAAEnM,QAAQ,CAAC;IACjD,CAAC;IACD7T,KAAK,CAACggB,gBAAgB,GAAG,UAAUvV,KAAK,EAAEoJ,QAAQ,EAAE;MAChD,IAAIA,QAAQ,CAAC/B,UAAU,GAAGrH,KAAK,CAACqV,eAAe,IAAIjM,QAAQ,CAAC/B,UAAU,GAAGrH,KAAK,CAACsV,aAAa,EAAE;QAC1F,OAAO,KAAK;MAChB;MACA,IAAIlM,QAAQ,CAAC/B,UAAU,KAAKrH,KAAK,CAACqV,eAAe,IAAIjM,QAAQ,CAAC1G,MAAM,GAAG1C,KAAK,CAACsH,WAAW,EAAE;QACtF,OAAO,KAAK;MAChB;MACA,IAAI8B,QAAQ,CAAC/B,UAAU,KAAKrH,KAAK,CAACsV,aAAa,IAAIlM,QAAQ,CAAC1G,MAAM,GAAG1C,KAAK,CAACuH,SAAS,EAAE;QAClF,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAAConB,aAAa,GAAG,UAAUtU,KAAK,EAAE;MAC7C,OAAOzK,KAAK,CAAC+e,aAAa,CAAC,IAAI,EAAEtU,KAAK,CAAC;IAC3C,CAAC;IACDzK,KAAK,CAAC+e,aAAa,GAAG,UAAUtU,KAAK,EAAEwV,UAAU,EAAE;MAC/C,IAAIA,UAAU,CAACH,eAAe,GAAGrV,KAAK,CAACqV,eAAe,IAAIG,UAAU,CAACF,aAAa,GAAGtV,KAAK,CAACqV,eAAe,EAAE;QACxG,OAAO,KAAK;MAChB;MACA,IAAIG,UAAU,CAACH,eAAe,GAAGrV,KAAK,CAACsV,aAAa,IAAIE,UAAU,CAACF,aAAa,GAAGtV,KAAK,CAACsV,aAAa,EAAE;QACpG,OAAO,KAAK;MAChB;MACA,IAAIE,UAAU,CAACH,eAAe,KAAKrV,KAAK,CAACqV,eAAe,IAAIG,UAAU,CAAClO,WAAW,GAAGtH,KAAK,CAACsH,WAAW,EAAE;QACpG,OAAO,KAAK;MAChB;MACA,IAAIkO,UAAU,CAACF,aAAa,KAAKtV,KAAK,CAACsV,aAAa,IAAIE,UAAU,CAACjO,SAAS,GAAGvH,KAAK,CAACuH,SAAS,EAAE;QAC5F,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACuoB,mBAAmB,GAAG,UAAUzV,KAAK,EAAE;MACnD,OAAOzK,KAAK,CAACkgB,mBAAmB,CAAC,IAAI,EAAEzV,KAAK,CAAC;IACjD,CAAC;IACDzK,KAAK,CAACkgB,mBAAmB,GAAG,UAAUzV,KAAK,EAAEwV,UAAU,EAAE;MACrD,IAAIA,UAAU,CAACH,eAAe,GAAGrV,KAAK,CAACqV,eAAe,IAAIG,UAAU,CAACF,aAAa,GAAGtV,KAAK,CAACqV,eAAe,EAAE;QACxG,OAAO,KAAK;MAChB;MACA,IAAIG,UAAU,CAACH,eAAe,GAAGrV,KAAK,CAACsV,aAAa,IAAIE,UAAU,CAACF,aAAa,GAAGtV,KAAK,CAACsV,aAAa,EAAE;QACpG,OAAO,KAAK;MAChB;MACA,IAAIE,UAAU,CAACH,eAAe,KAAKrV,KAAK,CAACqV,eAAe,IAAIG,UAAU,CAAClO,WAAW,IAAItH,KAAK,CAACsH,WAAW,EAAE;QACrG,OAAO,KAAK;MAChB;MACA,IAAIkO,UAAU,CAACF,aAAa,KAAKtV,KAAK,CAACsV,aAAa,IAAIE,UAAU,CAACjO,SAAS,IAAIvH,KAAK,CAACuH,SAAS,EAAE;QAC7F,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACwoB,SAAS,GAAG,UAAU1V,KAAK,EAAE;MACzC,OAAOzK,KAAK,CAACmgB,SAAS,CAAC,IAAI,EAAE1V,KAAK,CAAC;IACvC,CAAC;IACDzK,KAAK,CAACmgB,SAAS,GAAG,UAAUnlB,CAAC,EAAE3D,CAAC,EAAE;MAC9B,IAAIyoB,eAAe;MACnB,IAAI/N,WAAW;MACf,IAAIgO,aAAa;MACjB,IAAI/N,SAAS;MACb,IAAI3a,CAAC,CAACyoB,eAAe,GAAG9kB,CAAC,CAAC8kB,eAAe,EAAE;QACvCA,eAAe,GAAGzoB,CAAC,CAACyoB,eAAe;QACnC/N,WAAW,GAAG1a,CAAC,CAAC0a,WAAW;MAC/B,CAAC,MACI,IAAI1a,CAAC,CAACyoB,eAAe,KAAK9kB,CAAC,CAAC8kB,eAAe,EAAE;QAC9CA,eAAe,GAAGzoB,CAAC,CAACyoB,eAAe;QACnC/N,WAAW,GAAG/V,IAAI,CAACsR,GAAG,CAACjW,CAAC,CAAC0a,WAAW,EAAE/W,CAAC,CAAC+W,WAAW,CAAC;MACxD,CAAC,MACI;QACD+N,eAAe,GAAG9kB,CAAC,CAAC8kB,eAAe;QACnC/N,WAAW,GAAG/W,CAAC,CAAC+W,WAAW;MAC/B;MACA,IAAI1a,CAAC,CAAC0oB,aAAa,GAAG/kB,CAAC,CAAC+kB,aAAa,EAAE;QACnCA,aAAa,GAAG1oB,CAAC,CAAC0oB,aAAa;QAC/B/N,SAAS,GAAG3a,CAAC,CAAC2a,SAAS;MAC3B,CAAC,MACI,IAAI3a,CAAC,CAAC0oB,aAAa,KAAK/kB,CAAC,CAAC+kB,aAAa,EAAE;QAC1CA,aAAa,GAAG1oB,CAAC,CAAC0oB,aAAa;QAC/B/N,SAAS,GAAGhW,IAAI,CAACgQ,GAAG,CAAC3U,CAAC,CAAC2a,SAAS,EAAEhX,CAAC,CAACgX,SAAS,CAAC;MAClD,CAAC,MACI;QACD+N,aAAa,GAAG/kB,CAAC,CAAC+kB,aAAa;QAC/B/N,SAAS,GAAGhX,CAAC,CAACgX,SAAS;MAC3B;MACA,OAAO,IAAIhS,KAAK,CAAC8f,eAAe,EAAE/N,WAAW,EAAEgO,aAAa,EAAE/N,SAAS,CAAC;IAC5E,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACyoB,eAAe,GAAG,UAAU3V,KAAK,EAAE;MAC/C,OAAOzK,KAAK,CAACogB,eAAe,CAAC,IAAI,EAAE3V,KAAK,CAAC;IAC7C,CAAC;IACDzK,KAAK,CAACogB,eAAe,GAAG,UAAUplB,CAAC,EAAE3D,CAAC,EAAE;MACpC,IAAIgpB,qBAAqB,GAAGrlB,CAAC,CAAC8kB,eAAe;MAC7C,IAAIQ,iBAAiB,GAAGtlB,CAAC,CAAC+W,WAAW;MACrC,IAAIwO,mBAAmB,GAAGvlB,CAAC,CAAC+kB,aAAa;MACzC,IAAIS,eAAe,GAAGxlB,CAAC,CAACgX,SAAS;MACjC,IAAIyO,oBAAoB,GAAGppB,CAAC,CAACyoB,eAAe;MAC5C,IAAIY,gBAAgB,GAAGrpB,CAAC,CAAC0a,WAAW;MACpC,IAAI4O,kBAAkB,GAAGtpB,CAAC,CAAC0oB,aAAa;MACxC,IAAIa,cAAc,GAAGvpB,CAAC,CAAC2a,SAAS;MAChC,IAAIqO,qBAAqB,GAAGI,oBAAoB,EAAE;QAC9CJ,qBAAqB,GAAGI,oBAAoB;QAC5CH,iBAAiB,GAAGI,gBAAgB;MACxC,CAAC,MACI,IAAIL,qBAAqB,KAAKI,oBAAoB,EAAE;QACrDH,iBAAiB,GAAGtkB,IAAI,CAACgQ,GAAG,CAACsU,iBAAiB,EAAEI,gBAAgB,CAAC;MACrE;MACA,IAAIH,mBAAmB,GAAGI,kBAAkB,EAAE;QAC1CJ,mBAAmB,GAAGI,kBAAkB;QACxCH,eAAe,GAAGI,cAAc;MACpC,CAAC,MACI,IAAIL,mBAAmB,KAAKI,kBAAkB,EAAE;QACjDH,eAAe,GAAGxkB,IAAI,CAACsR,GAAG,CAACkT,eAAe,EAAEI,cAAc,CAAC;MAC/D;MACA,IAAIP,qBAAqB,GAAGE,mBAAmB,EAAE;QAC7C,OAAO,IAAI;MACf;MACA,IAAIF,qBAAqB,KAAKE,mBAAmB,IAAID,iBAAiB,GAAGE,eAAe,EAAE;QACtF,OAAO,IAAI;MACf;MACA,OAAO,IAAIxgB,KAAK,CAACqgB,qBAAqB,EAAEC,iBAAiB,EAAEC,mBAAmB,EAAEC,eAAe,CAAC;IACpG,CAAC;IACDxgB,KAAK,CAACrI,SAAS,CAACkpB,WAAW,GAAG,UAAU7V,KAAK,EAAE;MAC3C,OAAOhL,KAAK,CAAC6gB,WAAW,CAAC,IAAI,EAAE7V,KAAK,CAAC;IACzC,CAAC;IACDhL,KAAK,CAAC6gB,WAAW,GAAG,UAAU7lB,CAAC,EAAE3D,CAAC,EAAE;MAChC,IAAI,CAAC2D,CAAC,IAAI,CAAC3D,CAAC,EAAE;QACV,OAAO,IAAI;MACf;MACA,OAAO,CAAC,CAAC2D,CAAC,IAAI,CAAC,CAAC3D,CAAC,IAAI2D,CAAC,CAAC8kB,eAAe,KAAKzoB,CAAC,CAACyoB,eAAe,IAAI9kB,CAAC,CAAC+W,WAAW,KAAK1a,CAAC,CAAC0a,WAAW,IAAI/W,CAAC,CAAC+kB,aAAa,KAAK1oB,CAAC,CAAC0oB,aAAa,IAAI/kB,CAAC,CAACgX,SAAS,KAAK3a,CAAC,CAAC2a,SAAS;IACzK,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACmpB,cAAc,GAAG,YAAY;MACzC,OAAO9gB,KAAK,CAAC8gB,cAAc,CAAC,IAAI,CAAC;IACrC,CAAC;IACD9gB,KAAK,CAAC8gB,cAAc,GAAG,UAAUrW,KAAK,EAAE;MACpC,OAAO,IAAImV,QAAQ,CAACnV,KAAK,CAACsV,aAAa,EAAEtV,KAAK,CAACuH,SAAS,CAAC;IAC7D,CAAC;IACDhS,KAAK,CAACrI,SAAS,CAACopB,gBAAgB,GAAG,YAAY;MAC3C,OAAO/gB,KAAK,CAAC+gB,gBAAgB,CAAC,IAAI,CAAC;IACvC,CAAC;IACD/gB,KAAK,CAAC+gB,gBAAgB,GAAG,UAAUtW,KAAK,EAAE;MACtC,OAAO,IAAImV,QAAQ,CAACnV,KAAK,CAACqV,eAAe,EAAErV,KAAK,CAACsH,WAAW,CAAC;IACjE,CAAC;IACD/R,KAAK,CAACrI,SAAS,CAACqpB,eAAe,GAAG,YAAY;MAC1C,OAAOhhB,KAAK,CAACghB,eAAe,CAAC,IAAI,CAAC;IACtC,CAAC;IACDhhB,KAAK,CAACghB,eAAe,GAAG,UAAUvW,KAAK,EAAE;MACrC,OAAO,IAAIzK,KAAK,CAACyK,KAAK,CAACqV,eAAe,EAAErV,KAAK,CAACsH,WAAW,EAAEtH,KAAK,CAACqV,eAAe,EAAErV,KAAK,CAACsH,WAAW,CAAC;IACxG,CAAC;IACD/R,KAAK,CAACrI,SAAS,CAACspB,aAAa,GAAG,YAAY;MACxC,OAAOjhB,KAAK,CAACihB,aAAa,CAAC,IAAI,CAAC;IACpC,CAAC;IACDjhB,KAAK,CAACihB,aAAa,GAAG,UAAUxW,KAAK,EAAE;MACnC,OAAO,IAAIzK,KAAK,CAACyK,KAAK,CAACsV,aAAa,EAAEtV,KAAK,CAACuH,SAAS,EAAEvH,KAAK,CAACsV,aAAa,EAAEtV,KAAK,CAACuH,SAAS,CAAC;IAChG,CAAC;IACDhS,KAAK,CAACkhB,aAAa,GAAG,UAAU9hB,KAAK,EAAEC,GAAG,EAAE;MACxC,IAAIA,GAAG,KAAK,KAAK,CAAC,EAAE;QAAEA,GAAG,GAAGD,KAAK;MAAE;MACnC,OAAO,IAAIY,KAAK,CAACZ,KAAK,CAAC0S,UAAU,EAAE1S,KAAK,CAAC+N,MAAM,EAAE9N,GAAG,CAACyS,UAAU,EAAEzS,GAAG,CAAC8N,MAAM,CAAC;IAChF,CAAC;IACD,OAAOnN,KAAK;EAChB,CAAC,CAAC,CAAE;EACJ,SAASmhB,kBAAkBA,CAACC,KAAK,EAAExD,SAAS,EAAE;IAC1C,IAAIyD,GAAG,GAAGC,qBAAqB,CAACF,KAAK,EAAExD,SAAS,CAAC;IACjD,OAAOyD,GAAG,KAAK,CAAC,CAAC,GAAG7e,SAAS,GAAG4e,KAAK,CAACC,GAAG,CAAC;EAC9C;EACA,SAASC,qBAAqBA,CAACF,KAAK,EAAExD,SAAS,EAAE2D,QAAQ,EAAEC,QAAQ,EAAE;IACjE,IAAID,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAG,CAAC;IAAE;IACzC,IAAIC,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAGJ,KAAK,CAAC1oB,MAAM;IAAE;IACpD,IAAID,CAAC,GAAG8oB,QAAQ;IAChB,IAAIrD,CAAC,GAAGsD,QAAQ;IAChB,OAAO/oB,CAAC,GAAGylB,CAAC,EAAE;MACV,IAAIuD,CAAC,GAAGzlB,IAAI,CAACgZ,KAAK,CAAC,CAACvc,CAAC,GAAGylB,CAAC,IAAI,CAAC,CAAC;MAC/B,IAAIN,SAAS,CAACwD,KAAK,CAACK,CAAC,CAAC,CAAC,EAAE;QACrBhpB,CAAC,GAAGgpB,CAAC,GAAG,CAAC;MACb,CAAC,MACI;QACDvD,CAAC,GAAGuD,CAAC;MACT;IACJ;IACA,OAAOhpB,CAAC,GAAG,CAAC;EAChB;EACA,SAASipB,mBAAmBA,CAACN,KAAK,EAAExD,SAAS,EAAE;IAC3C,IAAIyD,GAAG,GAAGM,8BAA8B,CAACP,KAAK,EAAExD,SAAS,CAAC;IAC1D,OAAOyD,GAAG,KAAKD,KAAK,CAAC1oB,MAAM,GAAG8J,SAAS,GAAG4e,KAAK,CAACC,GAAG,CAAC;EACxD;EACA,SAASM,8BAA8BA,CAACP,KAAK,EAAExD,SAAS,EAAE2D,QAAQ,EAAEC,QAAQ,EAAE;IAC1E,IAAID,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAG,CAAC;IAAE;IACzC,IAAIC,QAAQ,KAAK,KAAK,CAAC,EAAE;MAAEA,QAAQ,GAAGJ,KAAK,CAAC1oB,MAAM;IAAE;IACpD,IAAID,CAAC,GAAG8oB,QAAQ;IAChB,IAAIrD,CAAC,GAAGsD,QAAQ;IAChB,OAAO/oB,CAAC,GAAGylB,CAAC,EAAE;MACV,IAAIuD,CAAC,GAAGzlB,IAAI,CAACgZ,KAAK,CAAC,CAACvc,CAAC,GAAGylB,CAAC,IAAI,CAAC,CAAC;MAC/B,IAAIN,SAAS,CAACwD,KAAK,CAACK,CAAC,CAAC,CAAC,EAAE;QACrBvD,CAAC,GAAGuD,CAAC;MACT,CAAC,MACI;QACDhpB,CAAC,GAAGgpB,CAAC,GAAG,CAAC;MACb;IACJ;IACA,OAAOhpB,CAAC;EACZ;EACA,IAAImpB,eAAe,GAAG,aAAe,YAAY;IAC7C,SAASA,eAAeA,CAACC,MAAM,EAAE;MAC7B,IAAI,CAACA,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACC,0BAA0B,GAAG,CAAC;IACvC;IACAF,eAAe,CAACjqB,SAAS,CAACwpB,kBAAkB,GAAG,UAAUvD,SAAS,EAAE;MAChE,IAAImE,GAAG,EAAEjnB,EAAE;MACX,IAAIyS,EAAE,CAACyU,gBAAgB,EAAE;QACrB,IAAI,IAAI,CAACC,sBAAsB,EAAE;UAC7B,IAAI;YACA,KAAK,IAAI3F,EAAE,GAAGnkB,QAAQ,CAAC,IAAI,CAAC0pB,MAAM,CAAC,EAAEK,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE,CAACupB,EAAE,CAACrpB,IAAI,EAAEqpB,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE;cAC3E,IAAI0jB,IAAI,GAAG6F,EAAE,CAACtpB,KAAK;cACnB,IAAI,IAAI,CAACqpB,sBAAsB,CAAC5F,IAAI,CAAC,IAAI,CAACuB,SAAS,CAACvB,IAAI,CAAC,EAAE;gBACvD,MAAM,IAAIiB,KAAK,CAAC,8FAA8F,CAAC;cACnH;YACJ;UACJ,CAAC,CACD,OAAO6E,KAAK,EAAE;YAAEJ,GAAG,GAAG;cAAE1kB,KAAK,EAAE8kB;YAAM,CAAC;UAAE,CAAC,SACjC;YACJ,IAAI;cACA,IAAID,EAAE,IAAI,CAACA,EAAE,CAACrpB,IAAI,KAAKiC,EAAE,GAAGwhB,EAAE,CAAChf,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACykB,EAAE,CAAC;YACvD,CAAC,SACO;cAAE,IAAIyF,GAAG,EAAE,MAAMA,GAAG,CAAC1kB,KAAK;YAAE;UACxC;QACJ;QACA,IAAI,CAAC4kB,sBAAsB,GAAGrE,SAAS;MAC3C;MACA,IAAIyD,GAAG,GAAGC,qBAAqB,CAAC,IAAI,CAACO,MAAM,EAAEjE,SAAS,EAAE,IAAI,CAACkE,0BAA0B,CAAC;MACxF,IAAI,CAACA,0BAA0B,GAAGT,GAAG,GAAG,CAAC;MACzC,OAAOA,GAAG,KAAK,CAAC,CAAC,GAAG7e,SAAS,GAAG,IAAI,CAACqf,MAAM,CAACR,GAAG,CAAC;IACpD,CAAC;IACD,OAAOO,eAAe;EAC1B,CAAC,CAAC,CAAE;EACJrU,EAAE,GAAGqU,eAAe;EACpB,CAAC,YAAY;IACTrU,EAAE,CAACyU,gBAAgB,GAAG,KAAK;EAC/B,CAAC,EAAE,CAAC;EACJ,IAAII,SAAS,GAAG,aAAe,YAAY;IACvC,SAASA,SAASA,CAACtC,eAAe,EAAEuC,sBAAsB,EAAE;MACxD,IAAIvC,eAAe,GAAGuC,sBAAsB,EAAE;QAC1C,MAAM,IAAIjF,kBAAkB,CAAC,kBAAkB,CAACK,MAAM,CAACqC,eAAe,EAAE,0CAA0C,CAAC,CAACrC,MAAM,CAAC4E,sBAAsB,CAAC,CAAC;MACvJ;MACA,IAAI,CAACvC,eAAe,GAAGA,eAAe;MACtC,IAAI,CAACuC,sBAAsB,GAAGA,sBAAsB;IACxD;IACAD,SAAS,CAACE,kBAAkB,GAAG,UAAU7X,KAAK,EAAE;MAC5C,OAAO,IAAI2X,SAAS,CAAC3X,KAAK,CAACqV,eAAe,EAAErV,KAAK,CAACsV,aAAa,GAAG,CAAC,CAAC;IACxE,CAAC;IACDqC,SAAS,CAACpD,IAAI,GAAG,UAAUuD,UAAU,EAAE;MACnC,IAAIA,UAAU,CAAC7pB,MAAM,KAAK,CAAC,EAAE;QACzB,MAAM,IAAI0kB,kBAAkB,CAAC,4BAA4B,CAAC;MAC9D;MACA,IAAI0C,eAAe,GAAGyC,UAAU,CAAC,CAAC,CAAC,CAACzC,eAAe;MACnD,IAAIuC,sBAAsB,GAAGE,UAAU,CAAC,CAAC,CAAC,CAACF,sBAAsB;MACjE,KAAK,IAAI5pB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8pB,UAAU,CAAC7pB,MAAM,EAAED,CAAC,EAAE,EAAE;QACxCqnB,eAAe,GAAG9jB,IAAI,CAACsR,GAAG,CAACwS,eAAe,EAAEyC,UAAU,CAAC9pB,CAAC,CAAC,CAACqnB,eAAe,CAAC;QAC1EuC,sBAAsB,GAAGrmB,IAAI,CAACgQ,GAAG,CAACqW,sBAAsB,EAAEE,UAAU,CAAC9pB,CAAC,CAAC,CAAC4pB,sBAAsB,CAAC;MACnG;MACA,OAAO,IAAID,SAAS,CAACtC,eAAe,EAAEuC,sBAAsB,CAAC;IACjE,CAAC;IACDD,SAAS,CAAC/D,QAAQ,GAAG,UAAUyB,eAAe,EAAEpnB,MAAM,EAAE;MACpD,OAAO,IAAI0pB,SAAS,CAACtC,eAAe,EAAEA,eAAe,GAAGpnB,MAAM,CAAC;IACnE,CAAC;IACDpB,MAAM,CAACmnB,cAAc,CAAC2D,SAAS,CAACzqB,SAAS,EAAE,SAAS,EAAE;MAClDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC8P,eAAe,KAAK,IAAI,CAACuC,sBAAsB;MAC/D,CAAC;MACD3D,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFyD,SAAS,CAACzqB,SAAS,CAACinB,KAAK,GAAG,UAAUJ,MAAM,EAAE;MAC1C,OAAO,IAAI4D,SAAS,CAAC,IAAI,CAACtC,eAAe,GAAGtB,MAAM,EAAE,IAAI,CAAC6D,sBAAsB,GAAG7D,MAAM,CAAC;IAC7F,CAAC;IACDlnB,MAAM,CAACmnB,cAAc,CAAC2D,SAAS,CAACzqB,SAAS,EAAE,QAAQ,EAAE;MACjDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAACqS,sBAAsB,GAAG,IAAI,CAACvC,eAAe;MAC7D,CAAC;MACDpB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFyD,SAAS,CAACzqB,SAAS,CAACqnB,IAAI,GAAG,UAAUhU,KAAK,EAAE;MACxC,OAAO,IAAIoX,SAAS,CAACpmB,IAAI,CAACsR,GAAG,CAAC,IAAI,CAACwS,eAAe,EAAE9U,KAAK,CAAC8U,eAAe,CAAC,EAAE9jB,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAACqW,sBAAsB,EAAErX,KAAK,CAACqX,sBAAsB,CAAC,CAAC;IACpJ,CAAC;IACDD,SAAS,CAACzqB,SAAS,CAACsnB,SAAS,GAAG,UAAUjU,KAAK,EAAE;MAC7C,IAAI8U,eAAe,GAAG9jB,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC8T,eAAe,EAAE9U,KAAK,CAAC8U,eAAe,CAAC;MAC3E,IAAIuC,sBAAsB,GAAGrmB,IAAI,CAACsR,GAAG,CAAC,IAAI,CAAC+U,sBAAsB,EAAErX,KAAK,CAACqX,sBAAsB,CAAC;MAChG,IAAIvC,eAAe,IAAIuC,sBAAsB,EAAE;QAC3C,OAAO,IAAID,SAAS,CAACtC,eAAe,EAAEuC,sBAAsB,CAAC;MACjE;MACA,OAAO7f,SAAS;IACpB,CAAC;IACD4f,SAAS,CAACzqB,SAAS,CAAC6qB,cAAc,GAAG,UAAUxX,KAAK,EAAE;MAClD,OAAO,IAAI,CAAC8U,eAAe,IAAI9U,KAAK,CAACqX,sBAAsB,IAAIrX,KAAK,CAAC8U,eAAe,IAAI,IAAI,CAACuC,sBAAsB;IACvH,CAAC;IACDD,SAAS,CAACzqB,SAAS,CAAC8qB,gBAAgB,GAAG,YAAY;MAC/C,IAAI,IAAI,CAACvX,OAAO,EAAE;QACd,OAAO,IAAI;MACf;MACA,OAAO,IAAIlL,KAAK,CAAC,IAAI,CAAC8f,eAAe,EAAE,CAAC,EAAE,IAAI,CAACuC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC;IACvG,CAAC;IACDN,SAAS,CAACzqB,SAAS,CAACgrB,aAAa,GAAG,YAAY;MAC5C,OAAO,IAAI9E,WAAW,CAAC,IAAI,CAACiC,eAAe,GAAG,CAAC,EAAE,IAAI,CAACuC,sBAAsB,GAAG,CAAC,CAAC;IACrF,CAAC;IACD,OAAOD,SAAS;EACpB,CAAC,CAAC,CAAE;EACJ,IAAIQ,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAACC,iBAAiB,EAAE;MACrC,IAAIA,iBAAiB,KAAK,KAAK,CAAC,EAAE;QAAEA,iBAAiB,GAAG,EAAE;MAAE;MAC5D,IAAI,CAACA,iBAAiB,GAAGA,iBAAiB;IAC9C;IACAvrB,MAAM,CAACmnB,cAAc,CAACmE,YAAY,CAACjrB,SAAS,EAAE,QAAQ,EAAE;MACpDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC6S,iBAAiB;MACjC,CAAC;MACDnE,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFiE,YAAY,CAACjrB,SAAS,CAACqmB,QAAQ,GAAG,UAAUvT,KAAK,EAAE;MAC/C,IAAIA,KAAK,CAAC/R,MAAM,KAAK,CAAC,EAAE;QACpB;MACJ;MACA,IAAIoqB,iBAAiB,GAAGnB,8BAA8B,CAAC,IAAI,CAACkB,iBAAiB,EAAE,UAAUhjB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACwiB,sBAAsB,IAAI5X,KAAK,CAACqV,eAAe;MAAE,CAAC,CAAC;MAC1J,IAAIiD,wBAAwB,GAAGzB,qBAAqB,CAAC,IAAI,CAACuB,iBAAiB,EAAE,UAAUhjB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACigB,eAAe,IAAIrV,KAAK,CAAC4X,sBAAsB;MAAE,CAAC,CAAC,GAAG,CAAC;MAC5J,IAAIS,iBAAiB,KAAKC,wBAAwB,EAAE;QAChD,IAAI,CAACF,iBAAiB,CAAC1E,MAAM,CAAC2E,iBAAiB,EAAE,CAAC,EAAErY,KAAK,CAAC;MAC9D,CAAC,MACI,IAAIqY,iBAAiB,KAAKC,wBAAwB,GAAG,CAAC,EAAE;QACzD,IAAIC,SAAS,GAAG,IAAI,CAACH,iBAAiB,CAACC,iBAAiB,CAAC;QACzD,IAAI,CAACD,iBAAiB,CAACC,iBAAiB,CAAC,GAAGE,SAAS,CAAChE,IAAI,CAACvU,KAAK,CAAC;MACrE,CAAC,MACI;QACD,IAAIuY,SAAS,GAAG,IAAI,CAACH,iBAAiB,CAACC,iBAAiB,CAAC,CAAC9D,IAAI,CAAC,IAAI,CAAC6D,iBAAiB,CAACE,wBAAwB,GAAG,CAAC,CAAC,CAAC,CAAC/D,IAAI,CAACvU,KAAK,CAAC;QAChI,IAAI,CAACoY,iBAAiB,CAAC1E,MAAM,CAAC2E,iBAAiB,EAAEC,wBAAwB,GAAGD,iBAAiB,EAAEE,SAAS,CAAC;MAC7G;IACJ,CAAC;IACDJ,YAAY,CAACjrB,SAAS,CAACuV,QAAQ,GAAG,UAAU4E,UAAU,EAAE;MACpD,IAAImR,wBAAwB,GAAG9B,kBAAkB,CAAC,IAAI,CAAC0B,iBAAiB,EAAE,UAAUhjB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACigB,eAAe,IAAIhO,UAAU;MAAE,CAAC,CAAC;MACnI,OAAO,CAAC,CAACmR,wBAAwB,IAAIA,wBAAwB,CAACZ,sBAAsB,GAAGvQ,UAAU;IACrG,CAAC;IACD8Q,YAAY,CAACjrB,SAAS,CAACurB,YAAY,GAAG,UAAUzY,KAAK,EAAE;MACnD,IAAIqY,iBAAiB,GAAGnB,8BAA8B,CAAC,IAAI,CAACkB,iBAAiB,EAAE,UAAUhjB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACwiB,sBAAsB,IAAI5X,KAAK,CAACqV,eAAe;MAAE,CAAC,CAAC;MAC1J,IAAIiD,wBAAwB,GAAGzB,qBAAqB,CAAC,IAAI,CAACuB,iBAAiB,EAAE,UAAUhjB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACigB,eAAe,IAAIrV,KAAK,CAAC4X,sBAAsB;MAAE,CAAC,CAAC,GAAG,CAAC;MAC5J,IAAIS,iBAAiB,KAAKC,wBAAwB,EAAE;QAChD,OAAO,IAAIH,YAAY,CAAC,CAACnY,KAAK,CAAC,CAAC;MACpC;MACA,IAAIkC,MAAM,GAAG,EAAE;MACf,IAAImT,eAAe,GAAGrV,KAAK,CAACqV,eAAe;MAC3C,KAAK,IAAIrnB,CAAC,GAAGqqB,iBAAiB,EAAErqB,CAAC,GAAGsqB,wBAAwB,EAAEtqB,CAAC,EAAE,EAAE;QAC/D,IAAIoH,CAAC,GAAG,IAAI,CAACgjB,iBAAiB,CAACpqB,CAAC,CAAC;QACjC,IAAIoH,CAAC,CAACigB,eAAe,GAAGA,eAAe,EAAE;UACrCnT,MAAM,CAAC7S,IAAI,CAAC,IAAIsoB,SAAS,CAACtC,eAAe,EAAEjgB,CAAC,CAACigB,eAAe,CAAC,CAAC;QAClE;QACAA,eAAe,GAAGjgB,CAAC,CAACwiB,sBAAsB;MAC9C;MACA,IAAIvC,eAAe,GAAGrV,KAAK,CAAC4X,sBAAsB,EAAE;QAChD1V,MAAM,CAAC7S,IAAI,CAAC,IAAIsoB,SAAS,CAACtC,eAAe,EAAErV,KAAK,CAAC4X,sBAAsB,CAAC,CAAC;MAC7E;MACA,OAAO,IAAIO,YAAY,CAACjW,MAAM,CAAC;IACnC,CAAC;IACDiW,YAAY,CAACjrB,SAAS,CAACwrB,eAAe,GAAG,UAAUnY,KAAK,EAAE;MACtD,IAAI2B,MAAM,GAAG,EAAE;MACf,IAAIyW,EAAE,GAAG,CAAC;MACV,IAAIC,EAAE,GAAG,CAAC;MACV,OAAOD,EAAE,GAAG,IAAI,CAACP,iBAAiB,CAACnqB,MAAM,IAAI2qB,EAAE,GAAGrY,KAAK,CAAC6X,iBAAiB,CAACnqB,MAAM,EAAE;QAC9E,IAAIqgB,EAAE,GAAG,IAAI,CAAC8J,iBAAiB,CAACO,EAAE,CAAC;QACnC,IAAIpK,EAAE,GAAGhO,KAAK,CAAC6X,iBAAiB,CAACQ,EAAE,CAAC;QACpC,IAAI5qB,CAAC,GAAGsgB,EAAE,CAACkG,SAAS,CAACjG,EAAE,CAAC;QACxB,IAAIvgB,CAAC,IAAI,CAACA,CAAC,CAACyS,OAAO,EAAE;UACjByB,MAAM,CAAC7S,IAAI,CAACrB,CAAC,CAAC;QAClB;QACA,IAAIsgB,EAAE,CAACsJ,sBAAsB,GAAGrJ,EAAE,CAACqJ,sBAAsB,EAAE;UACvDe,EAAE,EAAE;QACR,CAAC,MACI;UACDC,EAAE,EAAE;QACR;MACJ;MACA,OAAO,IAAIT,YAAY,CAACjW,MAAM,CAAC;IACnC,CAAC;IACDiW,YAAY,CAACjrB,SAAS,CAAC2rB,YAAY,GAAG,UAAU1qB,KAAK,EAAE;MACnD,OAAO,IAAIgqB,YAAY,CAAC,IAAI,CAACC,iBAAiB,CAACrS,GAAG,CAAC,UAAU3Q,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC+e,KAAK,CAAChmB,KAAK,CAAC;MAAE,CAAC,CAAC,CAAC;IAChG,CAAC;IACD,OAAOgqB,YAAY;EACvB,CAAC,CAAC,CAAE;EACJ,IAAIW,UAAU,GAAG,aAAe,YAAY;IACxC,SAASA,UAAUA,CAACC,SAAS,EAAEC,WAAW,EAAE;MACxC,IAAI,CAACD,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACC,WAAW,GAAGA,WAAW;IAClC;IACAF,UAAU,CAAC5rB,SAAS,CAAC+rB,WAAW,GAAG,YAAY;MAC3C,OAAOtB,SAAS,CAAC/D,QAAQ,CAAC,CAAC,EAAE,IAAI,CAACmF,SAAS,CAAC;IAChD,CAAC;IACDD,UAAU,CAAC5rB,SAAS,CAACgsB,aAAa,GAAG,UAAU9P,QAAQ,EAAE;MACrD,IAAI,IAAI,CAAC2P,SAAS,KAAK,CAAC,EAAE;QACtB,OAAO,IAAI5D,QAAQ,CAAC/L,QAAQ,CAAC/B,UAAU,EAAE+B,QAAQ,CAAC1G,MAAM,GAAG,IAAI,CAACsW,WAAW,CAAC;MAChF,CAAC,MACI;QACD,OAAO,IAAI7D,QAAQ,CAAC/L,QAAQ,CAAC/B,UAAU,GAAG,IAAI,CAAC0R,SAAS,EAAE,IAAI,CAACC,WAAW,GAAG,CAAC,CAAC;MACnF;IACJ,CAAC;IACD,OAAOF,UAAU;EACrB,CAAC,CAAC,CAAE;EACJjI,EAAE,GAAGiI,UAAU;EACf,CAAC,YAAY;IACTjI,EAAE,CAACsI,IAAI,GAAG,IAAItI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EAC1B,CAAC,EAAE,CAAC;EACJ,IAAIuI,aAAa,GAAG,aAAe,YAAY;IAC3C,SAASA,aAAaA,CAACC,eAAe,EAAEC,UAAU,EAAE;MAChDxG,MAAM,CAACwG,UAAU,IAAI,CAAC,CAAC;MACvB,IAAI,CAACD,eAAe,GAAGA,eAAe;MACtC,IAAI,CAACC,UAAU,GAAGA,UAAU;IAChC;IACAF,aAAa,CAAClsB,SAAS,CAACqsB,eAAe,GAAG,UAAUvZ,KAAK,EAAE;MACvD,IAAIA,KAAK,CAACqV,eAAe,KAAKrV,KAAK,CAACsV,aAAa,EAAE;QAC/C,OAAO,IAAI,CAAC+D,eAAe,CAACrZ,KAAK,CAACqV,eAAe,CAAC,CAACN,SAAS,CAAC/U,KAAK,CAACsH,WAAW,GAAG,CAAC,EAAEtH,KAAK,CAACuH,SAAS,GAAG,CAAC,CAAC;MAC5G;MACA,IAAIrF,MAAM,GAAG,IAAI,CAACmX,eAAe,CAACrZ,KAAK,CAACqV,eAAe,CAAC,CAACN,SAAS,CAAC/U,KAAK,CAACsH,WAAW,GAAG,CAAC,CAAC;MACzF,KAAK,IAAItZ,CAAC,GAAGgS,KAAK,CAACqV,eAAe,GAAG,CAAC,EAAErnB,CAAC,GAAGgS,KAAK,CAACsV,aAAa,EAAEtnB,CAAC,EAAE,EAAE;QAClEkU,MAAM,IAAI,IAAI,GAAG,IAAI,CAACmX,eAAe,CAACrrB,CAAC,CAAC;MAC5C;MACAkU,MAAM,IAAI,IAAI,GAAG,IAAI,CAACmX,eAAe,CAACrZ,KAAK,CAACsV,aAAa,CAAC,CAACP,SAAS,CAAC,CAAC,EAAE/U,KAAK,CAACuH,SAAS,GAAG,CAAC,CAAC;MAC5F,OAAOrF,MAAM;IACjB,CAAC;IACDkX,aAAa,CAAClsB,SAAS,CAACssB,aAAa,GAAG,UAAUnS,UAAU,EAAE;MAC1D,OAAO,IAAI,CAACgS,eAAe,CAAChS,UAAU,CAAC,CAACpZ,MAAM;IAClD,CAAC;IACDpB,MAAM,CAACmnB,cAAc,CAACoF,aAAa,CAAClsB,SAAS,EAAE,QAAQ,EAAE;MACrDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,IAAIkU,QAAQ,GAAG,IAAI,CAACJ,eAAe,CAAC,IAAI,CAACC,UAAU,CAAC;QACpD,OAAO,IAAIR,UAAU,CAAC,IAAI,CAACQ,UAAU,GAAG,CAAC,EAAEG,QAAQ,CAACxrB,MAAM,CAAC;MAC/D,CAAC;MACDgmB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACF,OAAOkF,aAAa;EACxB,CAAC,CAAC,CAAE;EACJ,IAAIM,SAAS,GAAG,aAAe,UAAUnrB,MAAM,EAAE;IAC7C9B,SAAS,CAACitB,SAAS,EAAEnrB,MAAM,CAAC;IAC5B,SAASmrB,SAASA,CAAC1M,KAAK,EAAE;MACtB,OAAOze,MAAM,CAACnB,IAAI,CAAC,IAAI,EAAE,UAAUia,UAAU,EAAE;QAAE,OAAO2F,KAAK,CAAC3F,UAAU,GAAG,CAAC,CAAC;MAAE,CAAC,EAAE2F,KAAK,CAAC/e,MAAM,CAAC,IAAI,IAAI;IAC3G;IACA,OAAOyrB,SAAS;EACpB,CAAC,CAACN,aAAa,CAAE;EACjB,IAAIO,SAAS,GAAG,aAAe,YAAY;IACvC,SAASA,SAASA,CAAC7kB,OAAO,EAAE8kB,KAAK,EAAEC,UAAU,EAAE;MAC3C,IAAI,CAAC/kB,OAAO,GAAGA,OAAO;MACtB,IAAI,CAAC8kB,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACC,UAAU,GAAGA,UAAU;IAChC;IACA,OAAOF,SAAS;EACpB,CAAC,CAAC,CAAE;EACJ,IAAIG,SAAS,GAAG,aAAe,YAAY;IACvC,SAASA,SAASA,CAACC,gBAAgB,EAAEjlB,OAAO,EAAE;MAC1C,IAAI,CAACilB,gBAAgB,GAAGA,gBAAgB;MACxC,IAAI,CAACjlB,OAAO,GAAGA,OAAO;IAC1B;IACA,OAAOglB,SAAS;EACpB,CAAC,CAAC,CAAE;EACJ,IAAIE,gBAAgB,GAAG,aAAe,YAAY;IAC9C,SAASA,gBAAgBA,CAACnU,aAAa,EAAEC,aAAa,EAAE;MACpD,IAAI,CAACmU,QAAQ,GAAGpU,aAAa;MAC7B,IAAI,CAACqU,QAAQ,GAAGpU,aAAa;IACjC;IACAkU,gBAAgB,CAAC9sB,SAAS,CAACqnB,IAAI,GAAG,UAAUhU,KAAK,EAAE;MAC/C,OAAO,IAAIyZ,gBAAgB,CAAC,IAAI,CAACC,QAAQ,CAAC1F,IAAI,CAAChU,KAAK,CAAC0Z,QAAQ,CAAC,EAAE,IAAI,CAACC,QAAQ,CAAC3F,IAAI,CAAChU,KAAK,CAAC2Z,QAAQ,CAAC,CAAC;IACvG,CAAC;IACDrtB,MAAM,CAACmnB,cAAc,CAACgG,gBAAgB,CAAC9sB,SAAS,EAAE,kBAAkB,EAAE;MAClEqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAOhU,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAAC0Y,QAAQ,CAAChsB,MAAM,EAAE,IAAI,CAACisB,QAAQ,CAACjsB,MAAM,CAAC;MAC/D,CAAC;MACDgmB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACF8F,gBAAgB,CAAC9sB,SAAS,CAACitB,cAAc,GAAG,YAAY;MACpD,IAAIC,kBAAkB,GAAG,IAAI,CAACH,QAAQ,CAACjC,gBAAgB,CAAC,CAAC;MACzD,IAAIqC,iBAAiB,GAAG,IAAI,CAACH,QAAQ,CAAClC,gBAAgB,CAAC,CAAC;MACxD,IAAIoC,kBAAkB,IAAIC,iBAAiB,EAAE;QACzC,OAAO,IAAIC,YAAY,CAACF,kBAAkB,EAAEC,iBAAiB,CAAC;MAClE,CAAC,MACI,IAAI,IAAI,CAACJ,QAAQ,CAAC5E,eAAe,KAAK,CAAC,IAAI,IAAI,CAAC6E,QAAQ,CAAC7E,eAAe,KAAK,CAAC,EAAE;QACjF,IAAI,EAAE,IAAI,CAAC6E,QAAQ,CAAC7E,eAAe,KAAK,CAAC,IAAI,IAAI,CAAC4E,QAAQ,CAAC5E,eAAe,KAAK,CAAC,CAAC,EAAE;UAC/E,MAAM,IAAI1C,kBAAkB,CAAC,kBAAkB,CAAC;QACpD;QACA,OAAO,IAAI2H,YAAY,CAAC,IAAI/kB,KAAK,CAAC,IAAI,CAAC0kB,QAAQ,CAAC5E,eAAe,EAAE,CAAC,EAAE,IAAI,CAAC4E,QAAQ,CAACrC,sBAAsB,EAAE,CAAC,CAAC,EAAE,IAAIriB,KAAK,CAAC,IAAI,CAAC2kB,QAAQ,CAAC7E,eAAe,EAAE,CAAC,EAAE,IAAI,CAAC6E,QAAQ,CAACtC,sBAAsB,EAAE,CAAC,CAAC,CAAC;MACvM,CAAC,MACI;QACD,OAAO,IAAI0C,YAAY,CAAC,IAAI/kB,KAAK,CAAC,IAAI,CAAC0kB,QAAQ,CAAC5E,eAAe,GAAG,CAAC,EAAEva,MAAM,CAACmd,gBAAgB,EAAE,IAAI,CAACgC,QAAQ,CAACrC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,EAAE,IAAI1iB,KAAK,CAAC,IAAI,CAAC2kB,QAAQ,CAAC7E,eAAe,GAAG,CAAC,EAAEva,MAAM,CAACmd,gBAAgB,EAAE,IAAI,CAACiC,QAAQ,CAACtC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,CAAC;MAC/S;IACJ,CAAC;IACD+B,gBAAgB,CAAC9sB,SAAS,CAACqtB,eAAe,GAAG,UAAUN,QAAQ,EAAEC,QAAQ,EAAE;MACvE,IAAIM,iBAAiB,CAAC,IAAI,CAACP,QAAQ,CAACrC,sBAAsB,EAAEqC,QAAQ,CAAC,IAAIO,iBAAiB,CAAC,IAAI,CAACN,QAAQ,CAACtC,sBAAsB,EAAEsC,QAAQ,CAAC,EAAE;QACxI,OAAO,IAAII,YAAY,CAAC,IAAI/kB,KAAK,CAAC,IAAI,CAAC0kB,QAAQ,CAAC5E,eAAe,EAAE,CAAC,EAAE,IAAI,CAAC4E,QAAQ,CAACrC,sBAAsB,EAAE,CAAC,CAAC,EAAE,IAAIriB,KAAK,CAAC,IAAI,CAAC2kB,QAAQ,CAAC7E,eAAe,EAAE,CAAC,EAAE,IAAI,CAAC6E,QAAQ,CAACtC,sBAAsB,EAAE,CAAC,CAAC,CAAC;MACvM;MACA,IAAI,CAAC,IAAI,CAACqC,QAAQ,CAACxZ,OAAO,IAAI,CAAC,IAAI,CAACyZ,QAAQ,CAACzZ,OAAO,EAAE;QAClD,OAAO,IAAI6Z,YAAY,CAAC/kB,KAAK,CAACkhB,aAAa,CAAC,IAAItB,QAAQ,CAAC,IAAI,CAAC8E,QAAQ,CAAC5E,eAAe,EAAE,CAAC,CAAC,EAAEoF,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC8E,QAAQ,CAACrC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,EAAEgC,QAAQ,CAAC,CAAC,EAAE1kB,KAAK,CAACkhB,aAAa,CAAC,IAAItB,QAAQ,CAAC,IAAI,CAAC+E,QAAQ,CAAC7E,eAAe,EAAE,CAAC,CAAC,EAAEoF,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC+E,QAAQ,CAACtC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,EAAEiC,QAAQ,CAAC,CAAC,CAAC;MACjY;MACA,IAAI,IAAI,CAACD,QAAQ,CAAC5E,eAAe,GAAG,CAAC,IAAI,IAAI,CAAC6E,QAAQ,CAAC7E,eAAe,GAAG,CAAC,EAAE;QACxE,OAAO,IAAIiF,YAAY,CAAC/kB,KAAK,CAACkhB,aAAa,CAACgE,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC8E,QAAQ,CAAC5E,eAAe,GAAG,CAAC,EAAEva,MAAM,CAACmd,gBAAgB,CAAC,EAAEgC,QAAQ,CAAC,EAAEQ,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC8E,QAAQ,CAACrC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,EAAEgC,QAAQ,CAAC,CAAC,EAAE1kB,KAAK,CAACkhB,aAAa,CAACgE,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC+E,QAAQ,CAAC7E,eAAe,GAAG,CAAC,EAAEva,MAAM,CAACmd,gBAAgB,CAAC,EAAEiC,QAAQ,CAAC,EAAEO,iBAAiB,CAAC,IAAItF,QAAQ,CAAC,IAAI,CAAC+E,QAAQ,CAACtC,sBAAsB,GAAG,CAAC,EAAE9c,MAAM,CAACmd,gBAAgB,CAAC,EAAEiC,QAAQ,CAAC,CAAC,CAAC;MAC/e;MACA,MAAM,IAAIvH,kBAAkB,CAAC,CAAC;IAClC,CAAC;IACD,OAAOqH,gBAAgB;EAC3B,CAAC,CAAC,CAAE;EACJ,SAASS,iBAAiBA,CAACrR,QAAQ,EAAEsR,OAAO,EAAE;IAC1C,IAAItR,QAAQ,CAAC/B,UAAU,GAAG,CAAC,EAAE;MACzB,OAAO,IAAI8N,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;IAC7B;IACA,IAAI/L,QAAQ,CAAC/B,UAAU,GAAGqT,OAAO,CAACzsB,MAAM,EAAE;MACtC,OAAO,IAAIknB,QAAQ,CAACuF,OAAO,CAACzsB,MAAM,EAAEysB,OAAO,CAACA,OAAO,CAACzsB,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM,GAAG,CAAC,CAAC;IAC/E;IACA,IAAIqT,IAAI,GAAGoZ,OAAO,CAACtR,QAAQ,CAAC/B,UAAU,GAAG,CAAC,CAAC;IAC3C,IAAI+B,QAAQ,CAAC1G,MAAM,GAAGpB,IAAI,CAACrT,MAAM,GAAG,CAAC,EAAE;MACnC,OAAO,IAAIknB,QAAQ,CAAC/L,QAAQ,CAAC/B,UAAU,EAAE/F,IAAI,CAACrT,MAAM,GAAG,CAAC,CAAC;IAC7D;IACA,OAAOmb,QAAQ;EACnB;EACA,SAASoR,iBAAiBA,CAACnT,UAAU,EAAE2F,KAAK,EAAE;IAC1C,OAAO3F,UAAU,IAAI,CAAC,IAAIA,UAAU,IAAI2F,KAAK,CAAC/e,MAAM;EACxD;EACA,IAAI0sB,wBAAwB,GAAG,aAAe,UAAUpsB,MAAM,EAAE;IAC5D9B,SAAS,CAACkuB,wBAAwB,EAAEpsB,MAAM,CAAC;IAC3C,SAASosB,wBAAwBA,CAAC9U,aAAa,EAAEC,aAAa,EAAE8U,YAAY,EAAE;MAC1E,IAAIjsB,KAAK,GAAGJ,MAAM,CAACnB,IAAI,CAAC,IAAI,EAAEyY,aAAa,EAAEC,aAAa,CAAC,IAAI,IAAI;MACnEnX,KAAK,CAACisB,YAAY,GAAGA,YAAY;MACjC,OAAOjsB,KAAK;IAChB;IACAgsB,wBAAwB,CAACE,iBAAiB,GAAG,UAAUC,aAAa,EAAE;MAClE,IAAIjV,aAAa,GAAG8R,SAAS,CAACpD,IAAI,CAACuG,aAAa,CAAC/U,GAAG,CAAC,UAAU3Q,CAAC,EAAE;QAAE,OAAOuiB,SAAS,CAACE,kBAAkB,CAACziB,CAAC,CAACyQ,aAAa,CAAC;MAAE,CAAC,CAAC,CAAC;MAC7H,IAAIC,aAAa,GAAG6R,SAAS,CAACpD,IAAI,CAACuG,aAAa,CAAC/U,GAAG,CAAC,UAAU3Q,CAAC,EAAE;QAAE,OAAOuiB,SAAS,CAACE,kBAAkB,CAACziB,CAAC,CAAC0Q,aAAa,CAAC;MAAE,CAAC,CAAC,CAAC;MAC7H,OAAO,IAAI6U,wBAAwB,CAAC9U,aAAa,EAAEC,aAAa,EAAEgV,aAAa,CAAC;IACpF,CAAC;IACDH,wBAAwB,CAACztB,SAAS,CAAC6tB,IAAI,GAAG,YAAY;MAClD,IAAI1qB,EAAE;MACN,OAAO,IAAIsqB,wBAAwB,CAAC,IAAI,CAACT,QAAQ,EAAE,IAAI,CAACD,QAAQ,EAAE,CAAC5pB,EAAE,GAAG,IAAI,CAACuqB,YAAY,MAAM,IAAI,IAAIvqB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC0V,GAAG,CAAC,UAAUiV,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACD,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC,CAAC;IAC9K,CAAC;IACDJ,wBAAwB,CAACztB,SAAS,CAAC+tB,8BAA8B,GAAG,YAAY;MAC5E,OAAO,IAAIN,wBAAwB,CAAC,IAAI,CAACV,QAAQ,EAAE,IAAI,CAACC,QAAQ,EAAE,CAAC,IAAI,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;IAC9F,CAAC;IACD,OAAOQ,wBAAwB;EACnC,CAAC,CAACX,gBAAgB,CAAE;EACpB,IAAIM,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAACzU,aAAa,EAAEC,aAAa,EAAE;MAChD,IAAI,CAACD,aAAa,GAAGA,aAAa;MAClC,IAAI,CAACC,aAAa,GAAGA,aAAa;IACtC;IACAwU,YAAY,CAAC/F,IAAI,GAAG,UAAUuG,aAAa,EAAE;MACzC,IAAIA,aAAa,CAAC7sB,MAAM,KAAK,CAAC,EAAE;QAC5B,MAAM,IAAI0kB,kBAAkB,CAAC,6CAA6C,CAAC;MAC/E;MACA,IAAIzQ,MAAM,GAAG4Y,aAAa,CAAC,CAAC,CAAC;MAC7B,KAAK,IAAI9sB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8sB,aAAa,CAAC7sB,MAAM,EAAED,CAAC,EAAE,EAAE;QAC3CkU,MAAM,GAAGA,MAAM,CAACqS,IAAI,CAACuG,aAAa,CAAC9sB,CAAC,CAAC,CAAC;MAC1C;MACA,OAAOkU,MAAM;IACjB,CAAC;IACDoY,YAAY,CAACY,YAAY,GAAG,UAAUJ,aAAa,EAAE;MACjD,KAAK,IAAI9sB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8sB,aAAa,CAAC7sB,MAAM,EAAED,CAAC,EAAE,EAAE;QAC3C,IAAImtB,QAAQ,GAAGL,aAAa,CAAC9sB,CAAC,GAAG,CAAC,CAAC;QACnC,IAAIyM,OAAO,GAAGqgB,aAAa,CAAC9sB,CAAC,CAAC;QAC9B,IAAI,EAAEmtB,QAAQ,CAACtV,aAAa,CAACwQ,cAAc,CAAC,CAAC,CAACjB,eAAe,CAAC3a,OAAO,CAACoL,aAAa,CAACyQ,gBAAgB,CAAC,CAAC,CAAC,IAAI6E,QAAQ,CAACrV,aAAa,CAACuQ,cAAc,CAAC,CAAC,CAACjB,eAAe,CAAC3a,OAAO,CAACqL,aAAa,CAACwQ,gBAAgB,CAAC,CAAC,CAAC,CAAC,EAAE;UAC3M,MAAM,IAAI3D,kBAAkB,CAAC,+BAA+B,CAAC;QACjE;MACJ;IACJ,CAAC;IACD2H,YAAY,CAACptB,SAAS,CAAC6tB,IAAI,GAAG,YAAY;MACtC,OAAO,IAAIT,YAAY,CAAC,IAAI,CAACxU,aAAa,EAAE,IAAI,CAACD,aAAa,CAAC;IACnE,CAAC;IACDyU,YAAY,CAACptB,SAAS,CAACqnB,IAAI,GAAG,UAAUhU,KAAK,EAAE;MAC3C,OAAO,IAAI+Z,YAAY,CAAC,IAAI,CAACzU,aAAa,CAAC6P,SAAS,CAACnV,KAAK,CAACsF,aAAa,CAAC,EAAE,IAAI,CAACC,aAAa,CAAC4P,SAAS,CAACnV,KAAK,CAACuF,aAAa,CAAC,CAAC;IACjI,CAAC;IACD,OAAOwU,YAAY;EACvB,CAAC,CAAC,CAAE;EACJ,SAASc,iCAAiCA,CAACC,UAAU,EAAEC,aAAa,EAAEC,aAAa,EAAEC,mBAAmB,EAAE;IACtG,IAAIC,GAAG,EAAEprB,EAAE;IACX,IAAImrB,mBAAmB,KAAK,KAAK,CAAC,EAAE;MAAEA,mBAAmB,GAAG,KAAK;IAAE;IACnE,IAAI1mB,OAAO,GAAG,EAAE;IAChB,IAAI;MACA,KAAK,IAAI+c,EAAE,GAAGnkB,QAAQ,CAAC2jB,eAAe,CAACgK,UAAU,CAACtV,GAAG,CAAC,UAAUxV,CAAC,EAAE;UAAE,OAAOmrB,mBAAmB,CAACnrB,CAAC,EAAE+qB,aAAa,EAAEC,aAAa,CAAC;QAAE,CAAC,CAAC,EAAE,UAAUI,EAAE,EAAEC,EAAE,EAAE;UAAE,OAAOD,EAAE,CAAC1B,QAAQ,CAAClC,cAAc,CAAC6D,EAAE,CAAC3B,QAAQ,CAAC,IAAI0B,EAAE,CAACzB,QAAQ,CAACnC,cAAc,CAAC6D,EAAE,CAAC1B,QAAQ,CAAC;QAAE,CAAC,CAAC,CAAC,EAAEzC,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE,CAACupB,EAAE,CAACrpB,IAAI,EAAEqpB,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE;QAChS,IAAIoiB,CAAC,GAAGmH,EAAE,CAACtpB,KAAK;QAChB,IAAI0tB,KAAK,GAAGvL,CAAC,CAAC,CAAC,CAAC;QAChB,IAAImB,IAAI,GAAGnB,CAAC,CAACA,CAAC,CAACriB,MAAM,GAAG,CAAC,CAAC;QAC1B6G,OAAO,CAACzF,IAAI,CAAC,IAAIsrB,wBAAwB,CAACkB,KAAK,CAAC5B,QAAQ,CAAC1F,IAAI,CAAC9C,IAAI,CAACwI,QAAQ,CAAC,EAAE4B,KAAK,CAAC3B,QAAQ,CAAC3F,IAAI,CAAC9C,IAAI,CAACyI,QAAQ,CAAC,EAAE5J,CAAC,CAACvK,GAAG,CAAC,UAAUxV,CAAC,EAAE;UAAE,OAAOA,CAAC,CAACqqB,YAAY,CAAC,CAAC,CAAC;QAAE,CAAC,CAAC,CAAC,CAAC;MACzK;IACJ,CAAC,CACD,OAAOkB,KAAK,EAAE;MAAEL,GAAG,GAAG;QAAE7oB,KAAK,EAAEkpB;MAAM,CAAC;IAAE,CAAC,SACjC;MACJ,IAAI;QACA,IAAIrE,EAAE,IAAI,CAACA,EAAE,CAACrpB,IAAI,KAAKiC,EAAE,GAAGwhB,EAAE,CAAChf,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACykB,EAAE,CAAC;MACvD,CAAC,SACO;QAAE,IAAI4J,GAAG,EAAE,MAAMA,GAAG,CAAC7oB,KAAK;MAAE;IACxC;IACAqgB,QAAQ,CAAC,YAAY;MACjB,IAAI,CAACuI,mBAAmB,IAAI1mB,OAAO,CAAC7G,MAAM,GAAG,CAAC,EAAE;QAC5C,IAAI6G,OAAO,CAAC,CAAC,CAAC,CAAColB,QAAQ,CAAC7E,eAAe,KAAKvgB,OAAO,CAAC,CAAC,CAAC,CAACmlB,QAAQ,CAAC5E,eAAe,EAAE;UAC7E,OAAO,KAAK;QAChB;QACA,IAAIkG,aAAa,CAACttB,MAAM,CAAC8qB,SAAS,GAAGjkB,OAAO,CAACA,OAAO,CAAC7G,MAAM,GAAG,CAAC,CAAC,CAACisB,QAAQ,CAACtC,sBAAsB,KAAK0D,aAAa,CAACrtB,MAAM,CAAC8qB,SAAS,GAAGjkB,OAAO,CAACA,OAAO,CAAC7G,MAAM,GAAG,CAAC,CAAC,CAACgsB,QAAQ,CAACrC,sBAAsB,EAAE;UAC/L,OAAO,KAAK;QAChB;MACJ;MACA,OAAO1E,kBAAkB,CAACpe,OAAO,EAAE,UAAUinB,EAAE,EAAEC,EAAE,EAAE;QAAE,OAAOA,EAAE,CAAC/B,QAAQ,CAAC5E,eAAe,GAAG0G,EAAE,CAAC9B,QAAQ,CAACrC,sBAAsB,KAAKoE,EAAE,CAAC9B,QAAQ,CAAC7E,eAAe,GAAG0G,EAAE,CAAC7B,QAAQ,CAACtC,sBAAsB;QAAI;QACnMmE,EAAE,CAAC9B,QAAQ,CAACrC,sBAAsB,GAAGoE,EAAE,CAAC/B,QAAQ,CAAC5E,eAAe,IAAI0G,EAAE,CAAC7B,QAAQ,CAACtC,sBAAsB,GAAGoE,EAAE,CAAC9B,QAAQ,CAAC7E,eAAe;MAAE,CAAC,CAAC;IAChJ,CAAC,CAAC;IACF,OAAOvgB,OAAO;EAClB;EACA,SAAS4mB,mBAAmBA,CAACO,YAAY,EAAEX,aAAa,EAAEC,aAAa,EAAE;IACrE,IAAIW,cAAc,GAAG,CAAC;IACtB,IAAIC,YAAY,GAAG,CAAC;IACpB,IAAIF,YAAY,CAACnW,aAAa,CAACyB,SAAS,KAAK,CAAC,IAAI0U,YAAY,CAACpW,aAAa,CAAC0B,SAAS,KAAK,CAAC,IAAI0U,YAAY,CAACpW,aAAa,CAACwP,eAAe,GAAG6G,cAAc,IAAID,YAAY,CAACpW,aAAa,CAACyP,aAAa,IAAI2G,YAAY,CAACnW,aAAa,CAACuP,eAAe,GAAG6G,cAAc,IAAID,YAAY,CAACnW,aAAa,CAACwP,aAAa,EAAE;MAChT6G,YAAY,GAAG,CAAC,CAAC;IACrB;IACA,IAAIF,YAAY,CAACnW,aAAa,CAACwB,WAAW,GAAG,CAAC,IAAIiU,aAAa,CAAC/B,aAAa,CAACyC,YAAY,CAACnW,aAAa,CAACuP,eAAe,CAAC,IAAI4G,YAAY,CAACpW,aAAa,CAACyB,WAAW,GAAG,CAAC,IAAIgU,aAAa,CAAC9B,aAAa,CAACyC,YAAY,CAACpW,aAAa,CAACwP,eAAe,CAAC,IAAI4G,YAAY,CAACpW,aAAa,CAACwP,eAAe,IAAI4G,YAAY,CAACpW,aAAa,CAACyP,aAAa,GAAG6G,YAAY,IAAIF,YAAY,CAACnW,aAAa,CAACuP,eAAe,IAAI4G,YAAY,CAACnW,aAAa,CAACwP,aAAa,GAAG6G,YAAY,EAAE;MAClcD,cAAc,GAAG,CAAC;IACtB;IACA,IAAIE,iBAAiB,GAAG,IAAIzE,SAAS,CAACsE,YAAY,CAACpW,aAAa,CAACwP,eAAe,GAAG6G,cAAc,EAAED,YAAY,CAACpW,aAAa,CAACyP,aAAa,GAAG,CAAC,GAAG6G,YAAY,CAAC;IAC/J,IAAIE,iBAAiB,GAAG,IAAI1E,SAAS,CAACsE,YAAY,CAACnW,aAAa,CAACuP,eAAe,GAAG6G,cAAc,EAAED,YAAY,CAACnW,aAAa,CAACwP,aAAa,GAAG,CAAC,GAAG6G,YAAY,CAAC;IAC/J,OAAO,IAAIxB,wBAAwB,CAACyB,iBAAiB,EAAEC,iBAAiB,EAAE,CAACJ,YAAY,CAAC,CAAC;EAC7F;EACA,IAAIK,mBAAmB,GAAG,aAAe,YAAY;IACjD,SAASA,mBAAmBA,CAACC,KAAK,EAAE1C,UAAU,EAAE;MAC5C,IAAI,CAAC0C,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAC1C,UAAU,GAAGA,UAAU;IAChC;IACAyC,mBAAmB,CAACE,OAAO,GAAG,UAAUC,IAAI,EAAEC,IAAI,EAAE;MAChD,OAAO,IAAIJ,mBAAmB,CAAC,CAAC,IAAIK,YAAY,CAACvJ,WAAW,CAACQ,QAAQ,CAAC6I,IAAI,CAACxuB,MAAM,CAAC,EAAEmlB,WAAW,CAACQ,QAAQ,CAAC8I,IAAI,CAACzuB,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC;IACnI,CAAC;IACDquB,mBAAmB,CAACM,eAAe,GAAG,UAAUH,IAAI,EAAEC,IAAI,EAAE;MACxD,OAAO,IAAIJ,mBAAmB,CAAC,CAAC,IAAIK,YAAY,CAACvJ,WAAW,CAACQ,QAAQ,CAAC6I,IAAI,CAACxuB,MAAM,CAAC,EAAEmlB,WAAW,CAACQ,QAAQ,CAAC8I,IAAI,CAACzuB,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;IAClI,CAAC;IACD,OAAOquB,mBAAmB;EAC9B,CAAC,CAAC,CAAE;EACJ,IAAIK,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAACE,SAAS,EAAEC,SAAS,EAAE;MACxC,IAAI,CAACD,SAAS,GAAGA,SAAS;MAC1B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC9B;IACAH,YAAY,CAACI,MAAM,GAAG,UAAUC,aAAa,EAAEC,UAAU,EAAE;MACvD,IAAI/a,MAAM,GAAG,EAAE;MACf4P,eAAe,CAACkL,aAAa,EAAE,UAAUzsB,CAAC,EAAE3D,CAAC,EAAE;QAC3CsV,MAAM,CAAC7S,IAAI,CAACstB,YAAY,CAACO,eAAe,CAAC3sB,CAAC,GAAGA,CAAC,CAAC4sB,gBAAgB,CAAC,CAAC,GAAGC,UAAU,CAACjE,IAAI,EAAEvsB,CAAC,GAAGA,CAAC,CAACywB,SAAS,CAAC,CAAC,GAAG,IAAID,UAAU,CAACH,UAAU,EAAE,CAAC1sB,CAAC,GAAGA,CAAC,CAACusB,SAAS,CAACzJ,YAAY,GAAG9iB,CAAC,CAACssB,SAAS,CAACxJ,YAAY,GAAG,CAAC,IAAI4J,UAAU,CAAC,CAAC,CAAC;MACrN,CAAC,CAAC;MACF,OAAO/a,MAAM;IACjB,CAAC;IACDya,YAAY,CAACO,eAAe,GAAG,UAAUvoB,KAAK,EAAE0e,YAAY,EAAE;MAC1D,OAAO,IAAIsJ,YAAY,CAAC,IAAIvJ,WAAW,CAACze,KAAK,CAACxD,OAAO,EAAEkiB,YAAY,CAACliB,OAAO,CAAC,EAAE,IAAIiiB,WAAW,CAACze,KAAK,CAACtD,OAAO,EAAEgiB,YAAY,CAAChiB,OAAO,CAAC,CAAC;IACvI,CAAC;IACDsrB,YAAY,CAACzB,YAAY,GAAG,UAAU8B,aAAa,EAAE;MACjD,IAAIM,GAAG,EAAEjtB,EAAE;MACX,IAAIohB,IAAI,GAAG1Z,SAAS;MACpB,IAAI;QACA,KAAK,IAAIwlB,eAAe,GAAG7vB,QAAQ,CAACsvB,aAAa,CAAC,EAAEQ,iBAAiB,GAAGD,eAAe,CAACrvB,IAAI,CAAC,CAAC,EAAE,CAACsvB,iBAAiB,CAACpvB,IAAI,EAAEovB,iBAAiB,GAAGD,eAAe,CAACrvB,IAAI,CAAC,CAAC,EAAE;UACjK,IAAIuvB,GAAG,GAAGD,iBAAiB,CAACrvB,KAAK;UACjC,IAAIsjB,IAAI,EAAE;YACN,IAAI,EAAEA,IAAI,CAACoL,SAAS,CAACxJ,YAAY,IAAIoK,GAAG,CAACZ,SAAS,CAACloB,KAAK,IAAI8c,IAAI,CAACqL,SAAS,CAACzJ,YAAY,IAAIoK,GAAG,CAACX,SAAS,CAACnoB,KAAK,CAAC,EAAE;cAC7G,MAAM,IAAIge,kBAAkB,CAAC,+BAA+B,CAAC;YACjE;UACJ;UACAlB,IAAI,GAAGgM,GAAG;QACd;MACJ,CAAC,CACD,OAAOC,KAAK,EAAE;QAAEJ,GAAG,GAAG;UAAE1qB,KAAK,EAAE8qB;QAAM,CAAC;MAAE,CAAC,SACjC;QACJ,IAAI;UACA,IAAIF,iBAAiB,IAAI,CAACA,iBAAiB,CAACpvB,IAAI,KAAKiC,EAAE,GAAGktB,eAAe,CAAC1qB,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACmwB,eAAe,CAAC;QAC/G,CAAC,SACO;UAAE,IAAID,GAAG,EAAE,MAAMA,GAAG,CAAC1qB,KAAK;QAAE;MACxC;IACJ,CAAC;IACD+pB,YAAY,CAACzvB,SAAS,CAACywB,IAAI,GAAG,YAAY;MACtC,OAAO,IAAIhB,YAAY,CAAC,IAAI,CAACG,SAAS,EAAE,IAAI,CAACD,SAAS,CAAC;IAC3D,CAAC;IACDF,YAAY,CAACzvB,SAAS,CAACqnB,IAAI,GAAG,UAAUhU,KAAK,EAAE;MAC3C,OAAO,IAAIoc,YAAY,CAAC,IAAI,CAACE,SAAS,CAACtI,IAAI,CAAChU,KAAK,CAACsc,SAAS,CAAC,EAAE,IAAI,CAACC,SAAS,CAACvI,IAAI,CAAChU,KAAK,CAACuc,SAAS,CAAC,CAAC;IACvG,CAAC;IACDH,YAAY,CAACzvB,SAAS,CAACinB,KAAK,GAAG,UAAUJ,MAAM,EAAE;MAC7C,IAAIA,MAAM,KAAK,CAAC,EAAE;QACd,OAAO,IAAI;MACf;MACA,OAAO,IAAI4I,YAAY,CAAC,IAAI,CAACE,SAAS,CAAC1I,KAAK,CAACJ,MAAM,CAAC,EAAE,IAAI,CAAC+I,SAAS,CAAC3I,KAAK,CAACJ,MAAM,CAAC,CAAC;IACvF,CAAC;IACD4I,YAAY,CAACzvB,SAAS,CAACknB,UAAU,GAAG,UAAUL,MAAM,EAAE;MAClD,IAAIA,MAAM,KAAK,CAAC,EAAE;QACd,OAAO,IAAI;MACf;MACA,OAAO,IAAI4I,YAAY,CAAC,IAAI,CAACE,SAAS,CAACzI,UAAU,CAACL,MAAM,CAAC,EAAE,IAAI,CAAC+I,SAAS,CAAC1I,UAAU,CAACL,MAAM,CAAC,CAAC;IACjG,CAAC;IACD4I,YAAY,CAACzvB,SAAS,CAACmnB,QAAQ,GAAG,UAAUN,MAAM,EAAE;MAChD,IAAIA,MAAM,KAAK,CAAC,EAAE;QACd,OAAO,IAAI;MACf;MACA,OAAO,IAAI4I,YAAY,CAAC,IAAI,CAACE,SAAS,CAACxI,QAAQ,CAACN,MAAM,CAAC,EAAE,IAAI,CAAC+I,SAAS,CAACzI,QAAQ,CAACN,MAAM,CAAC,CAAC;IAC7F,CAAC;IACD4I,YAAY,CAACzvB,SAAS,CAACsnB,SAAS,GAAG,UAAUjU,KAAK,EAAE;MAChD,IAAIoY,EAAE,GAAG,IAAI,CAACkE,SAAS,CAACrI,SAAS,CAACjU,KAAK,CAACsc,SAAS,CAAC;MAClD,IAAIjE,EAAE,GAAG,IAAI,CAACkE,SAAS,CAACtI,SAAS,CAACjU,KAAK,CAACuc,SAAS,CAAC;MAClD,IAAI,CAACnE,EAAE,IAAI,CAACC,EAAE,EAAE;QACZ,OAAO7gB,SAAS;MACpB;MACA,OAAO,IAAI4kB,YAAY,CAAChE,EAAE,EAAEC,EAAE,CAAC;IACnC,CAAC;IACD+D,YAAY,CAACzvB,SAAS,CAACmwB,SAAS,GAAG,YAAY;MAC3C,OAAO,IAAID,UAAU,CAAC,IAAI,CAACP,SAAS,CAACloB,KAAK,EAAE,IAAI,CAACmoB,SAAS,CAACnoB,KAAK,CAAC;IACrE,CAAC;IACDgoB,YAAY,CAACzvB,SAAS,CAACiwB,gBAAgB,GAAG,YAAY;MAClD,OAAO,IAAIC,UAAU,CAAC,IAAI,CAACP,SAAS,CAACxJ,YAAY,EAAE,IAAI,CAACyJ,SAAS,CAACzJ,YAAY,CAAC;IACnF,CAAC;IACD,OAAOsJ,YAAY;EACvB,CAAC,CAAC,CAAE;EACJ,IAAIS,UAAU,GAAG,aAAe,YAAY;IACxC,SAASA,UAAUA,CAACjsB,OAAO,EAAEE,OAAO,EAAE;MAClC,IAAI,CAACF,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACE,OAAO,GAAGA,OAAO;IAC1B;IACA+rB,UAAU,CAAClwB,SAAS,CAACinB,KAAK,GAAG,UAAUJ,MAAM,EAAE;MAC3C,IAAIA,MAAM,KAAK,CAAC,EAAE;QACd,OAAO,IAAI;MACf;MACA,OAAO,IAAIjD,EAAE,CAAC,IAAI,CAAC3f,OAAO,GAAG4iB,MAAM,EAAE,IAAI,CAAC1iB,OAAO,GAAG0iB,MAAM,CAAC;IAC/D,CAAC;IACDqJ,UAAU,CAAClwB,SAAS,CAAC+jB,MAAM,GAAG,UAAU1Q,KAAK,EAAE;MAC3C,OAAO,IAAI,CAACpP,OAAO,KAAKoP,KAAK,CAACpP,OAAO,IAAI,IAAI,CAACE,OAAO,KAAKkP,KAAK,CAAClP,OAAO;IAC3E,CAAC;IACD,OAAO+rB,UAAU;EACrB,CAAC,CAAC,CAAE;EACJtM,EAAE,GAAGsM,UAAU;EACf,CAAC,YAAY;IACTtM,EAAE,CAACqI,IAAI,GAAG,IAAIrI,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;EAC1B,CAAC,EAAE,CAAC;EACJ,CAAC,YAAY;IACTA,EAAE,CAACvP,GAAG,GAAG,IAAIuP,EAAE,CAAChW,MAAM,CAACmd,gBAAgB,EAAEnd,MAAM,CAACmd,gBAAgB,CAAC;EACrE,CAAC,EAAE,CAAC;EACJ,IAAI2F,eAAe,GAAG,aAAe,YAAY;IAC7C,SAASA,eAAeA,CAAA,EAAG,CAC3B;IACAA,eAAe,CAAC1wB,SAAS,CAAC2wB,OAAO,GAAG,YAAY;MAC5C,OAAO,IAAI;IACf,CAAC;IACD,OAAOD,eAAe;EAC1B,CAAC,CAAC,CAAE;EACJ7M,EAAE,GAAG6M,eAAe;EACpB,CAAC,YAAY;IACT7M,EAAE,CAAC+M,QAAQ,GAAG,IAAI/M,EAAE,CAAC,CAAC;EAC1B,CAAC,EAAE,CAAC;EACJ,IAAIgN,WAAW,GAAG,aAAe,YAAY;IACzC,SAASA,WAAWA,CAACC,OAAO,EAAE;MAC1B,IAAI,CAACA,OAAO,GAAGA,OAAO;MACtB,IAAI,CAACC,SAAS,GAAGxP,IAAI,CAACD,GAAG,CAAC,CAAC;MAC3B,IAAI,CAAC0P,KAAK,GAAG,IAAI;MACjB,IAAIF,OAAO,IAAI,CAAC,EAAE;QACd,MAAM,IAAIrL,kBAAkB,CAAC,0BAA0B,CAAC;MAC5D;IACJ;IACAoL,WAAW,CAAC7wB,SAAS,CAAC2wB,OAAO,GAAG,YAAY;MACxC,IAAIK,KAAK,GAAGzP,IAAI,CAACD,GAAG,CAAC,CAAC,GAAG,IAAI,CAACyP,SAAS,GAAG,IAAI,CAACD,OAAO;MACtD,IAAI,CAACE,KAAK,IAAI,IAAI,CAACA,KAAK,EAAE;QACtB,IAAI,CAACA,KAAK,GAAG,KAAK;MACtB;MACA,OAAO,IAAI,CAACA,KAAK;IACrB,CAAC;IACDH,WAAW,CAAC7wB,SAAS,CAACixB,OAAO,GAAG,YAAY;MACxC,IAAI,CAACH,OAAO,GAAGljB,MAAM,CAACmd,gBAAgB;MACtC,IAAI,CAAC4F,OAAO,GAAG,YAAY;QAAE,OAAO,IAAI;MAAE,CAAC;MAC3C,IAAI,CAACK,KAAK,GAAG,IAAI;IACrB,CAAC;IACD,OAAOH,WAAW;EACtB,CAAC,CAAC,CAAE;EACJ,IAAIK,OAAO,GAAG,aAAe,YAAY;IACrC,SAASA,OAAOA,CAAC/U,KAAK,EAAEgV,MAAM,EAAE;MAC5B,IAAI,CAAChV,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACgV,MAAM,GAAGA,MAAM;MACpB,IAAI,CAAC1H,KAAK,GAAG,EAAE;MACf,IAAI,CAACA,KAAK,GAAG,IAAI3pB,KAAK,CAACqc,KAAK,GAAGgV,MAAM,CAAC;IAC1C;IACAD,OAAO,CAAClxB,SAAS,CAACqY,GAAG,GAAG,UAAUL,CAAC,EAAEmL,CAAC,EAAE;MACpC,OAAO,IAAI,CAACsG,KAAK,CAACzR,CAAC,GAAGmL,CAAC,GAAG,IAAI,CAAChH,KAAK,CAAC;IACzC,CAAC;IACD+U,OAAO,CAAClxB,SAAS,CAACuX,GAAG,GAAG,UAAUS,CAAC,EAAEmL,CAAC,EAAEliB,KAAK,EAAE;MAC3C,IAAI,CAACwoB,KAAK,CAACzR,CAAC,GAAGmL,CAAC,GAAG,IAAI,CAAChH,KAAK,CAAC,GAAGlb,KAAK;IAC1C,CAAC;IACD,OAAOiwB,OAAO;EAClB,CAAC,CAAC,CAAE;EACJ,SAASE,OAAOA,CAACC,QAAQ,EAAE;IACvB,OAAOA,QAAQ,KAAK,EAAE,IAAIA,QAAQ,KAAK,CAAC;EAC5C;EACA,IAAIC,iBAAiB,GAAG,aAAe,YAAY;IAC/C,SAASA,iBAAiBA,CAACxe,KAAK,EAAEgN,KAAK,EAAEyR,MAAM,EAAE;MAC7C,IAAI,CAACze,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACgN,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACyR,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACC,SAAS,GAAG,EAAE;MACnB,IAAIC,OAAO,GAAG,CAAC;MACf,KAAK,IAAI3wB,CAAC,GAAGgS,KAAK,CAACqV,eAAe,GAAG,CAAC,EAAErnB,CAAC,GAAGgS,KAAK,CAAC4X,sBAAsB,GAAG,CAAC,EAAE5pB,CAAC,EAAE,EAAE;QAC/E,IAAIsT,IAAI,GAAG0L,KAAK,CAAChf,CAAC,CAAC;QACnB,KAAK,IAAIylB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGnS,IAAI,CAACrT,MAAM,EAAEwlB,CAAC,EAAE,EAAE;UAClCkL,OAAO,EAAE;UACT,IAAIC,GAAG,GAAGtd,IAAI,CAACmS,CAAC,CAAC;UACjB,IAAIoL,IAAI,GAAG7N,EAAE,CAAC8N,MAAM,CAACF,GAAG,CAAC;UACzB,IAAI,CAACF,SAAS,CAACG,IAAI,CAAC,GAAG,CAAC,IAAI,CAACH,SAAS,CAACG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;QAC1D;QACAF,OAAO,EAAE;QACT,IAAII,GAAG,GAAG/N,EAAE,CAAC8N,MAAM,CAAC,IAAI,CAAC;QACzB,IAAI,CAACJ,SAAS,CAACK,GAAG,CAAC,GAAG,CAAC,IAAI,CAACL,SAAS,CAACK,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC;MACxD;MACA,IAAI,CAACC,UAAU,GAAGL,OAAO;IAC7B;IACAH,iBAAiB,CAACM,MAAM,GAAG,UAAUF,GAAG,EAAE;MACtC,IAAIG,GAAG,GAAG,IAAI,CAACE,OAAO,CAAC1Z,GAAG,CAACqZ,GAAG,CAAC;MAC/B,IAAIG,GAAG,KAAKhnB,SAAS,EAAE;QACnBgnB,GAAG,GAAG,IAAI,CAACE,OAAO,CAACC,IAAI;QACvB,IAAI,CAACD,OAAO,CAACxa,GAAG,CAACma,GAAG,EAAEG,GAAG,CAAC;MAC9B;MACA,OAAOA,GAAG;IACd,CAAC;IACDP,iBAAiB,CAACtxB,SAAS,CAACiyB,iBAAiB,GAAG,UAAU5e,KAAK,EAAE;MAC7D,IAAIlQ,EAAE,EAAEwhB,EAAE;MACV,IAAIuN,cAAc,GAAG,CAAC;MACtB,IAAIC,SAAS,GAAG9tB,IAAI,CAACgQ,GAAG,CAAC,IAAI,CAACmd,SAAS,CAACzwB,MAAM,EAAEsS,KAAK,CAACme,SAAS,CAACzwB,MAAM,CAAC;MACvE,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqxB,SAAS,EAAErxB,CAAC,EAAE,EAAE;QAChCoxB,cAAc,IAAI7tB,IAAI,CAAC+tB,GAAG,CAAC,CAAC,CAACjvB,EAAE,GAAG,IAAI,CAACquB,SAAS,CAAC1wB,CAAC,CAAC,MAAM,IAAI,IAAIqC,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,KAAK,CAACwhB,EAAE,GAAGtR,KAAK,CAACme,SAAS,CAAC1wB,CAAC,CAAC,MAAM,IAAI,IAAI6jB,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC,CAAC,CAAC;MAC9J;MACA,OAAO,CAAC,GAAGuN,cAAc,IAAI,IAAI,CAACJ,UAAU,GAAGze,KAAK,CAACye,UAAU,CAAC;IACpE,CAAC;IACD,OAAOR,iBAAiB;EAC5B,CAAC,CAAC,CAAE;EACJxN,EAAE,GAAGwN,iBAAiB;EACtB,CAAC,YAAY;IACTxN,EAAE,CAACiO,OAAO,GAAG,eAAgB,IAAIM,GAAG,CAAC,CAAC;EAC1C,CAAC,EAAE,CAAC;EACJ,IAAIC,yBAAyB,GAAG,aAAe,YAAY;IACvD,SAASA,yBAAyBA,CAAA,EAAG,CACrC;IACAA,yBAAyB,CAACtyB,SAAS,CAAC8I,OAAO,GAAG,UAAUypB,SAAS,EAAEC,SAAS,EAAE1B,OAAO,EAAE2B,aAAa,EAAE;MAClG,IAAI3B,OAAO,KAAK,KAAK,CAAC,EAAE;QAAEA,OAAO,GAAGJ,eAAe,CAACE,QAAQ;MAAE;MAC9D,IAAI2B,SAAS,CAACxxB,MAAM,KAAK,CAAC,IAAIyxB,SAAS,CAACzxB,MAAM,KAAK,CAAC,EAAE;QAClD,OAAOquB,mBAAmB,CAACE,OAAO,CAACiD,SAAS,EAAEC,SAAS,CAAC;MAC5D;MACA,IAAIE,UAAU,GAAG,IAAIxB,OAAO,CAACqB,SAAS,CAACxxB,MAAM,EAAEyxB,SAAS,CAACzxB,MAAM,CAAC;MAChE,IAAI4xB,UAAU,GAAG,IAAIzB,OAAO,CAACqB,SAAS,CAACxxB,MAAM,EAAEyxB,SAAS,CAACzxB,MAAM,CAAC;MAChE,IAAI6xB,OAAO,GAAG,IAAI1B,OAAO,CAACqB,SAAS,CAACxxB,MAAM,EAAEyxB,SAAS,CAACzxB,MAAM,CAAC;MAC7D,KAAK,IAAI8xB,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGN,SAAS,CAACxxB,MAAM,EAAE8xB,GAAG,EAAE,EAAE;QAC7C,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGN,SAAS,CAACzxB,MAAM,EAAE+xB,GAAG,EAAE,EAAE;UAC7C,IAAI,CAAChC,OAAO,CAACH,OAAO,CAAC,CAAC,EAAE;YACpB,OAAOvB,mBAAmB,CAACM,eAAe,CAAC6C,SAAS,EAAEC,SAAS,CAAC;UACpE;UACA,IAAIO,aAAa,GAAGF,GAAG,KAAK,CAAC,GAAG,CAAC,GAAGH,UAAU,CAACra,GAAG,CAACwa,GAAG,GAAG,CAAC,EAAEC,GAAG,CAAC;UAChE,IAAIE,WAAW,GAAGF,GAAG,KAAK,CAAC,GAAG,CAAC,GAAGJ,UAAU,CAACra,GAAG,CAACwa,GAAG,EAAEC,GAAG,GAAG,CAAC,CAAC;UAC9D,IAAIG,gBAAgB,GAAG,KAAK,CAAC;UAC7B,IAAIV,SAAS,CAACW,UAAU,CAACL,GAAG,CAAC,KAAKL,SAAS,CAACU,UAAU,CAACJ,GAAG,CAAC,EAAE;YACzD,IAAID,GAAG,KAAK,CAAC,IAAIC,GAAG,KAAK,CAAC,EAAE;cACxBG,gBAAgB,GAAG,CAAC;YACxB,CAAC,MACI;cACDA,gBAAgB,GAAGP,UAAU,CAACra,GAAG,CAACwa,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAG,CAAC,CAAC;YACvD;YACA,IAAID,GAAG,GAAG,CAAC,IAAIC,GAAG,GAAG,CAAC,IAAIH,UAAU,CAACta,GAAG,CAACwa,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAG,CAAC,CAAC,KAAK,CAAC,EAAE;cAC9DG,gBAAgB,IAAIL,OAAO,CAACva,GAAG,CAACwa,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAG,CAAC,CAAC;YACrD;YACAG,gBAAgB,IAAIR,aAAa,GAAGA,aAAa,CAACI,GAAG,EAAEC,GAAG,CAAC,GAAG,CAAC;UACnE,CAAC,MACI;YACDG,gBAAgB,GAAG,CAAC,CAAC;UACzB;UACA,IAAIE,QAAQ,GAAG9uB,IAAI,CAACgQ,GAAG,CAAC0e,aAAa,EAAEC,WAAW,EAAEC,gBAAgB,CAAC;UACrE,IAAIE,QAAQ,KAAKF,gBAAgB,EAAE;YAC/B,IAAIG,OAAO,GAAGP,GAAG,GAAG,CAAC,IAAIC,GAAG,GAAG,CAAC,GAAGF,OAAO,CAACva,GAAG,CAACwa,GAAG,GAAG,CAAC,EAAEC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;YACpEF,OAAO,CAACrb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAEM,OAAO,GAAG,CAAC,CAAC;YAClCT,UAAU,CAACpb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAE,CAAC,CAAC;UAC/B,CAAC,MACI,IAAIK,QAAQ,KAAKJ,aAAa,EAAE;YACjCH,OAAO,CAACrb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAE,CAAC,CAAC;YACxBH,UAAU,CAACpb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAE,CAAC,CAAC;UAC/B,CAAC,MACI,IAAIK,QAAQ,KAAKH,WAAW,EAAE;YAC/BJ,OAAO,CAACrb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAE,CAAC,CAAC;YACxBH,UAAU,CAACpb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAE,CAAC,CAAC;UAC/B;UACAJ,UAAU,CAACnb,GAAG,CAACsb,GAAG,EAAEC,GAAG,EAAEK,QAAQ,CAAC;QACtC;MACJ;MACA,IAAIne,MAAM,GAAG,EAAE;MACf,IAAIqe,iBAAiB,GAAGd,SAAS,CAACxxB,MAAM;MACxC,IAAIuyB,iBAAiB,GAAGd,SAAS,CAACzxB,MAAM;MACxC,SAASwyB,iCAAiCA,CAACV,GAAG,EAAEC,GAAG,EAAE;QACjD,IAAID,GAAG,GAAG,CAAC,KAAKQ,iBAAiB,IAAIP,GAAG,GAAG,CAAC,KAAKQ,iBAAiB,EAAE;UAChEte,MAAM,CAAC7S,IAAI,CAAC,IAAIstB,YAAY,CAAC,IAAIvJ,WAAW,CAAC2M,GAAG,GAAG,CAAC,EAAEQ,iBAAiB,CAAC,EAAE,IAAInN,WAAW,CAAC4M,GAAG,GAAG,CAAC,EAAEQ,iBAAiB,CAAC,CAAC,CAAC;QAC3H;QACAD,iBAAiB,GAAGR,GAAG;QACvBS,iBAAiB,GAAGR,GAAG;MAC3B;MACA,IAAIU,EAAE,GAAGjB,SAAS,CAACxxB,MAAM,GAAG,CAAC;MAC7B,IAAI0yB,EAAE,GAAGjB,SAAS,CAACzxB,MAAM,GAAG,CAAC;MAC7B,OAAOyyB,EAAE,IAAI,CAAC,IAAIC,EAAE,IAAI,CAAC,EAAE;QACvB,IAAId,UAAU,CAACta,GAAG,CAACmb,EAAE,EAAEC,EAAE,CAAC,KAAK,CAAC,EAAE;UAC9BF,iCAAiC,CAACC,EAAE,EAAEC,EAAE,CAAC;UACzCD,EAAE,EAAE;UACJC,EAAE,EAAE;QACR,CAAC,MACI;UACD,IAAId,UAAU,CAACta,GAAG,CAACmb,EAAE,EAAEC,EAAE,CAAC,KAAK,CAAC,EAAE;YAC9BD,EAAE,EAAE;UACR,CAAC,MACI;YACDC,EAAE,EAAE;UACR;QACJ;MACJ;MACAF,iCAAiC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACzCve,MAAM,CAAC0e,OAAO,CAAC,CAAC;MAChB,OAAO,IAAItE,mBAAmB,CAACpa,MAAM,EAAE,KAAK,CAAC;IACjD,CAAC;IACD,OAAOsd,yBAAyB;EACpC,CAAC,CAAC,CAAE;EACJ,IAAIqB,kBAAkB,GAAG,aAAe,YAAY;IAChD,SAASA,kBAAkBA,CAAA,EAAG,CAC9B;IACAA,kBAAkB,CAAC3zB,SAAS,CAAC8I,OAAO,GAAG,UAAUymB,IAAI,EAAEC,IAAI,EAAEsB,OAAO,EAAE;MAClE,IAAIA,OAAO,KAAK,KAAK,CAAC,EAAE;QAAEA,OAAO,GAAGJ,eAAe,CAACE,QAAQ;MAAE;MAC9D,IAAIrB,IAAI,CAACxuB,MAAM,KAAK,CAAC,IAAIyuB,IAAI,CAACzuB,MAAM,KAAK,CAAC,EAAE;QACxC,OAAOquB,mBAAmB,CAACE,OAAO,CAACC,IAAI,EAAEC,IAAI,CAAC;MAClD;MACA,IAAIoE,IAAI,GAAGrE,IAAI;MACf,IAAIsE,IAAI,GAAGrE,IAAI;MACf,SAASsE,cAAcA,CAAC9b,CAAC,EAAEmL,CAAC,EAAE;QAC1B,OAAOnL,CAAC,GAAG4b,IAAI,CAAC7yB,MAAM,IAAIoiB,CAAC,GAAG0Q,IAAI,CAAC9yB,MAAM,IAAI6yB,IAAI,CAACV,UAAU,CAAClb,CAAC,CAAC,KAAK6b,IAAI,CAACX,UAAU,CAAC/P,CAAC,CAAC,EAAE;UACpFnL,CAAC,EAAE;UACHmL,CAAC,EAAE;QACP;QACA,OAAOnL,CAAC;MACZ;MACA,IAAIvY,CAAC,GAAG,CAAC;MACT,IAAIs0B,CAAC,GAAG,IAAIC,cAAc,CAAC,CAAC;MAC5BD,CAAC,CAACxc,GAAG,CAAC,CAAC,EAAEuc,cAAc,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAC9B,IAAIG,KAAK,GAAG,IAAIC,wBAAwB,CAAC,CAAC;MAC1CD,KAAK,CAAC1c,GAAG,CAAC,CAAC,EAAEwc,CAAC,CAAC1b,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI8b,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAEJ,CAAC,CAAC1b,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACzE,IAAIyR,CAAC,GAAG,CAAC;MACTsK,IAAI,EAAE,OAAO,IAAI,EAAE;QACf30B,CAAC,EAAE;QACH,IAAI,CAACqxB,OAAO,CAACH,OAAO,CAAC,CAAC,EAAE;UACpB,OAAOvB,mBAAmB,CAACM,eAAe,CAACkE,IAAI,EAAEC,IAAI,CAAC;QAC1D;QACA,IAAIQ,UAAU,GAAG,CAAChwB,IAAI,CAACsR,GAAG,CAAClW,CAAC,EAAEo0B,IAAI,CAAC9yB,MAAM,GAAGtB,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI60B,UAAU,GAAGjwB,IAAI,CAACsR,GAAG,CAAClW,CAAC,EAAEm0B,IAAI,CAAC7yB,MAAM,GAAGtB,CAAC,GAAG,CAAC,CAAC;QACjD,KAAKqqB,CAAC,GAAGuK,UAAU,EAAEvK,CAAC,IAAIwK,UAAU,EAAExK,CAAC,IAAI,CAAC,EAAE;UAC1C,IAAIyK,cAAc,GAAGzK,CAAC,KAAKwK,UAAU,GAAG,CAAC,CAAC,GAAGP,CAAC,CAAC1b,GAAG,CAACyR,CAAC,GAAG,CAAC,CAAC;UACzD,IAAI0K,eAAe,GAAG1K,CAAC,KAAKuK,UAAU,GAAG,CAAC,CAAC,GAAGN,CAAC,CAAC1b,GAAG,CAACyR,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;UAC9D,IAAI9R,CAAC,GAAG3T,IAAI,CAACsR,GAAG,CAACtR,IAAI,CAACgQ,GAAG,CAACkgB,cAAc,EAAEC,eAAe,CAAC,EAAEZ,IAAI,CAAC7yB,MAAM,CAAC;UACxE,IAAIoiB,CAAC,GAAGnL,CAAC,GAAG8R,CAAC;UACb,IAAI9R,CAAC,GAAG4b,IAAI,CAAC7yB,MAAM,IAAIoiB,CAAC,GAAG0Q,IAAI,CAAC9yB,MAAM,EAAE;YACpC;UACJ;UACA,IAAI0zB,OAAO,GAAGX,cAAc,CAAC9b,CAAC,EAAEmL,CAAC,CAAC;UAClC4Q,CAAC,CAACxc,GAAG,CAACuS,CAAC,EAAE2K,OAAO,CAAC;UACjB,IAAIC,QAAQ,GAAG1c,CAAC,KAAKuc,cAAc,GAAGN,KAAK,CAAC5b,GAAG,CAACyR,CAAC,GAAG,CAAC,CAAC,GAAGmK,KAAK,CAAC5b,GAAG,CAACyR,CAAC,GAAG,CAAC,CAAC;UACzEmK,KAAK,CAAC1c,GAAG,CAACuS,CAAC,EAAE2K,OAAO,KAAKzc,CAAC,GAAG,IAAImc,SAAS,CAACO,QAAQ,EAAE1c,CAAC,EAAEmL,CAAC,EAAEsR,OAAO,GAAGzc,CAAC,CAAC,GAAG0c,QAAQ,CAAC;UACnF,IAAIX,CAAC,CAAC1b,GAAG,CAACyR,CAAC,CAAC,KAAK8J,IAAI,CAAC7yB,MAAM,IAAIgzB,CAAC,CAAC1b,GAAG,CAACyR,CAAC,CAAC,GAAGA,CAAC,KAAK+J,IAAI,CAAC9yB,MAAM,EAAE;YAC1D,MAAMqzB,IAAI;UACd;QACJ;MACJ;MACA,IAAIO,IAAI,GAAGV,KAAK,CAAC5b,GAAG,CAACyR,CAAC,CAAC;MACvB,IAAI9U,MAAM,GAAG,EAAE;MACf,IAAIqe,iBAAiB,GAAGO,IAAI,CAAC7yB,MAAM;MACnC,IAAIuyB,iBAAiB,GAAGO,IAAI,CAAC9yB,MAAM;MACnC,OAAO,IAAI,EAAE;QACT,IAAI6zB,IAAI,GAAGD,IAAI,GAAGA,IAAI,CAAC3c,CAAC,GAAG2c,IAAI,CAAC5zB,MAAM,GAAG,CAAC;QAC1C,IAAI8zB,IAAI,GAAGF,IAAI,GAAGA,IAAI,CAACxR,CAAC,GAAGwR,IAAI,CAAC5zB,MAAM,GAAG,CAAC;QAC1C,IAAI6zB,IAAI,KAAKvB,iBAAiB,IAAIwB,IAAI,KAAKvB,iBAAiB,EAAE;UAC1Dte,MAAM,CAAC7S,IAAI,CAAC,IAAIstB,YAAY,CAAC,IAAIvJ,WAAW,CAAC0O,IAAI,EAAEvB,iBAAiB,CAAC,EAAE,IAAInN,WAAW,CAAC2O,IAAI,EAAEvB,iBAAiB,CAAC,CAAC,CAAC;QACrH;QACA,IAAI,CAACqB,IAAI,EAAE;UACP;QACJ;QACAtB,iBAAiB,GAAGsB,IAAI,CAAC3c,CAAC;QAC1Bsb,iBAAiB,GAAGqB,IAAI,CAACxR,CAAC;QAC1BwR,IAAI,GAAGA,IAAI,CAACxnB,IAAI;MACpB;MACA6H,MAAM,CAAC0e,OAAO,CAAC,CAAC;MAChB,OAAO,IAAItE,mBAAmB,CAACpa,MAAM,EAAE,KAAK,CAAC;IACjD,CAAC;IACD,OAAO2e,kBAAkB;EAC7B,CAAC,CAAC,CAAE;EACJ,IAAIQ,SAAS,GAAG,aAAe,YAAY;IACvC,SAASA,SAASA,CAAChnB,IAAI,EAAE6K,CAAC,EAAEmL,CAAC,EAAEpiB,MAAM,EAAE;MACnC,IAAI,CAACoM,IAAI,GAAGA,IAAI;MAChB,IAAI,CAAC6K,CAAC,GAAGA,CAAC;MACV,IAAI,CAACmL,CAAC,GAAGA,CAAC;MACV,IAAI,CAACpiB,MAAM,GAAGA,MAAM;IACxB;IACA,OAAOozB,SAAS;EACpB,CAAC,CAAC,CAAE;EACJ,IAAIH,cAAc,GAAG,aAAe,YAAY;IAC5C,SAASA,cAAcA,CAAA,EAAG;MACtB,IAAI,CAACc,WAAW,GAAG,IAAIC,UAAU,CAAC,EAAE,CAAC;MACrC,IAAI,CAACC,WAAW,GAAG,IAAID,UAAU,CAAC,EAAE,CAAC;IACzC;IACAf,cAAc,CAACh0B,SAAS,CAACqY,GAAG,GAAG,UAAUqR,GAAG,EAAE;MAC1C,IAAIA,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,CAACA,GAAG,GAAG,CAAC;QACd,OAAO,IAAI,CAACsL,WAAW,CAACtL,GAAG,CAAC;MAChC,CAAC,MACI;QACD,OAAO,IAAI,CAACoL,WAAW,CAACpL,GAAG,CAAC;MAChC;IACJ,CAAC;IACDsK,cAAc,CAACh0B,SAAS,CAACuX,GAAG,GAAG,UAAUmS,GAAG,EAAEzoB,KAAK,EAAE;MACjD,IAAIyoB,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,CAACA,GAAG,GAAG,CAAC;QACd,IAAIA,GAAG,IAAI,IAAI,CAACsL,WAAW,CAACj0B,MAAM,EAAE;UAChC,IAAI8jB,GAAG,GAAG,IAAI,CAACmQ,WAAW;UAC1B,IAAI,CAACA,WAAW,GAAG,IAAID,UAAU,CAAClQ,GAAG,CAAC9jB,MAAM,GAAG,CAAC,CAAC;UACjD,IAAI,CAACi0B,WAAW,CAACzd,GAAG,CAACsN,GAAG,CAAC;QAC7B;QACA,IAAI,CAACmQ,WAAW,CAACtL,GAAG,CAAC,GAAGzoB,KAAK;MACjC,CAAC,MACI;QACD,IAAIyoB,GAAG,IAAI,IAAI,CAACoL,WAAW,CAAC/zB,MAAM,EAAE;UAChC,IAAI8jB,GAAG,GAAG,IAAI,CAACiQ,WAAW;UAC1B,IAAI,CAACA,WAAW,GAAG,IAAIC,UAAU,CAAClQ,GAAG,CAAC9jB,MAAM,GAAG,CAAC,CAAC;UACjD,IAAI,CAAC+zB,WAAW,CAACvd,GAAG,CAACsN,GAAG,CAAC;QAC7B;QACA,IAAI,CAACiQ,WAAW,CAACpL,GAAG,CAAC,GAAGzoB,KAAK;MACjC;IACJ,CAAC;IACD,OAAO+yB,cAAc;EACzB,CAAC,CAAC,CAAE;EACJ,IAAIE,wBAAwB,GAAG,aAAe,YAAY;IACtD,SAASA,wBAAwBA,CAAA,EAAG;MAChC,IAAI,CAACY,WAAW,GAAG,EAAE;MACrB,IAAI,CAACE,WAAW,GAAG,EAAE;IACzB;IACAd,wBAAwB,CAACl0B,SAAS,CAACqY,GAAG,GAAG,UAAUqR,GAAG,EAAE;MACpD,IAAIA,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,CAACA,GAAG,GAAG,CAAC;QACd,OAAO,IAAI,CAACsL,WAAW,CAACtL,GAAG,CAAC;MAChC,CAAC,MACI;QACD,OAAO,IAAI,CAACoL,WAAW,CAACpL,GAAG,CAAC;MAChC;IACJ,CAAC;IACDwK,wBAAwB,CAACl0B,SAAS,CAACuX,GAAG,GAAG,UAAUmS,GAAG,EAAEzoB,KAAK,EAAE;MAC3D,IAAIyoB,GAAG,GAAG,CAAC,EAAE;QACTA,GAAG,GAAG,CAACA,GAAG,GAAG,CAAC;QACd,IAAI,CAACsL,WAAW,CAACtL,GAAG,CAAC,GAAGzoB,KAAK;MACjC,CAAC,MACI;QACD,IAAI,CAAC6zB,WAAW,CAACpL,GAAG,CAAC,GAAGzoB,KAAK;MACjC;IACJ,CAAC;IACD,OAAOizB,wBAAwB;EACnC,CAAC,CAAC,CAAE;EACJ,IAAIe,MAAM,GAAG,aAAe,YAAY;IACpC,SAASA,MAAMA,CAAA,EAAG;MACd,IAAI,CAACpc,GAAG,GAAG,eAAgB,IAAIwZ,GAAG,CAAC,CAAC;IACxC;IACA4C,MAAM,CAACj1B,SAAS,CAACoG,GAAG,GAAG,UAAUyrB,GAAG,EAAE5wB,KAAK,EAAE;MACzC,IAAIoG,MAAM,GAAG,IAAI,CAACwR,GAAG,CAACR,GAAG,CAACwZ,GAAG,CAAC;MAC9B,IAAI,CAACxqB,MAAM,EAAE;QACTA,MAAM,GAAG,eAAgB,IAAI6tB,GAAG,CAAC,CAAC;QAClC,IAAI,CAACrc,GAAG,CAACtB,GAAG,CAACsa,GAAG,EAAExqB,MAAM,CAAC;MAC7B;MACAA,MAAM,CAACjB,GAAG,CAACnF,KAAK,CAAC;IACrB,CAAC;IACDg0B,MAAM,CAACj1B,SAAS,CAAC8D,OAAO,GAAG,UAAU+tB,GAAG,EAAEsD,EAAE,EAAE;MAC1C,IAAI9tB,MAAM,GAAG,IAAI,CAACwR,GAAG,CAACR,GAAG,CAACwZ,GAAG,CAAC;MAC9B,IAAI,CAACxqB,MAAM,EAAE;QACT;MACJ;MACAA,MAAM,CAACvD,OAAO,CAACqxB,EAAE,CAAC;IACtB,CAAC;IACDF,MAAM,CAACj1B,SAAS,CAACqY,GAAG,GAAG,UAAUwZ,GAAG,EAAE;MAClC,IAAIxqB,MAAM,GAAG,IAAI,CAACwR,GAAG,CAACR,GAAG,CAACwZ,GAAG,CAAC;MAC9B,IAAI,CAACxqB,MAAM,EAAE;QACT,OAAO,eAAgB,IAAI6tB,GAAG,CAAC,CAAC;MACpC;MACA,OAAO7tB,MAAM;IACjB,CAAC;IACD,OAAO4tB,MAAM;EACjB,CAAC,CAAC,CAAE;EACJ,IAAIG,sBAAsB,GAAG,aAAe,YAAY;IACpD,SAASA,sBAAsBA,CAACtV,KAAK,EAAEhN,KAAK,EAAEuiB,yBAAyB,EAAE;MACrE,IAAI,CAACvV,KAAK,GAAGA,KAAK;MAClB,IAAI,CAAChN,KAAK,GAAGA,KAAK;MAClB,IAAI,CAACuiB,yBAAyB,GAAGA,yBAAyB;MAC1D,IAAI,CAACC,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACC,2BAA2B,GAAG,EAAE;MACrC,IAAI,CAACC,gBAAgB,GAAG,EAAE;MAC1B,IAAI,CAACC,yBAAyB,GAAG,EAAE;MACnC,IAAI,CAACF,2BAA2B,CAACpzB,IAAI,CAAC,CAAC,CAAC;MACxC,KAAK,IAAIgY,UAAU,GAAG,IAAI,CAACrH,KAAK,CAACqV,eAAe,EAAEhO,UAAU,IAAI,IAAI,CAACrH,KAAK,CAACsV,aAAa,EAAEjO,UAAU,EAAE,EAAE;QACpG,IAAI/F,IAAI,GAAG0L,KAAK,CAAC3F,UAAU,GAAG,CAAC,CAAC;QAChC,IAAIub,eAAe,GAAG,CAAC;QACvB,IAAIvb,UAAU,KAAK,IAAI,CAACrH,KAAK,CAACqV,eAAe,IAAI,IAAI,CAACrV,KAAK,CAACsH,WAAW,GAAG,CAAC,EAAE;UACzEsb,eAAe,GAAG,IAAI,CAAC5iB,KAAK,CAACsH,WAAW,GAAG,CAAC;UAC5ChG,IAAI,GAAGA,IAAI,CAACyT,SAAS,CAAC6N,eAAe,CAAC;QAC1C;QACA,IAAI,CAACF,gBAAgB,CAACrzB,IAAI,CAACuzB,eAAe,CAAC;QAC3C,IAAIC,eAAe,GAAG,CAAC;QACvB,IAAI,CAACN,yBAAyB,EAAE;UAC5B,IAAIO,gBAAgB,GAAGxhB,IAAI,CAACyhB,SAAS,CAAC,CAAC;UACvCF,eAAe,GAAGvhB,IAAI,CAACrT,MAAM,GAAG60B,gBAAgB,CAAC70B,MAAM;UACvDqT,IAAI,GAAGwhB,gBAAgB,CAACE,OAAO,CAAC,CAAC;QACrC;QACA,IAAI,CAACL,yBAAyB,CAACtzB,IAAI,CAACwzB,eAAe,CAAC;QACpD,IAAII,UAAU,GAAG5b,UAAU,KAAK,IAAI,CAACrH,KAAK,CAACsV,aAAa,GAAG/jB,IAAI,CAACsR,GAAG,CAAC,IAAI,CAAC7C,KAAK,CAACuH,SAAS,GAAG,CAAC,GAAGqb,eAAe,GAAGC,eAAe,EAAEvhB,IAAI,CAACrT,MAAM,CAAC,GAAGqT,IAAI,CAACrT,MAAM;QAC5J,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGi1B,UAAU,EAAEj1B,CAAC,EAAE,EAAE;UACjC,IAAI,CAACw0B,QAAQ,CAACnzB,IAAI,CAACiS,IAAI,CAAC4hB,UAAU,CAACl1B,CAAC,CAAC,CAAC;QAC1C;QACA,IAAIqZ,UAAU,GAAG,IAAI,CAACrH,KAAK,CAACsV,aAAa,EAAE;UACvC,IAAI,CAACkN,QAAQ,CAACnzB,IAAI,CAAC,IAAI,CAAC6zB,UAAU,CAAC,CAAC,CAAC,CAAC;UACtC,IAAI,CAACT,2BAA2B,CAACpzB,IAAI,CAAC,IAAI,CAACmzB,QAAQ,CAACv0B,MAAM,CAAC;QAC/D;MACJ;IACJ;IACAq0B,sBAAsB,CAACp1B,SAAS,CAAC2W,QAAQ,GAAG,YAAY;MACpD,OAAO,WAAW,CAACmP,MAAM,CAAC,IAAI,CAACmQ,IAAI,EAAE,IAAI,CAAC;IAC9C,CAAC;IACDt2B,MAAM,CAACmnB,cAAc,CAACsO,sBAAsB,CAACp1B,SAAS,EAAE,MAAM,EAAE;MAC5DqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAACC,OAAO,CAAC,IAAI4N,WAAW,CAAC,CAAC,EAAE,IAAI,CAACnlB,MAAM,CAAC,CAAC;MACxD,CAAC;MACDgmB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFoO,sBAAsB,CAACp1B,SAAS,CAACsY,OAAO,GAAG,UAAUxF,KAAK,EAAE;MACxD,OAAO,IAAI,CAACwiB,QAAQ,CAAC1N,KAAK,CAAC9U,KAAK,CAACrL,KAAK,EAAEqL,KAAK,CAACqT,YAAY,CAAC,CAACtN,GAAG,CAAC,UAAU/R,CAAC,EAAE;QAAE,OAAO1G,MAAM,CAAC81B,YAAY,CAACpvB,CAAC,CAAC;MAAE,CAAC,CAAC,CAACugB,IAAI,CAAC,EAAE,CAAC;IAC7H,CAAC;IACD+N,sBAAsB,CAACp1B,SAAS,CAACkzB,UAAU,GAAG,UAAUrM,MAAM,EAAE;MAC5D,OAAO,IAAI,CAACyO,QAAQ,CAACzO,MAAM,CAAC;IAChC,CAAC;IACDlnB,MAAM,CAACmnB,cAAc,CAACsO,sBAAsB,CAACp1B,SAAS,EAAE,QAAQ,EAAE;MAC9DqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAACid,QAAQ,CAACv0B,MAAM;MAC/B,CAAC;MACDgmB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFoO,sBAAsB,CAACp1B,SAAS,CAACm2B,gBAAgB,GAAG,UAAUp1B,MAAM,EAAE;MAClE,IAAIq1B,YAAY,GAAGC,WAAW,CAACt1B,MAAM,GAAG,CAAC,GAAG,IAAI,CAACu0B,QAAQ,CAACv0B,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;MAC3E,IAAIu1B,YAAY,GAAGD,WAAW,CAACt1B,MAAM,GAAG,IAAI,CAACu0B,QAAQ,CAACv0B,MAAM,GAAG,IAAI,CAACu0B,QAAQ,CAACv0B,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC;MAC1F,IAAIq1B,YAAY,KAAK,CAAC,CAAC,qBAAqBE,YAAY,KAAK,CAAC,CAAC,mBAAmB;QAC9E,OAAO,CAAC;MACZ;MACA,IAAIF,YAAY,KAAK,CAAC,CAAC,mBAAmB;QACtC,OAAO,GAAG;MACd;MACA,IAAIG,MAAM,GAAG,CAAC;MACd,IAAIH,YAAY,KAAKE,YAAY,EAAE;QAC/BC,MAAM,IAAI,EAAE;QACZ,IAAIH,YAAY,KAAK,CAAC,CAAC,mBAAmBE,YAAY,KAAK,CAAC,CAAC,iBAAiB;UAC1EC,MAAM,IAAI,CAAC;QACf;MACJ;MACAA,MAAM,IAAIC,wBAAwB,CAACJ,YAAY,CAAC;MAChDG,MAAM,IAAIC,wBAAwB,CAACF,YAAY,CAAC;MAChD,OAAOC,MAAM;IACjB,CAAC;IACDnB,sBAAsB,CAACp1B,SAAS,CAACy2B,eAAe,GAAG,UAAU5P,MAAM,EAAE6P,UAAU,EAAE;MAC7E,IAAIA,UAAU,KAAK,KAAK,CAAC,EAAE;QAAEA,UAAU,GAAG,OAAO;MAAE;MACnD,IAAI51B,CAAC,GAAG6oB,qBAAqB,CAAC,IAAI,CAAC4L,2BAA2B,EAAE,UAAUt0B,KAAK,EAAE;QAAE,OAAOA,KAAK,IAAI4lB,MAAM;MAAE,CAAC,CAAC;MAC7G,IAAI8P,UAAU,GAAG9P,MAAM,GAAG,IAAI,CAAC0O,2BAA2B,CAACz0B,CAAC,CAAC;MAC7D,OAAO,IAAImnB,QAAQ,CAAC,IAAI,CAACnV,KAAK,CAACqV,eAAe,GAAGrnB,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC00B,gBAAgB,CAAC10B,CAAC,CAAC,GAAG61B,UAAU,IAAIA,UAAU,KAAK,CAAC,IAAID,UAAU,KAAK,MAAM,GAAG,CAAC,GAAG,IAAI,CAACjB,yBAAyB,CAAC30B,CAAC,CAAC,CAAC,CAAC;IACxL,CAAC;IACDs0B,sBAAsB,CAACp1B,SAAS,CAAC42B,cAAc,GAAG,UAAU9jB,KAAK,EAAE;MAC/D,IAAI+jB,IAAI,GAAG,IAAI,CAACJ,eAAe,CAAC3jB,KAAK,CAACrL,KAAK,EAAE,OAAO,CAAC;MACrD,IAAIqvB,IAAI,GAAG,IAAI,CAACL,eAAe,CAAC3jB,KAAK,CAACqT,YAAY,EAAE,MAAM,CAAC;MAC3D,IAAI2Q,IAAI,CAACpP,QAAQ,CAACmP,IAAI,CAAC,EAAE;QACrB,OAAOxuB,KAAK,CAACkhB,aAAa,CAACuN,IAAI,EAAEA,IAAI,CAAC;MAC1C;MACA,OAAOzuB,KAAK,CAACkhB,aAAa,CAACsN,IAAI,EAAEC,IAAI,CAAC;IAC1C,CAAC;IACD1B,sBAAsB,CAACp1B,SAAS,CAAC+2B,kBAAkB,GAAG,UAAUlQ,MAAM,EAAE;MACpE,IAAIA,MAAM,GAAG,CAAC,IAAIA,MAAM,IAAI,IAAI,CAACyO,QAAQ,CAACv0B,MAAM,EAAE;QAC9C,OAAO8J,SAAS;MACpB;MACA,IAAI,CAACmsB,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAACzO,MAAM,CAAC,CAAC,EAAE;QACpC,OAAOhc,SAAS;MACpB;MACA,IAAIpD,KAAK,GAAGof,MAAM;MAClB,OAAOpf,KAAK,GAAG,CAAC,IAAIuvB,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAAC7tB,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;QACtDA,KAAK,EAAE;MACX;MACA,IAAIC,GAAG,GAAGmf,MAAM;MAChB,OAAOnf,GAAG,GAAG,IAAI,CAAC4tB,QAAQ,CAACv0B,MAAM,IAAIi2B,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAAC5tB,GAAG,CAAC,CAAC,EAAE;QACjEA,GAAG,EAAE;MACT;MACA,OAAO,IAAIwe,WAAW,CAACze,KAAK,EAAEC,GAAG,CAAC;IACtC,CAAC;IACD0tB,sBAAsB,CAACp1B,SAAS,CAACi3B,qBAAqB,GAAG,UAAUpQ,MAAM,EAAE;MACvE,IAAIA,MAAM,GAAG,CAAC,IAAIA,MAAM,IAAI,IAAI,CAACyO,QAAQ,CAACv0B,MAAM,EAAE;QAC9C,OAAO8J,SAAS;MACpB;MACA,IAAI,CAACmsB,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAACzO,MAAM,CAAC,CAAC,EAAE;QACpC,OAAOhc,SAAS;MACpB;MACA,IAAIpD,KAAK,GAAGof,MAAM;MAClB,OAAOpf,KAAK,GAAG,CAAC,IAAIuvB,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAAC7tB,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAACyvB,WAAW,CAAC,IAAI,CAAC5B,QAAQ,CAAC7tB,KAAK,CAAC,CAAC,EAAE;QAC5FA,KAAK,EAAE;MACX;MACA,IAAIC,GAAG,GAAGmf,MAAM;MAChB,OAAOnf,GAAG,GAAG,IAAI,CAAC4tB,QAAQ,CAACv0B,MAAM,IAAIi2B,UAAU,CAAC,IAAI,CAAC1B,QAAQ,CAAC5tB,GAAG,CAAC,CAAC,IAAI,CAACwvB,WAAW,CAAC,IAAI,CAAC5B,QAAQ,CAAC5tB,GAAG,CAAC,CAAC,EAAE;QACrGA,GAAG,EAAE;MACT;MACA,OAAO,IAAIwe,WAAW,CAACze,KAAK,EAAEC,GAAG,CAAC;IACtC,CAAC;IACD0tB,sBAAsB,CAACp1B,SAAS,CAACm3B,YAAY,GAAG,UAAUrkB,KAAK,EAAE;MAC7D,OAAO,IAAI,CAAC2jB,eAAe,CAAC3jB,KAAK,CAACqT,YAAY,CAAC,CAAChM,UAAU,GAAG,IAAI,CAACsc,eAAe,CAAC3jB,KAAK,CAACrL,KAAK,CAAC,CAAC0S,UAAU;IAC7G,CAAC;IACDib,sBAAsB,CAACp1B,SAAS,CAACo3B,eAAe,GAAG,UAAUnzB,OAAO,EAAEE,OAAO,EAAE;MAC3E,OAAO,IAAI,CAACmxB,QAAQ,CAACrxB,OAAO,CAAC,KAAK,IAAI,CAACqxB,QAAQ,CAACnxB,OAAO,CAAC;IAC5D,CAAC;IACDixB,sBAAsB,CAACp1B,SAAS,CAACq3B,iBAAiB,GAAG,UAAUvkB,KAAK,EAAE;MAClE,IAAI3P,EAAE,EAAEwhB,EAAE;MACV,IAAIld,KAAK,GAAG,CAACtE,EAAE,GAAGqmB,kBAAkB,CAAC,IAAI,CAAC+L,2BAA2B,EAAE,UAAUvd,CAAC,EAAE;QAAE,OAAOA,CAAC,IAAIlF,KAAK,CAACrL,KAAK;MAAE,CAAC,CAAC,MAAM,IAAI,IAAItE,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,CAAC;MACrJ,IAAIuE,GAAG,GAAG,CAACid,EAAE,GAAGoF,mBAAmB,CAAC,IAAI,CAACwL,2BAA2B,EAAE,UAAUvd,CAAC,EAAE;QAAE,OAAOlF,KAAK,CAACqT,YAAY,IAAInO,CAAC;MAAE,CAAC,CAAC,MAAM,IAAI,IAAI2M,EAAE,KAAK,KAAK,CAAC,GAAGA,EAAE,GAAG,IAAI,CAAC2Q,QAAQ,CAACv0B,MAAM;MAC9K,OAAO,IAAImlB,WAAW,CAACze,KAAK,EAAEC,GAAG,CAAC;IACtC,CAAC;IACD,OAAO0tB,sBAAsB;EACjC,CAAC,CAAC,CAAE;EACJ,SAAS4B,UAAUA,CAAC3F,QAAQ,EAAE;IAC1B,OAAOA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,GAAG,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE;EACpH;EACA,SAAS6F,WAAWA,CAAC7F,QAAQ,EAAE;IAC3B,OAAOA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE;EAC3C;EACA,IAAIiG,KAAK,IAAIn0B,EAAE,GAAG,CAAC,CAAC,EAChBA,EAAE,CAAC,CAAC,CAAC,gBAAgB,GAAG,CAAC,EACzBA,EAAE,CAAC,CAAC,CAAC,gBAAgB,GAAG,CAAC,EACzBA,EAAE,CAAC,CAAC,CAAC,iBAAiB,GAAG,CAAC,EAC1BA,EAAE,CAAC,CAAC,CAAC,UAAU,GAAG,EAAE,EACpBA,EAAE,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,EACrBA,EAAE,CAAC,CAAC,CAAC,gBAAgB,GAAG,EAAE,EAC1BA,EAAE,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,EACrBA,EAAE,CAAC,CAAC,CAAC,kBAAkB,GAAG,EAAE,EAC5BA,EAAE,CAAC,CAAC,CAAC,kBAAkB,GAAG,EAAE,EAC5BA,EAAE,CAAC;EACP,SAASqzB,wBAAwBA,CAACe,QAAQ,EAAE;IACxC,OAAOD,KAAK,CAACC,QAAQ,CAAC;EAC1B;EACA,SAASlB,WAAWA,CAAChF,QAAQ,EAAE;IAC3B,IAAIA,QAAQ,KAAK,EAAE,EAAE;MACjB,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,KAAK,EAAE,EAAE;MACtB,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAID,OAAO,CAACC,QAAQ,CAAC,EAAE;MACxB,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,GAAG,EAAE;MACxC,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,EAAE;MACvC,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,IAAI,EAAE,IAAIA,QAAQ,IAAI,EAAE,EAAE;MACvC,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,KAAK,CAAC,CAAC,EAAE;MACtB,OAAO,CAAC,CAAC;IACb,CAAC,MACI,IAAIA,QAAQ,KAAK,EAAE,IAAIA,QAAQ,KAAK,EAAE,EAAE;MACzC,OAAO,CAAC,CAAC;IACb,CAAC,MACI;MACD,OAAO,CAAC,CAAC;IACb;EACJ;EACA,SAASmG,iBAAiBA,CAAC5vB,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAEoJ,mBAAmB,EAAEC,mBAAmB,EAAE5G,OAAO,EAAE;IACjH,IAAI3tB,EAAE,GAAGw0B,iDAAiD,CAAC/vB,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAEyC,OAAO,CAAC;MAAEpE,KAAK,GAAGvpB,EAAE,CAACupB,KAAK;MAAEkL,eAAe,GAAGz0B,EAAE,CAACy0B,eAAe;IAClK,IAAI,CAAC9G,OAAO,CAACH,OAAO,CAAC,CAAC,EAAE;MACpB,OAAO,EAAE;IACb;IACA,IAAIkH,eAAe,GAAGjwB,OAAO,CAACjE,MAAM,CAAC,UAAUmqB,CAAC,EAAE;MAAE,OAAO,CAAC8J,eAAe,CAACE,GAAG,CAAChK,CAAC,CAAC;IAAE,CAAC,CAAC;IACtF,IAAIiK,cAAc,GAAGC,qBAAqB,CAACH,eAAe,EAAEJ,mBAAmB,EAAEC,mBAAmB,EAAEtJ,aAAa,EAAEC,aAAa,EAAEyC,OAAO,CAAC;IAC5I/L,QAAQ,CAAC2H,KAAK,EAAEqL,cAAc,CAAC;IAC/BrL,KAAK,GAAGuL,yBAAyB,CAACvL,KAAK,CAAC;IACxCA,KAAK,GAAGA,KAAK,CAAC/oB,MAAM,CAAC,UAAU4J,OAAO,EAAE;MACpC,IAAIuS,KAAK,GAAGvS,OAAO,CAACwf,QAAQ,CAAC/B,aAAa,CAAC,CAAC,CAACpD,KAAK,CAACwG,aAAa,CAAC,CAACvV,GAAG,CAAC,UAAUpL,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACyqB,IAAI,CAAC,CAAC;MAAE,CAAC,CAAC;MACxG,IAAIC,YAAY,GAAGrY,KAAK,CAACuH,IAAI,CAAC,IAAI,CAAC;MACnC,OAAO8Q,YAAY,CAACp3B,MAAM,IAAI,EAAE,IAAIq3B,UAAU,CAACtY,KAAK,EAAE,UAAUrS,CAAC,EAAE;QAAE,OAAOA,CAAC,CAAC1M,MAAM,IAAI,CAAC;MAAE,CAAC,CAAC,IAAI,CAAC;IACtG,CAAC,CAAC;IACF2rB,KAAK,GAAG2L,qBAAqB,CAACzwB,OAAO,EAAE8kB,KAAK,CAAC;IAC7C,OAAOA,KAAK;EAChB;EACA,SAAS0L,UAAUA,CAACvT,GAAG,EAAEoB,SAAS,EAAE;IAChC,IAAIqS,GAAG,EAAEn1B,EAAE;IACX,IAAIo1B,KAAK,GAAG,CAAC;IACb,IAAI;MACA,KAAK,IAAIC,KAAK,GAAGh4B,QAAQ,CAACqkB,GAAG,CAAC,EAAE4T,OAAO,GAAGD,KAAK,CAACx3B,IAAI,CAAC,CAAC,EAAE,CAACy3B,OAAO,CAACv3B,IAAI,EAAEu3B,OAAO,GAAGD,KAAK,CAACx3B,IAAI,CAAC,CAAC,EAAE;QAC3F,IAAI+hB,CAAC,GAAG0V,OAAO,CAACx3B,KAAK;QACrB,IAAIglB,SAAS,CAAClD,CAAC,CAAC,EAAE;UACdwV,KAAK,EAAE;QACX;MACJ;IACJ,CAAC,CACD,OAAOG,KAAK,EAAE;MAAEJ,GAAG,GAAG;QAAE5yB,KAAK,EAAEgzB;MAAM,CAAC;IAAE,CAAC,SACjC;MACJ,IAAI;QACA,IAAID,OAAO,IAAI,CAACA,OAAO,CAACv3B,IAAI,KAAKiC,EAAE,GAAGq1B,KAAK,CAAC7yB,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACs4B,KAAK,CAAC;MACvE,CAAC,SACO;QAAE,IAAIF,GAAG,EAAE,MAAMA,GAAG,CAAC5yB,KAAK;MAAE;IACxC;IACA,OAAO6yB,KAAK;EAChB;EACA,SAASZ,iDAAiDA,CAAC/vB,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAEyC,OAAO,EAAE;IACvG,IAAI6H,GAAG,EAAEx1B,EAAE,EAAEy1B,GAAG,EAAEjU,EAAE;IACpB,IAAI+H,KAAK,GAAG,EAAE;IACd,IAAImM,SAAS,GAAGjxB,OAAO,CAACjE,MAAM,CAAC,UAAUmqB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACd,QAAQ,CAACzZ,OAAO,IAAIua,CAAC,CAACf,QAAQ,CAAChsB,MAAM,IAAI,CAAC;IAAE,CAAC,CAAC,CAAC8X,GAAG,CAAC,UAAUpZ,CAAC,EAAE;MAAE,OAAO,IAAI6xB,iBAAiB,CAAC7xB,CAAC,CAACstB,QAAQ,EAAEqB,aAAa,EAAE3uB,CAAC,CAAC;IAAE,CAAC,CAAC;IACvL,IAAIq5B,UAAU,GAAG,IAAI5D,GAAG,CAACttB,OAAO,CAACjE,MAAM,CAAC,UAAUmqB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACf,QAAQ,CAACxZ,OAAO,IAAIua,CAAC,CAACd,QAAQ,CAACjsB,MAAM,IAAI,CAAC;IAAE,CAAC,CAAC,CAAC8X,GAAG,CAAC,UAAUpZ,CAAC,EAAE;MAAE,OAAO,IAAI6xB,iBAAiB,CAAC7xB,CAAC,CAACutB,QAAQ,EAAEqB,aAAa,EAAE5uB,CAAC,CAAC;IAAE,CAAC,CAAC,CAAC;IACjM,IAAIm4B,eAAe,GAAG,eAAgB,IAAI1C,GAAG,CAAC,CAAC;IAC/C,IAAI;MACA,KAAK,IAAI6D,WAAW,GAAGv4B,QAAQ,CAACq4B,SAAS,CAAC,EAAEG,aAAa,GAAGD,WAAW,CAAC/3B,IAAI,CAAC,CAAC,EAAE,CAACg4B,aAAa,CAAC93B,IAAI,EAAE83B,aAAa,GAAGD,WAAW,CAAC/3B,IAAI,CAAC,CAAC,EAAE;QACrI,IAAIi4B,QAAQ,GAAGD,aAAa,CAAC/3B,KAAK;QAClC,IAAIi4B,iBAAiB,GAAG,CAAC,CAAC;QAC1B,IAAIC,IAAI,GAAG,KAAK,CAAC;QACjB,IAAI;UACA,KAAK,IAAIC,YAAY,IAAIR,GAAG,GAAG,KAAK,CAAC,EAAEp4B,QAAQ,CAACs4B,UAAU,CAAC,CAAC,EAAEO,cAAc,GAAGD,YAAY,CAACp4B,IAAI,CAAC,CAAC,EAAE,CAACq4B,cAAc,CAACn4B,IAAI,EAAEm4B,cAAc,GAAGD,YAAY,CAACp4B,IAAI,CAAC,CAAC,EAAE;YAC5J,IAAIs4B,SAAS,GAAGD,cAAc,CAACp4B,KAAK;YACpC,IAAIs4B,UAAU,GAAGN,QAAQ,CAAChH,iBAAiB,CAACqH,SAAS,CAAC;YACtD,IAAIC,UAAU,GAAGL,iBAAiB,EAAE;cAChCA,iBAAiB,GAAGK,UAAU;cAC9BJ,IAAI,GAAGG,SAAS;YACpB;UACJ;QACJ,CAAC,CACD,OAAOE,KAAK,EAAE;UAAEZ,GAAG,GAAG;YAAElzB,KAAK,EAAE8zB;UAAM,CAAC;QAAE,CAAC,SACjC;UACJ,IAAI;YACA,IAAIH,cAAc,IAAI,CAACA,cAAc,CAACn4B,IAAI,KAAKyjB,EAAE,GAAGyU,YAAY,CAACzzB,MAAM,CAAC,EAAEgf,EAAE,CAACzkB,IAAI,CAACk5B,YAAY,CAAC;UACnG,CAAC,SACO;YAAE,IAAIR,GAAG,EAAE,MAAMA,GAAG,CAAClzB,KAAK;UAAE;QACxC;QACA,IAAIwzB,iBAAiB,GAAG,GAAG,IAAIC,IAAI,EAAE;UACjCL,UAAU,CAACzyB,MAAM,CAAC8yB,IAAI,CAAC;UACvBzM,KAAK,CAACvqB,IAAI,CAAC,IAAI2qB,gBAAgB,CAACmM,QAAQ,CAACnmB,KAAK,EAAEqmB,IAAI,CAACrmB,KAAK,CAAC,CAAC;UAC5D8kB,eAAe,CAACxxB,GAAG,CAAC6yB,QAAQ,CAAC1H,MAAM,CAAC;UACpCqG,eAAe,CAACxxB,GAAG,CAAC+yB,IAAI,CAAC5H,MAAM,CAAC;QACpC;QACA,IAAI,CAACT,OAAO,CAACH,OAAO,CAAC,CAAC,EAAE;UACpB,OAAO;YAAEjE,KAAK,EAAEA,KAAK;YAAEkL,eAAe,EAAEA;UAAgB,CAAC;QAC7D;MACJ;IACJ,CAAC,CACD,OAAO6B,KAAK,EAAE;MAAEd,GAAG,GAAG;QAAEjzB,KAAK,EAAE+zB;MAAM,CAAC;IAAE,CAAC,SACjC;MACJ,IAAI;QACA,IAAIT,aAAa,IAAI,CAACA,aAAa,CAAC93B,IAAI,KAAKiC,EAAE,GAAG41B,WAAW,CAACpzB,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAAC64B,WAAW,CAAC;MAC/F,CAAC,SACO;QAAE,IAAIJ,GAAG,EAAE,MAAMA,GAAG,CAACjzB,KAAK;MAAE;IACxC;IACA,OAAO;MAAEgnB,KAAK,EAAEA,KAAK;MAAEkL,eAAe,EAAEA;IAAgB,CAAC;EAC7D;EACA,SAASI,qBAAqBA,CAACpwB,OAAO,EAAE6vB,mBAAmB,EAAEC,mBAAmB,EAAEtJ,aAAa,EAAEC,aAAa,EAAEyC,OAAO,EAAE;IACrH,IAAI4I,GAAG,EAAEv2B,EAAE,EAAEw2B,IAAI,EAAEhV,EAAE,EAAEiV,IAAI,EAAErP,EAAE,EAAEsP,IAAI,EAAEC,EAAE;IACzC,IAAIpN,KAAK,GAAG,EAAE;IACd,IAAIqN,mBAAmB,GAAG,IAAI9E,MAAM,CAAC,CAAC;IACtC,IAAI;MACA,KAAK,IAAI+E,SAAS,GAAGx5B,QAAQ,CAACoH,OAAO,CAAC,EAAEqyB,WAAW,GAAGD,SAAS,CAACh5B,IAAI,CAAC,CAAC,EAAE,CAACi5B,WAAW,CAAC/4B,IAAI,EAAE+4B,WAAW,GAAGD,SAAS,CAACh5B,IAAI,CAAC,CAAC,EAAE;QACvH,IAAIuP,MAAM,GAAG0pB,WAAW,CAACh5B,KAAK;QAC9B,KAAK,IAAIH,CAAC,GAAGyP,MAAM,CAACwc,QAAQ,CAAC5E,eAAe,EAAErnB,CAAC,GAAGyP,MAAM,CAACwc,QAAQ,CAACrC,sBAAsB,GAAG,CAAC,EAAE5pB,CAAC,EAAE,EAAE;UAC/F,IAAI+wB,GAAG,GAAG,EAAE,CAAC/L,MAAM,CAAC2R,mBAAmB,CAAC32B,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAACglB,MAAM,CAAC2R,mBAAmB,CAAC32B,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAACglB,MAAM,CAAC2R,mBAAmB,CAAC32B,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;UACvIi5B,mBAAmB,CAAC3zB,GAAG,CAACyrB,GAAG,EAAE;YAAE/e,KAAK,EAAE,IAAI2X,SAAS,CAAC3pB,CAAC,EAAEA,CAAC,GAAG,CAAC;UAAE,CAAC,CAAC;QACpE;MACJ;IACJ,CAAC,CACD,OAAOo5B,KAAK,EAAE;MAAER,GAAG,GAAG;QAAEh0B,KAAK,EAAEw0B;MAAM,CAAC;IAAE,CAAC,SACjC;MACJ,IAAI;QACA,IAAID,WAAW,IAAI,CAACA,WAAW,CAAC/4B,IAAI,KAAKiC,EAAE,GAAG62B,SAAS,CAACr0B,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAAC85B,SAAS,CAAC;MACvF,CAAC,SACO;QAAE,IAAIN,GAAG,EAAE,MAAMA,GAAG,CAACh0B,KAAK;MAAE;IACxC;IACA,IAAIy0B,gBAAgB,GAAG,EAAE;IACzBvyB,OAAO,CAAC5C,IAAI,CAACogB,SAAS,CAAC,UAAU0I,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACd,QAAQ,CAAC7E,eAAe;IAAE,CAAC,EAAE5C,gBAAgB,CAAC,CAAC;IAC9F,IAAI6U,OAAO,GAAG,SAAAA,CAAU7pB,MAAM,EAAE;MAC5B,IAAI8pB,YAAY,GAAG,EAAE;MACrB,IAAIC,OAAO,GAAG,SAAAA,CAAUx5B,CAAC,EAAE;QACvB,IAAI+wB,GAAG,GAAG,EAAE,CAAC/L,MAAM,CAAC4R,mBAAmB,CAAC52B,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAACglB,MAAM,CAAC4R,mBAAmB,CAAC52B,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAACglB,MAAM,CAAC4R,mBAAmB,CAAC52B,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;QACvI,IAAIy5B,oBAAoB,GAAG,IAAI9P,SAAS,CAAC3pB,CAAC,EAAEA,CAAC,GAAG,CAAC,CAAC;QAClD,IAAI05B,YAAY,GAAG,EAAE;QACrBT,mBAAmB,CAACj2B,OAAO,CAAC+tB,GAAG,EAAE,UAAU1uB,EAAE,EAAE;UAC3C,IAAIs3B,IAAI,EAAE9V,EAAE;UACZ,IAAI7R,KAAK,GAAG3P,EAAE,CAAC2P,KAAK;UACpB,IAAI;YACA,KAAK,IAAI4nB,cAAc,IAAID,IAAI,GAAG,KAAK,CAAC,EAAEj6B,QAAQ,CAAC65B,YAAY,CAAC,CAAC,EAAEM,gBAAgB,GAAGD,cAAc,CAAC15B,IAAI,CAAC,CAAC,EAAE,CAAC25B,gBAAgB,CAACz5B,IAAI,EAAEy5B,gBAAgB,GAAGD,cAAc,CAAC15B,IAAI,CAAC,CAAC,EAAE;cAC3K,IAAI45B,WAAW,GAAGD,gBAAgB,CAAC15B,KAAK;cACxC,IAAI25B,WAAW,CAAC1L,iBAAiB,CAACxE,sBAAsB,GAAG,CAAC,KAAK5X,KAAK,CAAC4X,sBAAsB,IAAIkQ,WAAW,CAACzL,iBAAiB,CAACzE,sBAAsB,GAAG,CAAC,KAAK6P,oBAAoB,CAAC7P,sBAAsB,EAAE;gBACvMkQ,WAAW,CAAC1L,iBAAiB,GAAG,IAAIzE,SAAS,CAACmQ,WAAW,CAAC1L,iBAAiB,CAAC/G,eAAe,EAAErV,KAAK,CAAC4X,sBAAsB,CAAC;gBAC1HkQ,WAAW,CAACzL,iBAAiB,GAAG,IAAI1E,SAAS,CAACmQ,WAAW,CAACzL,iBAAiB,CAAChH,eAAe,EAAEoS,oBAAoB,CAAC7P,sBAAsB,CAAC;gBACzI8P,YAAY,CAACr4B,IAAI,CAACy4B,WAAW,CAAC;gBAC9B;cACJ;YACJ;UACJ,CAAC,CACD,OAAOC,MAAM,EAAE;YAAEJ,IAAI,GAAG;cAAE/0B,KAAK,EAAEm1B;YAAO,CAAC;UAAE,CAAC,SACpC;YACJ,IAAI;cACA,IAAIF,gBAAgB,IAAI,CAACA,gBAAgB,CAACz5B,IAAI,KAAKyjB,EAAE,GAAG+V,cAAc,CAAC/0B,MAAM,CAAC,EAAEgf,EAAE,CAACzkB,IAAI,CAACw6B,cAAc,CAAC;YAC3G,CAAC,SACO;cAAE,IAAID,IAAI,EAAE,MAAMA,IAAI,CAAC/0B,KAAK;YAAE;UAC1C;UACA,IAAIo1B,OAAO,GAAG;YACV3L,iBAAiB,EAAEoL,oBAAoB;YACvCrL,iBAAiB,EAAEpc;UACvB,CAAC;UACDqnB,gBAAgB,CAACh4B,IAAI,CAAC24B,OAAO,CAAC;UAC9BN,YAAY,CAACr4B,IAAI,CAAC24B,OAAO,CAAC;QAC9B,CAAC,CAAC;QACFT,YAAY,GAAGG,YAAY;MAC/B,CAAC;MACD,KAAK,IAAI15B,CAAC,GAAGyP,MAAM,CAACyc,QAAQ,CAAC7E,eAAe,EAAErnB,CAAC,GAAGyP,MAAM,CAACyc,QAAQ,CAACtC,sBAAsB,GAAG,CAAC,EAAE5pB,CAAC,EAAE,EAAE;QAC/Fw5B,OAAO,CAACx5B,CAAC,CAAC;MACd;MACA,IAAI,CAACgwB,OAAO,CAACH,OAAO,CAAC,CAAC,EAAE;QACpB,OAAO;UAAE1vB,KAAK,EAAE;QAAG,CAAC;MACxB;IACJ,CAAC;IACD,IAAI;MACA,KAAK,IAAI85B,SAAS,GAAGv6B,QAAQ,CAACoH,OAAO,CAAC,EAAEozB,WAAW,GAAGD,SAAS,CAAC/5B,IAAI,CAAC,CAAC,EAAE,CAACg6B,WAAW,CAAC95B,IAAI,EAAE85B,WAAW,GAAGD,SAAS,CAAC/5B,IAAI,CAAC,CAAC,EAAE;QACvH,IAAIuP,MAAM,GAAGyqB,WAAW,CAAC/5B,KAAK;QAC9B,IAAIg6B,OAAO,GAAGb,OAAO,CAAC7pB,MAAM,CAAC;QAC7B,IAAI,OAAO0qB,OAAO,KAAK,QAAQ,EAC3B,OAAOA,OAAO,CAACh6B,KAAK;MAC5B;IACJ,CAAC,CACD,OAAOi6B,MAAM,EAAE;MAAEvB,IAAI,GAAG;QAAEj0B,KAAK,EAAEw1B;MAAO,CAAC;IAAE,CAAC,SACpC;MACJ,IAAI;QACA,IAAIF,WAAW,IAAI,CAACA,WAAW,CAAC95B,IAAI,KAAKyjB,EAAE,GAAGoW,SAAS,CAACp1B,MAAM,CAAC,EAAEgf,EAAE,CAACzkB,IAAI,CAAC66B,SAAS,CAAC;MACvF,CAAC,SACO;QAAE,IAAIpB,IAAI,EAAE,MAAMA,IAAI,CAACj0B,KAAK;MAAE;IAC1C;IACAy0B,gBAAgB,CAACn1B,IAAI,CAACwgB,YAAY,CAACJ,SAAS,CAAC,UAAUvkB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACsuB,iBAAiB,CAACpuB,MAAM;IAAE,CAAC,EAAEwkB,gBAAgB,CAAC,CAAC,CAAC;IACrH,IAAI4V,WAAW,GAAG,IAAIlQ,YAAY,CAAC,CAAC;IACpC,IAAImQ,WAAW,GAAG,IAAInQ,YAAY,CAAC,CAAC;IACpC,IAAI;MACA,KAAK,IAAIoQ,kBAAkB,GAAG76B,QAAQ,CAAC25B,gBAAgB,CAAC,EAAEmB,oBAAoB,GAAGD,kBAAkB,CAACr6B,IAAI,CAAC,CAAC,EAAE,CAACs6B,oBAAoB,CAACp6B,IAAI,EAAEo6B,oBAAoB,GAAGD,kBAAkB,CAACr6B,IAAI,CAAC,CAAC,EAAE;QACtL,IAAI85B,OAAO,GAAGQ,oBAAoB,CAACr6B,KAAK;QACxC,IAAIs6B,aAAa,GAAGT,OAAO,CAAC3L,iBAAiB,CAAChH,eAAe,GAAG2S,OAAO,CAAC5L,iBAAiB,CAAC/G,eAAe;QACzG,IAAIqT,gBAAgB,GAAGL,WAAW,CAAC5P,YAAY,CAACuP,OAAO,CAAC3L,iBAAiB,CAAC;QAC1E,IAAIsM,0BAA0B,GAAGL,WAAW,CAAC7P,YAAY,CAACuP,OAAO,CAAC5L,iBAAiB,CAAC,CAACvD,YAAY,CAAC4P,aAAa,CAAC;QAChH,IAAIG,2BAA2B,GAAGF,gBAAgB,CAAChQ,eAAe,CAACiQ,0BAA0B,CAAC;QAC9F,IAAI;UACA,KAAK,IAAIE,EAAE,IAAI9B,IAAI,GAAG,KAAK,CAAC,EAAEr5B,QAAQ,CAACk7B,2BAA2B,CAACE,MAAM,CAAC,CAAC,EAAEC,EAAE,GAAGF,EAAE,CAAC36B,IAAI,CAAC,CAAC,EAAE,CAAC66B,EAAE,CAAC36B,IAAI,EAAE26B,EAAE,GAAGF,EAAE,CAAC36B,IAAI,CAAC,CAAC,EAAE;YACnH,IAAIN,CAAC,GAAGm7B,EAAE,CAAC56B,KAAK;YAChB,IAAIP,CAAC,CAACK,MAAM,GAAG,CAAC,EAAE;cACd;YACJ;YACA,IAAIouB,iBAAiB,GAAGzuB,CAAC;YACzB,IAAIwuB,iBAAiB,GAAGxuB,CAAC,CAACumB,KAAK,CAAC,CAACsU,aAAa,CAAC;YAC/C7O,KAAK,CAACvqB,IAAI,CAAC,IAAI2qB,gBAAgB,CAACoC,iBAAiB,EAAEC,iBAAiB,CAAC,CAAC;YACtEgM,WAAW,CAAC9U,QAAQ,CAAC8I,iBAAiB,CAAC;YACvCiM,WAAW,CAAC/U,QAAQ,CAAC6I,iBAAiB,CAAC;UAC3C;QACJ,CAAC,CACD,OAAO4M,MAAM,EAAE;UAAEjC,IAAI,GAAG;YAAEn0B,KAAK,EAAEo2B;UAAO,CAAC;QAAE,CAAC,SACpC;UACJ,IAAI;YACA,IAAID,EAAE,IAAI,CAACA,EAAE,CAAC36B,IAAI,KAAK44B,EAAE,GAAG6B,EAAE,CAACh2B,MAAM,CAAC,EAAEm0B,EAAE,CAAC55B,IAAI,CAACy7B,EAAE,CAAC;UACvD,CAAC,SACO;YAAE,IAAI9B,IAAI,EAAE,MAAMA,IAAI,CAACn0B,KAAK;UAAE;QAC1C;MACJ;IACJ,CAAC,CACD,OAAOq2B,MAAM,EAAE;MAAEnC,IAAI,GAAG;QAAEl0B,KAAK,EAAEq2B;MAAO,CAAC;IAAE,CAAC,SACpC;MACJ,IAAI;QACA,IAAIT,oBAAoB,IAAI,CAACA,oBAAoB,CAACp6B,IAAI,KAAKqpB,EAAE,GAAG8Q,kBAAkB,CAAC11B,MAAM,CAAC,EAAE4kB,EAAE,CAACrqB,IAAI,CAACm7B,kBAAkB,CAAC;MAC3H,CAAC,SACO;QAAE,IAAIzB,IAAI,EAAE,MAAMA,IAAI,CAACl0B,KAAK;MAAE;IAC1C;IACAgnB,KAAK,CAAC1nB,IAAI,CAACogB,SAAS,CAAC,UAAUvkB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACksB,QAAQ,CAAC5E,eAAe;IAAE,CAAC,EAAE5C,gBAAgB,CAAC,CAAC;IAC5F,IAAIyW,iBAAiB,GAAG,IAAI/R,eAAe,CAACriB,OAAO,CAAC;IACpD,IAAIq0B,OAAO,GAAG,SAAAA,CAAUn7B,CAAC,EAAE;MACvB,IAAIo7B,IAAI,GAAGxP,KAAK,CAAC5rB,CAAC,CAAC;MACnB,IAAIq7B,uBAAuB,GAAGH,iBAAiB,CAACxS,kBAAkB,CAAC,UAAUsE,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACf,QAAQ,CAAC5E,eAAe,IAAI+T,IAAI,CAACnP,QAAQ,CAAC5E,eAAe;MAAE,CAAC,CAAC;MACxJ,IAAIiU,sBAAsB,GAAG5S,kBAAkB,CAAC5hB,OAAO,EAAE,UAAUkmB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACd,QAAQ,CAAC7E,eAAe,IAAI+T,IAAI,CAAClP,QAAQ,CAAC7E,eAAe;MAAE,CAAC,CAAC;MAC9I,IAAIkU,UAAU,GAAGh4B,IAAI,CAACgQ,GAAG,CAAC6nB,IAAI,CAACnP,QAAQ,CAAC5E,eAAe,GAAGgU,uBAAuB,CAACpP,QAAQ,CAAC5E,eAAe,EAAE+T,IAAI,CAAClP,QAAQ,CAAC7E,eAAe,GAAGiU,sBAAsB,CAACpP,QAAQ,CAAC7E,eAAe,CAAC;MAC5L,IAAImU,sBAAsB,GAAGN,iBAAiB,CAACxS,kBAAkB,CAAC,UAAUsE,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACf,QAAQ,CAAC5E,eAAe,GAAG+T,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB;MAAE,CAAC,CAAC;MAC7J,IAAI6R,qBAAqB,GAAG/S,kBAAkB,CAAC5hB,OAAO,EAAE,UAAUkmB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACd,QAAQ,CAAC7E,eAAe,GAAG+T,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB;MAAE,CAAC,CAAC;MACnJ,IAAI8R,UAAU,GAAGn4B,IAAI,CAACgQ,GAAG,CAACioB,sBAAsB,CAACvP,QAAQ,CAACrC,sBAAsB,GAAGwR,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB,EAAE6R,qBAAqB,CAACvP,QAAQ,CAACtC,sBAAsB,GAAGwR,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB,CAAC;MACtN,IAAI+R,WAAW,GAAG,KAAK,CAAC;MACxB,KAAKA,WAAW,GAAG,CAAC,EAAEA,WAAW,GAAGJ,UAAU,EAAEI,WAAW,EAAE,EAAE;QAC3D,IAAIC,QAAQ,GAAGR,IAAI,CAACnP,QAAQ,CAAC5E,eAAe,GAAGsU,WAAW,GAAG,CAAC;QAC9D,IAAIE,OAAO,GAAGT,IAAI,CAAClP,QAAQ,CAAC7E,eAAe,GAAGsU,WAAW,GAAG,CAAC;QAC7D,IAAIC,QAAQ,GAAGtO,aAAa,CAACrtB,MAAM,IAAI47B,OAAO,GAAGtO,aAAa,CAACttB,MAAM,EAAE;UACnE;QACJ;QACA,IAAIo6B,WAAW,CAAC5lB,QAAQ,CAAConB,OAAO,CAAC,IAAIvB,WAAW,CAAC7lB,QAAQ,CAACmnB,QAAQ,CAAC,EAAE;UACjE;QACJ;QACA,IAAI,CAACE,eAAe,CAACxO,aAAa,CAACsO,QAAQ,GAAG,CAAC,CAAC,EAAErO,aAAa,CAACsO,OAAO,GAAG,CAAC,CAAC,EAAE7L,OAAO,CAAC,EAAE;UACpF;QACJ;MACJ;MACA,IAAI2L,WAAW,GAAG,CAAC,EAAE;QACjBrB,WAAW,CAAC/U,QAAQ,CAAC,IAAIoE,SAAS,CAACyR,IAAI,CAACnP,QAAQ,CAAC5E,eAAe,GAAGsU,WAAW,EAAEP,IAAI,CAACnP,QAAQ,CAAC5E,eAAe,CAAC,CAAC;QAC/GgT,WAAW,CAAC9U,QAAQ,CAAC,IAAIoE,SAAS,CAACyR,IAAI,CAAClP,QAAQ,CAAC7E,eAAe,GAAGsU,WAAW,EAAEP,IAAI,CAAClP,QAAQ,CAAC7E,eAAe,CAAC,CAAC;MACnH;MACA,IAAI0U,cAAc,GAAG,KAAK,CAAC;MAC3B,KAAKA,cAAc,GAAG,CAAC,EAAEA,cAAc,GAAGL,UAAU,EAAEK,cAAc,EAAE,EAAE;QACpE,IAAIH,QAAQ,GAAGR,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB,GAAGmS,cAAc;QACpE,IAAIF,OAAO,GAAGT,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB,GAAGmS,cAAc;QACnE,IAAIH,QAAQ,GAAGtO,aAAa,CAACrtB,MAAM,IAAI47B,OAAO,GAAGtO,aAAa,CAACttB,MAAM,EAAE;UACnE;QACJ;QACA,IAAIo6B,WAAW,CAAC5lB,QAAQ,CAAConB,OAAO,CAAC,IAAIvB,WAAW,CAAC7lB,QAAQ,CAACmnB,QAAQ,CAAC,EAAE;UACjE;QACJ;QACA,IAAI,CAACE,eAAe,CAACxO,aAAa,CAACsO,QAAQ,GAAG,CAAC,CAAC,EAAErO,aAAa,CAACsO,OAAO,GAAG,CAAC,CAAC,EAAE7L,OAAO,CAAC,EAAE;UACpF;QACJ;MACJ;MACA,IAAI+L,cAAc,GAAG,CAAC,EAAE;QACpBzB,WAAW,CAAC/U,QAAQ,CAAC,IAAIoE,SAAS,CAACyR,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB,EAAEwR,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB,GAAGmS,cAAc,CAAC,CAAC;QAChI1B,WAAW,CAAC9U,QAAQ,CAAC,IAAIoE,SAAS,CAACyR,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB,EAAEwR,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB,GAAGmS,cAAc,CAAC,CAAC;MACpI;MACA,IAAIJ,WAAW,GAAG,CAAC,IAAII,cAAc,GAAG,CAAC,EAAE;QACvCnQ,KAAK,CAAC5rB,CAAC,CAAC,GAAG,IAAIgsB,gBAAgB,CAAC,IAAIrC,SAAS,CAACyR,IAAI,CAACnP,QAAQ,CAAC5E,eAAe,GAAGsU,WAAW,EAAEP,IAAI,CAACnP,QAAQ,CAACrC,sBAAsB,GAAGmS,cAAc,CAAC,EAAE,IAAIpS,SAAS,CAACyR,IAAI,CAAClP,QAAQ,CAAC7E,eAAe,GAAGsU,WAAW,EAAEP,IAAI,CAAClP,QAAQ,CAACtC,sBAAsB,GAAGmS,cAAc,CAAC,CAAC;MACzQ;IACJ,CAAC;IACD,KAAK,IAAI/7B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4rB,KAAK,CAAC3rB,MAAM,EAAED,CAAC,EAAE,EAAE;MACnCm7B,OAAO,CAACn7B,CAAC,CAAC;IACd;IACA,OAAO4rB,KAAK;EAChB;EACA,SAASkQ,eAAeA,CAACE,KAAK,EAAEC,KAAK,EAAEjM,OAAO,EAAE;IAC5C,IAAIkM,IAAI,EAAE75B,EAAE;IACZ,IAAI25B,KAAK,CAAC5E,IAAI,CAAC,CAAC,KAAK6E,KAAK,CAAC7E,IAAI,CAAC,CAAC,EAAE;MAC/B,OAAO,IAAI;IACf;IACA,IAAI4E,KAAK,CAAC/7B,MAAM,GAAG,GAAG,IAAIg8B,KAAK,CAACh8B,MAAM,GAAG,GAAG,EAAE;MAC1C,OAAO,KAAK;IAChB;IACA,IAAIk8B,qBAAqB,GAAG,IAAItJ,kBAAkB,CAAC,CAAC;IACpD,IAAI3e,MAAM,GAAGioB,qBAAqB,CAACn0B,OAAO,CAAC,IAAIssB,sBAAsB,CAAC,CAAC0H,KAAK,CAAC,EAAE,IAAIz0B,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAEy0B,KAAK,CAAC/7B,MAAM,CAAC,EAAE,KAAK,CAAC,EAAE,IAAIq0B,sBAAsB,CAAC,CAAC2H,KAAK,CAAC,EAAE,IAAI10B,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE00B,KAAK,CAACh8B,MAAM,CAAC,EAAE,KAAK,CAAC,EAAE+vB,OAAO,CAAC;IAC/M,IAAIoM,uBAAuB,GAAG,CAAC;IAC/B,IAAIC,QAAQ,GAAG1N,YAAY,CAACI,MAAM,CAAC7a,MAAM,CAACqa,KAAK,EAAEyN,KAAK,CAAC/7B,MAAM,CAAC;IAC9D,IAAI;MACA,KAAK,IAAIq8B,UAAU,GAAG58B,QAAQ,CAAC28B,QAAQ,CAAC,EAAEE,YAAY,GAAGD,UAAU,CAACp8B,IAAI,CAAC,CAAC,EAAE,CAACq8B,YAAY,CAACn8B,IAAI,EAAEm8B,YAAY,GAAGD,UAAU,CAACp8B,IAAI,CAAC,CAAC,EAAE;QAC9H,IAAIs8B,GAAG,GAAGD,YAAY,CAACp8B,KAAK;QAC5Bq8B,GAAG,CAAC3N,SAAS,CAAC7rB,OAAO,CAAC,UAAU4lB,GAAG,EAAE;UACjC,IAAI,CAAC0H,OAAO,CAAC0L,KAAK,CAAC9G,UAAU,CAACtM,GAAG,CAAC,CAAC,EAAE;YACjCwT,uBAAuB,EAAE;UAC7B;QACJ,CAAC,CAAC;MACN;IACJ,CAAC,CACD,OAAOK,MAAM,EAAE;MAAEP,IAAI,GAAG;QAAEt3B,KAAK,EAAE63B;MAAO,CAAC;IAAE,CAAC,SACpC;MACJ,IAAI;QACA,IAAIF,YAAY,IAAI,CAACA,YAAY,CAACn8B,IAAI,KAAKiC,EAAE,GAAGi6B,UAAU,CAACz3B,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACk9B,UAAU,CAAC;MAC3F,CAAC,SACO;QAAE,IAAIJ,IAAI,EAAE,MAAMA,IAAI,CAACt3B,KAAK;MAAE;IAC1C;IACA,SAAS83B,eAAeA,CAAC1V,GAAG,EAAE;MAC1B,IAAIyQ,KAAK,GAAG,CAAC;MACb,KAAK,IAAIz3B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGg8B,KAAK,CAAC/7B,MAAM,EAAED,CAAC,EAAE,EAAE;QACnC,IAAI,CAACswB,OAAO,CAACtJ,GAAG,CAACkO,UAAU,CAACl1B,CAAC,CAAC,CAAC,EAAE;UAC7By3B,KAAK,EAAE;QACX;MACJ;MACA,OAAOA,KAAK;IAChB;IACA,IAAIkF,gBAAgB,GAAGD,eAAe,CAACV,KAAK,CAAC/7B,MAAM,GAAGg8B,KAAK,CAACh8B,MAAM,GAAG+7B,KAAK,GAAGC,KAAK,CAAC;IACnF,IAAI70B,CAAC,GAAGg1B,uBAAuB,GAAGO,gBAAgB,GAAG,GAAG,IAAIA,gBAAgB,GAAG,EAAE;IACjF,OAAOv1B,CAAC;EACZ;EACA,SAAS+vB,yBAAyBA,CAACvL,KAAK,EAAE;IACtC,IAAIA,KAAK,CAAC3rB,MAAM,KAAK,CAAC,EAAE;MACpB,OAAO2rB,KAAK;IAChB;IACAA,KAAK,CAAC1nB,IAAI,CAACogB,SAAS,CAAC,UAAUvkB,CAAC,EAAE;MAAE,OAAOA,CAAC,CAACksB,QAAQ,CAAC5E,eAAe;IAAE,CAAC,EAAE5C,gBAAgB,CAAC,CAAC;IAC5F,IAAIvQ,MAAM,GAAG,CAAC0X,KAAK,CAAC,CAAC,CAAC,CAAC;IACvB,KAAK,IAAI5rB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4rB,KAAK,CAAC3rB,MAAM,EAAED,CAAC,EAAE,EAAE;MACnC,IAAIyjB,IAAI,GAAGvP,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC;MACpC,IAAIwM,OAAO,GAAGmf,KAAK,CAAC5rB,CAAC,CAAC;MACtB,IAAI48B,YAAY,GAAGnwB,OAAO,CAACwf,QAAQ,CAAC5E,eAAe,GAAG5D,IAAI,CAACwI,QAAQ,CAACrC,sBAAsB;MAC1F,IAAIiT,YAAY,GAAGpwB,OAAO,CAACyf,QAAQ,CAAC7E,eAAe,GAAG5D,IAAI,CAACyI,QAAQ,CAACtC,sBAAsB;MAC1F,IAAIkT,oBAAoB,GAAGF,YAAY,IAAI,CAAC,IAAIC,YAAY,IAAI,CAAC;MACjE,IAAIC,oBAAoB,IAAIF,YAAY,GAAGC,YAAY,IAAI,CAAC,EAAE;QAC1D3oB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAGwjB,IAAI,CAAC8C,IAAI,CAAC9Z,OAAO,CAAC;QAC9C;MACJ;MACAyH,MAAM,CAAC7S,IAAI,CAACoL,OAAO,CAAC;IACxB;IACA,OAAOyH,MAAM;EACjB;EACA,SAASqjB,qBAAqBA,CAACzwB,OAAO,EAAE8kB,KAAK,EAAE;IAC3C,IAAImR,iBAAiB,GAAG,IAAI5T,eAAe,CAACriB,OAAO,CAAC;IACpD8kB,KAAK,GAAGA,KAAK,CAAC/oB,MAAM,CAAC,UAAU9C,CAAC,EAAE;MAC9B,IAAIi9B,2BAA2B,GAAGD,iBAAiB,CAACrU,kBAAkB,CAAC,UAAUsE,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACf,QAAQ,CAAC5E,eAAe,GAAGtnB,CAAC,CAACksB,QAAQ,CAACrC,sBAAsB;MAAE,CAAC,CAAC,IAAI,IAAIoC,gBAAgB,CAAC,IAAIrC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,IAAIA,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACjO,IAAIsT,2BAA2B,GAAGvU,kBAAkB,CAAC5hB,OAAO,EAAE,UAAUkmB,CAAC,EAAE;QAAE,OAAOA,CAAC,CAACd,QAAQ,CAAC7E,eAAe,GAAGtnB,CAAC,CAACmsB,QAAQ,CAACtC,sBAAsB;MAAE,CAAC,CAAC;MACtJ,IAAIsT,cAAc,GAAGF,2BAA2B,KAAKC,2BAA2B;MAChF,OAAOC,cAAc;IACzB,CAAC,CAAC;IACF,OAAOtR,KAAK;EAChB;EACA,SAASuR,qBAAqBA,CAAC1L,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE;IAChE,IAAI9a,MAAM,GAAG8a,aAAa;IAC1B9a,MAAM,GAAGkpB,2BAA2B,CAAC3L,SAAS,EAAEC,SAAS,EAAExd,MAAM,CAAC;IAClEA,MAAM,GAAGkpB,2BAA2B,CAAC3L,SAAS,EAAEC,SAAS,EAAExd,MAAM,CAAC;IAClEA,MAAM,GAAGmpB,kBAAkB,CAAC5L,SAAS,EAAEC,SAAS,EAAExd,MAAM,CAAC;IACzD,OAAOA,MAAM;EACjB;EACA,SAASkpB,2BAA2BA,CAAC3L,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE;IACtE,IAAIA,aAAa,CAAC/uB,MAAM,KAAK,CAAC,EAAE;MAC5B,OAAO+uB,aAAa;IACxB;IACA,IAAI9a,MAAM,GAAG,EAAE;IACfA,MAAM,CAAC7S,IAAI,CAAC2tB,aAAa,CAAC,CAAC,CAAC,CAAC;IAC7B,KAAK,IAAIhvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgvB,aAAa,CAAC/uB,MAAM,EAAED,CAAC,EAAE,EAAE;MAC3C,IAAIs9B,UAAU,GAAGppB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC;MAC1C,IAAIwvB,GAAG,GAAGT,aAAa,CAAChvB,CAAC,CAAC;MAC1B,IAAIyvB,GAAG,CAACZ,SAAS,CAACpc,OAAO,IAAIgd,GAAG,CAACX,SAAS,CAACrc,OAAO,EAAE;QAChD,IAAIxS,MAAM,GAAGwvB,GAAG,CAACZ,SAAS,CAACloB,KAAK,GAAG22B,UAAU,CAACzO,SAAS,CAACxJ,YAAY;QACpE,IAAI1mB,CAAC,GAAG,KAAK,CAAC;QACd,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAIsB,MAAM,EAAEtB,CAAC,EAAE,EAAE;UAC1B,IAAI8yB,SAAS,CAACW,UAAU,CAAC3C,GAAG,CAACZ,SAAS,CAACloB,KAAK,GAAGhI,CAAC,CAAC,KAAK8yB,SAAS,CAACW,UAAU,CAAC3C,GAAG,CAACZ,SAAS,CAACxJ,YAAY,GAAG1mB,CAAC,CAAC,IAAI+yB,SAAS,CAACU,UAAU,CAAC3C,GAAG,CAACX,SAAS,CAACnoB,KAAK,GAAGhI,CAAC,CAAC,KAAK+yB,SAAS,CAACU,UAAU,CAAC3C,GAAG,CAACX,SAAS,CAACzJ,YAAY,GAAG1mB,CAAC,CAAC,EAAE;YAClN;UACJ;QACJ;QACAA,CAAC,EAAE;QACH,IAAIA,CAAC,KAAKsB,MAAM,EAAE;UACdiU,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI0uB,YAAY,CAAC,IAAIvJ,WAAW,CAACkY,UAAU,CAACzO,SAAS,CAACloB,KAAK,EAAE8oB,GAAG,CAACZ,SAAS,CAACxJ,YAAY,GAAGplB,MAAM,CAAC,EAAE,IAAImlB,WAAW,CAACkY,UAAU,CAACxO,SAAS,CAACnoB,KAAK,EAAE8oB,GAAG,CAACX,SAAS,CAACzJ,YAAY,GAAGplB,MAAM,CAAC,CAAC;UAChN;QACJ;QACAwvB,GAAG,GAAGA,GAAG,CAACtJ,KAAK,CAAC,CAACxnB,CAAC,CAAC;MACvB;MACAuV,MAAM,CAAC7S,IAAI,CAACouB,GAAG,CAAC;IACpB;IACA,IAAI8N,OAAO,GAAG,EAAE;IAChB,KAAK,IAAIv9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGkU,MAAM,CAACjU,MAAM,GAAG,CAAC,EAAED,CAAC,EAAE,EAAE;MACxC,IAAIw9B,UAAU,GAAGtpB,MAAM,CAAClU,CAAC,GAAG,CAAC,CAAC;MAC9B,IAAIyvB,GAAG,GAAGvb,MAAM,CAAClU,CAAC,CAAC;MACnB,IAAIyvB,GAAG,CAACZ,SAAS,CAACpc,OAAO,IAAIgd,GAAG,CAACX,SAAS,CAACrc,OAAO,EAAE;QAChD,IAAIxS,MAAM,GAAGu9B,UAAU,CAAC3O,SAAS,CAACloB,KAAK,GAAG8oB,GAAG,CAACZ,SAAS,CAACxJ,YAAY;QACpE,IAAI1mB,CAAC,GAAG,KAAK,CAAC;QACd,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsB,MAAM,EAAEtB,CAAC,EAAE,EAAE;UACzB,IAAI,CAAC8yB,SAAS,CAAC6E,eAAe,CAAC7G,GAAG,CAACZ,SAAS,CAACloB,KAAK,GAAGhI,CAAC,EAAE8wB,GAAG,CAACZ,SAAS,CAACxJ,YAAY,GAAG1mB,CAAC,CAAC,IAAI,CAAC+yB,SAAS,CAAC4E,eAAe,CAAC7G,GAAG,CAACX,SAAS,CAACnoB,KAAK,GAAGhI,CAAC,EAAE8wB,GAAG,CAACX,SAAS,CAACzJ,YAAY,GAAG1mB,CAAC,CAAC,EAAE;YAC5K;UACJ;QACJ;QACA,IAAIA,CAAC,KAAKsB,MAAM,EAAE;UACdiU,MAAM,CAAClU,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI2uB,YAAY,CAAC,IAAIvJ,WAAW,CAACqK,GAAG,CAACZ,SAAS,CAACloB,KAAK,GAAG1G,MAAM,EAAEu9B,UAAU,CAAC3O,SAAS,CAACxJ,YAAY,CAAC,EAAE,IAAID,WAAW,CAACqK,GAAG,CAACX,SAAS,CAACnoB,KAAK,GAAG1G,MAAM,EAAEu9B,UAAU,CAAC1O,SAAS,CAACzJ,YAAY,CAAC,CAAC;UACpM;QACJ;QACA,IAAI1mB,CAAC,GAAG,CAAC,EAAE;UACP8wB,GAAG,GAAGA,GAAG,CAACtJ,KAAK,CAACxnB,CAAC,CAAC;QACtB;MACJ;MACA4+B,OAAO,CAACl8B,IAAI,CAACouB,GAAG,CAAC;IACrB;IACA,IAAIvb,MAAM,CAACjU,MAAM,GAAG,CAAC,EAAE;MACnBs9B,OAAO,CAACl8B,IAAI,CAAC6S,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,CAAC;IAC3C;IACA,OAAOs9B,OAAO;EAClB;EACA,SAASF,kBAAkBA,CAAC5L,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE;IAC7D,IAAI,CAACyC,SAAS,CAAC4D,gBAAgB,IAAI,CAAC3D,SAAS,CAAC2D,gBAAgB,EAAE;MAC5D,OAAOrG,aAAa;IACxB;IACA,KAAK,IAAIhvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgvB,aAAa,CAAC/uB,MAAM,EAAED,CAAC,EAAE,EAAE;MAC3C,IAAIy9B,QAAQ,GAAGz9B,CAAC,GAAG,CAAC,GAAGgvB,aAAa,CAAChvB,CAAC,GAAG,CAAC,CAAC,GAAG+J,SAAS;MACvD,IAAI2L,IAAI,GAAGsZ,aAAa,CAAChvB,CAAC,CAAC;MAC3B,IAAI09B,QAAQ,GAAG19B,CAAC,GAAG,CAAC,GAAGgvB,aAAa,CAAC/uB,MAAM,GAAG+uB,aAAa,CAAChvB,CAAC,GAAG,CAAC,CAAC,GAAG+J,SAAS;MAC9E,IAAI4zB,cAAc,GAAG,IAAIvY,WAAW,CAACqY,QAAQ,GAAGA,QAAQ,CAAC5O,SAAS,CAACxJ,YAAY,GAAG,CAAC,GAAG,CAAC,EAAEqY,QAAQ,GAAGA,QAAQ,CAAC7O,SAAS,CAACloB,KAAK,GAAG,CAAC,GAAG8qB,SAAS,CAACxxB,MAAM,CAAC;MACpJ,IAAI29B,cAAc,GAAG,IAAIxY,WAAW,CAACqY,QAAQ,GAAGA,QAAQ,CAAC3O,SAAS,CAACzJ,YAAY,GAAG,CAAC,GAAG,CAAC,EAAEqY,QAAQ,GAAGA,QAAQ,CAAC5O,SAAS,CAACnoB,KAAK,GAAG,CAAC,GAAG+qB,SAAS,CAACzxB,MAAM,CAAC;MACpJ,IAAIyV,IAAI,CAACmZ,SAAS,CAACpc,OAAO,EAAE;QACxBuc,aAAa,CAAChvB,CAAC,CAAC,GAAG69B,yBAAyB,CAACnoB,IAAI,EAAE+b,SAAS,EAAEC,SAAS,EAAEiM,cAAc,EAAEC,cAAc,CAAC;MAC5G,CAAC,MACI,IAAIloB,IAAI,CAACoZ,SAAS,CAACrc,OAAO,EAAE;QAC7Buc,aAAa,CAAChvB,CAAC,CAAC,GAAG69B,yBAAyB,CAACnoB,IAAI,CAACia,IAAI,CAAC,CAAC,EAAE+B,SAAS,EAAED,SAAS,EAAEmM,cAAc,EAAED,cAAc,CAAC,CAAChO,IAAI,CAAC,CAAC;MAC1H;IACJ;IACA,OAAOX,aAAa;EACxB;EACA,SAAS6O,yBAAyBA,CAACnoB,IAAI,EAAE+b,SAAS,EAAEC,SAAS,EAAEiM,cAAc,EAAEC,cAAc,EAAE;IAC3F,IAAIE,aAAa,GAAG,GAAG;IACvB,IAAIC,WAAW,GAAG,CAAC;IACnB,OAAOroB,IAAI,CAACmZ,SAAS,CAACloB,KAAK,GAAGo3B,WAAW,IAAIJ,cAAc,CAACh3B,KAAK,IAAI+O,IAAI,CAACoZ,SAAS,CAACnoB,KAAK,GAAGo3B,WAAW,IAAIH,cAAc,CAACj3B,KAAK,IAAI+qB,SAAS,CAAC4E,eAAe,CAAC5gB,IAAI,CAACoZ,SAAS,CAACnoB,KAAK,GAAGo3B,WAAW,EAAEroB,IAAI,CAACoZ,SAAS,CAACzJ,YAAY,GAAG0Y,WAAW,CAAC,IAAIA,WAAW,GAAGD,aAAa,EAAE;MACxQC,WAAW,EAAE;IACjB;IACAA,WAAW,EAAE;IACb,IAAIC,UAAU,GAAG,CAAC;IAClB,OAAOtoB,IAAI,CAACmZ,SAAS,CAACloB,KAAK,GAAGq3B,UAAU,GAAGL,cAAc,CAACtY,YAAY,IAAI3P,IAAI,CAACoZ,SAAS,CAACzJ,YAAY,GAAG2Y,UAAU,GAAGJ,cAAc,CAACvY,YAAY,IAAIqM,SAAS,CAAC4E,eAAe,CAAC5gB,IAAI,CAACoZ,SAAS,CAACnoB,KAAK,GAAGq3B,UAAU,EAAEtoB,IAAI,CAACoZ,SAAS,CAACzJ,YAAY,GAAG2Y,UAAU,CAAC,IAAIA,UAAU,GAAGF,aAAa,EAAE;MACtRE,UAAU,EAAE;IAChB;IACA,IAAID,WAAW,KAAK,CAAC,IAAIC,UAAU,KAAK,CAAC,EAAE;MACvC,OAAOtoB,IAAI;IACf;IACA,IAAIuoB,SAAS,GAAG,CAAC;IACjB,IAAIC,SAAS,GAAG,CAAC,CAAC;IAClB,KAAK,IAAI/X,KAAK,GAAG,CAAC4X,WAAW,EAAE5X,KAAK,IAAI6X,UAAU,EAAE7X,KAAK,EAAE,EAAE;MACzD,IAAIgY,eAAe,GAAGzoB,IAAI,CAACoZ,SAAS,CAACnoB,KAAK,GAAGwf,KAAK;MAClD,IAAIiY,sBAAsB,GAAG1oB,IAAI,CAACoZ,SAAS,CAACzJ,YAAY,GAAGc,KAAK;MAChE,IAAIkY,UAAU,GAAG3oB,IAAI,CAACmZ,SAAS,CAACloB,KAAK,GAAGwf,KAAK;MAC7C,IAAImY,OAAO,GAAG7M,SAAS,CAAC4D,gBAAgB,CAACgJ,UAAU,CAAC,GAAG3M,SAAS,CAAC2D,gBAAgB,CAAC8I,eAAe,CAAC,GAAGzM,SAAS,CAAC2D,gBAAgB,CAAC+I,sBAAsB,CAAC;MACvJ,IAAIE,OAAO,GAAGJ,SAAS,EAAE;QACrBA,SAAS,GAAGI,OAAO;QACnBL,SAAS,GAAG9X,KAAK;MACrB;IACJ;IACA,OAAOzQ,IAAI,CAACyQ,KAAK,CAAC8X,SAAS,CAAC;EAChC;EACA,SAASM,kBAAkBA,CAAC9M,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE;IAC7D,IAAIwP,IAAI,EAAEn8B,EAAE;IACZ,IAAI6R,MAAM,GAAG,EAAE;IACf,IAAI;MACA,KAAK,IAAIuqB,eAAe,GAAG/+B,QAAQ,CAACsvB,aAAa,CAAC,EAAE0P,iBAAiB,GAAGD,eAAe,CAACv+B,IAAI,CAAC,CAAC,EAAE,CAACw+B,iBAAiB,CAACt+B,IAAI,EAAEs+B,iBAAiB,GAAGD,eAAe,CAACv+B,IAAI,CAAC,CAAC,EAAE;QACjK,IAAIN,CAAC,GAAG8+B,iBAAiB,CAACv+B,KAAK;QAC/B,IAAIsjB,IAAI,GAAGvP,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC;QACpC,IAAI,CAACwjB,IAAI,EAAE;UACPvP,MAAM,CAAC7S,IAAI,CAACzB,CAAC,CAAC;UACd;QACJ;QACA,IAAIA,CAAC,CAACivB,SAAS,CAACloB,KAAK,GAAG8c,IAAI,CAACoL,SAAS,CAACxJ,YAAY,IAAI,CAAC,IAAIzlB,CAAC,CAACkvB,SAAS,CAACnoB,KAAK,GAAG8c,IAAI,CAACqL,SAAS,CAACzJ,YAAY,IAAI,CAAC,EAAE;UAC9GnR,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI0uB,YAAY,CAAClL,IAAI,CAACoL,SAAS,CAACtI,IAAI,CAAC3mB,CAAC,CAACivB,SAAS,CAAC,EAAEpL,IAAI,CAACqL,SAAS,CAACvI,IAAI,CAAC3mB,CAAC,CAACkvB,SAAS,CAAC,CAAC;QACpH,CAAC,MACI;UACD5a,MAAM,CAAC7S,IAAI,CAACzB,CAAC,CAAC;QAClB;MACJ;IACJ,CAAC,CACD,OAAO++B,MAAM,EAAE;MAAEH,IAAI,GAAG;QAAE55B,KAAK,EAAE+5B;MAAO,CAAC;IAAE,CAAC,SACpC;MACJ,IAAI;QACA,IAAID,iBAAiB,IAAI,CAACA,iBAAiB,CAACt+B,IAAI,KAAKiC,EAAE,GAAGo8B,eAAe,CAAC55B,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACq/B,eAAe,CAAC;MAC/G,CAAC,SACO;QAAE,IAAID,IAAI,EAAE,MAAMA,IAAI,CAAC55B,KAAK;MAAE;IAC1C;IACA,OAAOsP,MAAM;EACjB;EACA,SAAS0qB,oCAAoCA,CAACnN,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE6P,UAAU,EAAE7wB,KAAK,EAAE;IAClG,IAAIA,KAAK,KAAK,KAAK,CAAC,EAAE;MAAEA,KAAK,GAAG,KAAK;IAAE;IACvC,IAAI8wB,aAAa,GAAGnQ,YAAY,CAACI,MAAM,CAACC,aAAa,EAAEyC,SAAS,CAACxxB,MAAM,CAAC;IACxE,IAAI8+B,UAAU,GAAG,EAAE;IACnB,IAAIC,SAAS,GAAG,IAAI5P,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;IACpC,SAAS6P,QAAQA,CAACC,IAAI,EAAEC,YAAY,EAAE;MAClC,IAAID,IAAI,CAAC/7B,OAAO,GAAG67B,SAAS,CAAC77B,OAAO,IAAI+7B,IAAI,CAAC77B,OAAO,GAAG27B,SAAS,CAAC37B,OAAO,EAAE;QACtE;MACJ;MACA,IAAI+7B,EAAE,GAAGP,UAAU,CAACpN,SAAS,EAAEyN,IAAI,CAAC/7B,OAAO,CAAC;MAC5C,IAAIk8B,EAAE,GAAGR,UAAU,CAACnN,SAAS,EAAEwN,IAAI,CAAC77B,OAAO,CAAC;MAC5C,IAAI,CAAC+7B,EAAE,IAAI,CAACC,EAAE,EAAE;QACZ;MACJ;MACA,IAAItvB,CAAC,GAAG,IAAI4e,YAAY,CAACyQ,EAAE,EAAEC,EAAE,CAAC;MAChC,IAAIC,SAAS,GAAGvvB,CAAC,CAACyW,SAAS,CAAC2Y,YAAY,CAAC;MACzC,IAAII,WAAW,GAAGD,SAAS,CAACzQ,SAAS,CAAC5uB,MAAM;MAC5C,IAAIu/B,WAAW,GAAGF,SAAS,CAACxQ,SAAS,CAAC7uB,MAAM;MAC5C,OAAO6+B,aAAa,CAAC7+B,MAAM,GAAG,CAAC,EAAE;QAC7B,IAAIC,IAAI,GAAG4+B,aAAa,CAAC,CAAC,CAAC;QAC3B,IAAIpY,UAAU,GAAGxmB,IAAI,CAAC2uB,SAAS,CAACnI,UAAU,CAAC3W,CAAC,CAAC8e,SAAS,CAAC,IAAI3uB,IAAI,CAAC4uB,SAAS,CAACpI,UAAU,CAAC3W,CAAC,CAAC+e,SAAS,CAAC;QACjG,IAAI,CAACpI,UAAU,EAAE;UACb;QACJ;QACA,IAAI+Y,EAAE,GAAGZ,UAAU,CAACpN,SAAS,EAAEvxB,IAAI,CAAC2uB,SAAS,CAACloB,KAAK,CAAC;QACpD,IAAI+4B,EAAE,GAAGb,UAAU,CAACnN,SAAS,EAAExxB,IAAI,CAAC4uB,SAAS,CAACnoB,KAAK,CAAC;QACpD,IAAI8b,CAAC,GAAG,IAAIkM,YAAY,CAAC8Q,EAAE,EAAEC,EAAE,CAAC;QAChC,IAAIC,UAAU,GAAGld,CAAC,CAAC+D,SAAS,CAACtmB,IAAI,CAAC;QAClCq/B,WAAW,IAAII,UAAU,CAAC9Q,SAAS,CAAC5uB,MAAM;QAC1Cu/B,WAAW,IAAIG,UAAU,CAAC7Q,SAAS,CAAC7uB,MAAM;QAC1C8P,CAAC,GAAGA,CAAC,CAACwW,IAAI,CAAC9D,CAAC,CAAC;QACb,IAAI1S,CAAC,CAAC8e,SAAS,CAACxJ,YAAY,IAAInlB,IAAI,CAAC2uB,SAAS,CAACxJ,YAAY,EAAE;UACzDyZ,aAAa,CAACc,KAAK,CAAC,CAAC;QACzB,CAAC,MACI;UACD;QACJ;MACJ;MACA,IAAI5xB,KAAK,IAAIuxB,WAAW,GAAGC,WAAW,GAAGzvB,CAAC,CAAC8e,SAAS,CAAC5uB,MAAM,GAAG8P,CAAC,CAAC+e,SAAS,CAAC7uB,MAAM,IAAIs/B,WAAW,GAAGC,WAAW,GAAG,CAACzvB,CAAC,CAAC8e,SAAS,CAAC5uB,MAAM,GAAG8P,CAAC,CAAC+e,SAAS,CAAC7uB,MAAM,IAAI,CAAC,GAAG,CAAC,EAAE;QAC/J8+B,UAAU,CAAC19B,IAAI,CAAC0O,CAAC,CAAC;MACtB;MACAivB,SAAS,GAAGjvB,CAAC,CAACof,gBAAgB,CAAC,CAAC;IACpC;IACA,OAAO2P,aAAa,CAAC7+B,MAAM,GAAG,CAAC,EAAE;MAC7B,IAAIC,IAAI,GAAG4+B,aAAa,CAACc,KAAK,CAAC,CAAC;MAChC,IAAI1/B,IAAI,CAAC2uB,SAAS,CAACpc,OAAO,EAAE;QACxB;MACJ;MACAwsB,QAAQ,CAAC/+B,IAAI,CAACmvB,SAAS,CAAC,CAAC,EAAEnvB,IAAI,CAAC;MAChC++B,QAAQ,CAAC/+B,IAAI,CAACivB,gBAAgB,CAAC,CAAC,CAAChJ,KAAK,CAAC,CAAC,CAAC,CAAC,EAAEjmB,IAAI,CAAC;IACrD;IACA,IAAI2/B,MAAM,GAAGC,kBAAkB,CAAC9Q,aAAa,EAAE+P,UAAU,CAAC;IAC1D,OAAOc,MAAM;EACjB;EACA,SAASC,kBAAkBA,CAACC,cAAc,EAAEC,cAAc,EAAE;IACxD,IAAI9rB,MAAM,GAAG,EAAE;IACf,OAAO6rB,cAAc,CAAC9/B,MAAM,GAAG,CAAC,IAAI+/B,cAAc,CAAC//B,MAAM,GAAG,CAAC,EAAE;MAC3D,IAAIggC,GAAG,GAAGF,cAAc,CAAC,CAAC,CAAC;MAC3B,IAAIG,GAAG,GAAGF,cAAc,CAAC,CAAC,CAAC;MAC3B,IAAI9/B,IAAI,GAAG,KAAK,CAAC;MACjB,IAAI+/B,GAAG,KAAK,CAACC,GAAG,IAAID,GAAG,CAACpR,SAAS,CAACloB,KAAK,GAAGu5B,GAAG,CAACrR,SAAS,CAACloB,KAAK,CAAC,EAAE;QAC5DzG,IAAI,GAAG6/B,cAAc,CAACH,KAAK,CAAC,CAAC;MACjC,CAAC,MACI;QACD1/B,IAAI,GAAG8/B,cAAc,CAACJ,KAAK,CAAC,CAAC;MACjC;MACA,IAAI1rB,MAAM,CAACjU,MAAM,GAAG,CAAC,IAAIiU,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,CAAC4uB,SAAS,CAACxJ,YAAY,IAAInlB,IAAI,CAAC2uB,SAAS,CAACloB,KAAK,EAAE;QAC/FuN,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAGiU,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,CAACsmB,IAAI,CAACrmB,IAAI,CAAC;MACpE,CAAC,MACI;QACDgU,MAAM,CAAC7S,IAAI,CAACnB,IAAI,CAAC;MACrB;IACJ;IACA,OAAOgU,MAAM;EACjB;EACA,SAASisB,wCAAwCA,CAAC1O,SAAS,EAAE2O,UAAU,EAAEpR,aAAa,EAAE;IACpF,IAAIT,KAAK,GAAGS,aAAa;IACzB,IAAIT,KAAK,CAACtuB,MAAM,KAAK,CAAC,EAAE;MACpB,OAAOsuB,KAAK;IAChB;IACA,IAAIoC,OAAO,GAAG,CAAC;IACf,IAAI0P,YAAY;IAChB,GAAG;MACCA,YAAY,GAAG,KAAK;MACpB,IAAInsB,MAAM,GAAG,CACTqa,KAAK,CAAC,CAAC,CAAC,CACX;MACD,IAAI+R,OAAO,GAAG,SAAAA,CAAUtgC,CAAC,EAAE;QACvB,IAAIugC,eAAe,GAAG,SAAAA,CAAUC,MAAM,EAAEC,KAAK,EAAE;UAC3C,IAAIC,cAAc,GAAG,IAAItb,WAAW,CAACub,UAAU,CAAC9R,SAAS,CAACxJ,YAAY,EAAEoK,GAAG,CAACZ,SAAS,CAACloB,KAAK,CAAC;UAC5F,IAAIi6B,aAAa,GAAGnP,SAAS,CAACja,OAAO,CAACkpB,cAAc,CAAC;UACrD,IAAIG,sBAAsB,GAAGD,aAAa,CAACE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;UAC7D,IAAID,sBAAsB,CAAC5gC,MAAM,IAAI,CAAC,KAAKugC,MAAM,CAAC3R,SAAS,CAAC5uB,MAAM,GAAGugC,MAAM,CAAC1R,SAAS,CAAC7uB,MAAM,GAAG,CAAC,IAAIwgC,KAAK,CAAC5R,SAAS,CAAC5uB,MAAM,GAAGwgC,KAAK,CAAC3R,SAAS,CAAC7uB,MAAM,GAAG,CAAC,CAAC,EAAE;YACtJ,OAAO,IAAI;UACf;UACA,OAAO,KAAK;QAChB,CAAC;QACD,IAAIwvB,GAAG,GAAGlB,KAAK,CAACvuB,CAAC,CAAC;QAClB,IAAI2gC,UAAU,GAAGzsB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC;QAC1C,IAAI8gC,UAAU,GAAGR,eAAe,CAACI,UAAU,EAAElR,GAAG,CAAC;QACjD,IAAIsR,UAAU,EAAE;UACZV,YAAY,GAAG,IAAI;UACnBnsB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAGiU,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,CAACsmB,IAAI,CAACkJ,GAAG,CAAC;QACnE,CAAC,MACI;UACDvb,MAAM,CAAC7S,IAAI,CAACouB,GAAG,CAAC;QACpB;MACJ,CAAC;MACD,KAAK,IAAIzvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuuB,KAAK,CAACtuB,MAAM,EAAED,CAAC,EAAE,EAAE;QACnCsgC,OAAO,CAACtgC,CAAC,CAAC;MACd;MACAuuB,KAAK,GAAGra,MAAM;IAClB,CAAC,QAAQyc,OAAO,EAAE,GAAG,EAAE,IAAI0P,YAAY;IACvC,OAAO9R,KAAK;EAChB;EACA,SAASyS,2CAA2CA,CAACvP,SAAS,EAAEC,SAAS,EAAE1C,aAAa,EAAE;IACtF,IAAIT,KAAK,GAAGS,aAAa;IACzB,IAAIT,KAAK,CAACtuB,MAAM,KAAK,CAAC,EAAE;MACpB,OAAOsuB,KAAK;IAChB;IACA,IAAIoC,OAAO,GAAG,CAAC;IACf,IAAI0P,YAAY;IAChB,GAAG;MACCA,YAAY,GAAG,KAAK;MACpB,IAAInsB,MAAM,GAAG,CACTqa,KAAK,CAAC,CAAC,CAAC,CACX;MACD,IAAI0S,OAAO,GAAG,SAAAA,CAAUjhC,CAAC,EAAE;QACvB,IAAIugC,eAAe,GAAG,SAAAA,CAAUC,MAAM,EAAEC,KAAK,EAAE;UAC3C,IAAIC,cAAc,GAAG,IAAItb,WAAW,CAACub,UAAU,CAAC9R,SAAS,CAACxJ,YAAY,EAAEoK,GAAG,CAACZ,SAAS,CAACloB,KAAK,CAAC;UAC5F,IAAIu6B,kBAAkB,GAAGzP,SAAS,CAAC4E,YAAY,CAACqK,cAAc,CAAC;UAC/D,IAAIQ,kBAAkB,GAAG,CAAC,IAAIR,cAAc,CAACzgC,MAAM,GAAG,GAAG,EAAE;YACvD,OAAO,KAAK;UAChB;UACA,IAAI2gC,aAAa,GAAGnP,SAAS,CAACja,OAAO,CAACkpB,cAAc,CAAC,CAACtJ,IAAI,CAAC,CAAC;UAC5D,IAAIwJ,aAAa,CAAC3gC,MAAM,GAAG,EAAE,IAAI2gC,aAAa,CAACO,KAAK,CAAC,YAAY,CAAC,CAAClhC,MAAM,GAAG,CAAC,EAAE;YAC3E,OAAO,KAAK;UAChB;UACA,IAAImhC,gBAAgB,GAAG3P,SAAS,CAAC4E,YAAY,CAACmK,MAAM,CAAC3R,SAAS,CAAC;UAC/D,IAAIwS,gBAAgB,GAAGb,MAAM,CAAC3R,SAAS,CAAC5uB,MAAM;UAC9C,IAAIqhC,gBAAgB,GAAG5P,SAAS,CAAC2E,YAAY,CAACmK,MAAM,CAAC1R,SAAS,CAAC;UAC/D,IAAIyS,gBAAgB,GAAGf,MAAM,CAAC1R,SAAS,CAAC7uB,MAAM;UAC9C,IAAIuhC,eAAe,GAAG/P,SAAS,CAAC4E,YAAY,CAACoK,KAAK,CAAC5R,SAAS,CAAC;UAC7D,IAAI4S,eAAe,GAAGhB,KAAK,CAAC5R,SAAS,CAAC5uB,MAAM;UAC5C,IAAIyhC,eAAe,GAAGhQ,SAAS,CAAC2E,YAAY,CAACoK,KAAK,CAAC3R,SAAS,CAAC;UAC7D,IAAI6S,eAAe,GAAGlB,KAAK,CAAC3R,SAAS,CAAC7uB,MAAM;UAC5C,IAAIsT,GAAG,GAAG,CAAC,GAAG,EAAE,GAAG,EAAE;UACrB,SAASquB,GAAGA,CAACnf,CAAC,EAAE;YACZ,OAAOlf,IAAI,CAACsR,GAAG,CAAC4N,CAAC,EAAElP,GAAG,CAAC;UAC3B;UACA,IAAIhQ,IAAI,CAACs+B,GAAG,CAACt+B,IAAI,CAACs+B,GAAG,CAACD,GAAG,CAACR,gBAAgB,GAAG,EAAE,GAAGC,gBAAgB,CAAC,EAAE,GAAG,CAAC,GAAG99B,IAAI,CAACs+B,GAAG,CAACD,GAAG,CAACN,gBAAgB,GAAG,EAAE,GAAGC,gBAAgB,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAGh+B,IAAI,CAACs+B,GAAG,CAACt+B,IAAI,CAACs+B,GAAG,CAACD,GAAG,CAACJ,eAAe,GAAG,EAAE,GAAGC,eAAe,CAAC,EAAE,GAAG,CAAC,GAAGl+B,IAAI,CAACs+B,GAAG,CAACD,GAAG,CAACF,eAAe,GAAG,EAAE,GAAGC,eAAe,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,GAAGp+B,IAAI,CAACs+B,GAAG,CAAEt+B,IAAI,CAACs+B,GAAG,CAACtuB,GAAG,EAAE,GAAG,CAAC,EAAG,GAAG,CAAC,GAAG,GAAG,EAAE;YACjU,OAAO,IAAI;UACf;UACA,OAAO,KAAK;QAChB,CAAC;QACD,IAAIkc,GAAG,GAAGlB,KAAK,CAACvuB,CAAC,CAAC;QAClB,IAAI2gC,UAAU,GAAGzsB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC;QAC1C,IAAI8gC,UAAU,GAAGR,eAAe,CAACI,UAAU,EAAElR,GAAG,CAAC;QACjD,IAAIsR,UAAU,EAAE;UACZV,YAAY,GAAG,IAAI;UACnBnsB,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,GAAGiU,MAAM,CAACA,MAAM,CAACjU,MAAM,GAAG,CAAC,CAAC,CAACsmB,IAAI,CAACkJ,GAAG,CAAC;QACnE,CAAC,MACI;UACDvb,MAAM,CAAC7S,IAAI,CAACouB,GAAG,CAAC;QACpB;MACJ,CAAC;MACD,KAAK,IAAIzvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuuB,KAAK,CAACtuB,MAAM,EAAED,CAAC,EAAE,EAAE;QACnCihC,OAAO,CAACjhC,CAAC,CAAC;MACd;MACAuuB,KAAK,GAAGra,MAAM;IAClB,CAAC,QAAQyc,OAAO,EAAE,GAAG,EAAE,IAAI0P,YAAY;IACvC,IAAIyB,QAAQ,GAAG,EAAE;IACjB9d,oBAAoB,CAACuK,KAAK,EAAE,UAAUliB,IAAI,EAAEojB,GAAG,EAAEvvB,IAAI,EAAE;MACnD,IAAI6hC,OAAO,GAAGtS,GAAG;MACjB,SAASuS,mBAAmBA,CAAC7M,IAAI,EAAE;QAC/B,OAAOA,IAAI,CAACl1B,MAAM,GAAG,CAAC,IAAIk1B,IAAI,CAACiC,IAAI,CAAC,CAAC,CAACn3B,MAAM,IAAI,CAAC,IAAIwvB,GAAG,CAACZ,SAAS,CAAC5uB,MAAM,GAAGwvB,GAAG,CAACX,SAAS,CAAC7uB,MAAM,GAAG,GAAG;MAC1G;MACA,IAAIgiC,UAAU,GAAGxQ,SAAS,CAAC8E,iBAAiB,CAAC9G,GAAG,CAACZ,SAAS,CAAC;MAC3D,IAAIqT,MAAM,GAAGzQ,SAAS,CAACja,OAAO,CAAC,IAAI4N,WAAW,CAAC6c,UAAU,CAACt7B,KAAK,EAAE8oB,GAAG,CAACZ,SAAS,CAACloB,KAAK,CAAC,CAAC;MACtF,IAAIq7B,mBAAmB,CAACE,MAAM,CAAC,EAAE;QAC7BH,OAAO,GAAGA,OAAO,CAAC3b,UAAU,CAAC,CAAC8b,MAAM,CAACjiC,MAAM,CAAC;MAChD;MACA,IAAIkiC,MAAM,GAAG1Q,SAAS,CAACja,OAAO,CAAC,IAAI4N,WAAW,CAACqK,GAAG,CAACZ,SAAS,CAACxJ,YAAY,EAAE4c,UAAU,CAAC5c,YAAY,CAAC,CAAC;MACpG,IAAI2c,mBAAmB,CAACG,MAAM,CAAC,EAAE;QAC7BJ,OAAO,GAAGA,OAAO,CAAC1b,QAAQ,CAAC8b,MAAM,CAACliC,MAAM,CAAC;MAC7C;MACA,IAAImiC,cAAc,GAAGzT,YAAY,CAACO,eAAe,CAAC7iB,IAAI,GAAGA,IAAI,CAAC8iB,gBAAgB,CAAC,CAAC,GAAGC,UAAU,CAACjE,IAAI,EAAEjrB,IAAI,GAAGA,IAAI,CAACmvB,SAAS,CAAC,CAAC,GAAGD,UAAU,CAAC7b,GAAG,CAAC;MAC7I,IAAIW,MAAM,GAAG6tB,OAAO,CAACvb,SAAS,CAAC4b,cAAc,CAAC;MAC9C,IAAIN,QAAQ,CAAC7hC,MAAM,GAAG,CAAC,IAAIiU,MAAM,CAACmb,SAAS,CAAC,CAAC,CAACpM,MAAM,CAAC6e,QAAQ,CAACA,QAAQ,CAAC7hC,MAAM,GAAG,CAAC,CAAC,CAACkvB,gBAAgB,CAAC,CAAC,CAAC,EAAE;QACpG2S,QAAQ,CAACA,QAAQ,CAAC7hC,MAAM,GAAG,CAAC,CAAC,GAAG6hC,QAAQ,CAACA,QAAQ,CAAC7hC,MAAM,GAAG,CAAC,CAAC,CAACsmB,IAAI,CAACrS,MAAM,CAAC;MAC9E,CAAC,MACI;QACD4tB,QAAQ,CAACzgC,IAAI,CAAC6S,MAAM,CAAC;MACzB;IACJ,CAAC,CAAC;IACF,OAAO4tB,QAAQ;EACnB;EACA,IAAIO,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAACC,WAAW,EAAEtjB,KAAK,EAAE;MACtC,IAAI,CAACsjB,WAAW,GAAGA,WAAW;MAC9B,IAAI,CAACtjB,KAAK,GAAGA,KAAK;IACtB;IACAqjB,YAAY,CAACnjC,SAAS,CAACkzB,UAAU,GAAG,UAAUrM,MAAM,EAAE;MAClD,OAAO,IAAI,CAACuc,WAAW,CAACvc,MAAM,CAAC;IACnC,CAAC;IACDlnB,MAAM,CAACmnB,cAAc,CAACqc,YAAY,CAACnjC,SAAS,EAAE,QAAQ,EAAE;MACpDqY,GAAG,EAAE,SAAAA,CAAA,EAAY;QACb,OAAO,IAAI,CAAC+qB,WAAW,CAACriC,MAAM;MAClC,CAAC;MACDgmB,UAAU,EAAE,KAAK;MACjBC,YAAY,EAAE;IAClB,CAAC,CAAC;IACFmc,YAAY,CAACnjC,SAAS,CAACm2B,gBAAgB,GAAG,UAAUp1B,MAAM,EAAE;MACxD,IAAIsiC,iBAAiB,GAAGtiC,MAAM,KAAK,CAAC,GAAG,CAAC,GAAGuiC,cAAc,CAAC,IAAI,CAACxjB,KAAK,CAAC/e,MAAM,GAAG,CAAC,CAAC,CAAC;MACjF,IAAIwiC,gBAAgB,GAAGxiC,MAAM,KAAK,IAAI,CAAC+e,KAAK,CAAC/e,MAAM,GAAG,CAAC,GAAGuiC,cAAc,CAAC,IAAI,CAACxjB,KAAK,CAAC/e,MAAM,CAAC,CAAC;MAC5F,OAAO,GAAG,IAAIsiC,iBAAiB,GAAGE,gBAAgB,CAAC;IACvD,CAAC;IACDJ,YAAY,CAACnjC,SAAS,CAACsY,OAAO,GAAG,UAAUxF,KAAK,EAAE;MAC9C,OAAO,IAAI,CAACgN,KAAK,CAAC8H,KAAK,CAAC9U,KAAK,CAACrL,KAAK,EAAEqL,KAAK,CAACqT,YAAY,CAAC,CAACkB,IAAI,CAAC,IAAI,CAAC;IACvE,CAAC;IACD8b,YAAY,CAACnjC,SAAS,CAACo3B,eAAe,GAAG,UAAUnzB,OAAO,EAAEE,OAAO,EAAE;MACjE,OAAO,IAAI,CAAC2b,KAAK,CAAC7b,OAAO,CAAC,KAAK,IAAI,CAAC6b,KAAK,CAAC3b,OAAO,CAAC;IACtD,CAAC;IACD,OAAOg/B,YAAY;EACvB,CAAC,CAAC,CAAE;EACJ,SAASG,cAAcA,CAACxb,GAAG,EAAE;IACzB,IAAIhnB,CAAC,GAAG,CAAC;IACT,OAAOA,CAAC,GAAGgnB,GAAG,CAAC/mB,MAAM,KAAK+mB,GAAG,CAACkO,UAAU,CAACl1B,CAAC,CAAC,KAAK,EAAE,IAAIgnB,GAAG,CAACkO,UAAU,CAACl1B,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;MAC5EA,CAAC,EAAE;IACP;IACA,OAAOA,CAAC;EACZ;EACA,IAAI0iC,wBAAwB,GAAG,aAAe,YAAY;IACtD,SAASA,wBAAwBA,CAAA,EAAG;MAChC,IAAI,CAACC,yBAAyB,GAAG,IAAInR,yBAAyB,CAAC,CAAC;MAChE,IAAI,CAAC2K,qBAAqB,GAAG,IAAItJ,kBAAkB,CAAC,CAAC;IACzD;IACA6P,wBAAwB,CAACxjC,SAAS,CAAC0jC,WAAW,GAAG,UAAUtV,aAAa,EAAEC,aAAa,EAAEplB,OAAO,EAAE;MAC9F,IAAI06B,IAAI,EAAExgC,EAAE;MACZ,IAAI1B,KAAK,GAAG,IAAI;MAChB,IAAI2sB,aAAa,CAACrtB,MAAM,IAAI,CAAC,IAAIgjB,MAAM,CAACqK,aAAa,EAAEC,aAAa,EAAE,UAAUhrB,CAAC,EAAE3D,CAAC,EAAE;QAAE,OAAO2D,CAAC,KAAK3D,CAAC;MAAE,CAAC,CAAC,EAAE;QACxG,OAAO,IAAI+sB,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,KAAK,CAAC;MACvC;MACA,IAAI2B,aAAa,CAACrtB,MAAM,KAAK,CAAC,IAAIqtB,aAAa,CAAC,CAAC,CAAC,CAACrtB,MAAM,KAAK,CAAC,IAAIstB,aAAa,CAACttB,MAAM,KAAK,CAAC,IAAIstB,aAAa,CAAC,CAAC,CAAC,CAACttB,MAAM,KAAK,CAAC,EAAE;QAC5H,OAAO,IAAI0rB,SAAS,CAAC,CACjB,IAAIgB,wBAAwB,CAAC,IAAIhD,SAAS,CAAC,CAAC,EAAE2D,aAAa,CAACrtB,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI0pB,SAAS,CAAC,CAAC,EAAE4D,aAAa,CAACttB,MAAM,GAAG,CAAC,CAAC,EAAE,CACjH,IAAIqsB,YAAY,CAAC,IAAI/kB,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE+lB,aAAa,CAACrtB,MAAM,EAAEqtB,aAAa,CAACA,aAAa,CAACrtB,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM,GAAG,CAAC,CAAC,EAAE,IAAIsH,KAAK,CAAC,CAAC,EAAE,CAAC,EAAEgmB,aAAa,CAACttB,MAAM,EAAEstB,aAAa,CAACA,aAAa,CAACttB,MAAM,GAAG,CAAC,CAAC,CAACA,MAAM,GAAG,CAAC,CAAC,CAAC,CACzM,CAAC,CACL,EAAE,EAAE,EAAE,KAAK,CAAC;MACjB;MACA,IAAI+vB,OAAO,GAAG7nB,OAAO,CAACyH,oBAAoB,KAAK,CAAC,GAAGggB,eAAe,CAACE,QAAQ,GAAG,IAAIC,WAAW,CAAC5nB,OAAO,CAACyH,oBAAoB,CAAC;MAC3H,IAAI2kB,yBAAyB,GAAG,CAACpsB,OAAO,CAACwH,oBAAoB;MAC7D,IAAImzB,aAAa,GAAG,eAAgB,IAAIvR,GAAG,CAAC,CAAC;MAC7C,SAASwR,eAAeA,CAAC5N,IAAI,EAAE;QAC3B,IAAI6N,IAAI,GAAGF,aAAa,CAACvrB,GAAG,CAAC4d,IAAI,CAAC;QAClC,IAAI6N,IAAI,KAAKj5B,SAAS,EAAE;UACpBi5B,IAAI,GAAGF,aAAa,CAAC5R,IAAI;UACzB4R,aAAa,CAACrsB,GAAG,CAAC0e,IAAI,EAAE6N,IAAI,CAAC;QACjC;QACA,OAAOA,IAAI;MACf;MACA,IAAIC,mBAAmB,GAAG3V,aAAa,CAACvV,GAAG,CAAC,UAAUpL,CAAC,EAAE;QAAE,OAAOo2B,eAAe,CAACp2B,CAAC,CAACyqB,IAAI,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC;MAC/F,IAAI8L,mBAAmB,GAAG3V,aAAa,CAACxV,GAAG,CAAC,UAAUpL,CAAC,EAAE;QAAE,OAAOo2B,eAAe,CAACp2B,CAAC,CAACyqB,IAAI,CAAC,CAAC,CAAC;MAAE,CAAC,CAAC;MAC/F,IAAI3F,SAAS,GAAG,IAAI4Q,YAAY,CAACY,mBAAmB,EAAE3V,aAAa,CAAC;MACpE,IAAIoE,SAAS,GAAG,IAAI2Q,YAAY,CAACa,mBAAmB,EAAE3V,aAAa,CAAC;MACpE,IAAI4V,mBAAmB,GAAI,YAAY;QACnC,IAAI1R,SAAS,CAACxxB,MAAM,GAAGyxB,SAAS,CAACzxB,MAAM,GAAG,IAAI,EAAE;UAC5C,OAAOU,KAAK,CAACgiC,yBAAyB,CAAC36B,OAAO,CAACypB,SAAS,EAAEC,SAAS,EAAE1B,OAAO,EAAE,UAAU7sB,OAAO,EAAEE,OAAO,EAAE;YAAE,OAAOiqB,aAAa,CAACnqB,OAAO,CAAC,KAAKoqB,aAAa,CAAClqB,OAAO,CAAC,GAAGkqB,aAAa,CAAClqB,OAAO,CAAC,CAACpD,MAAM,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,GAAGsD,IAAI,CAACqS,GAAG,CAAC,CAAC,GAAG2X,aAAa,CAAClqB,OAAO,CAAC,CAACpD,MAAM,CAAC,GAAG,IAAI;UAAE,CAAC,CAAC;QACjR;QACA,OAAOU,KAAK,CAACw7B,qBAAqB,CAACn0B,OAAO,CAACypB,SAAS,EAAEC,SAAS,EAAE1B,OAAO,CAAC;MAC7E,CAAC,CAAE,CAAC;MACJ,IAAIoT,cAAc,GAAGD,mBAAmB,CAAC5U,KAAK;MAC9C,IAAI1C,UAAU,GAAGsX,mBAAmB,CAACtX,UAAU;MAC/CuX,cAAc,GAAGjG,qBAAqB,CAAC1L,SAAS,EAAEC,SAAS,EAAE0R,cAAc,CAAC;MAC5EA,cAAc,GAAGjD,wCAAwC,CAAC1O,SAAS,EAAEC,SAAS,EAAE0R,cAAc,CAAC;MAC/F,IAAI/V,UAAU,GAAG,EAAE;MACnB,IAAIgW,wBAAwB,GAAG,SAAAA,CAAUC,eAAe,EAAE;QACtD,IAAIC,IAAI,EAAElhC,EAAE;QACZ,IAAI,CAACkyB,yBAAyB,EAAE;UAC5B;QACJ;QACA,KAAK,IAAIv0B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsjC,eAAe,EAAEtjC,CAAC,EAAE,EAAE;UACtC,IAAIq+B,UAAU,GAAGmF,aAAa,GAAGxjC,CAAC;UAClC,IAAIyjC,UAAU,GAAGC,aAAa,GAAG1jC,CAAC;UAClC,IAAIstB,aAAa,CAAC+Q,UAAU,CAAC,KAAK9Q,aAAa,CAACkW,UAAU,CAAC,EAAE;YACzD,IAAIE,cAAc,GAAGhjC,KAAK,CAACijC,UAAU,CAACtW,aAAa,EAAEC,aAAa,EAAE,IAAIoB,YAAY,CAAC,IAAIvJ,WAAW,CAACiZ,UAAU,EAAEA,UAAU,GAAG,CAAC,CAAC,EAAE,IAAIjZ,WAAW,CAACqe,UAAU,EAAEA,UAAU,GAAG,CAAC,CAAC,CAAC,EAAEzT,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,CAAC;YAC5N,IAAI;cACA,KAAK,IAAI0b,EAAE,IAAI0f,IAAI,GAAG,KAAK,CAAC,EAAE7jC,QAAQ,CAACikC,cAAc,CAACE,QAAQ,CAAC,CAAC,EAAEpa,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE,CAACupB,EAAE,CAACrpB,IAAI,EAAEqpB,EAAE,GAAG5F,EAAE,CAAC3jB,IAAI,CAAC,CAAC,EAAE;gBACxG,IAAIqC,CAAC,GAAGknB,EAAE,CAACtpB,KAAK;gBAChBktB,UAAU,CAAChsB,IAAI,CAACkB,CAAC,CAAC;cACtB;YACJ,CAAC,CACD,OAAOuhC,MAAM,EAAE;cAAEP,IAAI,GAAG;gBAAE3+B,KAAK,EAAEk/B;cAAO,CAAC;YAAE,CAAC,SACpC;cACJ,IAAI;gBACA,IAAIra,EAAE,IAAI,CAACA,EAAE,CAACrpB,IAAI,KAAKiC,EAAE,GAAGwhB,EAAE,CAAChf,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACykB,EAAE,CAAC;cACvD,CAAC,SACO;gBAAE,IAAI0f,IAAI,EAAE,MAAMA,IAAI,CAAC3+B,KAAK;cAAE;YAC1C;YACA,IAAI++B,cAAc,CAAC9X,UAAU,EAAE;cAC3BA,UAAU,GAAG,IAAI;YACrB;UACJ;QACJ;MACJ,CAAC;MACD,IAAI2X,aAAa,GAAG,CAAC;MACrB,IAAIE,aAAa,GAAG,CAAC;MACrB,IAAIK,OAAO,GAAG,SAAAA,CAAUruB,IAAI,EAAE;QAC1B,IAAIsuB,IAAI,EAAEngB,EAAE;QACZoB,QAAQ,CAAC,YAAY;UAAE,OAAOvP,IAAI,CAACmZ,SAAS,CAACloB,KAAK,GAAG68B,aAAa,KAAK9tB,IAAI,CAACoZ,SAAS,CAACnoB,KAAK,GAAG+8B,aAAa;QAAE,CAAC,CAAC;QAC/G,IAAIJ,eAAe,GAAG5tB,IAAI,CAACmZ,SAAS,CAACloB,KAAK,GAAG68B,aAAa;QAC1DH,wBAAwB,CAACC,eAAe,CAAC;QACzCE,aAAa,GAAG9tB,IAAI,CAACmZ,SAAS,CAACxJ,YAAY;QAC3Cqe,aAAa,GAAGhuB,IAAI,CAACoZ,SAAS,CAACzJ,YAAY;QAC3C,IAAIse,cAAc,GAAGM,MAAM,CAACL,UAAU,CAACtW,aAAa,EAAEC,aAAa,EAAE7X,IAAI,EAAEsa,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,CAAC;QACvH,IAAIw7B,cAAc,CAAC9X,UAAU,EAAE;UAC3BA,UAAU,GAAG,IAAI;QACrB;QACA,IAAI;UACA,KAAK,IAAIpC,EAAE,IAAIua,IAAI,GAAG,KAAK,CAAC,EAAEtkC,QAAQ,CAACikC,cAAc,CAACE,QAAQ,CAAC,CAAC,EAAE7K,EAAE,GAAGvP,EAAE,CAACvpB,IAAI,CAAC,CAAC,EAAE,CAAC84B,EAAE,CAAC54B,IAAI,EAAE44B,EAAE,GAAGvP,EAAE,CAACvpB,IAAI,CAAC,CAAC,EAAE;YACxG,IAAIqC,CAAC,GAAGy2B,EAAE,CAAC74B,KAAK;YAChBktB,UAAU,CAAChsB,IAAI,CAACkB,CAAC,CAAC;UACtB;QACJ,CAAC,CACD,OAAO2hC,MAAM,EAAE;UAAEF,IAAI,GAAG;YAAEp/B,KAAK,EAAEs/B;UAAO,CAAC;QAAE,CAAC,SACpC;UACJ,IAAI;YACA,IAAIlL,EAAE,IAAI,CAACA,EAAE,CAAC54B,IAAI,KAAKyjB,EAAE,GAAG4F,EAAE,CAAC5kB,MAAM,CAAC,EAAEgf,EAAE,CAACzkB,IAAI,CAACqqB,EAAE,CAAC;UACvD,CAAC,SACO;YAAE,IAAIua,IAAI,EAAE,MAAMA,IAAI,CAACp/B,KAAK;UAAE;QAC1C;MACJ,CAAC;MACD,IAAIq/B,MAAM,GAAG,IAAI;MACjB,IAAI;QACA,KAAK,IAAIE,gBAAgB,GAAGzkC,QAAQ,CAAC0jC,cAAc,CAAC,EAAEgB,kBAAkB,GAAGD,gBAAgB,CAACjkC,IAAI,CAAC,CAAC,EAAE,CAACkkC,kBAAkB,CAAChkC,IAAI,EAAEgkC,kBAAkB,GAAGD,gBAAgB,CAACjkC,IAAI,CAAC,CAAC,EAAE;UACxK,IAAIwV,IAAI,GAAG0uB,kBAAkB,CAACjkC,KAAK;UACnC4jC,OAAO,CAACruB,IAAI,CAAC;QACjB;MACJ,CAAC,CACD,OAAO2uB,MAAM,EAAE;QAAExB,IAAI,GAAG;UAAEj+B,KAAK,EAAEy/B;QAAO,CAAC;MAAE,CAAC,SACpC;QACJ,IAAI;UACA,IAAID,kBAAkB,IAAI,CAACA,kBAAkB,CAAChkC,IAAI,KAAKiC,EAAE,GAAG8hC,gBAAgB,CAACt/B,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAAC+kC,gBAAgB,CAAC;QACnH,CAAC,SACO;UAAE,IAAItB,IAAI,EAAE,MAAMA,IAAI,CAACj+B,KAAK;QAAE;MAC1C;MACAy+B,wBAAwB,CAAC/V,aAAa,CAACrtB,MAAM,GAAGujC,aAAa,CAAC;MAC9D,IAAI18B,OAAO,GAAGsmB,iCAAiC,CAACC,UAAU,EAAE,IAAI3B,SAAS,CAAC4B,aAAa,CAAC,EAAE,IAAI5B,SAAS,CAAC6B,aAAa,CAAC,CAAC;MACvH,IAAI3B,KAAK,GAAG,EAAE;MACd,IAAIzjB,OAAO,CAACm8B,YAAY,EAAE;QACtB1Y,KAAK,GAAG,IAAI,CAAC0Y,YAAY,CAACx9B,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAE0V,mBAAmB,EAAEC,mBAAmB,EAAElT,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,CAAC;MAC3J;MACA8c,QAAQ,CAAC,YAAY;QACjB,IAAIsf,IAAI,EAAEliC,EAAE,EAAEmiC,IAAI,EAAE3gB,EAAE;QACtB,SAAS4gB,gBAAgBA,CAAC5zB,GAAG,EAAEmO,KAAK,EAAE;UAClC,IAAInO,GAAG,CAACwI,UAAU,GAAG,CAAC,IAAIxI,GAAG,CAACwI,UAAU,GAAG2F,KAAK,CAAC/e,MAAM,EAAE;YACrD,OAAO,KAAK;UAChB;UACA,IAAIqT,IAAI,GAAG0L,KAAK,CAACnO,GAAG,CAACwI,UAAU,GAAG,CAAC,CAAC;UACpC,IAAIxI,GAAG,CAAC6D,MAAM,GAAG,CAAC,IAAI7D,GAAG,CAAC6D,MAAM,GAAGpB,IAAI,CAACrT,MAAM,GAAG,CAAC,EAAE;YAChD,OAAO,KAAK;UAChB;UACA,OAAO,IAAI;QACf;QACA,SAASykC,aAAaA,CAAC1yB,KAAK,EAAEgN,KAAK,EAAE;UACjC,IAAIhN,KAAK,CAACqV,eAAe,GAAG,CAAC,IAAIrV,KAAK,CAACqV,eAAe,GAAGrI,KAAK,CAAC/e,MAAM,GAAG,CAAC,EAAE;YACvE,OAAO,KAAK;UAChB;UACA,IAAI+R,KAAK,CAAC4X,sBAAsB,GAAG,CAAC,IAAI5X,KAAK,CAAC4X,sBAAsB,GAAG5K,KAAK,CAAC/e,MAAM,GAAG,CAAC,EAAE;YACrF,OAAO,KAAK;UAChB;UACA,OAAO,IAAI;QACf;QACA,IAAI;UACA,KAAK,IAAI0kC,SAAS,GAAGjlC,QAAQ,CAACoH,OAAO,CAAC,EAAE89B,WAAW,GAAGD,SAAS,CAACzkC,IAAI,CAAC,CAAC,EAAE,CAAC0kC,WAAW,CAACxkC,IAAI,EAAEwkC,WAAW,GAAGD,SAAS,CAACzkC,IAAI,CAAC,CAAC,EAAE;YACvH,IAAI8sB,CAAC,GAAG4X,WAAW,CAACzkC,KAAK;YACzB,IAAI,CAAC6sB,CAAC,CAACJ,YAAY,EAAE;cACjB,OAAO,KAAK;YAChB;YACA,IAAI;cACA,KAAK,IAAInD,EAAE,IAAI+a,IAAI,GAAG,KAAK,CAAC,EAAE9kC,QAAQ,CAACstB,CAAC,CAACJ,YAAY,CAAC,CAAC,EAAEoM,EAAE,GAAGvP,EAAE,CAACvpB,IAAI,CAAC,CAAC,EAAE,CAAC84B,EAAE,CAAC54B,IAAI,EAAE44B,EAAE,GAAGvP,EAAE,CAACvpB,IAAI,CAAC,CAAC,EAAE;gBAC/F,IAAI2kC,EAAE,GAAG7L,EAAE,CAAC74B,KAAK;gBACjB,IAAI+vB,KAAK,GAAGuU,gBAAgB,CAACI,EAAE,CAAC/sB,aAAa,CAACwQ,gBAAgB,CAAC,CAAC,EAAEiF,aAAa,CAAC,IAAIkX,gBAAgB,CAACI,EAAE,CAAC/sB,aAAa,CAACuQ,cAAc,CAAC,CAAC,EAAEkF,aAAa,CAAC,IAAIkX,gBAAgB,CAACI,EAAE,CAAChtB,aAAa,CAACyQ,gBAAgB,CAAC,CAAC,EAAEgF,aAAa,CAAC,IAAImX,gBAAgB,CAACI,EAAE,CAAChtB,aAAa,CAACwQ,cAAc,CAAC,CAAC,EAAEiF,aAAa,CAAC;gBACpS,IAAI,CAAC4C,KAAK,EAAE;kBACR,OAAO,KAAK;gBAChB;cACJ;YACJ,CAAC,CACD,OAAO4U,MAAM,EAAE;cAAEN,IAAI,GAAG;gBAAE5/B,KAAK,EAAEkgC;cAAO,CAAC;YAAE,CAAC,SACpC;cACJ,IAAI;gBACA,IAAI9L,EAAE,IAAI,CAACA,EAAE,CAAC54B,IAAI,KAAKyjB,EAAE,GAAG4F,EAAE,CAAC5kB,MAAM,CAAC,EAAEgf,EAAE,CAACzkB,IAAI,CAACqqB,EAAE,CAAC;cACvD,CAAC,SACO;gBAAE,IAAI+a,IAAI,EAAE,MAAMA,IAAI,CAAC5/B,KAAK;cAAE;YAC1C;YACA,IAAI,CAAC8/B,aAAa,CAAC1X,CAAC,CAACd,QAAQ,EAAEqB,aAAa,CAAC,IAAI,CAACmX,aAAa,CAAC1X,CAAC,CAACf,QAAQ,EAAEqB,aAAa,CAAC,EAAE;cACxF,OAAO,KAAK;YAChB;UACJ;QACJ,CAAC,CACD,OAAOyX,MAAM,EAAE;UAAER,IAAI,GAAG;YAAE3/B,KAAK,EAAEmgC;UAAO,CAAC;QAAE,CAAC,SACpC;UACJ,IAAI;YACA,IAAIH,WAAW,IAAI,CAACA,WAAW,CAACxkC,IAAI,KAAKiC,EAAE,GAAGsiC,SAAS,CAAC9/B,MAAM,CAAC,EAAExC,EAAE,CAACjD,IAAI,CAACulC,SAAS,CAAC;UACvF,CAAC,SACO;YAAE,IAAIJ,IAAI,EAAE,MAAMA,IAAI,CAAC3/B,KAAK;UAAE;QAC1C;QACA,OAAO,IAAI;MACf,CAAC,CAAC;MACF,OAAO,IAAI+mB,SAAS,CAAC7kB,OAAO,EAAE8kB,KAAK,EAAEC,UAAU,CAAC;IACpD,CAAC;IACD6W,wBAAwB,CAACxjC,SAAS,CAAColC,YAAY,GAAG,UAAUx9B,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAEoJ,mBAAmB,EAAEC,mBAAmB,EAAE5G,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,EAAE;MACtL,IAAIxH,KAAK,GAAG,IAAI;MAChB,IAAIirB,KAAK,GAAG8K,iBAAiB,CAAC5vB,OAAO,EAAEwmB,aAAa,EAAEC,aAAa,EAAEoJ,mBAAmB,EAAEC,mBAAmB,EAAE5G,OAAO,CAAC;MACvH,IAAIgV,cAAc,GAAGpZ,KAAK,CAAC7T,GAAG,CAAC,UAAUhY,CAAC,EAAE;QACxC,IAAIklC,WAAW,GAAGtkC,KAAK,CAACijC,UAAU,CAACtW,aAAa,EAAEC,aAAa,EAAE,IAAIoB,YAAY,CAAC5uB,CAAC,CAACksB,QAAQ,CAAC/B,aAAa,CAAC,CAAC,EAAEnqB,CAAC,CAACmsB,QAAQ,CAAChC,aAAa,CAAC,CAAC,CAAC,EAAE8F,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,CAAC;QACvL,IAAI07B,QAAQ,GAAGzW,iCAAiC,CAAC6X,WAAW,CAACpB,QAAQ,EAAE,IAAInY,SAAS,CAAC4B,aAAa,CAAC,EAAE,IAAI5B,SAAS,CAAC6B,aAAa,CAAC,EAAE,IAAI,CAAC;QACxI,OAAO,IAAIzB,SAAS,CAAC/rB,CAAC,EAAE8jC,QAAQ,CAAC;MACrC,CAAC,CAAC;MACF,OAAOmB,cAAc;IACzB,CAAC;IACDtC,wBAAwB,CAACxjC,SAAS,CAAC0kC,UAAU,GAAG,UAAUtW,aAAa,EAAEC,aAAa,EAAE7X,IAAI,EAAEsa,OAAO,EAAEuE,yBAAyB,EAAEpsB,OAAO,EAAE;MACvI,IAAI4jB,gBAAgB,GAAGmZ,kBAAkB,CAACxvB,IAAI,CAAC;MAC/C,IAAIuY,YAAY,GAAGlC,gBAAgB,CAACQ,eAAe,CAACe,aAAa,EAAEC,aAAa,CAAC;MACjF,IAAI4X,MAAM,GAAG,IAAI7Q,sBAAsB,CAAChH,aAAa,EAAEW,YAAY,CAACpW,aAAa,EAAE0c,yBAAyB,CAAC;MAC7G,IAAI6Q,MAAM,GAAG,IAAI9Q,sBAAsB,CAAC/G,aAAa,EAAEU,YAAY,CAACnW,aAAa,EAAEyc,yBAAyB,CAAC;MAC7G,IAAI8Q,UAAU,GAAGF,MAAM,CAACllC,MAAM,GAAGmlC,MAAM,CAACnlC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC0iC,yBAAyB,CAAC36B,OAAO,CAACm9B,MAAM,EAAEC,MAAM,EAAEpV,OAAO,CAAC,GAAG,IAAI,CAACmM,qBAAqB,CAACn0B,OAAO,CAACm9B,MAAM,EAAEC,MAAM,EAAEpV,OAAO,CAAC;MACpL,IAAIzB,KAAK,GAAG8W,UAAU,CAAC9W,KAAK;MAC5BA,KAAK,GAAG4O,qBAAqB,CAACgI,MAAM,EAAEC,MAAM,EAAE7W,KAAK,CAAC;MACpDA,KAAK,GAAGqQ,oCAAoC,CAACuG,MAAM,EAAEC,MAAM,EAAE7W,KAAK,EAAE,UAAUiO,GAAG,EAAE5T,GAAG,EAAE;QAAE,OAAO4T,GAAG,CAACvG,kBAAkB,CAACrN,GAAG,CAAC;MAAE,CAAC,CAAC;MAChI,IAAIzgB,OAAO,CAACm9B,gBAAgB,EAAE;QAC1B/W,KAAK,GAAGqQ,oCAAoC,CAACuG,MAAM,EAAEC,MAAM,EAAE7W,KAAK,EAAE,UAAUiO,GAAG,EAAE5T,GAAG,EAAE;UAAE,OAAO4T,GAAG,CAACrG,qBAAqB,CAACvN,GAAG,CAAC;QAAE,CAAC,EAAE,IAAI,CAAC;MAC7I;MACA2F,KAAK,GAAGgQ,kBAAkB,CAAC4G,MAAM,EAAEC,MAAM,EAAE7W,KAAK,CAAC;MACjDA,KAAK,GAAGyS,2CAA2C,CAACmE,MAAM,EAAEC,MAAM,EAAE7W,KAAK,CAAC;MAC1E,IAAIra,MAAM,GAAGqa,KAAK,CAACxW,GAAG,CAAC,UAAUpZ,CAAC,EAAE;QAAE,OAAO,IAAI2tB,YAAY,CAAC6Y,MAAM,CAACrP,cAAc,CAACn3B,CAAC,CAACkwB,SAAS,CAAC,EAAEuW,MAAM,CAACtP,cAAc,CAACn3B,CAAC,CAACmwB,SAAS,CAAC,CAAC;MAAE,CAAC,CAAC;MACzI,OAAO;QACH+U,QAAQ,EAAE3vB,MAAM;QAChB2X,UAAU,EAAEwZ,UAAU,CAACxZ;MAC3B,CAAC;IACL,CAAC;IACD,OAAO6W,wBAAwB;EACnC,CAAC,CAAC,CAAE;EACJ,SAASwC,kBAAkBA,CAACK,YAAY,EAAE;IACtC,OAAO,IAAIvZ,gBAAgB,CAAC,IAAIrC,SAAS,CAAC4b,YAAY,CAAC1W,SAAS,CAACloB,KAAK,GAAG,CAAC,EAAE4+B,YAAY,CAAC1W,SAAS,CAACxJ,YAAY,GAAG,CAAC,CAAC,EAAE,IAAIsE,SAAS,CAAC4b,YAAY,CAACzW,SAAS,CAACnoB,KAAK,GAAG,CAAC,EAAE4+B,YAAY,CAACzW,SAAS,CAACzJ,YAAY,GAAG,CAAC,CAAC,CAAC;EACnN;EACA,SAASud,WAAWA,CAACtV,aAAa,EAAEC,aAAa,EAAEplB,OAAO,EAAE;IACxD,IAAIq9B,YAAY,GAAG,IAAI9C,wBAAwB,CAAC,CAAC;IACjD,IAAIxuB,MAAM,GAAGsxB,YAAY,CAAC5C,WAAW,CAACtV,aAAa,EAAEC,aAAa,EAAEplB,OAAO,CAAC;IAC5E,OAAO+L,MAAM,KAAK,IAAI,IAAIA,MAAM,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,MAAM,CAACpN,OAAO,CAACiR,GAAG,CAAC,UAAUjR,OAAO,EAAE;MACzF,IAAIkR,uBAAuB;MAC3B,IAAIE,qBAAqB;MACzB,IAAIE,uBAAuB;MAC3B,IAAIE,qBAAqB;MACzB,IAAIsU,YAAY,GAAG9lB,OAAO,CAAC8lB,YAAY;MACvC5U,uBAAuB,GAAGlR,OAAO,CAACmlB,QAAQ,CAAC5E,eAAe,GAAG,CAAC;MAC9DnP,qBAAqB,GAAGpR,OAAO,CAACmlB,QAAQ,CAACrC,sBAAsB,GAAG,CAAC;MACnExR,uBAAuB,GAAGtR,OAAO,CAAColB,QAAQ,CAAC7E,eAAe,GAAG,CAAC;MAC9D/O,qBAAqB,GAAGxR,OAAO,CAAColB,QAAQ,CAACtC,sBAAsB,GAAG,CAAC;MACnE,OAAO;QACH6b,SAAS,EAAEztB,uBAAuB;QAClC0tB,OAAO,EAAExtB,qBAAqB;QAC9BytB,SAAS,EAAEvtB,uBAAuB;QAClCwtB,OAAO,EAAEttB,qBAAqB;QAC9BjE,WAAW,EAAEuY,YAAY,KAAK,IAAI,IAAIA,YAAY,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,YAAY,CAAC7U,GAAG,CAAC,UAAUhY,CAAC,EAAE;UAAE,OAAQ;YAC7GiY,uBAAuB,EAAEjY,CAAC,CAAC8X,aAAa,CAACwP,eAAe,GAAG,CAAC;YAC5DpP,mBAAmB,EAAElY,CAAC,CAAC8X,aAAa,CAACyB,WAAW,GAAG,CAAC;YACpDpB,qBAAqB,EAAEnY,CAAC,CAAC8X,aAAa,CAACyP,aAAa,GAAG,CAAC;YACxDnP,iBAAiB,EAAEpY,CAAC,CAAC8X,aAAa,CAAC0B,SAAS,GAAG,CAAC;YAChDnB,uBAAuB,EAAErY,CAAC,CAAC+X,aAAa,CAACuP,eAAe,GAAG,CAAC;YAC5DhP,mBAAmB,EAAEtY,CAAC,CAAC+X,aAAa,CAACwB,WAAW,GAAG,CAAC;YACpDhB,qBAAqB,EAAEvY,CAAC,CAAC+X,aAAa,CAACwP,aAAa,GAAG,CAAC;YACxD/O,iBAAiB,EAAExY,CAAC,CAAC+X,aAAa,CAACyB,SAAS,GAAG;UACnD,CAAC;QAAG,CAAC;MACT,CAAC;IACL,CAAC,CAAC;EACN;EACAhb,OAAO,CAACqkC,WAAW,GAAGA,WAAW;EACjC,IAAIiD,QAAQ,GAAGvnC,OAAO,CAAC,gBAAgB,CAAC,CAACiJ,KAAK;EAC9C,IAAIqQ,SAAS,GAAGtZ,OAAO,CAAC,mBAAmB,CAAC,CAACsZ,SAAS;EACtD,IAAIkuB,YAAY,GAAG,aAAe,YAAY;IAC1C,SAASA,YAAYA,CAAA,EAAG,CACxB;IACAA,YAAY,CAAC5mC,SAAS,CAAC8I,OAAO,GAAG,UAAUslB,aAAa,EAAEC,aAAa,EAAEwY,IAAI,EAAE;MAC3E,IAAI,CAACA,IAAI,EACLA,IAAI,GAAG,CAAC,CAAC;MACb,IAAI,CAACA,IAAI,CAACn2B,oBAAoB,EAC1Bm2B,IAAI,CAACn2B,oBAAoB,GAAG,GAAG;MACnC,IAAIpK,MAAM,GAAGo9B,WAAW,CAACtV,aAAa,EAAEC,aAAa,EAAEwY,IAAI,CAAC,IAAI,EAAE;MAClE,OAAOvgC,MAAM,CAACuS,GAAG,CAAC,UAAUiV,CAAC,EAAE;QAAE,OAAO,IAAIpV,SAAS,CAAC,IAAIiuB,QAAQ,CAAC7Y,CAAC,CAACyY,SAAS,EAAE,CAAC,EAAEzY,CAAC,CAAC0Y,OAAO,EAAE,CAAC,CAAC,EAAE,IAAIG,QAAQ,CAAC7Y,CAAC,CAAC2Y,SAAS,EAAE,CAAC,EAAE3Y,CAAC,CAAC4Y,OAAO,EAAE,CAAC,CAAC,EAAE5Y,CAAC,CAAC3Y,WAAW,CAAC;MAAE,CAAC,CAAC;IACpK,CAAC;IACD,OAAOyxB,YAAY;EACvB,CAAC,CAAC,CAAE;EACJvnC,OAAO,CAACunC,YAAY,GAAGA,YAAY;AAEnC,CAAC,CAAC;AAEF1nC,GAAG,CAACC,MAAM,CAAC,cAAc,EAAC,CAAC,SAAS,EAAC,SAAS,EAAC,QAAQ,EAAC,+BAA+B,EAAC,8BAA8B,EAAC,gCAAgC,CAAC,EAAE,UAASC,OAAO,EAAEC,OAAO,EAAEC,MAAM,EAAC;EAAC;AAC7L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACA,IAAI0b,cAAc,GAAG5b,OAAO,CAAC,yBAAyB,CAAC,CAAC4b,cAAc;EACtE,IAAI+F,aAAa,GAAG3hB,OAAO,CAAC,wBAAwB,CAAC,CAAC2hB,aAAa;EACnE,IAAI6lB,YAAY,GAAGxnC,OAAO,CAAC,0BAA0B,CAAC,CAACwnC,YAAY;EACnE,SAASE,cAAcA,CAACr8B,SAAS,EAAExB,OAAO,EAAE;IACxCwB,SAAS,GAAGA,SAAS,IAAI,CAAC,CAAC;IAC3BA,SAAS,CAACX,YAAY,GAAGW,SAAS,CAACX,YAAY,IAAI,IAAI88B,YAAY,CAAC,CAAC,CAAC,CAAC;IACvE,IAAIttB,QAAQ;IACZ,IAAI7O,SAAS,CAACG,MAAM,EAAE;MAClB0O,QAAQ,GAAG,IAAI0B,cAAc,CAACvQ,SAAS,CAAC;IAC5C,CAAC,MACI;MACD6O,QAAQ,GAAG,IAAIyH,aAAa,CAACtW,SAAS,CAAC;IAC3C;IACA,IAAIxB,OAAO,EAAE;MACTqQ,QAAQ,CAACtN,UAAU,CAAC/C,OAAO,CAAC;IAChC;IACA,OAAOqQ,QAAQ;EACnB;EACAja,OAAO,CAAC2b,cAAc,GAAGA,cAAc;EACvC3b,OAAO,CAAC0hB,aAAa,GAAGA,aAAa;EACrC1hB,OAAO,CAACunC,YAAY,GAAGA,YAAY;EACnCvnC,OAAO,CAACynC,cAAc,GAAGA,cAAc;AAEvC,CAAC,CAAC;AAAiB,CAAC,YAAW;EACX5nC,GAAG,CAACE,OAAO,CAAC,CAAC,cAAc,CAAC,EAAE,UAASyB,CAAC,EAAE;IACtC,IAAI,OAAOvB,MAAM,IAAI,QAAQ,IAAI,OAAOD,OAAO,IAAI,QAAQ,IAAIC,MAAM,EAAE;MACnEA,MAAM,CAACD,OAAO,GAAGwB,CAAC;IACtB;EACJ,CAAC,CAAC;AACN,CAAC,EAAE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script"}